'use strict';(function(l){var m=window.AmazonUIPageJS||window.P,q=m._namespace||m.attributeErrors,p=q?q("DramAssets",""):m;p.guardFatal?p.guardFatal(l)(p,window):p.execute(function(){l(p,window)})})(function(l,m,q){l.when("jQuery","A").execute("dram-lazy-load",function(p,e){var h=m.ue&&m.ue.count||function(){},g=function(a){h(a,(h(a)||0)+1)},k=function(a,d){if(!a.hasAttribute("lazy-load-status")){d=null==d?"None":d;a.setAttribute("lazy-load-status","initiated");a.querySelector(".lazy-load-spinner").classList.add("lazy-load-spinner-animation");
var b=a.querySelector(".json-content").innerText.trim(),f=a.getAttribute("data-region-info"),n=a.getAttribute("path-region-weblab"),r="/dram/renderLazyLoaded";-1!==["eu-south-2","eu-central-1","ap-south-2"].indexOf(f)&&"true"===n&&(r="/dram/"+f+"/renderLazyLoaded");e.post(r,{params:b,headers:{},accepts:"application/json",contentType:"application/json",paramsFormat:"json",success:function(b){var c="";b&&b.cards&&0<b.cards.length&&b.cards[0].content&&(c=b.cards[0].content);p(a.querySelector(".widget-html-container")).html(c);
e.trigger("a:pageUpdate");e.loadDynamicImage(a.querySelectorAll(".widget-html-container img.a-dynamic-image"));a.setAttribute("lazy-load-status","loaded");g("dram:lazy-loader:"+d+":success")},error:function(b){p(a.querySelector(".widget-html-container")).html("");a.setAttribute("lazy-load-status","failed");0===b.readyState?(g("dram:lazy-loader:"+d+":warn"),l.log("Warning while processing lazy loading due to "+b.responseText,"WARN","LazyLoading")):(g("dram:lazy-loader:"+d+":error"),l.log("Error while processing lazy loading due to "+
b.responseText,"ERROR","LazyLoading"))}})}},a=function(a,d,c){e.onScreen(a,d)&&k(a,c)};e.on("dram:register-lazy-load-widget",function(b,d,c,f){var n=document.querySelector(b);e.on(e.constants.BROWSER_EVENTS.SCROLL,function(){a(n,d,c)});e.on(e.constants.BROWSER_EVENTS.RESIZE,function(){a(n,d,c)});e.on(e.constants.BROWSER_EVENTS.ORIENTATION_CHANGE,function(){a(n,d,c)});f&&a(n,d,c)});l.now("dram-lazy-load-widget").execute("dram-initalize-lazy-load",function(a){a===q&&l.declare("dram-lazy-load-widget",
{lazyLoadInitiated:!0})})});l.now("dram-partial-lazy-load-guard").execute(function(p){p||(l.declare("dram-partial-lazy-load-guard",!0),l.when("A","dram-partial-lazy-load-nested-painter").register("dram-partial-lazy-load",function(e,h){var g={},k=function(d,c,f,n){if(d&&c&&f){var r=c.extractEncryptedLazyLoadRequest();c.setRemainingLazyLoadedPainters(r.length);if(0<r.length){c.addExpectedLazyLoadedPainters(r.length);c.setAriaBusy(!0);if(!n){var h=c.getProgressIndicatorContainerElement();c.injectDecoratedIndicator(h)}c.setIsCurrentlyLazyLoading(!0);
var g=f.recordLazyLoadStart(),k=0;e.post("/dram/renderLazyLoadedStreaming",{params:r,contentType:"application/json",paramsFormat:"json",success:function(b,n,e){f.recordLazyLoadStop(g,!0,k);a(d,c,f)},error:function(b,n,e){f.recordLazyLoadStop(g,!1);f.recordLazyLoadErrorWithDefaultScope(g,`Dram renderLazyLoadedStreaming error - Status: ${b?b.status:"Unknown"}, TextStatus: ${n||"Unknown"}, ErrorThrown: ${e||"Unknown"}, ResponseBody: ${b&&b.responseText&&0<b.responseText.length?"Present":"Empty"}`);a(d,
c,f)},chunk:function(a){(a=a[1])&&a.cards&&e.each(a.cards,function(a){var b=document.createElement("div");b.innerHTML=a.content;if(a=b.firstElementChild){if(c&&a){b=(b=c.getNestedPainterSlotLazyLoadConfig())&&!b.disableCelTagging;c.decorateResponse(a);b&&c.updateCelTags(a);if(b=c.getNewItemTemplateElement())b.appendChild(a),a=b;c.setAriaAttributes(a);c.appendToContentContainer(a);c.executeScripts(a)}c.incrementTotalLazyLoadedPainters();k+=1;c.isMinChildLoadCountSatisfied()&&(n&&!c.getHasSignaledMinChildLoadCountSuccess()?
(f.recordMinChildLoadCountSuccess(!0),d.showPainterContentContainer(),f.recordPainterProgressIndicatorHidden(),c.signalMinChildLoadCountSuccess()):c.signalLazyLoadSuccess())}})},timeout:3E3})}else b(d,c,f)}},a=function(a,c,f){var d=c.isMinChildLoadCountSatisfied();c.setIsCurrentlyLazyLoading(!1);c.shouldLazyLoadAdditionalChildPainters()?k(a,c,f,!d):b(a,c,f)},b=function(a,b,f){var d=b.getRemainingLazyLoadedPainters(),c=b.getExpectedLazyLoadedPainters(),e=b.getTotalLazyLoadedPainters(),h=b.isMinChildLoadCountSatisfied();
d=0===d;var k=c!==e;d&&!h?(f.recordMinChildLoadCountSuccess(!1),a.punt(),f.recordPainterProgressIndicatorHidden(),delete g[a.getOuterDivSelector()]):(b.removeInjectedProgressIndicator(),d&&k&&(b.recomputeAriaSetSize(),f=b.getErrorIndicatorContainerElement(),b.injectDecoratedIndicator(f)),0<c&&b.setAriaBusy(!1),b.setRecordedLazyLoadedPainters(e),d&&(a.clean(),delete g[a.getOuterDivSelector()]))};e.on("dram:register-container-widget-slot",function(a,b,f){g[a]||(g[a]=h.create(a));var d=g[a];d.getNestedPainterSlot(b)||
d.addNestedPainterSlot(b,f);var c=d.getNestedPainterSlot(b),l=c.getMetrics();c.isMinChildLoadCountSatisfied()||k(d,c,l,!0);a=c.getContentContainerElement();if(a=c.getScrollableElement(a))b=e.throttle(function(){c.shouldLazyLoadAdditionalChildPainters()&&k(d,c,l,!1)},50,{leading:!1,trailing:!0}),a.addEventListener("scroll",b),c.setListenerHandler("scroll",b);a=function(){c.shouldLazyLoadAdditionalChildPainters()&&k(d,c,l,!1)};e.on(e.constants.BROWSER_EVENTS.RESIZE,a);e.on(e.constants.BROWSER_EVENTS.ORIENTATION_CHANGE,
a);c.setListenerHandler("default",a);a()});l.now("dram-container-widget").execute("dram-initialize-partial-lazy-load",function(a){a===q&&l.declare("dram-container-widget",{lazyLoadInitiated:!0})})}),l.when("A","dram-partial-lazy-load-utils","dram-partial-lazy-load-nested-painter-slot").register("dram-partial-lazy-load-nested-painter",function(e,h,g){var k=e.createClass({_outerDivSelector:null,_nestedPainterSlots:null,_widgetSlotIndex:null,_nestedPainterElement:null,_nestedPainterDOMElements:null,
init:function(a){this._outerDivSelector=a;this._nestedPainterSlots={};this._nestedPainterElement=document.querySelector(a);this._widgetSlotIndex=this._nestedPainterElement.getAttribute("data-dram-widget-slot-index");this._nestedPainterDOMElements={painterProgressIndicator:{dramNodeRole:"PainterProgressIndicator",element:null},painterContentContainer:{dramNodeRole:"PainterContentContainer",element:null}};h.initializeDOMElements(this._nestedPainterDOMElements,this._nestedPainterElement)},addNestedPainterSlot:function(a,
b){var d=this._nestedPainterElement.querySelector(a);this._nestedPainterSlots[a]=g.create(this._nestedPainterElement,d,b,this._widgetSlotIndex)},getNestedPainterSlot:function(a){return this._nestedPainterSlots[a]},getOuterDivSelector:function(){return this._outerDivSelector},showPainterContentContainer:function(){var a=this._nestedPainterDOMElements.painterContentContainer.element,b=this._nestedPainterDOMElements.painterProgressIndicator.element;b&&b.setAttribute("style","display: none;");a&&a.removeAttribute("style")},
punt:function(){this._nestedPainterElement&&this._nestedPainterElement.remove();this.clean()},clean:function(){e.each(Object.keys(this._nestedPainterSlots),function(a){var b=this._nestedPainterSlots[a];a=b.getListenerHandlers();b=b.getScrollableElement();var d=a.scroll;b&&d&&b.removeEventListener("scroll",d);if(b=a.default)e.off(e.constants.BROWSER_EVENTS.RESIZE,b),e.off(e.constants.BROWSER_EVENTS.ORIENTATION_CHANGE,b)},this)}});return{create:function(a){return new k(a)}}}),l.when("A","dram-partial-lazy-load-utils",
"dram-partial-lazy-load-metrics").register("dram-partial-lazy-load-nested-painter-slot",function(e,h,g){var k=e.createClass({_metrics:null,_remainingLazyLoadedPainters:0,_nestedPainterSlotLazyLoadConfig:null,_totalLazyLoadedPainters:0,_recordedLazyLoadedPainters:0,_expectedLazyLoadedPainters:0,_nestedPainterElement:null,_nestedPainterSlotElement:null,_isCurrentlyLazyLoading:!1,_slotIndex:null,_widgetSlotIndex:null,_contentScrollReference:null,_scrollableElement:null,_nestedPainterSlotDOMElements:null,
_hasSignaledMinChildLoadCountSuccess:!1,_totalContentPx:0,_listenerHandlers:null,_cachedContainerContentChildren:null,_initialAriaSetSize:"",init:function(a,b,d,c){this._nestedPainterElement=a;this._nestedPainterSlotElement=b;this._nestedPainterSlotLazyLoadConfig=d;this._listenerHandlers={scroll:null,default:null};this._nestedPainterSlotDOMElements={itemTemplateContainer:{dramNodeRole:"ItemTemplate",element:null},progressIndicatorContainer:{dramNodeRole:"ProgressIndicator",element:null},errorIndicatorContainer:{dramNodeRole:"ErrorIndicator",
element:null},contentContainer:{dramNodeRole:"ContentContainer",element:null},lazyRequestsContainer:{dramNodeRole:"LazyRequestsContainer",element:null},injectedProgressIndicator:{dramNodeRole:"InjectedProgressIndicator",element:null,isActive:!1},injectedErrorIndicator:{dramNodeRole:"InjectedErrorIndicator",element:null,isActive:!1}};h.initializeDOMElements(this._nestedPainterSlotDOMElements,this._nestedPainterSlotElement);this._widgetSlotIndex=h.formatSlotIndex(c);this._slotIndex=b.getAttribute("data-dram-slot-index");
this._contentScrollReference=this._initializeContentScrollReference();this._cachedContainerContentChildren=[];this._scrollableElement=this.getScrollableElement(this.getContentContainerElement());this._remainingLazyLoadedPainters=this._nestedPainterSlotDOMElements.lazyRequestsContainer.element.childElementCount;this._initialAriaSetSize=this._initializeAriaSetSize();this._metrics=g.create(d.containerWidgetStrategyId,this._slotIndex);this._metrics.recordSlotRegistration(this.getEagerlyLoadedChildCount(),
this.isMinChildLoadCountSatisfied())},isMinChildLoadCountSatisfied:function(){var a=this._nestedPainterSlotLazyLoadConfig.minChildLoadCount||0;return this.getEagerlyLoadedChildCount()+this._totalLazyLoadedPainters>=a},shouldLazyLoadAdditionalChildPainters:function(){if(this._isCurrentlyLazyLoading||0===this._remainingLazyLoadedPainters)return!1;if("Horizontal"===this._nestedPainterSlotLazyLoadConfig.slotOrientation){var a=!this.isMinChildLoadCountSatisfied();if(this._isScrollDistanceWithinThreshold()||
a)return!0}return!1},updateCelTags:function(a){var b=this._nestedPainterSlotLazyLoadConfig.contentFormat,d=["cel_widget_id","data-csa-c-slot-id","data-cel-widget"],c=a.getAttribute(d[0]);if(c&&(c=c.split("-"),b="RlbContentSourceParams"===b?2:1,c[b]!==this._widgetSlotIndex)){c[b]=this._widgetSlotIndex;var f=c.join("-");e.each(d,function(b){a.setAttribute(b,f)})}},extractEncryptedLazyLoadRequest:function(){var a=this._nestedPainterSlotDOMElements.lazyRequestsContainer.element,b=Array.prototype.slice.call(a.children,
0,this._nestedPainterSlotLazyLoadConfig.lazyLoadBatchSize);return e.map(b,function(b){var c=JSON.parse(b.textContent);a.removeChild(b);return c})},recomputeAriaSetSize:function(){var a=this.getContentContainerChildren(),b=a.length.toString(),d=this.getInitialAriaSetSize();b!==d&&e.each(a,function(a){a.setAttribute("aria-setsize",b)})},signalLazyLoadSuccess:function(){var a=this.getContentContainerChildren().length;e.trigger("dram-widget-child-lazy-load-success",this._nestedPainterSlotElement,this._widgetSlotIndex,
this._slotIndex,a-1)},signalMinChildLoadCountSuccess:function(){e.trigger("dram-widget-minChildLoadCount-success",this._nestedPainterElement,this._widgetSlotIndex,this._slotIndex);this._hasSignaledMinChildLoadCountSuccess=!0},injectDecoratedIndicator:function(a){if(a&&a.firstElementChild){var b=a.firstElementChild;if(a=a.getAttribute(h.constants.DATA_DRAM_NODE_ROLE)){var d="Injected"+a;a=e.filter(Object.keys(this._nestedPainterSlotDOMElements),function(a){return this._nestedPainterSlotDOMElements[a].dramNodeRole===
d},this)[0];if(a=this._nestedPainterSlotDOMElements[a]){var c=a.element;if(!c)c=b.cloneNode(!0),c.setAttribute(h.constants.DATA_DRAM_NODE_ROLE,d);else if(a.isActive)return;if(b=this.getContentContainerElement())b.appendChild(c),a.element=c,a.isActive=!0}}}},decorateResponse:function(a){a&&a.setAttribute(h.constants.DATA_DRAM_NODE_ROLE,"InjectedChildPainter")},removeInjectedProgressIndicator:function(){var a=this._nestedPainterSlotDOMElements.injectedProgressIndicator;a.element&&(a.element.remove(),
a.isActive=!1)},appendToContentContainer:function(a){var b=this.getContentContainerElement();if(b&&a){var d=this._nestedPainterSlotDOMElements.injectedProgressIndicator.element;d&&d.parentElement?b.insertBefore(a,d):b.appendChild(a)}},setAriaAttributes(a){var b=this.getContentContainerChildren().length+1;a.setAttribute("aria-posinset",b);a.setAttribute("aria-setsize",this.getInitialAriaSetSize())},setIsCurrentlyLazyLoading:function(a){this._isCurrentlyLazyLoading=a},setRemainingLazyLoadedPainters:function(a){this._remainingLazyLoadedPainters=
a},addExpectedLazyLoadedPainters:function(a){this._expectedLazyLoadedPainters+=a},setAriaBusy:function(a){var b=this.getContentContainerElement();b&&b.getAttribute("aria-busy")!==a&&b.setAttribute("aria-busy",a)},setListenerHandler:function(a,b){a in this._listenerHandlers&&(this._listenerHandlers[a]=b)},setRecordedLazyLoadedPainters:function(a){this._recordedLazyLoadedPainters=a},incrementTotalLazyLoadedPainters:function(){this._totalLazyLoadedPainters+=1},getNewItemTemplateElement:function(){var a=
this._nestedPainterSlotDOMElements.itemTemplateContainer.element;return(a=a?a.firstElementChild:null)?a.cloneNode(!1):null},getContentContainerElement:function(){return this._nestedPainterSlotDOMElements.contentContainer.element},getScrollableElement:function(a){if(this._scrollableElement)return this._scrollableElement;if(!a||"PainterContentContainer"===a.getAttribute(h.constants.DATA_DRAM_NODE_ROLE))return null;var b=m.getComputedStyle(a).overflowX;return"scroll"===b||"auto"===b?a:a.parentElement?
this.getScrollableElement(a.parentElement):null},getListenerHandlers:function(){return this._listenerHandlers},getMetrics:function(){return this._metrics},getRemainingLazyLoadedPainters:function(){return this._remainingLazyLoadedPainters},getTotalLazyLoadedPainters:function(){return this._totalLazyLoadedPainters},getInitialAriaSetSize:function(){return this._initialAriaSetSize},getExpectedLazyLoadedPainters:function(){return this._expectedLazyLoadedPainters},getEagerlyLoadedChildCount:function(){return this._nestedPainterSlotLazyLoadConfig.eagerlyLoadedChildCount||
0},getProgressIndicatorContainerElement:function(){return this._nestedPainterSlotDOMElements.progressIndicatorContainer.element},getErrorIndicatorContainerElement:function(){return this._nestedPainterSlotDOMElements.errorIndicatorContainer.element},getHasSignaledMinChildLoadCountSuccess:function(){return this._hasSignaledMinChildLoadCountSuccess},getVisibleScreenWidth:function(){var a=this.getScrollableElement(),b=this._contentScrollReference;b&&(a=b);return a?Math.min(a.clientWidth,m.innerWidth):
0},getContentContainerChildren:function(){var a=this.getContentContainerElement(),b=0<this.getEagerlyLoadedChildCount()&&0===this._cachedContainerContentChildren.length;a&&(b||this.hasLazyLoadActivity())&&(this._cachedContainerContentChildren=e.filter(a.children,function(a){a=a.getAttribute(h.constants.DATA_DRAM_NODE_ROLE);return"InjectedProgressIndicator"!==a&&"InjectedInjectedErrorIndicator"!==a}));return this._cachedContainerContentChildren},getNestedPainterSlotLazyLoadConfig:function(){return this._nestedPainterSlotLazyLoadConfig},
getRecordedLazyLoadedPainters:function(){return this._recordedLazyLoadedPainters},getTotalContentPx:function(){if(0<this.getEagerlyLoadedChildCount()&&0===this._totalContentPx||this.hasLazyLoadActivity()){var a=this.getContentContainerChildren();this._totalContentPx=e.reduce(a,function(a,d){var b=d.getBoundingClientRect();d=getComputedStyle(d);return a+b.width+parseFloat(d.marginLeft)+parseFloat(d.marginRight)},0)}return this._totalContentPx},executeScripts:function(a){a=a.getElementsByTagName("script");
a=e.copy(a);e.each(a,function(a){var b=document.createElement("script");e.each(a.attributes,function(a){b.setAttribute(a.name,a.value)});b.appendChild(document.createTextNode(a.innerHTML));a.parentNode.replaceChild(b,a)})},hasLazyLoadActivity:function(){return 0<this.getTotalLazyLoadedPainters()&&this.getRecordedLazyLoadedPainters()!==this.getTotalLazyLoadedPainters()},_initializeContentScrollReference:function(){var a=h.getDramNodeRoleQuerySelector("ContentScrollReference");return(a=this._nestedPainterSlotElement.querySelector(a))?
a:null},_initializeAriaSetSize:function(){for(var a=this.getContentContainerChildren(),b=0;b<a.length;b++){var d=a[b].getAttribute("aria-setsize");if(d)return d}return this.getRemainingLazyLoadedPainters().toString()},_isScrollDistanceWithinThreshold:function(){var a=this.getVisibleScreenWidth();if(0===a)return!1;var b=this.getTotalContentPx(),d=this._getScrollableElementScroll();return Math.max(0,Math.round(b)-d-a)/a<this._nestedPainterSlotLazyLoadConfig.lazyLoadTriggerDepth},_getScrollableElementScroll:function(){var a=
this.getScrollableElement();return a?Math.abs(a.scrollLeft):0}});return{create:function(a,b,d,c){return new k(a,b,d,c)}}}),l.when("A").register("dram-partial-lazy-load-metrics",function(e){var h=e.$,g=m.uet||h.noop,k=m.ues||h.noop,a=m.uex||h.noop,b=m.ue&&m.ue.count||h.noop,d=m.ueLogError||h.noop,c=e.createClass({init:function(a,b){this._containerWidgetStrategyId=a;this._slotIndex=b;this._lazyLoadRequestCounter=0},_generateMetricName:function(a,b){a=["dpll",a];b&&a.push(this._containerWidgetStrategyId);
return a.join(":")},_generateLazyLoadScopeName:function(a,b){var c=["dpll"];a&&c.push(this._containerWidgetStrategyId);b!==q&&c.push(b);return c.join(":")},_generateScopeNameWithContainerWidgetStrategyId:function(a){return a+":"+this._containerWidgetStrategyId},recordSlotRegistration:function(a,c){var d=this._generateMetricName("eagerLoadCount"),f=this._generateMetricName("eagerLoadCount",!0);b(d,a);b(f,a);a=c?1:0;d=this._generateMetricName("minChildLoadCountSatisfied");f=this._generateMetricName("minChildLoadCountSatisfied",
!0);b(d,a);b(f,a);c||this.recordPainterProgressIndicatorShown()},recordMinChildLoadCountSuccess:function(a){a=a?1:0;var c=this._generateMetricName("minChildLoadCountSuccess"),d=this._generateMetricName("minChildLoadCountSuccess",!0);b(c,a);b(d,a)},recordLazyLoadStart:function(){this._lazyLoadRequestCounter++;var a=this._generateLazyLoadScopeName(!1,this._lazyLoadRequestCounter),b=this._generateLazyLoadScopeName(!0,this._lazyLoadRequestCounter);g("bb",a,{wb:1});k("ctb",a,1);g("bb",b,{wb:1});k("ctb",
b,1);return this._lazyLoadRequestCounter},recordLazyLoadStop:function(c,d,e){var f=d?1:0,h=this._generateMetricName("lazyLoadSuccess"),k=this._generateMetricName("lazyLoadSuccess",!0);b(h,f);b(k,f);d&&(d=this._generateLazyLoadScopeName(!1,c),c=this._generateLazyLoadScopeName(!0,c),g("cf",d,{wb:1}),g("be",d,{wb:1}),a("ld",d,{wb:1}),g("cf",c,{wb:1}),g("be",c,{wb:1}),a("ld",c,{wb:1}),e!==q&&(c=this._generateMetricName("lazyLoadedPartCount"),d=this._generateMetricName("lazyLoadedPartCount",!0),b(c,e),
b(d,e)))},recordPainterProgressIndicatorShown:function(){var a=this._generateScopeNameWithContainerWidgetStrategyId("ppiv");g("bb","ppiv",{wb:1});k("ctb","ppiv",1);g("bb",a,{wb:1});k("ctb",a,1)},recordPainterProgressIndicatorHidden:function(){g("cf","ppiv",{wb:1});g("be","ppiv",{wb:1});a("ld","ppiv",{wb:1});var b=this._generateScopeNameWithContainerWidgetStrategyId("ppiv");g("cf",b,{wb:1});g("be",b,{wb:1});a("ld",b,{wb:1})},recordLazyLoadErrorWithDefaultScope:function(a,b){a=this._generateLazyLoadScopeName(!0,
a);this.recordLazyLoadError(a,b)},recordLazyLoadError:function(a,b){d({message:b},{logLevel:"ERROR",attribution:"dram-partial-lazy-load",message:"Error during DRAM partial lazy loading [ScopeName\x3d"+a+"]"})}});return{create:function(a,b){return new c(a,b)}}}),l.when("A").register("dram-partial-lazy-load-utils",function(e){return{constants:{DATA_DRAM_NODE_ROLE:"data-dram-node-role"},initializeDOMElements:function(h,g){h&&g&&e.each(Object.keys(h),function(e){h[e].element=g.querySelector(this.getDramNodeRoleQuerySelector(h[e].dramNodeRole))},
this)},getDramNodeRoleQuerySelector:function(e){return'[data-dram-node-role\x3d"'+e+'"]'},formatSlotIndex:function(e){return 1===e.length?"0"+e:e},isRTL:function(e){return e?"rtl"===m.getComputedStyle(e).direction:!1}}}))})});