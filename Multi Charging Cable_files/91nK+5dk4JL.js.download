/*

 slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
 Copyright (c) 2014 David Bj?rklund
 Available under the MIT license
 <https://github.com/kesla/parse-headers/blob/master/LICENCE>
 Programatically add the following
 @name m3u8-parser @version 4.5.2 @license Apache-2.0  @name mpd-parser @version 0.15.4 @license Apache-2.0  @name @videojs/http-streaming @version 2.6.4 @license Apache-2.0  @name pkcs7 @version 1.0.4 @license Apache-2.0  @name aes-decrypter @version 3.1.2 @license Apache-2.0 */
'use strict';mix_d("VSEDistributionCards__vse-vw-dp-card:vse-vw-dp-card__M-sIsCrf","exports tslib @c/metrics @c/scoped-dom @p/A @c/logger @p/a-modal @c/aui-untrusted-ajax @c/navigation @c/aui-carousel @c/browser-window".split(" "),function(qi,ab,Ec,jn,kn,ln,mn,nn,on,pn,qn){function Fc(x){return x&&"object"===typeof x&&"default"in x?x:{"default":x}}var sb=Fc(jn),V=Fc(kn),rn=Fc(ln),sn=Fc(mn),ri=Fc(nn),si=Fc(on),tn=Fc(pn),Gc=Fc(qn),ti,ui,vi,wi=function(x,F){ti={schemaId:x,producerId:F,requiredNumOfFields:14}},
ac=function(x){Nf(x,ti)},Ra=function(x){Nf(x,ui)},Nf=function(x,F){Object.keys(x).length<F.requiredNumOfFields&&Ec.count("invalidNumOfFields-"+F.producerId,1);var w=ab.__assign(ab.__assign({},x),{producerId:F.producerId,schemaId:F.schemaId});URLSearchParams&&"1"===(new URLSearchParams(window.location.search)).get("iveDebug")&&(window.DistributionMetricsDebugInfo?window.DistributionMetricsDebugInfo.push(w):window.DistributionMetricsDebugInfo=[w]);x=JSON.stringify(x).replace(/\\\\/g,"");Ec.event(JSON.parse(x),
F.producerId,F.schemaId,{ssd:!1})},un=function(x){return function(F){var w=x.eventSource,X=x.placementContext,Y=x.clientId,ia=new Date,Q=navigator.userAgent;var aa=x.stringPayload;if(Z.pageAsin)aa=Z.pageAsin;else{var ha=window.location.href.match(/\/dp\/([A-Z0-9]{10})|\/gp\/product\/([A-Z0-9]{10})|\/gp\/aw\/d\/([A-Z0-9]{10})/);aa=ha&&(ha[1]||ha[2]||ha[3])?ha[1]||ha[2]||ha[3]:aa}return V["default"].$.extend({eventSource:w,placementContext:X,clientId:Y,timestamp:ia,userAgentData:Q,titleSessionId:"0",
videoAsin:"",pageAsin:aa,videoAsinList:x.videoAsinList||"",rankingStrategy:x.rankingStrategy||"",creativeId:x.creativeId,stringPayload:x.stringPayload||"",customerId:x.customerId||""},F)}},vn=function(){return function(x,F,w,X,Y){var ia=this;this.onIntersectionObserved=function(Q,aa){Q.forEach(function(ha){if(aa){var ya=ha.target;if(ha.isIntersecting)ha=setTimeout(function(){var Da=ia.childElems.indexOf(ya);ia.callback(Da);ia.viewTimeoutMap.delete(ya)},ia.timerDuration),ia.viewTimeoutMap.set(ya,ha);
else if(ha=ia.viewTimeoutMap.get(ya))clearTimeout(ha),ia.viewTimeoutMap.delete(ya)}else ha.isIntersecting&&(ha=ia.childElems.indexOf(ha.target),ia.callback(ha))})};void 0===x&&(x=null);this.callback=w;this.childElems=Array.from(document.querySelectorAll(F));this.optionsForIntersection={root:x,rootMargin:"0px",threshold:.5};this.viewTimeoutMap=new Map;this.timerDuration=null!==Y&&void 0!==Y?Y:1E3;this.intersectionObserver=new IntersectionObserver(function(Q){return ia.onIntersectionObserved(Q,X)},
this.optionsForIntersection);this.childElems.forEach(function(Q){ia.intersectionObserver.observe(Q)})}}(),za;(function(x){x[x.loadstart=0]="loadstart";x[x.ended=1]="ended";x[x.error=2]="error";x[x.invokeplay=3]="invokeplay";x[x.pause=4]="pause";x[x.playing=5]="playing";x[x.rebuffering=6]="rebuffering";x[x.seeked=7]="seeked";x[x.seeking=8]="seeking";x[x.timeupdate=9]="timeupdate";x[x.requestmute=10]="requestmute";x[x.requestunmute=11]="requestunmute";x[x.requestpause=12]="requestpause";x[x.requestplay=
13]="requestplay";x[x.click=14]="click"})(za||(za={}));var xi;(function(x){x.ATVPDKIKX0DER="https://unagi-na.amazon.com";x.A21TJRUUN4KGV="https://unagi-eu.amazon.com"})(xi||(xi={}));var yi={accepts:"*/*",contentType:"application/json;charset=UTF-8",timeout:15E3},ye;(function(x){x.GET="GET";x.POST="POST"})(ye||(ye={}));var Of=function(x,F,w,X,Y,ia){void 0===Y&&(Y=3);void 0===ia&&(ia=ye.POST);Y--;(ia===ye.POST?ri["default"].post(x,yi,F):ri["default"].get(x,yi)).then(function(Q){w(Q)}).catch(function(Q){0<
Y?Of(x,F,w,X,Y,ia):(0===Q.statusCode&&bc("Request has failed with unknown status code. Payload: "+JSON.stringify(F),"ERROR"),X(Q))})},ld=function(x){return V["default"].objectIsEmpty(x)||""===x},zi=function(x,F){void 0===F&&(F=!1);var w=Gc["default"].innerHeight*(400<=x.height()?.1:.2),X=Gc["default"].innerHeight-x.height()-w;return F?Pf(x):Gc["default"].scrollY+X>=x.offset().top&&Gc["default"].scrollY+w<=x.offset().top},Pf=function(x){var F;try{var w=x[0].getBoundingClientRect();if(0>=w.width||0>=
w.height)return!1;var X=void 0,Y=(null===(F=document.getElementById("btf-sub-nav-desktop-tabs"))||void 0===F?void 0:F.offsetHeight)||0;X=0<w.top?Math.min(x.outerHeight(),Gc["default"].innerHeight-Y-w.top):Math.min(w.bottom-Y,Gc["default"].innerHeight-Y);X=Math.max(0,X);return X>=.5*x.outerHeight()}catch(ia){return!1}},ze=function(){return Gc["default"].innerWidth>Gc["default"].innerHeight},Z={pageType:"",clientPrefix:"",deviceType:"",placement:"",metricsPlacement:"",cardId:"",creativeId:"",requester:"",
buildCsmPayload:function(x){},clientName:"",isIvxOpen:!1,enableWidgetMetricsAfterOneSecond:!1,isDesktopIngressCXUpdated:!1,showSocialShare:!1,isSingleVideoPresent:!1,isClosedCaptionsEnabled:!0,playerInstance:void 0,isHeroPopoverVisible:!1,customerId:"",hideSponsoredProducts:!1,pageAsin:"",allVideosHaveGandalfPreview:!1,thumbnailPreviewTreatment:"",translatedCCTreatment:""},Ai=function(x,F,w,X){var Y,ia,Q,aa,ha,ya,Da,Ha;void 0===w&&(w="vse_cards");void 0===X&&(X="");Z.deviceType=F;Z.pageType=x.client||
"Gateway";Z.clientName=null!==(Y=x.clientName)&&void 0!==Y?Y:"";F=Z;(Y=null===(ia=x.clientPrefix)||void 0===ia?void 0:ia.toLowerCase())||(ia=Z,Y="IVE_VFTP"===ia.clientName||"VFTPHero"===ia.clientName?ia.clientName.toLowerCase():ia.pageType.toLowerCase());F.clientPrefix=Y;Z.isDesktopIngressCXUpdated="true"===x.desktopIngressCxUpdated;Z.placement=(""!==Z.clientName?Z.clientName:Z.pageType)+"Card-"+Z.deviceType;ia=Z;F=Z.placement;X=X&&0<X.length?X+"Card-"+Z.deviceType:"";ia.metricsPlacement=(V["default"].capabilities.mobile?
V["default"].capabilities.isAmazonApp?"mobile_app":"mobile_web":V["default"].capabilities.tablet?V["default"].capabilities.isAmazonApp?"tablet_app":"tablet_web":"desktop_web")+"."+(X&&0<X.length?X:F)+"."+w;Z.cardId=null!==(Q=x.cardId)&&void 0!==Q?Q:"";Z.creativeId=null!==(aa=x.creativeId)&&void 0!==aa?aa:"";Z.requester=x.requester||"VSEWidgetCards";Z.enableWidgetMetricsAfterOneSecond="T1"===x.enableWidgetMetricsAfterOneSecond;Z.customerId=null!==(ha=x.customerId)&&void 0!==ha?ha:"";Z.hideSponsoredProducts=
"true"===x.hideSponsoredProducts;Z.pageAsin=null!==(ya=x.pageAsin)&&void 0!==ya?ya:"";Z.allVideosHaveGandalfPreview="true"===x.allVideosHaveGandalfPreview;Z.thumbnailPreviewTreatment=null!==(Da=x.thumbnailPreviewTreatment)&&void 0!==Da?Da:"";Z.translatedCCTreatment=null!==(Ha=x.translatedCcTreatment)&&void 0!==Ha?Ha:""},bb=function(x,F){void 0===F&&(F=1);try{Ec.count("vse:csm:cards:"+Z.clientPrefix+":"+x,F)}catch(w){bc("failed to post CSM metric","ERROR")}},Wc=function(x,F){void 0===F&&(F=1);bb(x+
":"+Z.deviceType,F)},bc=function(x,F){rn["default"].log("VSEWidgetCards: "+x+". Client prefix: "+Z.clientPrefix+", Page type: "+Z.pageType,F,"VSEDistributionCards")},Bi=function(x,F){var w,X;if(!x||!F)return null;x=x.split(",");for(var Y=0;Y<x.length-1;Y+=2){var ia=null===(w=x[Y])||void 0===w?void 0:w.trim(),Q=null===(X=x[Y+1])||void 0===X?void 0:X.trim();if(ia===F&&Q)return{locale:ia,url:Q}}return null},Ci=function(x,F){Z.buildCsmPayload=un({placementContext:Z.metricsPlacement,clientId:"VSE",eventSource:null!==
x&&void 0!==x?x:"VSEWidgetCards",stringPayload:null!==F&&void 0!==F?F:"",creativeId:Z.creativeId,customerId:Z.customerId})},Di=function(x){window[x]=window[x]||{};return window[x]},Ei=function(x,F,w){void 0===w&&(w="__vseScrollHandlers");w=Di(w);w[x]&&V["default"].off(V["default"].constants.BROWSER_EVENTS.SCROLL,w[x]);w[x]=F;V["default"].on(V["default"].constants.BROWSER_EVENTS.SCROLL,F)},Qf=function(x,F){void 0===F&&(F="__vseScrollHandlers");F=Di(F);F[x]&&(V["default"].off(V["default"].constants.BROWSER_EVENTS.SCROLL,
F[x]),delete F[x])},Hc=null,Fi=function(x,F,w){try{var X=V["default"].$("."+Z.cardId);Qf(Z.cardId,"__iveScrollMetricsHandlers");Hc&&(V["default"].off(V["default"].constants.BROWSER_EVENTS.SCROLL,Hc),Hc=null);if(X.length){var Y=!1,ia=null,Q=null,aa=F.map(function(ua){return ua.contentId}).join(","),ha=F.filter(function(ua){return""!==ua.metadata.rankingStrategy}).map(function(ua){return ua.metadata.rankingStrategy}).join(","),ya=Z.buildCsmPayload({eventName:Z.clientPrefix+":cardWidgetRendered",intPayload:1,
videoAsinList:aa,rankingStrategy:ha});ac(ya);bb("cardWidgetRendered",1);X=function(ua){wn(F,ua)};var Da=function(){for(var ua=w.carouselItemClassName,Aa=0;Aa<F.length;Aa++)if(!F[Aa].impressionRecorded){var tb=V["default"].$("."+Z.cardId+" ."+ua+":nth-child("+(Aa+1)+")");if(V["default"].onScreen(tb,0)){var Ga=Z.buildCsmPayload({eventName:Z.clientPrefix+":thumbnailImpression",intPayload:Aa,videoAsin:F[Aa].contentId,rankingStrategy:F[Aa].metadata.rankingStrategy,titleSessionId:Rf()});ac(Ga);xn(tb,F[Aa]);
F[Aa].impressionRecorded=!0}else break}},Ha=function(){Qf(Z.cardId,"__iveScrollMetricsHandlers");Hc&&(V["default"].off(V["default"].constants.BROWSER_EVENTS.SCROLL,Hc),Hc=null);ia&&(clearTimeout(ia),ia=null);if(Q){var ua=document.getElementById("videos-expander-link");ua&&ua.removeEventListener("click",Q);Q=null}},Ua=function(){if(!Y){var ua=Z.buildCsmPayload({eventName:Z.clientPrefix+":cardWidgetScrolledInView",intPayload:1,videoAsinList:aa,rankingStrategy:ha});ac(ua);ua=V["default"].now()-x;bb("cardWidgetScrolledInViewTime",
ua);Wc("cardWidgetScrolledInView");Y=!0;Da()}Ha()},ma=function(){if(Y)Ha();else{var ua=V["default"].$("."+Z.cardId+" ."+w.carouselItemClassName).first();ua&&V["default"].onScreen(ua,0)?Z.enableWidgetMetricsAfterOneSecond?ia||(ia=setTimeout(function(){ua&&V["default"].onScreen(ua,0)&&Ua();ia=null},1E3)):Ua():ia&&(clearTimeout(ia),ia=null)}};ya=function(){var ua=document.getElementById("videos-expander-link");ua&&(Q=function(){"false"===this.getAttribute("aria-expanded")&&ma()},ua.addEventListener("click",
Q))};ma();Y||(Hc=ma,Ei(Z.cardId,Hc,"__iveScrollMetricsHandlers"),ya());V["default"].on("vse:"+Z.clientPrefix+":searchform:focus",function(){var ua=Z.buildCsmPayload({eventName:Z.clientPrefix+":serchFormFocus",intPayload:1,videoAsinList:aa,rankingStrategy:ha});ac(ua)});w.widgetMetricsHandler(Da,function(ua){var Aa=Z.buildCsmPayload({eventName:Z.clientPrefix+":"+ua+":paginationButtonClicked",intPayload:1});bb(ua+":paginationButtonClicked",1);ac(Aa)});window.IntersectionObserver&&window.IntersectionObserverEntry&&
new vn(null,"."+w.carouselItemClassName,X,Z.enableWidgetMetricsAfterOneSecond)}}catch(ua){bc("Error occurred while emitting widget metrics "+ua,"ERROR"),bb("widgetMetricsEmissionError")}},yn=function(x){document.addEventListener("visibilitychange",function(F){return x("visible"===document.visibilityState)},!1)},xn=function(x,F){try{var w=x.find("[data-pfoasin!=''][data-pfoasin]");V["default"].each(w,function(X,Y){X=X.getAttribute("data-pfoasin");Y=Z.buildCsmPayload({eventName:Z.clientPrefix+":productElementImpression",
intPayload:Y,videoAsin:F.contentId,stringPayload:X});ac(Y)})}catch(X){bc("Unable to log pfo render metric "+F,"WARN")}},wn=function(x,F){F=Z.isDesktopIngressCXUpdated?Math.max(0,x.findIndex(function(w){var X,Y;return w.contentId===(null===(Y=null===(X=Z.playerInstance)||void 0===X?void 0:X.getActiveAsset())||void 0===Y?void 0:Y.contentId)})):F;x=Z.buildCsmPayload({eventName:Z.clientPrefix+":videoThumbnailImpression",intPayload:F,videoAsin:x[F].contentId,rankingStrategy:x[F].metadata.rankingStrategy,
titleSessionId:Rf()});ac(x)},Rf=function(){return Z.playerInstance?Z.playerInstance.getTitleSessionId():"0"},zn=function(x,F){var w=[];x=x.split(",");0<x.length&&x.forEach(function(X){X=X.split(":");1<X.length&&w.push({name:X[0],assignment:X[1],ignoreForG2S2Key:F})});return w},Gi=function(x,F){x=V["default"].$("."+x+" "+F);if(!x.length)return"";x=x[0].firstElementChild;if(!x)return"";x=x.getAttribute("data-a-popover")||"";return JSON.parse(x).name||""},Sf=function(x){return sb["default"].cardRoot.querySelector(""+
x)},An=function(x){var F=document.querySelectorAll("."+x.thumbnailUpdates+" ."+x.vseVideoTitleText),w=document.querySelectorAll("."+x.thumbnailUpdates+" ."+x.vseVideoCreatorName);if(0!==F.length){var X=function(aa){return parseFloat(window.getComputedStyle(aa).fontSize)},Y=Array.from(F).map(X),ia=function(){F.forEach(function(aa,ha){var ya=X(aa);ya!==Y[ha]&&(Y[ha]=ya,ha=w[ha],15<ya?(aa.style.webkitLineClamp="1",aa.style.lineHeight="normal",ha.style.lineHeight="normal"):(aa.style.webkitLineClamp="2",
aa.style.lineHeight="1.31em",ha.style.lineHeight="unset"))})},Q=function(){ia();requestAnimationFrame(Q)};Q()}},Hi=function(x,F,w){if(!x||!F||!w)return!1;w={ATVPDKIKX0DER:"en",A2EUQ1WTGCTBG2:"en",A1PA6795UKMFR9:"de"}[w];if(!w)return!1;F=F.split("_")[0];return F===w?!1:null!==Bi(x,F)},Bn=function(x,F){x="/gp/mobile/tag/?ref=vse_cards_ingress"+x+F.replace("/?_encoding=UTF8","");Of(x,{},function(){},function(){})},Ii=function(x,F,w,X,Y,ia){void 0===ia&&(ia=!0);var Q=x.map(function(aa){delete aa.htmlEl;
return aa});F||(F=Ae(x[0],{},w));x=[];w.weblabContext&&(x=zn(w.weblabContext,!0));Of(w.nilgiriEndpoint,{requester:Z.requester,clientPrefix:Z.clientPrefix,page:Z.pageType,placement:Z.placement,device:Z.deviceType,metadata:{id:"vse-video-widget-card-"+Z.clientPrefix,celQueryStringParam:w.celQueryStringParam,requestHasVideoData:"true",hideSponsoredProducts:Z.hideSponsoredProducts,glProductGroupId:w.glProductGroupId},videoDataList:ia?Q:void 0,video:{contentID:F.contentId,contentIDType:"VIDEO_ID",videoURL:F.videoUrl,
imageURL:F.imageUrl,vendorCode:F.vendorCode,vendorTrackingId:F.vendorTrackingId,videoReferenceId:F.videoReferenceId,videoTitle:F.title,altText:F.altText,aciContentId:F.aciContentId,videoAge:F.videoAge},marketplaceID:w.marketplaceId,locale:w.locale,product:{contentID:F.productAsin,contentIDType:"ASIN",parentContentID:F.parentAsin,parentContentIDType:"ASIN"},creativeId:Z.creativeId,weblabContext:x},X,Y)},Ae=function(x,F,w){var X=x.productAsin;X||V["default"].objectIsEmpty(x.metadata.relatedProductsAsins)||
(X=x.metadata.relatedProductsAsins.split(",")[0]);var Y=x.contentId,ia=x.metadata.title,Q=x.metadata.altText,aa=x.metadata.vendorName,ha=x.metadata.vendorCode,ya=x.metadata.entityId,Da=x.metadata.entityType,Ha=x.metadata.creatorType,Ua=x.metadata.disclosureText,ma=x.metadata.disclosureLink,ua=x.metadata.disclosureLabel,Aa=x.metadata.fullReviewLink,tb=x.metadata.title,Ga=x.metadata.videoURL,Fa=x.metadata.formattedDuration,Va=x.metadata.videoImageUrl,tc=x.parentAsin,Be="vse-cards-ingress"+x.index,Ce=
x.metadata.relatedProductsAsins,cc=x.metadata.vendorTrackingId,De=x.metadata.referenceId,Ee=x.index,Nd=x.metadata.videoAge;a:{var zb=x.metadata.closedCaptions,ub=null===w||void 0===w?void 0:w.locale,Xc=null===w||void 0===w?void 0:w.marketplaceId,Vb;if(zb){if("T1"===(null===w||void 0===w?void 0:w.translatedCcTreatment)&&ub&&Xc&&Hi(zb,ub,Xc)&&(ub=ub.split("_")[0],ub=Bi(zb,ub))){var uc=[ub];break a}ub=zb.split(",");if(2<=ub.length&&(zb=null===(Vb=ub[0])||void 0===Vb?void 0:Vb.trim(),Vb=null===(uc=ub[1])||
void 0===uc?void 0:uc.trim(),zb&&Vb)){uc=[{locale:zb,url:Vb}];break a}}uc=[]}Vb=x.metadata.videoDetailPageLink;zb=x.impressionRecorded;ub=x.lastPlayingTimestamp;Xc=x.htmlEl;var Od=x.metadata.rankingStrategy,Fe=x.metadata.aciContentId,Ic=x.metadata.videoMimeType,Pd=x.metadata.profileLink,Qd=x.metadata.profileImageUrl,Ge=""===x.metadata.source?"VSE":x.metadata.source,Rd=x.metadata.highlightedAsin,md=x.metadata.status,Ab=x.metadata.orientation,lb=x.metadata.channelId,vc=x.metadata.carouselItems,Yc=[];
vc&&(Yc=JSON.parse(vc));return{contentId:Y,title:ia,altText:Q,vendorName:aa,vendorCode:ha,entityId:ya,entityType:Da,creatorType:Ha,disclosureText:Ua,disclosureLink:ma,disclosureLabel:ua,referenceUrl:Aa,referenceLinkTitle:tb,videoUrl:Ga,duration:Fa,imageUrl:Va,videoVoteContainer:{},productAsin:X,parentAsin:tc,refTag:Be,relatedProducts:Ce,vendorTrackingId:cc,videoReferenceId:De,index:Ee,$el:F,videoAge:Nd,closedCaptions:uc,videoDetailPageLink:Vb,impressionRecorded:zb,lastPlayingTimestamp:ub,htmlEl:Xc,
rankingStrategy:Od,aciContentId:Fe,videoMimeType:Ic,profileLink:Pd,profileImageUrl:Qd,source:Ge,highlightedAsin:Rd,status:md,orientation:Ab,channelId:lb,carouselItems:Yc,jumppointOffsetMs:x.metadata.jumppointOffsetMs,jumppointAsin:x.metadata.jumppointAsin,relatedCarouselItems:x.metadata.relatedCarouselItems,eligibleToTriggerCCWeblab:w&&w.locale&&w.marketplaceId?Hi(x.metadata.closedCaptions,w.locale,w.marketplaceId):!1,callToAction:x.metadata.callToAction}},Tf=function(x,F,w){var X=[];[].forEach.call(x,
function(Y,ia){var Q=Y.dataset.asin,aa=Y.dataset;Q&&(Y={contentId:Q,productAsin:aa.productAsin||"",parentAsin:aa.parentAsin||"",metadata:Ji(aa,Q,F),impressionRecorded:!1,lastPlayingTimestamp:0,index:ia,htmlEl:Y},X.push(Y))});return X},Ki=function(x,F,w){var X=[];x.forEach(function(Y,ia){var Q=Y.asin;Q&&(Y={contentId:Q,productAsin:Y.productAsin||"",parentAsin:Y.parentAsin||"",metadata:Ji(Y,Q,F),impressionRecorded:!1,lastPlayingTimestamp:0,index:ia,htmlEl:Y},X.push(Y))});return X},Ji=function(x,F,w){return{videoImageUrl:x.videoImageUrlUnchanged||
x.videoImageUrl||"",videoURL:x.videoUrl||x.videoURL||"",title:x.title||"",altText:x.altText||"",formattedDuration:x.formattedDuration||"",vendorName:x.vendorName||"",vendorCode:x.vendorCode||"",referenceId:x.referenceId||"",fullReviewLink:x.referenceUrl||x.fullReviewLink||"",videoDetailPageLink:x.videoDetailPageLink||"vdp/"+F+w.celQueryStringParam,asin:x.asin||"",vendorTrackingId:x.vendorTrackingId||"",relatedProductsAsins:x.relatedProductsAsins||"",videoAge:x.videoAge||"",closedCaptions:x.closedCaptions||
"",creatorType:x.creatorType||"",publicName:x.publicName||"",profileLink:x.profileLink||"",profileImageUrl:x.profileImageUrl||"",rankingStrategy:x.rankingStrategy||"",aciContentId:x.csaCItemId||x.aciContentId||"",disclosureText:x.disclosureText||"",disclosureLabel:x.disclosureLabel||"",disclosureLink:x.disclosureLink||"",videoMimeType:x.videoMimeType||"",entityId:x.entityId||"",entityType:x.entityType||"",videoImageHeight:x.videoImageHeight||"",videoImageWidth:x.videoImageWidth||"",videoImagePhysicalId:x.videoImagePhysicalId||
"",videoImageExtension:x.videoImageExtension||"",groupType:x.groupType||"",source:x.source||"VSE",highlightedAsin:x.highlightedAsin||"",status:x.status||"",orientation:x.orientation||"",channelId:x.channelId||"",carouselItems:x.carouselItems||"",isHotspotsEligible:x.isHotspotsEligible||!1,jumppointOffsetMs:x.jumppointOffsetMs,jumppointAsin:x.jumppointAsin,relatedCarouselItems:x.relatedCarouselItems||"",callToAction:x.callToAction||""}},Nb,He=!1,Sd,Uf,kc,mb,nd,Vf=!1,Wf,Td,od,wc,Wb,dc,Xf,lc,Ie=!1,Yf=
!0,Li=!1,Zf,Je=0,Ke,Le,Mi,Ni=null,$f=!1,Hn=function(x,F,w,X,Y,ia,Q,aa){void 0===Y&&(Y=!1);void 0===ia&&(ia=!0);void 0===Q&&(Q=!1);void 0===aa&&(aa=null);return ab.__awaiter(void 0,void 0,void 0,function(){var ha,ya,Da,Ha;return ab.__generator(this,function(Ua){try{if(nd=w,mb=F,kc=x,Ie=Y,Yf=ia,Li=Q,ha=V["default"].now(),wi("vse.VSECardsEvents.9","vsemetrics_widgetcards"),0<V["default"].$(".vse-video-thumbnail-wrapper .vse-video-thumbnail-preview").length?(Le=V["default"].$(".vse-video-thumbnail-wrapper .vse-video-thumbnail-preview"),
V["default"].on(V["default"].constants.BROWSER_EVENTS.SCROLL,ag),ag()):0<V["default"].$(".vse-image-thumbnail-wrapper").length&&(V["default"].on(V["default"].constants.BROWSER_EVENTS.SCROLL,bg),bg()),An(mb),(ya=sb["default"].cardRoot.getElementsByClassName(mb.vseWidgetPageState))&&ya[0]&&ya[0].dataset){Wb=ya[0].dataset;$f="true"===Wb.lazyLoadComponentBuilderCall;Ai(Wb,kc?"Mobile":"Desktop",X.widgetMetricsSuffix,X.overrideMetricsPlacement);Z.isDesktopIngressCXUpdated?(Ke=aa,V["default"].$("."+Z.cardId+
" .a-fixed-right-grid-inner").addClass(mb.vseFlex),Mi=sb["default"].cardRoot.querySelector(".video-items-metadata"),(Da=Mi.getAttribute("data-video-items"))&&(Xf=JSON.parse(Da)),Nb=Ki(Xf,Wb,mb),Ei(Z.cardId,Oi,"__iveInitializeComponentBuilderHandlers"),Oi()):(dc=sb["default"].cardRoot.getElementsByClassName(mb.vseVideoDataItem),Nb=Tf(dc,Wb,mb));if(!dc&&!Xf)return bb("noCardsIngressDom"),pd(),[2];Wf="vse-component-feed-carousel-"+Z.cardId;od="vse-widget-popover-"+Z.cardId;if(!V["default"].capabilities.video)return bb("videoNotSupported"),
[2];Wc("cardWidgetRendered");Ci(void 0,Nb[0].productAsin?Nb[0].productAsin:"");if(kc||"Detail"===Z.pageType)Fi(ha,Nb,X);else{V["default"].$("."+Z.cardId+" [class*=vsePlaceholder] .a-fixed-right-grid-inner").addClass(mb.vseNoRightPadding);Ua=ha;try{Pi(Ua,X,"vse-carousel-items-added-"+Wf),Pi(Ua,X,"vse:cards:"+Z.clientPrefix+":quad:ready")}catch(ma){cg(ma)}V["default"].trigger("vse-card-ready-"+Wf)}(Ha=V["default"].capabilities.isAmazonApp&&V["default"].capabilities.android&&(V["default"].capabilities.androidVersion+
"").startsWith("8"))?(bb("useMshopAutoplayFallback"),pd()):(Cn(),Dn(),En(),Fn(),Gn());"gatewayquad"===Z.clientPrefix&&V["default"].trigger("vse:cards:"+Z.clientPrefix+":quad:ready");Ie&&!$f&&(dg(null,V["default"].now()),Z.isDesktopIngressCXUpdated||eg())}else bb("pageStateNotFound"),pd()}catch(ma){bc("fatal exception has occurred. Exception details: "+ma,"FATAL"),bb("widgetFatalException"),pd()}return[2]})})},Oi=function(){V["default"].onScreen(V["default"].$("."+Z.cardId+" .vse-hero-widget"),100)&&
(In(),Qf(Z.cardId,"__iveInitializeComponentBuilderHandlers"))},Jn=function(){V["default"].on(Z.clientPrefix+":vse:metadata:registered",function(){lc=Ae(Nb[0],null,Wb);V["default"].trigger("vse:"+Z.clientPrefix+":page:lightBoxOpened",{assetSpec:lc,showHeroExperience:!0,player:Ke,templateId:"vftphero",lightBoxId:"vftphero"})})},Pi=function(x,F,w){V["default"].off(w);V["default"].on(w,function(){He||(He=!0,Nb=Tf(dc,Wb),Fi(x,Nb,F))})},Dn=function(x){void 0===x&&(x="click touch");V["default"].declarative("vse-widget-carousel-see-more-"+
Z.cardId,x,function(){return Qi()});V["default"].declarative("vse-widget-carousel-custom-action-"+Z.cardId,x,function(F){var w;(F=null===(w=F.data)||void 0===w?void 0:w.link)?(Ri("widgetCustomActionClicked"),si["default"].setLocation(F)):Qi()})},Qi=function(){kc&&(Vf=!0);V["default"].$("."+Z.cardId+" .vse-cards-ingress-carousel").find(".vse-carousel-item").first().click();Ri("seeMoreLinkClicked")},Ri=function(x){Wc(x);x=Z.buildCsmPayload({eventName:Z.clientPrefix+":"+x,intPayload:1});ac(x)},En=function(){var x=
0;V["default"].off("a:popover:afterShow:vse-widget-popover-"+Z.cardId);V["default"].on("a:popover:afterShow:vse-widget-popover-"+Z.cardId,function(F){try{if(V["default"].$(F.popover.$popover).addClass(V["default"].$("#"+od).data("cssClass")),x++,Uf=!0,1===x){V["default"].$(F.popover.$popover).addClass(mb.vseVerticalLightbox);var w=V["default"].now();wc&&wc.refresh();Ie&&Sd?(V["default"].$(F.popover.$popover).addClass(mb.vseRemoveAbsolute),fg()):(dg(F.popover.$popover,w),eg())}else fg()}catch(X){cg(X)}})},
dg=function(x,F){V["default"].on(Z.clientPrefix+":vse:player:registered",function(){V["default"].$("#"+od+" [class*=_vseWidgetLbVideoBlock_]").first().animate({opacity:1});if(Uf){fg();V["default"].$(x).addClass(mb.vseRemoveAbsolute);var w=V["default"].now()-F;Wc("cardWidgetPopoverContentWaitTime",w)}});V["default"].on("vse:cards:"+Z.clientPrefix+":componentbuilder:failed",function(){Si();wc?wc.hide():V["default"].trigger("vse:cards:"+Z.cardId+":secondary:view:close");Ie||V["default"].delay(function(){si["default"].setLocation(lc.videoDetailPageLink)},
500)})},fg=function(){Vf&&V["default"].trigger("vse:"+Z.clientPrefix+":page:watchAllClicked");Vf=!1;var x={assetSpec:lc,lightBoxId:""+od};!0===Li&&Ni!==lc.contentId&&(Ni=lc.contentId,x.lazyLoadProductAsin=lc.productAsin);V["default"].trigger("vse:"+Z.clientPrefix+":page:lightBoxOpened",x);x=V["default"].$("#"+od+" [class*=_vseWidgetLbVideoBlock_]");0<x.length&&(Td=x.get(0),null!=nd&&(Kn(Td),nd.elect(Td)))},Fn=function(){V["default"].off("a:popover:beforeHide:vse-widget-popover-"+Z.cardId);V["default"].on("a:popover:beforeHide:vse-widget-popover-"+
Z.cardId,function(){Uf=!1;Sd?(V["default"].trigger("vse:"+Z.clientPrefix+":page:lightBoxClosed"),null!=nd&&Td&&nd.unsubscribe(Td)):Wc("cardWidgetLBClosedBeforeAjax")})},eg=function(){Ii(Nb,lc,Wb,function(x){Sd=!0;bb("preloadSuccess");V["default"].$("#"+od+" [class*=_vseWidgetLbVideoBlock_]").html(x.responseBody)},function(x){Ti(x)},Yf)},In=function(){Ii(Nb,lc,Wb,function(x){Sd=!0;bb("preloadSuccess");var F=sb["default"].cardRoot.querySelector("#vse-placeholder-related-videos");F.classList.remove(mb.skeletalVideo);
for(Z.isSingleVideoPresent&&F.classList.add("aok-hidden");F.firstChild;)F.removeChild(F.firstChild);V["default"].$("."+Z.cardId+" ."+mb.vseWidgetPageState).html(x.responseBody);Jn();gg("vftphero-vse-related-videos","vse-placeholder-related-videos");gg("vse-vftphero-feedback-container","vse-overlay-features");gg("ive-vftphero-action-share","vse-overlay-features");Ui(Gi(Z.cardId,"#ive-vftphero-action-share"));Ui(Gi(Z.cardId,".vse-fb-trigger-container"));Ln()},function(x){var F,w,X;null===(F=Sf("#vse-placeholder-related-videos"))||
void 0===F?void 0:F.classList.add("aok-hidden");null===(w=Sf("#vse-placeholder-related-products-config"))||void 0===w?void 0:w.classList.add("aok-hidden");Z.isSingleVideoPresent||(F=sb["default"].cardRoot.querySelector("."+mb.iveHeroRowGrid),null===F||void 0===F?void 0:F.style.setProperty("margin-right","-336px"));null===(X=Sf(".vse-hero-widget"))||void 0===X?void 0:X.style.setProperty("height","415px");Ti(x)},Yf)},Ui=function(x){V["default"].off("a:popover:show:"+x);V["default"].on("a:popover:show:"+
x,function(F){Z.isHeroPopoverVisible=!0;V["default"].$("."+Z.cardId+" #ive-hero-video-player").addClass("ppvr-vsbl")});V["default"].off("a:popover:hide:"+x);V["default"].on("a:popover:hide:"+x,function(){Z.isHeroPopoverVisible=!1;V["default"].$("."+Z.cardId+" #ive-hero-video-player").removeClass("ppvr-vsbl")});V["default"].off("a:popover:invisible:"+x);V["default"].on("a:popover:invisible:"+x,function(){null!=Ke&&Ke.resume()})},Ln=function(){V["default"].$("."+Z.cardId).delegate("#ive-hero-video-player",
"mouseenter",function(){bb("hoverIntoPlayer")});V["default"].$("."+Z.cardId).delegate("#ive-hero-video-player","mouseleave",function(){Z.showSocialShare||bb("hoverOutOfThePlayer")})},gg=function(x,F){F=sb["default"].cardRoot.querySelector("#"+F);x=V["default"].$("."+Z.cardId+" #"+x);x.length&&F&&F.prepend(x[0])},Ti=function(x){V["default"].trigger("vse:cards:"+Z.clientPrefix+":componentbuilder:failed");Wc("preloadFailed");bb("preloadFailed:"+x.statusCode);pd()},pd=function(){var x=sb["default"].cardRoot.getElementsByClassName(mb.vseSeeMoreLink)[0];
x&&x.classList&&x.classList.add("aok-hidden")},Cn=function(){try{dc&&0<dc.length&&[].forEach.call(dc,function(x){x.children[0].removeAttribute("target")}),Vi(),V["default"].$("."+Z.cardId+" .vse-cards-ingress-carousel").delegate(".vse-carousel-item","click",function(x){He||(Nb=Tf(dc,Wb),He=!0);if(!V["default"].$(x.target).closest("."+mb.vseProfilePlaceholder).length){x.preventDefault();var F=V["default"].$(x.currentTarget);x=F.closest("li").index();var w=Nb[x];w.metadata&&(lc=Ae(w,F,Wb),F=Z.buildCsmPayload({eventName:Z.clientPrefix+
":cardWidgetClicked",intPayload:1,videoAsin:w.contentId,rankingStrategy:w.metadata.rankingStrategy}),Wc("cardWidgetClicked"),ac(F),Bn(x,Wb.celQueryStringParam),kc?V["default"].trigger("vse:cards:"+Z.cardId+":secondary:view:open"):(wc=sn["default"].get(V["default"].$("."+Z.cardId+" #vse-widget-popover-trigger")),V["default"].objectIsEmpty(wc)?bb("lbNotFoundDesktop"):wc.show()))}})}catch(x){cg(x)}},cg=function(x){bc("fatal exception has occurred in LB. Exception details: "+x,"FATAL");bb("lightboxOpenFatalException");
pd();Si();wc&&wc.hide()},Si=function(){Vi();dc&&0<dc.length&&[].forEach.call(dc,function(x,F){x.children&&x.children[0]&&x.children[0].setAttribute("target",Nb[F].metadata.videoDetailPageLink)})},Vi=function(){V["default"].$("."+Z.cardId+" .vse-cards-ingress-carousel").undelegate(".vse-carousel-item","click")},Kn=function(x){nd.subscribe(x,function(F){},{buffer:0})},Gn=function(){V["default"].on(Z.clientPrefix+"-leave-pip",function(x){V["default"].$("."+Z.cardId+" .vse-cards-ingress-carousel .vse-carousel-item")[x.index].click()})},
Wi=function(x,F){Zf[F]||(x=Z.buildCsmPayload({eventName:Z.clientPrefix+":thumbnailPreviewPlaybackStart",intPayload:F,videoAsin:x}),void 0!==x&&null!==x&&(ac(x),Zf[F]=!0))},bg=function(){V["default"].onScreen(V["default"].$(".vse-image-thumbnail-wrapper"),100)&&(V["default"].loadImageManually(".vse-img-manual-load:not(img)"),V["default"].off(V["default"].constants.BROWSER_EVENTS.SCROLL,bg))},ag=function(){if(V["default"].onScreen(V["default"].$(".vse-video-thumbnail-wrapper"),100)){V["default"].loadImageManually(".vse-img-manual-load:not(img)");
$f&&!Sd&&(dg(null,V["default"].now()),eg());V["default"].each(Le,function(F){a:{var w=F.getAttribute("data-src");var X=void 0;void 0===X&&(X=1);w=w.split(",");if(Z.allVideosHaveGandalfPreview&&"T3"===Z.thumbnailPreviewTreatment)for(var Y=1;Y<w.length;Y+=3)if("gandalfMp4"===w[Y]){X=w[Y-1];break a}X=w[3*(X-1)]}F.src=X;F.addEventListener("ended",Mn)});V["default"].off(V["default"].constants.BROWSER_EVENTS.SCROLL,ag);Zf=Array(Le.length).fill(!1);kc||Nn();On();var x=kc?hg():Je;Xi(x)||(Ud(),Me(x))}},Nn=
function(){V["default"].$(".vse-video-widget-container").delegate("."+mb.vseVideoDataItem,"mouseenter",function(){Ud();var x=V["default"].$(this).find("video"),F=V["default"].$(this).find(".vse-video-thumbnail-img");Yi(F);0<x.length&&(x[0].play(),F=V["default"].$(this).closest("li").index(),Wi(x[0].getAttribute("data-video-asin"),F),Je=0)});V["default"].$(".vse-video-widget-container").delegate("."+mb.vseVideoDataItem,"mouseleave",function(){var x=V["default"].$(this).find(".vse-video-thumbnail-img");
ig(x);x=V["default"].$(this).find("video");0<x.length&&jg(x[0])})},ig=function(x){x&&0<x.length&&V["default"].fadeIn(x,300,"ease-in")},Yi=function(x){x&&0<x.length&&V["default"].fadeOut(x,300,"ease-in")},Zi=function(x){x=V["default"].$(".vse-video-widget-container ol li").eq(x);if(!x||0!=x.length)return V["default"].$(x).find("video")[0]},$i=function(x){x=V["default"].$(".vse-video-widget-container ol li").eq(x);if(!x||0!=x.length)return V["default"].$(x).find(".vse-video-thumbnail-img")},Me=function(x){var F=
Zi(x);if(F){var w=$i(x);Yi(w);F.play().then().catch(function(){V["default"].off(V["default"].constants.BROWSER_EVENTS.SCROLL,kg);V["default"].off(V["default"].constants.BROWSER_EVENTS.SCROLL,lg);Ud(!0)});Je=x;Wi(F.getAttribute("data-video-asin"),x)}},Xi=function(x){return(x=Zi(x))?!x.paused:!1},kg=function(){var x=V["default"].$(".vse-video-widget-container");0<x.length&&(!ze()&&V["default"].onScreen(x)&&zi(x)||ze()&&V["default"].onScreen(x))&&(V["default"].off(V["default"].constants.BROWSER_EVENTS.SCROLL,
kg),V["default"].on(V["default"].constants.BROWSER_EVENTS.SCROLL,lg),x=kc?hg():Je,Xi(x)||(Ud(),Me(x)))},lg=function(){var x=V["default"].$(".vse-video-widget-container");0!=x.length&&(!zi(x)&&!ze()||ze()&&!V["default"].onScreen(x))&&(V["default"].on(V["default"].constants.BROWSER_EVENTS.SCROLL,kg),V["default"].off(V["default"].constants.BROWSER_EVENTS.SCROLL,lg))},Ud=function(x){void 0===x&&(x=!1);V["default"].each(Le,function(F){if(0!==F.currentTime||x){var w=V["default"].$(F).closest(".vse-video-thumbnail-wrapper").find(".vse-video-thumbnail-img");
ig(w);jg(F)}})},jg=function(x){setTimeout(function(){x.currentTime=0;x.load()},300)},hg=function(){var x=0;try{var F=V["default"].$(".vse-video-widget-container"),w=parseInt(F.find("li").css("width").replace("px",""))+8,X=F.find("ol").css("-webkit-transform").split(/[()]/)[1],Y=Math.abs(parseInt(X.split(",")[4]));x=Math.round(Y/w)}catch(ia){bc("Error has occurred while finding the current focussed Element. Exception details: "+ia,"ERROR")}return x},Mn=function(x){try{var F=x.target.closest("li");
jg(x.target);var w=V["default"].$(F).index()+1;x=0;try{var X=V["default"].$(".vse-video-widget-container"),Y=parseInt(X.find("li").css("width").replace("px","")),ia=kc?V["default"].$(window).width():V["default"].$(".vse-video-widget-container .a-carousel-viewport").width();x=Math.floor(ia/(Y+8))}catch(Da){bc("Error has occurred while finding the no of Thumbnails on screen. Exception details: "+Da,"ERROR")}var Q=x;var aa=Math.ceil(w/Q),ha=Math.ceil((w+1)/Q),ya=$i(w-1);ig(ya);aa===ha&&Me(w)}catch(Da){bc("Error has occurred while playing the next preview. Exception details: "+
Da,"ERROR")}},On=function(){var x=V["default"].$(".vse-cards-carousel-container");tn["default"].getCarousel(x).on("change:pageNumber",function(){Ud();setTimeout(function(){Me(hg())},kc?100:310)})},aj="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},ts=function(x){return x&&x.__esModule&&Object.prototype.hasOwnProperty.call(x,"default")?x["default"]:x}(function(x,F,w){return w={path:F,exports:{},require:function(X,
Y){throw Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs");}},x(w,w.exports),w.exports}(function(x){function F(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h["default"]:h}function w(h,d){return d={exports:{}},h(d,d.exports),d.exports}function X(h){var d="info",c=function(){for(var a=arguments.length,e=Array(a),n=0;n<a;n++)e[n]=arguments[n];b("log",d,e)};var b=Pn(h,c);c.createLogger=function(a){return X(h+": "+a)};c.levels={all:"debug|log|warn|error",
off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:d};c.level=function(a){if("string"===typeof a){if(!c.levels.hasOwnProperty(a))throw Error('"'+a+'" in not a valid log level');d=a}return d};c.history=function(){return Hb?[].concat(Hb):[]};c.history.filter=function(a){return(Hb||[]).filter(function(e){return(new RegExp(".*"+a+".*")).test(e[0])})};c.history.clear=function(){Hb&&(Hb.length=0)};c.history.disable=function(){null!==Hb&&(Hb.length=0,Hb=null)};
c.history.enable=function(){null===Hb&&(Hb=[])};c.error=function(){for(var a=arguments.length,e=Array(a),n=0;n<a;n++)e[n]=arguments[n];return b("error",d,e)};c.warn=function(){for(var a=arguments.length,e=Array(a),n=0;n<a;n++)e[n]=arguments[n];return b("warn",d,e)};c.debug=function(){for(var a=arguments.length,e=Array(a),n=0;n<a;n++)e[n]=arguments[n];return b("debug",d,e)};return c}function Y(h,d){bj(h).forEach(function(c){return d(h[c],c)})}function ia(h,d,c){void 0===c&&(c=0);return bj(h).reduce(function(b,
a){return d(b,h[a],a)},c)}function Q(h){for(var d=arguments.length,c=Array(1<d?d-1:0),b=1;b<d;b++)c[b-1]=arguments[b];if(Object.assign)return Ne.apply(void 0,[h].concat(c));c.forEach(function(a){a&&Y(a,function(e,n){h[n]=e})});return h}function aa(h){return!!h&&"object"===typeof h}function ha(h){return aa(h)&&"[object Object]"===Qn.call(h)&&h.constructor===Object}function ya(h,d){return h&&d?"function"===typeof da.getComputedStyle?(h=da.getComputedStyle(h))?h.getPropertyValue(d)||h[d]:"":"":""}function Da(h){if(0<=
h.indexOf(" "))throw Error("class has illegal whitespace characters");}function Ha(){return qa===da.document}function Ua(h){return aa(h)&&1===h.nodeType}function ma(){try{return da.parent!==da.self}catch(h){return!0}}function ua(h){return function(d,c){if("string"!==typeof d||!d.trim())return qa[h](null);"string"===typeof c&&c.trim()&&(c=qa.querySelector(c));c=Ua(c)?c:qa;return c[h]&&c[h](d)}}function Aa(h,d,c,b){void 0===h&&(h="div");void 0===d&&(d={});void 0===c&&(c={});var a=qa.createElement(h);
Object.getOwnPropertyNames(d).forEach(function(e){var n=d[e];if(-1!==e.indexOf("aria-")||"role"===e||"type"===e)Ka.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\ncreateEl(type, properties, attributes). Attempting to set "+(e+" to "+n+".")),a.setAttribute(e,n);else if("textContent"===e)tb(a,n);else if(a[e]!==n||"tabIndex"===e)a[e]=n});Object.getOwnPropertyNames(c).forEach(function(e){a.setAttribute(e,c[e])});b&&Od(a,b);return a}
function tb(h,d){"undefined"===typeof h.textContent?h.innerText=d:h.textContent=d;return h}function Ga(h,d){d.firstChild?d.insertBefore(h,d.firstChild):d.appendChild(h)}function Fa(h,d){Da(d);return h.classList?h.classList.contains(d):(new RegExp("(^|\\s)"+d+"($|\\s)")).test(h.className)}function Va(h,d){h.classList?h.classList.add(d):Fa(h,d)||(h.className=(h.className+" "+d).trim());return h}function tc(h,d){h.classList?h.classList.remove(d):(Da(d),h.className=h.className.split(/\s+/).filter(function(c){return c!==
d}).join(" "));return h}function Be(h,d,c){var b=Fa(h,d);"function"===typeof c&&(c=c(h,d));"boolean"!==typeof c&&(c=!b);if(c!==b)return c?Va(h,d):tc(h,d),h}function Ce(h,d){Object.getOwnPropertyNames(d).forEach(function(c){var b=d[c];null===b||"undefined"===typeof b||!1===b?h.removeAttribute(c):h.setAttribute(c,!0===b?"":b)})}function cc(h){var d={};if(h&&h.attributes&&0<h.attributes.length)for(var c=h.attributes,b=c.length-1;0<=b;b--){var a=c[b].name,e=c[b].value;if("boolean"===typeof h[a]||-1!==
",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+a+","))e=null!==e?!0:!1;d[a]=e}return d}function De(){qa.body.focus();qa.onselectstart=function(){return!1}}function Ee(){qa.onselectstart=function(){return!0}}function Nd(h){if(h&&h.getBoundingClientRect&&h.parentNode){var d=h.getBoundingClientRect(),c={};"bottom height left right top width".split(" ").forEach(function(b){void 0!==d[b]&&(c[b]=d[b])});c.height||(c.height=parseFloat(ya(h,"height")));c.width||(c.width=parseFloat(ya(h,
"width")));return c}}function zb(h){if(!h||h&&!h.offsetParent)return{left:0,top:0,width:0,height:0};for(var d=h.offsetWidth,c=h.offsetHeight,b=0,a=0;h.offsetParent&&h!==qa[Oe.fullscreenElement];)b+=h.offsetLeft,a+=h.offsetTop,h=h.offsetParent;return{left:b,top:a,width:d,height:c}}function ub(h,d){var c=0,b=0;if(Ob)for(var a=h;a&&"html"!==a.nodeName.toLowerCase();){var e=ya(a,"transform");/^matrix/.test(e)?(e=e.slice(7,-1).split(/,\s/).map(Number),c+=e[4],b+=e[5]):/^matrix3d/.test(e)&&(e=e.slice(9,
-1).split(/,\s/).map(Number),c+=e[12],b+=e[13]);a=a.parentNode}a={};e=zb(d.target);h=zb(h);var n=h.width,q=h.height,t=d.offsetY-(h.top-e.top);e=d.offsetX-(h.left-e.left);d.changedTouches&&(e=d.changedTouches[0].pageX-h.left,t=d.changedTouches[0].pageY+h.top,Ob&&(e-=c,t-=b));a.y=1-Math.max(0,Math.min(1,t/q));a.x=Math.max(0,Math.min(1,e/n));return a}function Xc(h){return aa(h)&&3===h.nodeType}function Vb(h){for(;h.firstChild;)h.removeChild(h.firstChild);return h}function uc(h){"function"===typeof h&&
(h=h());return(Array.isArray(h)?h:[h]).map(function(d){"function"===typeof d&&(d=d());if(Ua(d)||Xc(d))return d;if("string"===typeof d&&/\S/.test(d))return qa.createTextNode(d)}).filter(function(d){return d})}function Od(h,d){uc(d).forEach(function(c){return h.appendChild(c)});return h}function Fe(h,d){return Od(Vb(h),d)}function Ic(h){return void 0===h.button&&void 0===h.buttons||0===h.button&&void 0===h.buttons||"mouseup"===h.type&&0===h.button&&0===h.buttons?!0:0!==h.button||1!==h.buttons?!1:!0}
function Pd(h,d){d&&(mg=d);da.setTimeout(Rn,h)}function Qd(){cj=!0;da.removeEventListener("load",Qd)}function Ge(h,d){if(Bb.has(h)){var c=Bb.get(h);0===c.handlers[d].length&&(delete c.handlers[d],h.removeEventListener?h.removeEventListener(d,c.dispatcher,!1):h.detachEvent&&h.detachEvent("on"+d,c.dispatcher));0>=Object.getOwnPropertyNames(c.handlers).length&&(delete c.handlers,delete c.dispatcher,delete c.disabled);if(0===Object.getOwnPropertyNames(c).length)Bb["delete"](h)}}function Rd(h,d,c,b){c.forEach(function(a){h(d,
a,b)})}function md(h){function d(){return!0}function c(){return!1}if(h.fixed_)return h;if(!h||!h.isPropagationStopped){var b=h||da.event;h={};for(var a in b)"layerX"!==a&&"layerY"!==a&&"keyLocation"!==a&&"webkitMovementX"!==a&&"webkitMovementY"!==a&&("returnValue"===a&&b.preventDefault||(h[a]=b[a]));h.target||(h.target=h.srcElement||qa);h.relatedTarget||(h.relatedTarget=h.fromElement===h.target?h.toElement:h.fromElement);h.preventDefault=function(){b.preventDefault&&b.preventDefault();h.returnValue=
!1;b.returnValue=!1;h.defaultPrevented=!0};h.defaultPrevented=!1;h.stopPropagation=function(){b.stopPropagation&&b.stopPropagation();h.cancelBubble=!0;b.cancelBubble=!0;h.isPropagationStopped=d};h.isPropagationStopped=c;h.stopImmediatePropagation=function(){b.stopImmediatePropagation&&b.stopImmediatePropagation();h.isImmediatePropagationStopped=d;h.stopPropagation()};h.isImmediatePropagationStopped=c;if(null!==h.clientX&&void 0!==h.clientX){a=qa.documentElement;var e=qa.body;h.pageX=h.clientX+(a&&
a.scrollLeft||e&&e.scrollLeft||0)-(a&&a.clientLeft||e&&e.clientLeft||0);h.pageY=h.clientY+(a&&a.scrollTop||e&&e.scrollTop||0)-(a&&a.clientTop||e&&e.clientTop||0)}h.which=h.charCode||h.keyCode;null!==h.button&&void 0!==h.button&&(h.button=h.button&1?0:h.button&4?1:h.button&2?2:0)}h.fixed_=!0;return h}function Ab(h,d,c){if(Array.isArray(d))return Rd(Ab,h,d,c);Bb.has(h)||Bb.set(h,{});var b=Bb.get(h);b.handlers||(b.handlers={});b.handlers[d]||(b.handlers[d]=[]);c.guid||(c.guid=Jc++);b.handlers[d].push(c);
b.dispatcher||(b.disabled=!1,b.dispatcher=function(a,e){if(!b.disabled){a=md(a);var n=b.handlers[a.type];if(n){n=n.slice(0);for(var q=0,t=n.length;q<t&&(!a.isImmediatePropagationStopped||!a.isImmediatePropagationStopped());q++)try{n[q].call(h,a,e)}catch(v){Ka.error("Error in event handler for "+a.type,v)}}}});1===b.handlers[d].length&&(h.addEventListener?(c=!1,Sn()&&-1<Tn.indexOf(d)&&(c={passive:!0}),h.addEventListener(d,b.dispatcher,c)):h.attachEvent&&h.attachEvent("on"+d,b.dispatcher))}function lb(h,
d,c){if(Bb.has(h)){var b=Bb.get(h);if(b.handlers){if(Array.isArray(d))return Rd(lb,h,d,c);if(void 0===d)for(var a in b.handlers)Object.prototype.hasOwnProperty.call(b.handlers||{},a)&&(d=h,c=a,b.handlers[c]=[],Ge(d,c));else if(a=b.handlers[d]){if(!c)b.handlers[d]=[];else if(c.guid)for(b=0;b<a.length;b++)a[b].guid===c.guid&&a.splice(b--,1);Ge(h,d)}}}}function vc(h,d,c){var b=Bb.has(h)?Bb.get(h):{},a=h.parentNode||h.ownerDocument;"string"===typeof d?d={type:d,target:h}:d.target||(d.target=h);d=md(d);
b.dispatcher&&b.dispatcher.call(h,d,c);if(a&&!d.isPropagationStopped()&&!0===d.bubbles)vc.call(null,a,d,c);else if(!a&&!d.defaultPrevented&&d.target&&d.target[d.type]&&(Bb.has(d.target)||Bb.set(d.target,{}),h=Bb.get(d.target),d.target[d.type])){h.disabled=!0;if("function"===typeof d.target[d.type])d.target[d.type]();h.disabled=!1}return!d.defaultPrevented}function Yc(h,d,c){if(Array.isArray(d))return Rd(Yc,h,d,c);var b=function e(){lb(h,d,e);c.apply(this,arguments)};b.guid=c.guid=c.guid||Jc++;Ab(h,
d,b)}function dj(h,d,c){var b=function e(){lb(h,d,e);c.apply(this,arguments)};b.guid=c.guid=c.guid||Jc++;Ab(h,d,b)}function ng(h,d){void 0===d&&(d={});if(d=d.eventBusKey){if(!h[d].nodeName)throw Error('The eventBusKey "'+d+'" does not refer to an element.');h.eventBusEl_=h[d]}else h.eventBusEl_=Aa("span",{className:"vjs-event-bus"});Q(h,Un);h.eventedCallbacks&&h.eventedCallbacks.forEach(function(c){c()});h.on("dispose",function(){h.off();da.setTimeout(function(){h.eventBusEl_=null},0)});return h}
function ej(h,d){Q(h,Vn);h.state=Q({},h.state,d);if("function"===typeof h.handleStateChanged&&xc(h))h.on("statechanged",h.handleStateChanged);return h}function Wa(){for(var h={},d=arguments.length,c=Array(d),b=0;b<d;b++)c[b]=arguments[b];c.forEach(function(a){a&&Y(a,function(e,n){ha(e)?(ha(h[n])||(h[n]={}),h[n]=Wa(h[n],e)):h[n]=e})});return h}function fj(h,d,c,b){var a=c.length-1;if("number"!==typeof b||0>b||b>a)throw Error("Failed to execute '"+h+"' on 'TimeRanges': The index provided ("+b+") is non-numeric or out of bounds (0-"+
a+").");return c[b][d]}function og(h){return void 0===h||0===h.length?{length:0,start:function(){throw Error("This TimeRanges object is empty");},end:function(){throw Error("This TimeRanges object is empty");}}:{length:h.length,start:fj.bind(null,"start",0,h),end:fj.bind(null,"end",1,h)}}function Zc(h,d){return Array.isArray(h)?og(h):void 0===h||void 0===d?og():og([[h,d]])}function gj(h,d){var c=0;if(!d)return 0;h&&h.length||(h=Zc(0,0));for(var b=0;b<h.length;b++){var a=h.start(b);var e=h.end(b);
e>d&&(e=d);c+=e-a}return c/d}function Cb(h){if(h instanceof Cb)return h;"number"===typeof h?this.code=h:"string"===typeof h?this.message=h:aa(h)&&("number"===typeof h.code&&(this.code=h.code),Q(this,h));this.message||(this.message=Cb.defaultMessages[this.code]||"")}function Vd(h){return void 0!==h&&null!==h&&"function"===typeof h.then}function Kc(h){Vd(h)&&h.then(null,function(d){})}function Wn(h){for(var d in h)if(h.hasOwnProperty(d))return!1;return!0}function hj(h,d,c){var b=h,a=Xn.call(d);"[object Function]"===
a||"function"===typeof d&&"[object RegExp]"!==a||"undefined"!==typeof window&&(d===window.setTimeout||d===window.alert||d===window.confirm||d===window.prompt)?(c=d,"string"===typeof h&&(b={uri:h})):b=Ne({},d,{uri:h});b.callback=c;return b}function ec(h,d,c){d=hj(h,d,c);return ij(d)}function ij(h){function d(g){clearTimeout(l);g instanceof Error||(g=Error(""+(g||"Unknown XMLHttpRequest Error")));g.statusCode=0;var k=f;b||(b=!0,h.callback(g,k,void 0))}function c(){if(!n){clearTimeout(l);var g=h.useXDR&&
void 0===a.status?200:1223===a.status?204:a.status;var k=f,u=null;if(0!==g){if(a.response)k=a.response;else if(!(k=a.responseText))a:{try{if("document"===a.responseType){k=a.responseXML;break a}var y=a.responseXML&&"parsererror"===a.responseXML.documentElement.nodeName;if(""===a.responseType&&!y){k=a.responseXML;break a}}catch(A){}k=null}if(m)try{k=JSON.parse(k)}catch(A){}k={body:k,statusCode:g,method:t,headers:{},url:q,rawRequest:a};a.getAllResponseHeaders&&(k.headers=Yn(a.getAllResponseHeaders()))}else u=
Error("Internal XMLHttpRequest Error");g=k.body;b||(b=!0,h.callback(u,k,g))}}if("undefined"===typeof h.callback)throw Error("callback argument missing");var b=!1,a=h.xhr||null;a||(a=h.cors||h.useXDR?new ec.XDomainRequest:new ec.XMLHttpRequest);var e,n,q=a.url=h.uri||h.url,t=a.method=h.method||"GET",v=h.body||h.data,r=a.headers=h.headers||{},p=!!h.sync,m=!1,l,f={body:void 0,headers:{},statusCode:0,method:t,url:q,rawRequest:a};"json"in h&&!1!==h.json&&(m=!0,r.accept||r.Accept||(r.Accept="application/json"),
"GET"!==t&&"HEAD"!==t&&(r["content-type"]||r["Content-Type"]||(r["Content-Type"]="application/json"),v=JSON.stringify(!0===h.json?v:h.json)));a.onreadystatechange=function(){4===a.readyState&&setTimeout(c,0)};a.onload=c;a.onerror=d;a.onprogress=function(){};a.onabort=function(){n=!0};a.ontimeout=d;a.open(t,q,!p,h.username,h.password);p||(a.withCredentials=!!h.withCredentials);!p&&0<h.timeout&&(l=setTimeout(function(){if(!n){n=!0;a.abort("timeout");var g=Error("XMLHttpRequest timeout");g.code="ETIMEDOUT";
d(g)}},h.timeout));if(a.setRequestHeader)for(e in r)r.hasOwnProperty(e)&&a.setRequestHeader(e,r[e]);else if(h.headers&&!Wn(h.headers))throw Error("Headers cannot be set on an XDomainRequest object");"responseType"in h&&(a.responseType=h.responseType);"beforeSend"in h&&"function"===typeof h.beforeSend&&h.beforeSend(a);a.send(v||null);return a}function Zn(){}function Pb(h,d){this.name="ParsingError";this.code=h.code;this.message=d||h.message}function pg(h){h=h.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);
if(!h)return null;if(h[3]){var d=h[3].replace(":","");return 3600*(h[1]|0)+60*(h[2]|0)+(d|0)+(h[4]|0)/1E3}return 59<h[1]?3600*(h[1]|0)+60*(h[2]|0)+(h[4]|0)/1E3:60*(h[1]|0)+(h[2]|0)+(h[4]|0)/1E3}function Wd(){this.values=qg(null)}function Xd(h,d,c,b){h=b?h.split(b):[h];for(var a in h)"string"===typeof h[a]&&(b=h[a].split(c),2===b.length&&d(b[0],b[1]))}function $n(h,d,c){function b(){var n=pg(h);if(null===n)throw new Pb(Pb.Errors.BadTimeStamp,"Malformed timestamp: "+e);h=h.replace(/^[^\sa-zA-Z-]+/,
"");return n}function a(){h=h.replace(/^\s+/,"")}var e=h;a();d.startTime=b();a();if("--\x3e"!==h.substr(0,3))throw new Pb(Pb.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+e);h=h.substr(3);a();d.endTime=b();a();(function(n,q){var t=new Wd;Xd(n,function(v,r){switch(v){case "region":for(var p=c.length-1;0<=p;p--)if(c[p].id===r){t.set(v,c[p].region);break}break;case "vertical":t.alt(v,r,["rl","lr"]);break;case "line":r=r.split(",");p=r[0];t.integer(v,p);t.percent(v,
p)?t.set("snapToLines",!1):null;t.alt(v,p,["auto"]);2===r.length&&t.alt("lineAlign",r[1],["start","center","end"]);break;case "position":r=r.split(",");t.percent(v,r[0]);2===r.length&&t.alt("positionAlign",r[1],["start","center","end"]);break;case "size":t.percent(v,r);break;case "align":t.alt(v,r,["start","center","end","left","right"])}},/:/,/\s/);q.region=t.get("region",null);q.vertical=t.get("vertical","");try{q.line=t.get("line","auto")}catch(v){}q.lineAlign=t.get("lineAlign","start");q.snapToLines=
t.get("snapToLines",!0);q.size=t.get("size",100);try{q.align=t.get("align","center")}catch(v){q.align=t.get("align","middle")}try{q.position=t.get("position","auto")}catch(v){q.position=t.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},q.align)}q.positionAlign=t.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},q.align)})(h,d)}function jj(h,d){function c(){if(!d)return null;var p=d.match(/^([^<]*)(<[^>]*>?)?/);p=p[1]?p[1]:
p[2];d=d.substr(p.length);return p}function b(p){rg.innerHTML=p;p=rg.textContent;rg.textContent="";return p}function a(p,m){var l=ao[p];if(!l)return null;l=h.document.createElement(l);(p=bo[p])&&m&&(l[p]=m.trim());return l}for(var e=h.document.createElement("div"),n=e,q,t=[];null!==(q=c());)if("<"===q[0])if("/"===q[1])t.length&&t[t.length-1]===q.substr(2).replace(">","")&&(t.pop(),n=n.parentNode);else{var v=pg(q.substr(1,q.length-2));if(v){var r=h.document.createProcessingInstruction("timestamp",
v);n.appendChild(r)}else if(q=q.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/))!(r=a(q[1],q[3]))||kj[r.localName]&&kj[r.localName]!==n.localName||(q[2]&&(v=q[2].split("."),v.forEach(function(p){var m=/^bg_/.test(p);p=m?p.slice(3):p;lj.hasOwnProperty(p)&&(r.style[m?"background-color":"color"]=lj[p])}),r.className=v.join(" ")),t.push(q[1]),n.appendChild(r),n=r)}else n.appendChild(h.document.createTextNode(b(q)));return e}function co(h){for(var d=0;d<mj.length;d++){var c=mj[d];if(h>=c[0]&&
h<=c[1])return!0}return!1}function eo(h){function d(n,q){for(var t=q.childNodes.length-1;0<=t;t--)n.push(q.childNodes[t])}function c(n){if(!n||!n.length)return null;var q=n.pop(),t=q.textContent||q.innerText;if(t)return(q=t.match(/^.*(\n|\r)/))?(n.length=0,q[0]):t;if("ruby"===q.tagName)return c(n);if(q.childNodes)return d(n,q),c(n)}var b=[],a="";if(!h||!h.childNodes)return"ltr";for(d(b,h);a=c(b);)for(var e=0;e<a.length;e++)if(h=a.charCodeAt(e),co(h))return"rtl";return"ltr"}function sg(){}function Pe(h,
d,c){this.cue=d;this.cueDiv=jj(h,d.text);var b={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===d.vertical?"horizontal-tb":"lr"===d.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(b,this.cueDiv);this.div=h.document.createElement("div");b={direction:eo(this.cueDiv),writingMode:""===d.vertical?"horizontal-tb":"lr"===d.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",
textAlign:"middle"===d.align?"center":d.align,font:c.font,whiteSpace:"pre-line",position:"absolute"};this.applyStyles(b);this.div.appendChild(this.cueDiv);h=0;switch(d.positionAlign){case "start":h=d.position;break;case "center":h=d.position-d.size/2;break;case "end":h=d.position-d.size}""===d.vertical?this.applyStyles({left:this.formatStyle(h,"%"),width:this.formatStyle(d.size,"%")}):this.applyStyles({top:this.formatStyle(h,"%"),height:this.formatStyle(d.size,"%")});this.move=function(a){this.applyStyles({top:this.formatStyle(a.top,
"px"),bottom:this.formatStyle(a.bottom,"px"),left:this.formatStyle(a.left,"px"),right:this.formatStyle(a.right,"px"),height:this.formatStyle(a.height,"px"),width:this.formatStyle(a.width,"px")})}}function Db(h){if(h.div){var d=h.div.offsetHeight;var c=h.div.offsetWidth;var b=h.div.offsetTop;var a=(a=h.div.childNodes)&&(a=a[0])&&a.getClientRects&&a.getClientRects();h=h.div.getBoundingClientRect();var e=a?Math.max(a[0]&&a[0].height||0,h.height/a.length):0}this.left=h.left;this.right=h.right;this.top=
h.top||b;this.height=h.height||d;this.bottom=h.bottom||b+(h.height||d);this.width=h.width||c;this.lineHeight=void 0!==e?e:h.lineHeight}function qd(){}function tg(h){return"string"!==typeof h?!1:fo[h.toLowerCase()]?h.toLowerCase():!1}function nj(h,d,c){this.hasBeenReset=!1;var b="",a=!1,e=h,n=d,q=c,t=null,v="",r=!0,p="auto",m="start",l="auto",f="auto",g=100,k="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return b},set:function(u){b=""+u}},pauseOnExit:{enumerable:!0,get:function(){return a},
set:function(u){a=!!u}},startTime:{enumerable:!0,get:function(){return e},set:function(u){if("number"!==typeof u)throw new TypeError("Start time must be set to a number.");e=u;this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return n},set:function(u){if("number"!==typeof u)throw new TypeError("End time must be set to a number.");n=u;this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return q},set:function(u){q=""+u;this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return t},
set:function(u){t=u;this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return v},set:function(u){u="string"!==typeof u?!1:go[u.toLowerCase()]?u.toLowerCase():!1;if(!1===u)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");v=u;this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return r},set:function(u){r=!!u;this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return p},set:function(u){if("number"!==typeof u&&"auto"!==u)throw new SyntaxError("Line: an invalid number or illegal string was specified.");
p=u;this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return m},set:function(u){(u=tg(u))?(m=u,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return l},set:function(u){if(0>u||100<u)throw Error("Position must be between 0 and 100.");l=u;this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return f},set:function(u){(u=tg(u))?(f=u,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},
size:{enumerable:!0,get:function(){return g},set:function(u){if(0>u||100<u)throw Error("Size must be between 0 and 100.");g=u;this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return k},set:function(u){u=tg(u);if(!u)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");k=u;this.hasBeenReset=!0}}});this.displayState=void 0}function Yd(h){return"number"===typeof h&&0<=h&&100>=h}function ho(h,d,c){h.setTimeout(function(){return $c(d,ad[d.type],c,h)},1)}function io(h,
d){h.forEach(function(c){return c.setTech&&c.setTech(d)})}function oj(h,d,c,b){void 0===b&&(b=null);var a="call"+cb(c);a=h.reduce(ug(a),b);d=(b=a===Qe)?null:d[c](a);for(a=h.length-1;0<=a;a--){var e=h[a];if(e[c])e[c](b,d)}return d}function ug(h){return function(d,c){return d===Qe?Qe:c[h]?c[h](d):d}}function jo(h,d){var c=vg[h.id()],b=null;if(void 0===c||null===c)return b=d(h),vg[h.id()]=[[d,b]],b;for(var a=0;a<c.length;a++){var e=c[a];e[0]===d&&(b=e[1])}null===b&&(b=d(h),c.push([d,b]));return b}function $c(h,
d,c,b,a,e){void 0===h&&(h={});void 0===d&&(d=[]);void 0===a&&(a=[]);void 0===e&&(e=!1);var n=d[0],q=d.slice(1);if("string"===typeof n)$c(h,ad[n],c,b,a,e);else if(n){var t=jo(b,n);if(!t.setSource)return a.push(t),$c(h,q,c,b,a,e);t.setSource(Q({},h),function(v,r){if(v)return $c(h,q,c,b,a,e);a.push(t);$c(r,h.type===r.type?q:ad[r.type],c,b,a,e)})}else q.length?$c(h,q,c,b,a,e):e?c(h,a):$c(h,ad["*"],c,b,a,!0)}function pj(h){if(!h.type){var d=Re(h.src);d&&(h.type=d)}return h}function wg(h,d){if(4===h.length)h=
h[1]+h[1]+h[2]+h[2]+h[3]+h[3];else if(7===h.length)h=h.slice(1);else throw Error("Invalid color code provided, "+h+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(h.slice(0,2),16)+","+parseInt(h.slice(2,4),16)+","+parseInt(h.slice(4,6),16)+","+d+")"}function rd(h,d){void 0===d&&(d=h);return xg(h,d)}function qj(h,d){d&&(h=d(h));if(h&&"none"!==h)return h}function U(h,d,c){var b=U.getPlayer(h);if(b)return d&&Ka.warn('Player "'+h+'" is already initialised. Options will not be applied.'),
c&&b.ready(c),b;var a="string"===typeof h?Lc("#"+rj(h)):h;if(!Ua(a))throw new TypeError("The element or ID supplied is not valid. (videojs)");a.ownerDocument.defaultView&&a.ownerDocument.body.contains(a)||Ka.warn("The element supplied is not included in the DOM");d=d||{};U.hooks("beforesetup").forEach(function(e){e=e(a,Wa(d));!aa(e)||Array.isArray(e)?Ka.error("please return an object in beforesetup hooks"):d=Wa(d,e)});b=new (ja.getComponent("Player"))(a,d,c);U.hooks("setup").forEach(function(e){return e(b)});
return b}function sj(h){h=Mc.atob?Mc.atob(h):Buffer.from(h,"base64").toString("binary");for(var d=new Uint8Array(h.length),c=0;c<h.length;c++)d[c]=h.charCodeAt(c);return d}function tj(){}function ko(h,d,c,b,a){function e(ea){var ka=ea.slice(1,-1);if(ka in c)return c[ka];if("#"===ka.charAt(0))return ea=parseInt(ka.substr(1).replace("x","0x")),65535<ea?(ea-=65536,ea=String.fromCharCode(55296+(ea>>10),56320+(ea&1023))):ea=String.fromCharCode(ea),ea;a.error("entity not found:"+ea);return ea}function n(ea){if(ea>
l){var ka=h.substring(l,ea).replace(/&#?\w+;/g,e);p&&q(l);b.characters(ka,0,ea-l);l=ea}}function q(ea,ka){for(;ea>=v&&(ka=r.exec(h));)t=ka.index,v=t+ka[0].length,p.lineNumber++;p.columnNumber=ea-t+1}var t=0,v=0,r=/.*(?:\r\n?|\n)|.*$/g,p=b.locator;d=[{currentNSMap:d}];for(var m={},l=0;;){try{var f=h.indexOf("<",l);if(0>f){if(!h.substr(l).match(/^\s*$/)){var g=b.doc,k=g.createTextNode(h.substr(l));g.appendChild(k);b.currentElement=k}break}f>l&&n(f);switch(h.charAt(f+1)){case "/":var u=h.indexOf(">",
f+3),y=h.substring(f+2,u),A=d.pop();0>u?(y=h.substring(f+2).replace(/[\s<].*/,""),a.error("end tag name: "+y+" is not complete:"+A.tagName),u=f+1+y.length):y.match(/\s</)&&(y=y.replace(/[\s<].*/,""),a.error("end tag name: "+y+" maybe not complete"),u=f+1+y.length);var H=A.localNSMap,S=A.tagName==y;if(S||A.tagName&&A.tagName.toLowerCase()==y.toLowerCase()){b.endElement(A.uri,A.localName,y);if(H)for(var W in H)b.endPrefixMapping(W);S||a.fatalError("end tag name: "+y+" is not match the current start tagName:"+
A.tagName)}else d.push(A);u++;break;case "?":p&&q(f);u=lo(h,f,b);break;case "!":p&&q(f);u=mo(h,f,b,a);break;default:p&&q(f);var M=new uj,T=d[d.length-1].currentNSMap;u=no(h,f,M,T,e,a);var R=M.length;!M.closed&&oo(h,u,M.tagName,m)&&(M.closed=!0,c.nbsp||a.warning("unclosed xml attribute"));if(p&&R){for(var oa=vj(p,{}),pa=0;pa<R;pa++){var Ba=M[pa];q(Ba.offset);Ba.locator=vj(p,{})}b.locator=oa;wj(M,b,T)&&d.push(M);b.locator=p}else wj(M,b,T)&&d.push(M);"http://www.w3.org/1999/xhtml"!==M.uri||M.closed?
u++:u=po(h,u,M.tagName,e,b)}}catch(ea){a.error("element parse error: "+ea),u=-1}u>l?l=u:n(Math.max(f,l)+1)}}function vj(h,d){d.lineNumber=h.lineNumber;d.columnNumber=h.columnNumber;return d}function no(h,d,c,b,a,e){for(var n,q,t=++d,v=0;;){var r=h.charAt(t);switch(r){case "=":if(1===v)n=h.slice(d,t),v=3;else if(2===v)v=3;else throw Error("attribute equal must after attrName");break;case "'":case '"':if(3===v||1===v)if(1===v&&(e.warning('attribute value must after "="'),n=h.slice(d,t)),d=t+1,t=h.indexOf(r,
d),0<t)q=h.slice(d,t).replace(/&#?\w+;/g,a),c.add(n,q,d-1),v=5;else throw Error("attribute value no end '"+r+"' match");else if(4==v)q=h.slice(d,t).replace(/&#?\w+;/g,a),c.add(n,q,d),e.warning('attribute "'+n+'" missed start quot('+r+")!!"),d=t+1,v=5;else throw Error('attribute value must after "="');break;case "/":switch(v){case 0:c.setTagName(h.slice(d,t));case 5:case 6:case 7:v=7,c.closed=!0;case 4:case 1:case 2:break;default:throw Error("attribute invalid close char('/')");}break;case "":return e.error("unexpected end of input"),
0==v&&c.setTagName(h.slice(d,t)),t;case ">":switch(v){case 0:c.setTagName(h.slice(d,t));case 5:case 6:case 7:break;case 4:case 1:q=h.slice(d,t),"/"===q.slice(-1)&&(c.closed=!0,q=q.slice(0,-1));case 2:2===v&&(q=n);4==v?(e.warning('attribute "'+q+'" missed quot(")!!'),c.add(n,q.replace(/&#?\w+;/g,a),d)):("http://www.w3.org/1999/xhtml"===b[""]&&q.match(/^(?:disabled|checked|selected)$/i)||e.warning('attribute "'+q+'" missed value!! "'+q+'" instead!!'),c.add(q,q,d));break;case 3:throw Error("attribute value missed!!");
}return t;case "\u0080":r=" ";default:if(" ">=r)switch(v){case 0:c.setTagName(h.slice(d,t));v=6;break;case 1:n=h.slice(d,t);v=2;break;case 4:q=h.slice(d,t).replace(/&#?\w+;/g,a),e.warning('attribute "'+q+'" missed quot(")!!'),c.add(n,q,d);case 5:v=6}else switch(v){case 2:c.tagName;"http://www.w3.org/1999/xhtml"===b[""]&&n.match(/^(?:disabled|checked|selected)$/i)||e.warning('attribute "'+n+'" missed value!! "'+n+'" instead2!!');c.add(n,n,d);d=t;v=1;break;case 5:e.warning('attribute space is required"'+
n+'"!!');case 6:v=1;d=t;break;case 3:v=4;d=t;break;case 7:throw Error("elements closed character '/' and '>' must be connected to");}}t++}}function wj(h,d,c){for(var b=h.tagName,a=null,e=h.length;e--;){var n=h[e],q=n.qName,t=n.value,v=q.indexOf(":");if(0<v){var r=n.prefix=q.slice(0,v);v=q.slice(v+1);r="xmlns"===r&&v}else v=q,r="xmlns"===q&&"";n.localName=v;if(!1!==r){if(null==a){a={};v=void 0;q=c;var p=c={};for(v in q)p[v]=q[v]}c[r]=a[r]=t;n.uri="http://www.w3.org/2000/xmlns/";d.startPrefixMapping(r,
t)}}for(e=h.length;e--;)if(n=h[e],r=n.prefix)"xml"===r&&(n.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==r&&(n.uri=c[r||""]);v=b.indexOf(":");0<v?(r=h.prefix=b.slice(0,v),v=h.localName=b.slice(v+1)):(r=null,v=h.localName=b);e=h.uri=c[r||""];d.startElement(e,v,b,h);if(h.closed){if(d.endElement(e,v,b),a)for(r in a)d.endPrefixMapping(r)}else return h.currentNSMap=c,h.localNSMap=a,!0}function po(h,d,c,b,a){if(/^(?:script|textarea)$/i.test(c)){var e=h.indexOf("</"+c+">",d);h=h.substring(d+1,e);
if(/[&<]/.test(h)){if(/^script$/i.test(c))return a.characters(h,0,h.length),e;h=h.replace(/&#?\w+;/g,b);a.characters(h,0,h.length);return e}}return d+1}function oo(h,d,c,b){var a=b[c];null==a&&(a=h.lastIndexOf("</"+c+">"),a<d&&(a=h.lastIndexOf("</"+c)),b[c]=a);return a<d}function mo(h,d,c,b){switch(h.charAt(d+2)){case "-":if("-"===h.charAt(d+3)){var a=h.indexOf("--\x3e",d+4);if(a>d)return c.comment(h,d+4,a-d-4),a+3;b.error("Unclosed comment")}break;default:if("CDATA["==h.substr(d+3,6))return a=h.indexOf("]]\x3e",
d+9),c.startCDATA(),c.characters(h,d+9,a-d-9),c.endCDATA(),a+3;a:{b=[];a=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;a.lastIndex=d;for(a.exec(h);d=a.exec(h);)if(b.push(d),d[1]){a=b;break a}a=void 0}var e=a.length;if(1<e&&/!doctype/i.test(a[0][0]))return h=a[1][0],b=d=!1,3<e&&(/^public$/i.test(a[2][0])?(d=a[3][0],b=4<e&&a[4][0]):/^system$/i.test(a[2][0])&&(b=a[3][0])),a=a[e-1],c.startDTD(h,d&&d.replace(/^(['"])(.*?)\1$/,"$2"),b&&b.replace(/^(['"])(.*?)\1$/,"$2")),c.endDTD(),a.index+a[0].length}return-1}
function lo(h,d,c){var b=h.indexOf("?>",d);return b&&(h=h.substring(d,b).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/))?(h[0].length,c.processingInstruction(h[1],h[2]),b+2):-1}function uj(h){}function Zd(h,d){for(var c in h)d[c]=h[c]}function Ib(h,d){var c=h.prototype;if(!(c instanceof d)){var b=function(){};b.prototype=d.prototype;b=new b;Zd(c,b);h.prototype=c=b}c.constructor!=h&&("function"!=typeof h&&console.error("unknow Class:"+h),c.constructor=h)}function sd(h,d){if(d instanceof Error)var c=d;else c=
this,Error.call(this,nb[h]),this.message=nb[h],Error.captureStackTrace&&Error.captureStackTrace(this,sd);c.code=h;d&&(this.message=this.message+": "+d);return c}function Nc(){}function td(h,d){this._node=h;this._refresh=d;yg(this)}function yg(h){var d=h._node._inc||h._node.ownerDocument._inc;if(h._inc!=d){var c=h._refresh(h._node);xj(h,"length",c.length);Zd(c,h);h._inc=d}}function Se(){}function yj(h,d){for(var c=h.length;c--;)if(h[c]===d)return c}function zj(h,d,c,b){b?d[yj(d,b)]=c:d[d.length++]=
c;h&&(c.ownerElement=h,d=h.ownerDocument)&&(b&&Aj(d,h,b),d&&d._inc++,"http://www.w3.org/2000/xmlns/"==c.namespaceURI&&(h._nsMap[c.prefix?c.localName:""]=c.value))}function Bj(h,d,c){var b=yj(d,c);if(0<=b){for(var a=d.length-1;b<a;)d[b]=d[++b];d.length=a;h&&(d=h.ownerDocument)&&(Aj(d,h,c),c.ownerElement=null)}else throw sd(qo,Error(h.tagName+"@"+c));}function Cj(h){this._features={};if(h)for(var d in h)this._features=h[d]}function Eb(){}function Dj(h){return"<"==h&&"&lt;"||">"==h&&"&gt;"||"&"==h&&
"&amp;"||'"'==h&&"&quot;"||"&#"+h.charCodeAt()+";"}function $d(h,d){if(d(h))return!0;if(h=h.firstChild){do if($d(h,d))return!0;while(h=h.nextSibling)}}function ae(){}function Aj(h,d,c,b){h&&h._inc++;"http://www.w3.org/2000/xmlns/"==c.namespaceURI&&delete d._nsMap[c.prefix?c.localName:""]}function zg(h,d,c){if(h&&h._inc)if(h._inc++,h=d.childNodes,c)h[h.length++]=c;else{d=d.firstChild;for(c=0;d;)h[c++]=d,d=d.nextSibling;h.length=c}}function Ej(h,d){var c=d.previousSibling,b=d.nextSibling;c?c.nextSibling=
b:h.firstChild=b;b?b.previousSibling=c:h.lastChild=c;zg(h.ownerDocument,h);return d}function Fj(h,d,c){var b=d.parentNode;b&&b.removeChild(d);if(d.nodeType===yc){b=d.firstChild;if(null==b)return d;var a=d.lastChild}else b=a=d;var e=c?c.previousSibling:h.lastChild;b.previousSibling=e;a.nextSibling=c;e?e.nextSibling=b:h.firstChild=b;null==c?h.lastChild=a:c.previousSibling=a;do b.parentNode=h;while(b!==a&&(b=b.nextSibling));zg(h.ownerDocument||h,h);d.nodeType==yc&&(d.firstChild=d.lastChild=null);return d}
function ud(){this._nsMap={}}function Te(){}function be(){}function Ag(){}function Bg(){}function Cg(){}function Dg(){}function Gj(){}function Hj(){}function Eg(){}function Ue(){}function Fg(){}function Ij(){}function Jj(h,d){var c=[],b=9==this.nodeType&&this.documentElement||this,a=b.prefix,e=b.namespaceURI;if(e&&null==a&&(a=b.lookupPrefix(e),null==a))var n=[{namespace:e,prefix:null}];vd(this,c,h,d,n);return c.join("")}function Kj(h,d,c){d=h.prefix||"";h=h.namespaceURI;if(!d&&!h||"xml"===d&&"http://www.w3.org/XML/1998/namespace"===
h||"http://www.w3.org/2000/xmlns/"==h)return!1;for(var b=c.length;b--;){var a=c[b];if(a.prefix==d)return a.namespace!=h}return!0}function vd(h,d,c,b,a){if(b)if(h=b(h)){if("string"==typeof h){d.push(h);return}}else return;switch(h.nodeType){case fc:a||(a=[]);a.length;var e=h.attributes,n=e.length,q=h.firstChild,t=h.tagName;c="http://www.w3.org/1999/xhtml"===h.namespaceURI||c;d.push("<",t);for(var v=0;v<n;v++){var r=e.item(v);"xmlns"==r.prefix?a.push({prefix:r.localName,namespace:r.value}):"xmlns"==
r.nodeName&&a.push({prefix:"",namespace:r.value})}for(v=0;v<n;v++){r=e.item(v);if(Kj(r,c,a)){var p=r.prefix||"",m=r.namespaceURI;d.push(p?" xmlns:"+p:" xmlns",'="',m,'"');a.push({prefix:p,namespace:m})}vd(r,d,c,b,a)}Kj(h,c,a)&&(p=h.prefix||"",m=h.namespaceURI,d.push(p?" xmlns:"+p:" xmlns",'="',m,'"'),a.push({prefix:p,namespace:m}));if(q||c&&!/^(?:meta|link|img|br|hr|input)$/i.test(t)){d.push(">");if(c&&/^script$/i.test(t))for(;q;)q.data?d.push(q.data):vd(q,d,c,b,a),q=q.nextSibling;else for(;q;)vd(q,
d,c,b,a),q=q.nextSibling;d.push("</",t,">")}else d.push("/>");break;case Lj:case yc:for(q=h.firstChild;q;)vd(q,d,c,b,a),q=q.nextSibling;break;case wd:return d.push(" ",h.name,'="',h.value.replace(/[<&"]/g,Dj),'"');case Ve:return d.push(h.data.replace(/[<&]/g,Dj));case Mj:return d.push("<![CDATA[",h.data,"]]\x3e");case Nj:return d.push("\x3c!--",h.data,"--\x3e");case Oj:c=h.publicId;b=h.systemId;d.push("<!DOCTYPE ",h.name);c?(d.push(' PUBLIC "',c),b&&"."!=b&&d.push('" "',b),d.push('">')):b&&"."!=b?
d.push(' SYSTEM "',b,'">'):((h=h.internalSubset)&&d.push(" [",h,"]"),d.push(">"));break;case Pj:return d.push("<?",h.target," ",h.data,"?>");case Qj:return d.push("&",h.nodeName,";");default:d.push("??",h.nodeName)}}function Rj(h,d,c){switch(d.nodeType){case fc:var b=d.cloneNode(!1);b.ownerDocument=h;case yc:break;case wd:c=!0}b||(b=d.cloneNode(!1));b.ownerDocument=h;b.parentNode=null;if(c)for(d=d.firstChild;d;)b.appendChild(Rj(h,d,c)),d=d.nextSibling;return b}function Gg(h,d,c){var b=new d.constructor;
for(e in d){var a=d[e];"object"!=typeof a&&a!=b[e]&&(b[e]=a)}d.childNodes&&(b.childNodes=new Nc);b.ownerDocument=h;switch(b.nodeType){case fc:var e=d.attributes;var n=b.attributes=new Se;a=e.length;n._ownerElement=b;for(n=0;n<a;n++)b.setAttributeNode(Gg(h,e.item(n),!0));break;case wd:c=!0}if(c)for(d=d.firstChild;d;)b.appendChild(Gg(h,d,c)),d=d.nextSibling;return b}function xj(h,d,c){h[d]=c}function Oc(){}var Jb="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==
typeof aj?aj:"undefined"!==typeof self?self:{},da="undefined"!==typeof window?window:"undefined"!==typeof Jb?Jb:"undefined"!==typeof self?self:{},Sj={},Tj="undefined"!==typeof Jb?Jb:"undefined"!==typeof window?window:{};if("undefined"!==typeof document)var Hg=document;else(Hg=Tj["__GLOBAL_DOCUMENT_CACHE@4"])||(Hg=Tj["__GLOBAL_DOCUMENT_CACHE@4"]=Sj);for(var qa=Hg,Oe={prefixed:!0},We=["requestFullscreen exitFullscreen fullscreenElement fullscreenEnabled fullscreenchange fullscreenerror fullscreen".split(" "),
"webkitRequestFullscreen webkitExitFullscreen webkitFullscreenElement webkitFullscreenEnabled webkitfullscreenchange webkitfullscreenerror -webkit-full-screen".split(" "),"mozRequestFullScreen mozCancelFullScreen mozFullScreenElement mozFullScreenEnabled mozfullscreenchange mozfullscreenerror -moz-full-screen".split(" "),"msRequestFullscreen msExitFullscreen msFullscreenElement msFullscreenEnabled MSFullscreenChange MSFullscreenError -ms-fullscreen".split(" ")],Uj=We[0],ce,Xe=0;Xe<We.length;Xe++)if(We[Xe][1]in
qa){ce=We[Xe];break}if(ce){for(var Ye=0;Ye<ce.length;Ye++)Oe[Uj[Ye]]=ce[Ye];Oe.prefixed=ce[0]!==Uj[0]}var Hb=[],Pn=function(h,d){return function(c,b,a){b=d.levels[b];var e=new RegExp("^("+b+")$");"log"!==c&&a.unshift(c.toUpperCase()+":");a.unshift(h+":");if(Hb){Hb.push([].concat(a));var n=Hb.length-1E3;Hb.splice(0,0<n?n:0)}if(da.console&&((n=da.console[c])||"debug"!==c||(n=da.console.info||da.console.log),n&&b&&e.test(c)))n[Array.isArray(a)?"apply":"call"](da.console,a)}},Ka=X("VIDEOJS"),Vj=Ka.createLogger,
Ne=w(function(h){function d(){h.exports=d=Object.assign||function(c){for(var b=1;b<arguments.length;b++){var a=arguments[b],e;for(e in a)Object.prototype.hasOwnProperty.call(a,e)&&(c[e]=a[e])}return c};return d.apply(this,arguments)}h.exports=d}),Qn=Object.prototype.toString,bj=function(h){return aa(h)?Object.keys(h):[]},ob=da.navigator&&da.navigator.userAgent||"",Wj=/AppleWebKit\/([\d.]+)/i.exec(ob),ro=Wj?parseFloat(Wj.pop()):null,Xj=/iPod/i.test(ob),so=function(){var h=ob.match(/OS (\d+)_/i);return h&&
h[1]?h[1]:null}(),Pc=/Android/i.test(ob),Ig=function(){var h=ob.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!h)return null;var d=h[1]&&parseFloat(h[1]),c=h[2]&&parseFloat(h[2]);return d&&c?parseFloat(h[1]+"."+h[2]):d?d:null}(),Yj=Pc&&5>Ig&&537>ro,Zj=/Firefox/i.test(ob),de=/Edg/i.test(ob),zc=!de&&(/Chrome/i.test(ob)||/CriOS/i.test(ob)),ak=function(){var h=ob.match(/(Chrome|CriOS)\/(\d+)/);return h&&h[2]?parseFloat(h[2]):null}(),ee=function(){var h=/MSIE\s(\d+)\.\d/.exec(ob);h=h&&parseFloat(h[1]);
!h&&/Trident\/7.0/i.test(ob)&&/rv:11.0/.test(ob)&&(h=11);return h}(),Jg=/Safari/i.test(ob)&&!zc&&!Pc&&!de,bk=/Windows/i.test(ob),xd=!(!Ha()||!("ontouchstart"in da||da.navigator.maxTouchPoints||da.DocumentTouch&&da.document instanceof da.DocumentTouch)),Kg=/iPad/i.test(ob)||Jg&&xd&&!/iPhone/i.test(ob),Lg=/iPhone/i.test(ob)&&!Kg,Ob=Lg||Kg||Xj,Ze=(Jg||Ob)&&!zc,to={__proto__:null,IS_IPOD:Xj,IOS_VERSION:so,IS_ANDROID:Pc,ANDROID_VERSION:Ig,IS_NATIVE_ANDROID:Yj,IS_FIREFOX:Zj,IS_EDGE:de,IS_CHROME:zc,CHROME_VERSION:ak,
IE_VERSION:ee,IS_SAFARI:Jg,IS_WINDOWS:bk,TOUCH_ENABLED:xd,IS_IPAD:Kg,IS_IPHONE:Lg,IS_IOS:Ob,IS_ANY_SAFARI:Ze},Lc=ua("querySelector"),ck=ua("querySelectorAll"),dk={__proto__:null,isReal:Ha,isEl:Ua,isInFrame:ma,createEl:Aa,textContent:tb,prependTo:Ga,hasClass:Fa,addClass:Va,removeClass:tc,toggleClass:Be,setAttributes:Ce,getAttributes:cc,getAttribute:function(h,d){return h.getAttribute(d)},setAttribute:function(h,d,c){h.setAttribute(d,c)},removeAttribute:function(h,d){h.removeAttribute(d)},blockTextSelection:De,
unblockTextSelection:Ee,getBoundingClientRect:Nd,findPosition:zb,getPointerPosition:ub,isTextNode:Xc,emptyEl:Vb,normalizeContent:uc,appendContent:Od,insertContent:Fe,isSingleLeftClick:Ic,$:Lc,doubleDollar:ck},cj=!1,mg,Rn=function(){if(Ha()&&!1!==mg.options.autoSetup){var h=Array.prototype.slice.call(qa.getElementsByTagName("video")),d=Array.prototype.slice.call(qa.getElementsByTagName("audio")),c=Array.prototype.slice.call(qa.getElementsByTagName("video-js"));if((h=h.concat(d,c))&&0<h.length)for(d=
0,c=h.length;d<c;d++){var b=h[d];if(b&&b.getAttribute)void 0===b.player&&null!==b.getAttribute("data-setup")&&mg(b);else{Pd(1);break}}else cj||Pd(1)}};Ha()&&("complete"===qa.readyState?Qd():da.addEventListener("load",Qd));var ek=function(h){var d=qa.createElement("style");d.className=h;return d},fk=function(h,d){h.styleSheet?h.styleSheet.cssText=d:h.textContent=d},Jc=3,gk;da.WeakMap||(gk=function(){function h(){this.vdata="vdata"+Math.floor(da.performance&&da.performance.now()||Date.now());this.data=
{}}var d=h.prototype;d.set=function(c,b){var a=c[this.vdata]||Jc++;c[this.vdata]||(c[this.vdata]=a);this.data[a]=b;return this};d.get=function(c){var b=c[this.vdata];if(b)return this.data[b];Ka("We have no data for this element",c)};d.has=function(c){return c[this.vdata]in this.data};d["delete"]=function(c){var b=c[this.vdata];b&&(delete this.data[b],delete c[this.vdata])};return h}());var Bb=da.WeakMap?new WeakMap:new gk,$e,Sn=function(){if("boolean"!==typeof $e){$e=!1;try{var h=Object.defineProperty({},
"passive",{get:function(){$e=!0}});da.addEventListener("test",null,h);da.removeEventListener("test",null,h)}catch(d){}}return $e},Tn=["touchstart","touchmove"],uo={__proto__:null,fixEvent:md,on:Ab,off:lb,trigger:vc,one:Yc,any:dj},Ma=function(h,d,c){d.guid||(d.guid=Jc++);h=d.bind(h);h.guid=c?c+"_"+d.guid:d.guid;return h},bd=function(h,d){var c=da.performance.now();return function(){var b=da.performance.now();b-c>=d&&(h.apply(void 0,arguments),c=b)}},vo=function(h,d,c,b){void 0===b&&(b=da);var a,e=
function(){var n=this,q=arguments,t=function(){t=a=null;c||h.apply(n,q)};!a&&c&&h.apply(n,q);b.clearTimeout(a);a=b.setTimeout(t,d)};e.cancel=function(){b.clearTimeout(a);a=null};return e},pb=function(){};pb.prototype.allowedEvents_={};pb.prototype.on=function(h,d){var c=this.addEventListener;this.addEventListener=function(){};Ab(this,h,d);this.addEventListener=c};pb.prototype.addEventListener=pb.prototype.on;pb.prototype.off=function(h,d){lb(this,h,d)};pb.prototype.removeEventListener=pb.prototype.off;
pb.prototype.one=function(h,d){var c=this.addEventListener;this.addEventListener=function(){};Yc(this,h,d);this.addEventListener=c};pb.prototype.any=function(h,d){var c=this.addEventListener;this.addEventListener=function(){};dj(this,h,d);this.addEventListener=c};pb.prototype.trigger=function(h){var d=h.type||h;"string"===typeof h&&(h={type:d});h=md(h);if(this.allowedEvents_[d]&&this["on"+d])this["on"+d](h);vc(this,h)};pb.prototype.dispatchEvent=pb.prototype.trigger;var fe;pb.prototype.queueTrigger=
function(h){var d=this;fe||(fe=new Map);var c=h.type||h,b=fe.get(this);b||(b=new Map,fe.set(this,b));var a=b.get(c);b["delete"](c);da.clearTimeout(a);a=da.setTimeout(function(){0===b.size&&(b=null,fe["delete"](d));d.trigger(h)},0);b.set(c,a)};var af=function(h){return"function"===typeof h.name?h.name():"string"===typeof h.name?h.name:h.name_?h.name_:h.constructor&&h.constructor.name?h.constructor.name:typeof h},xc=function(h){return h instanceof pb||!!h.eventBusEl_&&["on","one","off","trigger"].every(function(d){return"function"===
typeof h[d]})},wo=function(h,d){xc(h)?d():(h.eventedCallbacks||(h.eventedCallbacks=[]),h.eventedCallbacks.push(d))},Mg=function(h){return"string"===typeof h&&/\S/.test(h)||Array.isArray(h)&&!!h.length},bf=function(h,d,c){if(!h||!h.nodeName&&!xc(h))throw Error("Invalid target for "+af(d)+"#"+c+"; must be a DOM node or evented object.");},hk=function(h,d,c){if(!Mg(h))throw Error("Invalid event type for "+af(d)+"#"+c+"; must be a non-empty string or array.");},ik=function(h,d,c){if("function"!==typeof h)throw Error("Invalid listener for "+
af(d)+"#"+c+"; must be a function.");},Ng=function(h,d,c){var b=3>d.length||d[0]===h||d[0]===h.eventBusEl_;if(b){var a=h.eventBusEl_;3<=d.length&&d.shift();var e=d[0];d=d[1]}else a=d[0],e=d[1],d=d[2];bf(a,h,c);hk(e,h,c);ik(d,h,c);d=Ma(h,d);return{isTargetingSelf:b,target:a,type:e,listener:d}},cd=function(h,d,c,b){bf(h,h,d);if(h.nodeName)uo[d](h,c,b);else h[d](c,b)},Un={on:function(){for(var h=this,d=arguments.length,c=Array(d),b=0;b<d;b++)c[b]=arguments[b];d=Ng(this,c,"on");c=d.isTargetingSelf;var a=
d.target,e=d.type,n=d.listener;cd(a,"on",e,n);if(!c){var q=function(){return h.off(a,e,n)};q.guid=n.guid;d=function(){return h.off("dispose",q)};d.guid=n.guid;cd(this,"on","dispose",q);cd(a,"on","dispose",d)}},one:function(){for(var h=this,d=arguments.length,c=Array(d),b=0;b<d;b++)c[b]=arguments[b];d=Ng(this,c,"one");var a=d.target,e=d.type,n=d.listener;d.isTargetingSelf?cd(a,"one",e,n):(d=function t(){h.off(a,e,t);for(var v=arguments.length,r=Array(v),p=0;p<v;p++)r[p]=arguments[p];n.apply(null,r)},
d.guid=n.guid,cd(a,"one",e,d))},any:function(){for(var h=this,d=arguments.length,c=Array(d),b=0;b<d;b++)c[b]=arguments[b];d=Ng(this,c,"any");var a=d.target,e=d.type,n=d.listener;d.isTargetingSelf?cd(a,"any",e,n):(d=function t(){h.off(a,e,t);for(var v=arguments.length,r=Array(v),p=0;p<v;p++)r[p]=arguments[p];n.apply(null,r)},d.guid=n.guid,cd(a,"any",e,d))},off:function(h,d,c){!h||Mg(h)?lb(this.eventBusEl_,h,d):(bf(h,this,"off"),hk(d,this,"off"),ik(c,this,"off"),c=Ma(this,c),this.off("dispose",c),h.nodeName?
(lb(h,d,c),lb(h,"dispose",c)):xc(h)&&(h.off(d,c),h.off("dispose",c)))},trigger:function(h,d){bf(this.eventBusEl_,this,"trigger");if(!Mg(h&&"string"!==typeof h?h.type:h)){var c="Invalid event type for "+af(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.";if(h)(this.log||Ka).error(c);else throw Error(c);}return vc(this.eventBusEl_,h,d)}},Vn={state:{},setState:function(h){var d=this;"function"===typeof h&&(h=h());var c;Y(h,function(b,a){d.state[a]!==
b&&(c=c||{},c[a]={from:d.state[a],to:b});d.state[a]=b});c&&xc(this)&&this.trigger({changes:c,type:"statechanged"});return c}},cf=function(h){return"string"!==typeof h?h:h.replace(/./,function(d){return d.toLowerCase()})},cb=function(h){return"string"!==typeof h?h:h.replace(/./,function(d){return d.toUpperCase()})},xo=function(h,d){return cb(h)===cb(d)},yo=function(){function h(){this.map_={}}var d=h.prototype;d.has=function(c){return c in this.map_};d["delete"]=function(c){var b=this.has(c);delete this.map_[c];
return b};d.set=function(c,b){this.map_[c]=b;return this};d.forEach=function(c,b){for(var a in this.map_)c.call(b,this.map_[a],a,this)};return h}(),zo=da.Map?da.Map:yo,Ao=function(){function h(){this.set_={}}var d=h.prototype;d.has=function(c){return c in this.set_};d["delete"]=function(c){var b=this.has(c);delete this.set_[c];return b};d.add=function(c){this.set_[c]=1;return this};d.forEach=function(c,b){for(var a in this.set_)c.call(b,a,a,this)};return h}(),Og=da.Set?da.Set:Ao,ja=function(){function h(c,
b,a){this.player_=!c&&this.play?c=this:c;this.isDisposed_=!1;this.parentComponent_=null;this.options_=Wa({},this.options_);b=this.options_=Wa(this.options_,b);this.id_=b.id||b.el&&b.el.id;this.id_||(this.id_=(c&&c.id&&c.id()||"no_player")+"_component_"+Jc++);this.name_=b.name||null;b.el?this.el_=b.el:!1!==b.createEl&&(this.el_=this.createEl());!1!==b.evented&&(ng(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",
this.handleLanguagechange));ej(this,this.constructor.defaultState);this.children_=[];this.childIndex_={};this.childNameIndex_={};this.setTimeoutIds_=new Og;this.setIntervalIds_=new Og;this.rafIds_=new Og;this.namedRafs_=new zo;this.clearingTimersOnDispose_=!1;!1!==b.initChildren&&this.initChildren();this.ready(a);!1!==b.reportTouchActivity&&this.enableTouchActivity()}var d=h.prototype;d.dispose=function(){if(!this.isDisposed_){this.readyQueue_&&(this.readyQueue_.length=0);this.trigger({type:"dispose",
bubbles:!1});this.isDisposed_=!0;if(this.children_)for(var c=this.children_.length-1;0<=c;c--)this.children_[c].dispose&&this.children_[c].dispose();this.parentComponent_=this.childNameIndex_=this.childIndex_=this.children_=null;if(this.el_){this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_);if(Bb.has(this.el_))Bb["delete"](this.el_);this.el_=null}this.player_=null}};d.isDisposed=function(){return!!this.isDisposed_};d.player=function(){return this.player_};d.options=function(c){return c?
this.options_=Wa(this.options_,c):this.options_};d.el=function(){return this.el_};d.createEl=function(c,b,a){return Aa(c,b,a)};d.localize=function(c,b,a){void 0===a&&(a=c);var e=this.player_.language&&this.player_.language(),n=this.player_.languages&&this.player_.languages(),q=n&&n[e];e=e&&e.split("-")[0];n=n&&n[e];q&&q[c]?a=q[c]:n&&n[c]&&(a=n[c]);b&&(a=a.replace(/\{(\d+)\}/g,function(t,v){var r=v=b[v-1];"undefined"===typeof v&&(r=t);return r}));return a};d.handleLanguagechange=function(){};d.contentEl=
function(){return this.contentEl_||this.el_};d.id=function(){return this.id_};d.name=function(){return this.name_};d.children=function(){return this.children_};d.getChildById=function(c){return this.childIndex_[c]};d.getChild=function(c){if(c)return this.childNameIndex_[c]};d.getDescendant=function(){for(var c=arguments.length,b=Array(c),a=0;a<c;a++)b[a]=arguments[a];b=b.reduce(function(e,n){return e.concat(n)},[]);c=this;for(a=0;a<b.length;a++)if(c=c.getChild(b[a]),!c||!c.getChild)return;return c};
d.addChild=function(c,b,a){void 0===b&&(b={});void 0===a&&(a=this.children_.length);if("string"===typeof c){var e=cb(c);c=b.componentClass||e;b.name=e;var n=h.getComponent(c);if(!n)throw Error("Component "+c+" does not exist");if("function"!==typeof n)return null;b=new n(this.player_||this,b)}else b=c;b.parentComponent_&&b.parentComponent_.removeChild(b);this.children_.splice(a,0,b);b.parentComponent_=this;"function"===typeof b.id&&(this.childIndex_[b.id()]=b);if(e=e||b.name&&cb(b.name()))this.childNameIndex_[e]=
b,this.childNameIndex_[cf(e)]=b;"function"===typeof b.el&&b.el()&&(e=null,this.children_[a+1]&&(this.children_[a+1].el_?e=this.children_[a+1].el_:Ua(this.children_[a+1])&&(e=this.children_[a+1])),this.contentEl().insertBefore(b.el(),e));return b};d.removeChild=function(c){"string"===typeof c&&(c=this.getChild(c));if(c&&this.children_){for(var b=!1,a=this.children_.length-1;0<=a;a--)if(this.children_[a]===c){b=!0;this.children_.splice(a,1);break}b&&(c.parentComponent_=null,this.childIndex_[c.id()]=
null,this.childNameIndex_[cb(c.name())]=null,this.childNameIndex_[cf(c.name())]=null,(b=c.el())&&b.parentNode===this.contentEl()&&this.contentEl().removeChild(c.el()))}};d.initChildren=function(){var c=this,b=this.options_.children;if(b){var a=this.options_,e=h.getComponent("Tech");var n=Array.isArray(b)?b:Object.keys(b);n.concat(Object.keys(this.options_).filter(function(q){return!n.some(function(t){return"string"===typeof t?q===t:q===t.name})})).map(function(q){if("string"===typeof q){var t=q;q=
b[t]||c.options_[t]||{}}else t=q.name;return{name:t,opts:q}}).filter(function(q){return(q=h.getComponent(q.opts.componentClass||cb(q.name)))&&!e.isTech(q)}).forEach(function(q){var t=q.name;q=q.opts;void 0!==a[t]&&(q=a[t]);!1!==q&&(!0===q&&(q={}),q.playerOptions=c.options_.playerOptions,(q=c.addChild(t,q))&&(c[t]=q))})}};d.buildCSSClass=function(){return""};d.ready=function(c,b){void 0===b&&(b=!1);c&&(this.isReady_?b?c.call(this):this.setTimeout(c,1):(this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(c)))};
d.triggerReady=function(){this.isReady_=!0;this.setTimeout(function(){var c=this.readyQueue_;this.readyQueue_=[];c&&0<c.length&&c.forEach(function(b){b.call(this)},this);this.trigger("ready")},1)};d.$=function(c,b){return Lc(c,b||this.contentEl())};d.doubleDollar=function(c,b){return ck(c,b||this.contentEl())};d.hasClass=function(c){return Fa(this.el_,c)};d.addClass=function(c){Va(this.el_,c)};d.removeClass=function(c){tc(this.el_,c)};d.toggleClass=function(c,b){Be(this.el_,c,b)};d.show=function(){this.removeClass("vjs-hidden")};
d.hide=function(){this.addClass("vjs-hidden")};d.lockShowing=function(){this.addClass("vjs-lock-showing")};d.unlockShowing=function(){this.removeClass("vjs-lock-showing")};d.getAttribute=function(c){return this.el_.getAttribute(c)};d.setAttribute=function(c,b){this.el_.setAttribute(c,b)};d.removeAttribute=function(c){this.el_.removeAttribute(c)};d.width=function(c,b){return this.dimension("width",c,b)};d.height=function(c,b){return this.dimension("height",c,b)};d.dimensions=function(c,b){this.width(c,
!0);this.height(b)};d.dimension=function(c,b,a){if(void 0!==b){if(null===b||b!==b)b=0;-1!==(""+b).indexOf("%")||-1!==(""+b).indexOf("px")?this.el_.style[c]=b:this.el_.style[c]="auto"===b?"":b+"px";a||this.trigger("componentresize")}else{if(!this.el_)return 0;b=this.el_.style[c];a=b.indexOf("px");return-1!==a?parseInt(b.slice(0,a),10):parseInt(this.el_["offset"+cb(c)],10)}};d.currentDimension=function(c){if("width"!==c&&"height"!==c)throw Error("currentDimension only accepts width or height value");
var b=ya(this.el_,c);b=parseFloat(b);if(0===b||isNaN(b))c="offset"+cb(c),b=this.el_[c];return b};d.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}};d.currentWidth=function(){return this.currentDimension("width")};d.currentHeight=function(){return this.currentDimension("height")};d.focus=function(){this.el_.focus()};d.blur=function(){this.el_.blur()};d.handleKeyDown=function(c){this.player_&&(c.stopPropagation(),this.player_.handleKeyDown(c))};
d.handleKeyPress=function(c){this.handleKeyDown(c)};d.emitTapEvents=function(){var c=0,b=null,a;this.on("touchstart",function(n){1===n.touches.length&&(b={pageX:n.touches[0].pageX,pageY:n.touches[0].pageY},c=da.performance.now(),a=!0)});this.on("touchmove",function(n){if(1<n.touches.length)a=!1;else if(b){var q=n.touches[0].pageX-b.pageX;n=n.touches[0].pageY-b.pageY;10<Math.sqrt(q*q+n*n)&&(a=!1)}});var e=function(){a=!1};this.on("touchleave",e);this.on("touchcancel",e);this.on("touchend",function(n){b=
null;!0===a&&200>da.performance.now()-c&&(n.preventDefault(),this.trigger("tap"))})};d.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var c=Ma(this.player(),this.player().reportUserActivity),b;this.on("touchstart",function(){c();this.clearInterval(b);b=this.setInterval(c,250)});var a=function(e){c();this.clearInterval(b)};this.on("touchmove",c);this.on("touchend",a);this.on("touchcancel",a)}};d.setTimeout=function(c,b){var a=this;c=Ma(this,c);this.clearTimersOnDispose_();
var e=da.setTimeout(function(){if(a.setTimeoutIds_.has(e))a.setTimeoutIds_["delete"](e);c()},b);this.setTimeoutIds_.add(e);return e};d.clearTimeout=function(c){this.setTimeoutIds_.has(c)&&(this.setTimeoutIds_["delete"](c),da.clearTimeout(c));return c};d.setInterval=function(c,b){c=Ma(this,c);this.clearTimersOnDispose_();c=da.setInterval(c,b);this.setIntervalIds_.add(c);return c};d.clearInterval=function(c){this.setIntervalIds_.has(c)&&(this.setIntervalIds_["delete"](c),da.clearInterval(c));return c};
d.requestAnimationFrame=function(c){var b=this;if(!this.supportsRaf_)return this.setTimeout(c,1E3/60);this.clearTimersOnDispose_();c=Ma(this,c);var a=da.requestAnimationFrame(function(){if(b.rafIds_.has(a))b.rafIds_["delete"](a);c()});this.rafIds_.add(a);return a};d.requestNamedAnimationFrame=function(c,b){var a=this;if(!this.namedRafs_.has(c)){this.clearTimersOnDispose_();b=Ma(this,b);var e=this.requestAnimationFrame(function(){b();if(a.namedRafs_.has(c))a.namedRafs_["delete"](c)});this.namedRafs_.set(c,
e);return c}};d.cancelNamedAnimationFrame=function(c){this.namedRafs_.has(c)&&(this.cancelAnimationFrame(this.namedRafs_.get(c)),this.namedRafs_["delete"](c))};d.cancelAnimationFrame=function(c){if(!this.supportsRaf_)return this.clearTimeout(c);this.rafIds_.has(c)&&(this.rafIds_["delete"](c),da.cancelAnimationFrame(c));return c};d.clearTimersOnDispose_=function(){var c=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["namedRafs_","cancelNamedAnimationFrame"],
["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(b){var a=b[1];c[b[0]].forEach(function(e,n){return c[a](n)})});c.clearingTimersOnDispose_=!1}))};h.registerComponent=function(c,b){if("string"!==typeof c||!c)throw Error('Illegal component name, "'+c+'"; must be a non-empty string.');var a=h.getComponent("Tech");a=a&&a.isTech(b);var e=h===b||h.prototype.isPrototypeOf(b.prototype);if(a||!e)throw Error('Illegal component, "'+c+
'"; '+(a?"techs must be registered using Tech.registerTech()":"must be a Component subclass")+".");c=cb(c);h.components_||(h.components_={});a=h.getComponent("Player");if("Player"===c&&a&&a.players){var n=a.players;a=Object.keys(n);if(n&&0<a.length&&a.map(function(q){return n[q]}).every(Boolean))throw Error("Can not register Player component after player has been created.");}h.components_[c]=b;return h.components_[cf(c)]=b};h.getComponent=function(c){if(c&&h.components_)return h.components_[c]};return h}();
ja.prototype.supportsRaf_="function"===typeof da.requestAnimationFrame&&"function"===typeof da.cancelAnimationFrame;ja.registerComponent("Component",ja);var La=function(h){if(void 0===h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h};w(function(h){function d(c){"@babel/helpers - typeof";h.exports="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?d=function(b){return typeof b}:d=function(b){return b&&"function"===typeof Symbol&&b.constructor===
Symbol&&b!==Symbol.prototype?"symbol":typeof b};return d(c)}h.exports=d});w(function(h){function d(c){h.exports=d=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return d(c)}h.exports=d});var va=function(h,d){h.prototype=Object.create(d.prototype);h.prototype.constructor=h;h.__proto__=d};Cb.prototype.code=0;Cb.prototype.message="";Cb.prototype.status=null;Cb.errorTypes="MEDIA_ERR_CUSTOM MEDIA_ERR_ABORTED MEDIA_ERR_NETWORK MEDIA_ERR_DECODE MEDIA_ERR_SRC_NOT_SUPPORTED MEDIA_ERR_ENCRYPTED".split(" ");
Cb.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var yd=0;yd<Cb.errorTypes.length;yd++)Cb[Cb.errorTypes[yd]]=
yd,Cb.prototype[Cb.errorTypes[yd]]=yd;var Pg=function(h){return"kind label language id inBandMetadataTrackDispatchType mode src".split(" ").reduce(function(d,c,b){h[c]&&(d[c]=h[c]);return d},{cues:h.cues&&Array.prototype.map.call(h.cues,function(d){return{startTime:d.startTime,endTime:d.endTime,text:d.text,id:d.id}})})},jk={textTracksToJson:function(h){var d=h.doubleDollar("track"),c=Array.prototype.map.call(d,function(b){return b.track});return Array.prototype.map.call(d,function(b){var a=Pg(b.track);
b.src&&(a.src=b.src);return a}).concat(Array.prototype.filter.call(h.textTracks(),function(b){return-1===c.indexOf(b)}).map(Pg))},jsonToTextTracks:function(h,d){h.forEach(function(c){var b=d.addRemoteTextTrack(c).track;!c.src&&c.cues&&c.cues.forEach(function(a){return b.addCue(a)})});return d.textTracks()},trackToJson_:Pg},Ea=w(function(h,d){function c(q){if(q&&"object"===typeof q){var t=q.which||q.keyCode||q.charCode;t&&(q=t)}if("number"===typeof q)return e[q];q=String(q);if((t=b[q.toLowerCase()])||
(t=a[q.toLowerCase()]))return t;if(1===q.length)return q.charCodeAt(0)}c.isEventKey=function(q,t){if(q&&"object"===typeof q){q=q.which||q.keyCode||q.charCode;if(null===q||void 0===q)return!1;if("string"===typeof t){var v=b[t.toLowerCase()];if(v||(v=a[t.toLowerCase()]))return v===q}else if("number"===typeof t)return t===q;return!1}};d=h.exports=c;var b=d.code=d.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,
home:36,left:37,up:38,right:39,down:40,insert:45,"delete":46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},a=d.aliases={windows:91,"\u21e7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,"break":19,caps:20,"return":13,escape:27,spc:32,
spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(h=97;123>h;h++)b[String.fromCharCode(h)]=h-32;for(h=48;58>h;h++)b[h-48]=h;for(h=1;13>h;h++)b["f"+h]=h+111;for(h=0;10>h;h++)b["numpad "+h]=h+96;var e=d.names=d.title={};for(h in b)e[b[h]]=h;for(var n in a)b[n]=a[n]});Ea.code;Ea.codes;Ea.aliases;Ea.names;Ea.title;var zd=function(h){function d(b,a){b=h.call(this,b,a)||this;b.opened_=b.hasBeenOpened_=b.hasBeenFilled_=!1;b.closeable(!b.options_.uncloseable);b.content(b.options_.content);b.contentEl_=
Aa("div",{className:"vjs-modal-dialog-content"},{role:"document"});b.descEl_=Aa("p",{className:"vjs-modal-dialog-description vjs-control-text",id:b.el().getAttribute("aria-describedby")});tb(b.descEl_,b.description());b.el_.appendChild(b.descEl_);b.el_.appendChild(b.contentEl_);return b}va(d,h);var c=d.prototype;c.createEl=function(){return h.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),
role:"dialog"})};c.dispose=function(){this.previouslyActiveEl_=this.descEl_=this.contentEl_=null;h.prototype.dispose.call(this)};c.buildCSSClass=function(){return"vjs-modal-dialog vjs-hidden "+h.prototype.buildCSSClass.call(this)};c.label=function(){return this.localize(this.options_.label||"Modal Window")};c.description=function(){var b=this.options_.description||this.localize("This is a modal window.");this.closeable()&&(b+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button."));
return b};c.open=function(){if(!this.opened_){var b=this.player();this.trigger("beforemodalopen");this.opened_=!0;(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill();this.wasPlaying_=!b.paused();this.options_.pauseOnOpen&&this.wasPlaying_&&b.pause();this.on("keydown",this.handleKeyDown);this.hadControls_=b.controls();b.controls(!1);this.show();this.conditionalFocus_();this.el().setAttribute("aria-hidden","false");this.trigger("modalopen");this.hasBeenOpened_=!0}};c.opened=
function(b){if("boolean"===typeof b)this[b?"open":"close"]();return this.opened_};c.close=function(){if(this.opened_){var b=this.player();this.trigger("beforemodalclose");this.opened_=!1;this.wasPlaying_&&this.options_.pauseOnOpen&&b.play();this.off("keydown",this.handleKeyDown);this.hadControls_&&b.controls(!0);this.hide();this.el().setAttribute("aria-hidden","true");this.trigger("modalclose");this.conditionalBlur_();this.options_.temporary&&this.dispose()}};c.closeable=function(b){if("boolean"===
typeof b){b=this.closeable_=!!b;var a=this.getChild("closeButton");if(b&&!a){var e=this.contentEl_;this.contentEl_=this.el_;a=this.addChild("closeButton",{controlText:"Close Modal Dialog"});this.contentEl_=e;this.on(a,"close",this.close)}!b&&a&&(this.off(a,"close",this.close),this.removeChild(a),a.dispose())}return this.closeable_};c.fill=function(){this.fillWith(this.content())};c.fillWith=function(b){var a=this.contentEl(),e=a.parentNode,n=a.nextSibling;this.trigger("beforemodalfill");this.hasBeenFilled_=
!0;e.removeChild(a);this.empty();Fe(a,b);this.trigger("modalfill");n?e.insertBefore(a,n):e.appendChild(a);(b=this.getChild("closeButton"))&&e.appendChild(b.el_)};c.empty=function(){this.trigger("beforemodalempty");Vb(this.contentEl());this.trigger("modalempty")};c.content=function(b){"undefined"!==typeof b&&(this.content_=b);return this.content_};c.conditionalFocus_=function(){var b=qa.activeElement,a=this.player_.el_;this.previouslyActiveEl_=null;if(a.contains(b)||a===b)this.previouslyActiveEl_=
b,this.focus()};c.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)};c.handleKeyDown=function(b){b.stopPropagation();if(Ea.isEventKey(b,"Escape")&&this.closeable())b.preventDefault(),this.close();else if(Ea.isEventKey(b,"Tab")){for(var a=this.focusableEls_(),e=this.el_.querySelector(":focus"),n,q=0;q<a.length;q++)if(e===a[q]){n=q;break}qa.activeElement===this.el_&&(n=0);b.shiftKey&&0===n?(a[a.length-1].focus(),b.preventDefault()):
b.shiftKey||n!==a.length-1||(a[0].focus(),b.preventDefault())}};c.focusableEls_=function(){var b=this.el_.querySelectorAll("*");return Array.prototype.filter.call(b,function(a){return(a instanceof da.HTMLAnchorElement||a instanceof da.HTMLAreaElement)&&a.hasAttribute("href")||(a instanceof da.HTMLInputElement||a instanceof da.HTMLSelectElement||a instanceof da.HTMLTextAreaElement||a instanceof da.HTMLButtonElement)&&!a.hasAttribute("disabled")||a instanceof da.HTMLIFrameElement||a instanceof da.HTMLObjectElement||
a instanceof da.HTMLEmbedElement||a.hasAttribute("tabindex")&&-1!==a.getAttribute("tabindex")||a.hasAttribute("contenteditable")})};return d}(ja);zd.prototype.options_={pauseOnOpen:!0,temporary:!0};ja.registerComponent("ModalDialog",zd);var Ad=function(h){function d(b){void 0===b&&(b=[]);var a=h.call(this)||this;a.tracks_=[];Object.defineProperty(La(a),"length",{get:function(){return this.tracks_.length}});for(var e=0;e<b.length;e++)a.addTrack(b[e]);return a}va(d,h);var c=d.prototype;c.addTrack=function(b){var a=
this,e=this.tracks_.length;""+e in this||Object.defineProperty(this,e,{get:function(){return this.tracks_[e]}});-1===this.tracks_.indexOf(b)&&(this.tracks_.push(b),this.trigger({track:b,type:"addtrack",target:this}));b.labelchange_=function(){a.trigger({track:b,type:"labelchange",target:a})};xc(b)&&b.addEventListener("labelchange",b.labelchange_)};c.removeTrack=function(b){for(var a,e=0,n=this.length;e<n;e++)if(this[e]===b){a=this[e];a.off&&a.off();this.tracks_.splice(e,1);break}a&&this.trigger({track:a,
type:"removetrack",target:this})};c.getTrackById=function(b){for(var a=null,e=0,n=this.length;e<n;e++){var q=this[e];if(q.id===b){a=q;break}}return a};return d}(pb);Ad.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(var Bo in Ad.prototype.allowedEvents_)Ad.prototype["on"+Bo]=null;var Qg=function(h,d){for(var c=0;c<h.length;c++)Object.keys(h[c]).length&&d.id!==h[c].id&&(h[c].enabled=!1)},Co=function(h){function d(b){void 0===b&&
(b=[]);for(var a=b.length-1;0<=a;a--)if(b[a].enabled){Qg(b,b[a]);break}b=h.call(this,b)||this;b.changing_=!1;return b}va(d,h);var c=d.prototype;c.addTrack=function(b){var a=this;b.enabled&&Qg(this,b);h.prototype.addTrack.call(this,b);b.addEventListener&&(b.enabledChange_=function(){a.changing_||(a.changing_=!0,Qg(a,b),a.changing_=!1,a.trigger("change"))},b.addEventListener("enabledchange",b.enabledChange_))};c.removeTrack=function(b){h.prototype.removeTrack.call(this,b);b.removeEventListener&&b.enabledChange_&&
(b.removeEventListener("enabledchange",b.enabledChange_),b.enabledChange_=null)};return d}(Ad),Rg=function(h,d){for(var c=0;c<h.length;c++)Object.keys(h[c]).length&&d.id!==h[c].id&&(h[c].selected=!1)},Do=function(h){function d(b){void 0===b&&(b=[]);for(var a=b.length-1;0<=a;a--)if(b[a].selected){Rg(b,b[a]);break}b=h.call(this,b)||this;b.changing_=!1;Object.defineProperty(La(b),"selectedIndex",{get:function(){for(var e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set:function(){}});return b}
va(d,h);var c=d.prototype;c.addTrack=function(b){var a=this;b.selected&&Rg(this,b);h.prototype.addTrack.call(this,b);b.addEventListener&&(b.selectedChange_=function(){a.changing_||(a.changing_=!0,Rg(a,b),a.changing_=!1,a.trigger("change"))},b.addEventListener("selectedchange",b.selectedChange_))};c.removeTrack=function(b){h.prototype.removeTrack.call(this,b);b.removeEventListener&&b.selectedChange_&&(b.removeEventListener("selectedchange",b.selectedChange_),b.selectedChange_=null)};return d}(Ad),
kk=function(h){function d(){return h.apply(this,arguments)||this}va(d,h);var c=d.prototype;c.addTrack=function(b){var a=this;h.prototype.addTrack.call(this,b);this.queueChange_||(this.queueChange_=function(){return a.queueTrigger("change")});this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return a.trigger("selectedlanguagechange")});b.addEventListener("modechange",this.queueChange_);-1===["metadata","chapters"].indexOf(b.kind)&&b.addEventListener("modechange",this.triggerSelectedlanguagechange_)};
c.removeTrack=function(b){h.prototype.removeTrack.call(this,b);b.removeEventListener&&(this.queueChange_&&b.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&b.removeEventListener("modechange",this.triggerSelectedlanguagechange_))};return d}(Ad),Eo=function(){function h(c){void 0===c&&(c=[]);this.trackElements_=[];Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var b=0,a=c.length;b<a;b++)this.addTrackElement_(c[b])}var d=
h.prototype;d.addTrackElement_=function(c){var b=this.trackElements_.length;""+b in this||Object.defineProperty(this,b,{get:function(){return this.trackElements_[b]}});-1===this.trackElements_.indexOf(c)&&this.trackElements_.push(c)};d.getTrackElementByTrack_=function(c){for(var b,a=0,e=this.trackElements_.length;a<e;a++)if(c===this.trackElements_[a].track){b=this.trackElements_[a];break}return b};d.removeTrackElement_=function(c){for(var b=0,a=this.trackElements_.length;b<a;b++)if(c===this.trackElements_[b]){this.trackElements_[b].track&&
"function"===typeof this.trackElements_[b].track.off&&this.trackElements_[b].track.off();"function"===typeof this.trackElements_[b].off&&this.trackElements_[b].off();this.trackElements_.splice(b,1);break}};return h}(),lk=function(){function h(c){h.prototype.setCues_.call(this,c);Object.defineProperty(this,"length",{get:function(){return this.length_}})}var d=h.prototype;d.setCues_=function(c){var b=this.length||0,a=0,e=c.length;this.cues_=c;this.length_=c.length;c=function(n){""+n in this||Object.defineProperty(this,
""+n,{get:function(){return this.cues_[n]}})};if(b<e)for(a=b;a<e;a++)c.call(this,a)};d.getCueById=function(c){for(var b=null,a=0,e=this.length;a<e;a++){var n=this[a];if(n.id===c){b=n;break}}return b};return h}(),Fo={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},Go={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Ho={subtitles:"subtitles",
captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},mk={disabled:"disabled",hidden:"hidden",showing:"showing"},Sg=function(h){function d(c){void 0===c&&(c={});var b=h.call(this)||this;var a={id:c.id||"vjs_track_"+Jc++,kind:c.kind||"",language:c.language||""},e=c.label||"";c=function(q){Object.defineProperty(La(b),q,{get:function(){return a[q]},set:function(){}})};for(var n in a)c(n);Object.defineProperty(La(b),"label",{get:function(){return e},set:function(q){q!==
e&&(e=q,this.trigger("labelchange"))}});return b}va(d,h);return d}(pb),Tg=function(h){var d="protocol hostname port pathname search hash host".split(" "),c=qa.createElement("a");c.href=h;var b=""===c.host&&"file:"!==c.protocol;if(b){var a=qa.createElement("div");a.innerHTML='<a href="'+h+'"></a>';c=a.firstChild;a.setAttribute("style","display:none; position:absolute;");qa.body.appendChild(a)}h={};for(var e=0;e<d.length;e++)h[d[e]]=c[d[e]];"http:"===h.protocol&&(h.host=h.host.replace(/:80$/,""));"https:"===
h.protocol&&(h.host=h.host.replace(/:443$/,""));h.protocol||(h.protocol=da.location.protocol);b&&qa.body.removeChild(a);return h},nk=function(h){if(!h.match(/^https?:\/\//)){var d=qa.createElement("div");d.innerHTML='<a href="'+h+'">x</a>';h=d.firstChild.href}return h},Ug=function(h){return"string"===typeof h&&(h=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(h))?h.pop().toLowerCase():""},df=function(h,d){void 0===d&&(d=da.location);h=Tg(h);return(":"===h.protocol?d.protocol:
h.protocol)+h.host!==d.protocol+d.host},Io={__proto__:null,parseUrl:Tg,getAbsoluteURL:nk,getFileExtension:Ug,isCrossOrigin:df},ok="undefined"!==typeof window?window:"undefined"!==typeof Jb?Jb:"undefined"!==typeof self?self:{},Xn=Object.prototype.toString,Yn=function(h){var d={};if(!h)return d;h.trim().split("\n").forEach(function(c){var b=c.indexOf(":"),a=c.slice(0,b).trim().toLowerCase();c=c.slice(b+1).trim();"undefined"===typeof d[a]?d[a]=c:Array.isArray(d[a])?d[a].push(c):d[a]=[d[a],c]});return d};
ec.XMLHttpRequest=ok.XMLHttpRequest||Zn;ec.XDomainRequest="withCredentials"in new ec.XMLHttpRequest?ec.XMLHttpRequest:ok.XDomainRequest;(function(h,d){for(var c=0;c<h.length;c++)d(h[c])})("get put post patch head delete".split(" "),function(h){ec["delete"===h?"del":h]=function(d,c,b){c=hj(d,c,b);c.method=h.toUpperCase();return ij(c)}});ec["default"]=ec;var pk=function(h,d){var c=new da.WebVTT.Parser(da,da.vttjs,da.WebVTT.StringDecoder()),b=[];c.oncue=function(a){d.addCue(a)};c.onparsingerror=function(a){b.push(a)};
c.onflush=function(){d.trigger({type:"loadeddata",target:d})};c.parse(h);0<b.length&&(da.console&&da.console.groupCollapsed&&da.console.groupCollapsed("Text Track parsing errors for "+d.src),b.forEach(function(a){return Ka.error(a)}),da.console&&da.console.groupEnd&&da.console.groupEnd());c.flush()},qk=function(h,d){var c={uri:h};if(h=df(h))c.cors=h;if(h="use-credentials"===d.tech_.crossOrigin())c.withCredentials=h;ec(c,Ma(this,function(b,a,e){if(b)return Ka.error(b,a);d.loaded_=!0;"function"!==typeof da.WebVTT?
d.tech_&&d.tech_.any(["vttjsloaded","vttjserror"],function(n){if("vttjserror"===n.type)Ka.error("vttjs failed to load, stopping trying to process "+d.src);else return pk(e,d)}):pk(e,d)}))},ge=function(h){function d(b){void 0===b&&(b={});if(!b.tech)throw Error("A tech was not provided.");b=Wa(b,{kind:Ho[b.kind]||"subtitles",language:b.language||b.srclang||""});var a=mk[b.mode]||"disabled",e=b["default"];if("metadata"===b.kind||"chapters"===b.kind)a="hidden";var n=h.call(this,b)||this;n.tech_=b.tech;
n.cues_=[];n.activeCues_=[];n.preload_=!1!==n.tech_.preloadTextTracks;var q=new lk(n.cues_),t=new lk(n.activeCues_),v=!1,r=Ma(La(n),function(){this.tech_.isReady_&&!this.tech_.isDisposed()&&(this.activeCues=this.activeCues,v&&(this.trigger("cuechange"),v=!1))});n.tech_.one("dispose",function(){n.tech_.off("timeupdate",r)});if("disabled"!==a)n.tech_.on("timeupdate",r);Object.defineProperties(La(n),{"default":{get:function(){return e},set:function(){}},mode:{get:function(){return a},set:function(p){if(mk[p]&&
a!==p){a=p;this.preload_||"disabled"===a||0!==this.cues.length||qk(this.src,this);this.tech_.off("timeupdate",r);if("disabled"!==a)this.tech_.on("timeupdate",r);this.trigger("modechange")}}},cues:{get:function(){return this.loaded_?q:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return t;for(var p=this.tech_.currentTime(),m=[],l=0,f=this.cues.length;l<f;l++){var g=this.cues[l];g.startTime<=p&&g.endTime>=p?m.push(g):g.startTime===g.endTime&&
g.startTime<=p&&g.startTime+.5>=p&&m.push(g)}v=!1;if(m.length!==this.activeCues_.length)v=!0;else for(p=0;p<m.length;p++)-1===this.activeCues_.indexOf(m[p])&&(v=!0);this.activeCues_=m;t.setCues_(this.activeCues_);return t},set:function(){}}});b.src?(n.src=b.src,n.preload_||(n.loaded_=!0),(n.preload_||"subtitles"!==b.kind&&"captions"!==b.kind)&&qk(n.src,La(n))):n.loaded_=!0;return n}va(d,h);var c=d.prototype;c.addCue=function(b){var a=b;if(da.vttjs&&!(b instanceof da.vttjs.VTTCue)){a=new da.vttjs.VTTCue(b.startTime,
b.endTime,b.text);for(var e in b)e in a||(a[e]=b[e]);a.id=b.id;a.originalCue_=b}b=this.tech_.textTracks();for(e=0;e<b.length;e++)b[e]!==this&&b[e].removeCue(a);this.cues_.push(a);this.cues.setCues_(this.cues_)};c.removeCue=function(b){for(var a=this.cues_.length;a--;){var e=this.cues_[a];if(e===b||e.originalCue_&&e.originalCue_===b){this.cues_.splice(a,1);this.cues.setCues_(this.cues_);break}}};return d}(Sg);ge.prototype.allowedEvents_={cuechange:"cuechange"};var rk=function(h){function d(c){void 0===
c&&(c={});var b=Wa(c,{kind:Go[c.kind]||""});c=h.call(this,b)||this;var a=!1;Object.defineProperty(La(c),"enabled",{get:function(){return a},set:function(e){"boolean"===typeof e&&e!==a&&(a=e,this.trigger("enabledchange"))}});b.enabled&&(c.enabled=b.enabled);c.loaded_=!0;return c}va(d,h);return d}(Sg),sk=function(h){function d(c){void 0===c&&(c={});var b=Wa(c,{kind:Fo[c.kind]||""});c=h.call(this,b)||this;var a=!1;Object.defineProperty(La(c),"selected",{get:function(){return a},set:function(e){"boolean"===
typeof e&&e!==a&&(a=e,this.trigger("selectedchange"))}});b.selected&&(c.selected=b.selected);return c}va(d,h);return d}(Sg),Bd=function(h){function d(c){void 0===c&&(c={});var b=h.call(this)||this;var a=new ge(c);b.kind=a.kind;b.src=a.src;b.srclang=a.language;b.label=a.label;b["default"]=a["default"];Object.defineProperties(La(b),{readyState:{get:function(){return e}},track:{get:function(){return a}}});var e=0;a.addEventListener("loadeddata",function(){e=2;b.trigger({type:"load",target:La(b)})});
return b}va(d,h);return d}(pb);Bd.prototype.allowedEvents_={load:"load"};Bd.NONE=0;Bd.LOADING=1;Bd.LOADED=2;Bd.ERROR=3;var Xb={audio:{ListClass:Co,TrackClass:rk,capitalName:"Audio"},video:{ListClass:Do,TrackClass:sk,capitalName:"Video"},text:{ListClass:kk,TrackClass:ge,capitalName:"Text"}};Object.keys(Xb).forEach(function(h){Xb[h].getterName=h+"Tracks";Xb[h].privateName=h+"Tracks_"});var Cd={remoteText:{ListClass:kk,TrackClass:ge,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},
remoteTextEl:{ListClass:Eo,TrackClass:Bd,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Fb=Ne({},Xb,Cd);Cd.names=Object.keys(Cd);Xb.names=Object.keys(Xb);Fb.names=[].concat(Cd.names).concat(Xb.names);var qg=Object.create||function(){function h(){}return function(d){if(1!==arguments.length)throw Error("Object.create shim only accepts one parameter.");h.prototype=d;return new h}}();Pb.prototype=qg(Error.prototype);Pb.prototype.constructor=Pb;Pb.Errors=
{BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};Wd.prototype={set:function(h,d){this.get(h)||""===d||(this.values[h]=d)},get:function(h,d,c){return c?this.has(h)?this.values[h]:d[c]:this.has(h)?this.values[h]:d},has:function(h){return h in this.values},alt:function(h,d,c){for(var b=0;b<c.length;++b)if(d===c[b]){this.set(h,d);break}},integer:function(h,d){/^-?\d+$/.test(d)&&this.set(h,parseInt(d,10))},percent:function(h,d){return d.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&
(d=parseFloat(d),0<=d&&100>=d)?(this.set(h,d),!0):!1}};var rg=qa.createElement("textarea"),ao={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},lj={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},bo={v:"title",lang:"lang"},kj={rt:"ruby"},mj=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,
1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],
[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,
126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];sg.prototype.applyStyles=function(h,d){d=d||this.div;for(var c in h)h.hasOwnProperty(c)&&(d.style[c]=h[c])};sg.prototype.formatStyle=
function(h,d){return 0===h?0:h+d};Pe.prototype=qg(sg.prototype);Pe.prototype.constructor=Pe;Db.prototype.move=function(h,d){d=void 0!==d?d:this.lineHeight;switch(h){case "+x":this.left+=d;this.right+=d;break;case "-x":this.left-=d;this.right-=d;break;case "+y":this.top+=d;this.bottom+=d;break;case "-y":this.top-=d,this.bottom-=d}};Db.prototype.overlaps=function(h){return this.left<h.right&&this.right>h.left&&this.top<h.bottom&&this.bottom>h.top};Db.prototype.overlapsAny=function(h){for(var d=0;d<
h.length;d++)if(this.overlaps(h[d]))return!0;return!1};Db.prototype.within=function(h){return this.top>=h.top&&this.bottom<=h.bottom&&this.left>=h.left&&this.right<=h.right};Db.prototype.overlapsOppositeAxis=function(h,d){switch(d){case "+x":return this.left<h.left;case "-x":return this.right>h.right;case "+y":return this.top<h.top;case "-y":return this.bottom>h.bottom}};Db.prototype.intersectPercentage=function(h){return Math.max(0,Math.min(this.right,h.right)-Math.max(this.left,h.left))*Math.max(0,
Math.min(this.bottom,h.bottom)-Math.max(this.top,h.top))/(this.height*this.width)};Db.prototype.toCSSCompatValues=function(h){return{top:this.top-h.top,bottom:h.bottom-this.bottom,left:this.left-h.left,right:h.right-this.right,height:this.height,width:this.width}};Db.getSimpleBoxPosition=function(h){var d=h.div?h.div.offsetHeight:h.tagName?h.offsetHeight:0,c=h.div?h.div.offsetWidth:h.tagName?h.offsetWidth:0,b=h.div?h.div.offsetTop:h.tagName?h.offsetTop:0;h=h.div?h.div.getBoundingClientRect():h.tagName?
h.getBoundingClientRect():h;return{left:h.left,right:h.right,top:h.top||b,height:h.height||d,bottom:h.bottom||b+(h.height||d),width:h.width||c}};qd.StringDecoder=function(){return{decode:function(h){if(!h)return"";if("string"!==typeof h)throw Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(h))}}};qd.convertCueToDOMTree=function(h,d){return h&&d?jj(h,d):null};qd.processCues=function(h,d,c){if(!h||!d||!c)return null;for(;c.firstChild;)c.removeChild(c.firstChild);
var b=h.document.createElement("div");b.style.position="absolute";b.style.left="0";b.style.right="0";b.style.top="0";b.style.bottom="0";b.style.margin="1.5%";c.appendChild(b);if(function(q){for(var t=0;t<q.length;t++)if(q[t].hasBeenReset||!q[t].displayState)return!0;return!1}(d)){var a=[],e=Db.getSimpleBoxPosition(b),n={font:Math.round(5*e.height)/100+"px sans-serif"};(function(){for(var q,t,v=0;v<d.length;v++){t=d[v];q=new Pe(h,t,n);b.appendChild(q.div);var r=void 0,p=void 0,m=q,l=e,f=a,g=new Db(m),
k=m.cue;if("number"===typeof k.line&&(k.snapToLines||0<=k.line&&100>=k.line))var u=k.line;else if(k.track&&k.track.textTrackList&&k.track.textTrackList.mediaElement){u=k.track;for(var y=u.textTrackList,A=0,H=0;H<y.length&&y[H]!==u;H++)"showing"===y[H].mode&&A++;u=-1*++A}else u=-1;y=[];if(k.snapToLines){switch(k.vertical){case "":y=["+y","-y"];p="height";break;case "rl":y=["+x","-x"];p="width";break;case "lr":y=["-x","+x"],p="width"}A=g.lineHeight;H=A*Math.round(u);p=l[p]+A;var S=y[0];Math.abs(H)>
p&&(H=(0>H?-1:1)*Math.ceil(p/A)*A);0>u&&(H+=""===k.vertical?l.height:l.width,y=y.reverse());g.move(S,H)}else{g=g.lineHeight/l.height*100;switch(k.lineAlign){case "center":u-=g/2;break;case "end":u-=g}switch(k.vertical){case "":m.applyStyles({top:m.formatStyle(u,"%")});break;case "rl":m.applyStyles({left:m.formatStyle(u,"%")});break;case "lr":m.applyStyles({right:m.formatStyle(u,"%")})}y=["+y","-x","+x","-y"];g=new Db(m)}a:{k=g;g=y;p=new Db(k);u=1;for(y=0;y<g.length;y++){for(;k.overlapsOppositeAxis(l,
g[y])||k.within(l)&&k.overlapsAny(f);)k.move(g[y]);if(k.within(l)){r=k;break a}A=k.intersectPercentage(l);u>A&&(r=new Db(k),u=A);k=new Db(p)}r=r||p}m.move(r.toCSSCompatValues(l));t.displayState=q.div;a.push(Db.getSimpleBoxPosition(q))}})()}else for(c=0;c<d.length;c++)b.appendChild(d[c].displayState)};qd.Parser=function(h,d,c){c||(c=d,d={});d||(d={});this.window=h;this.vttjs=d;this.state="INITIAL";this.buffer="";this.decoder=c||new TextDecoder("utf8");this.regionList=[]};qd.Parser.prototype={reportOrThrowError:function(h){if(h instanceof
Pb)this.onparsingerror&&this.onparsingerror(h);else throw h;},parse:function(h){function d(){for(var v=e.buffer,r=0;r<v.length&&"\r"!==v[r]&&"\n"!==v[r];)++r;var p=v.substr(0,r);"\r"===v[r]&&++r;"\n"===v[r]&&++r;e.buffer=v.substr(r);return p}function c(v){var r=new Wd;Xd(v,function(p,m){switch(p){case "id":r.set(p,m);break;case "width":r.percent(p,m);break;case "lines":r.integer(p,m);break;case "regionanchor":case "viewportanchor":m=m.split(",");if(2!==m.length)break;var l=new Wd;l.percent("x",m[0]);
l.percent("y",m[1]);if(!l.has("x")||!l.has("y"))break;r.set(p+"X",l.get("x"));r.set(p+"Y",l.get("y"));break;case "scroll":r.alt(p,m,["up"])}},/=/,/\s/);r.has("id")&&(v=new (e.vttjs.VTTRegion||e.window.VTTRegion),v.width=r.get("width",100),v.lines=r.get("lines",3),v.regionAnchorX=r.get("regionanchorX",0),v.regionAnchorY=r.get("regionanchorY",100),v.viewportAnchorX=r.get("viewportanchorX",0),v.viewportAnchorY=r.get("viewportanchorY",100),v.scroll=r.get("scroll",""),e.onregion&&e.onregion(v),e.regionList.push({id:r.get("id"),
region:v}))}function b(v){var r=new Wd;Xd(v,function(p,m){switch(p){case "MPEGT":r.integer(p+"S",m);break;case "LOCA":r.set(p+"L",pg(m))}},/[^\d]:/,/,/);e.ontimestampmap&&e.ontimestampmap({MPEGTS:r.get("MPEGTS"),LOCAL:r.get("LOCAL")})}function a(v){v.match(/X-TIMESTAMP-MAP/)?Xd(v,function(r,p){switch(r){case "X-TIMESTAMP-MAP":b(p)}},/=/):Xd(v,function(r,p){switch(r){case "Region":c(p)}},/:/)}var e=this;h&&(e.buffer+=e.decoder.decode(h,{stream:!0}));try{if("INITIAL"===e.state){if(!/\r\n|\n/.test(e.buffer))return this;
var n=d();var q=n.match(/^WEBVTT([ \t].*)?$/);if(!q||!q[0])throw new Pb(Pb.Errors.BadSignature);e.state="HEADER"}for(h=!1;e.buffer;){if(!/\r\n|\n/.test(e.buffer))return this;h?h=!1:n=d();switch(e.state){case "HEADER":/:/.test(n)?a(n):n||(e.state="ID");continue;case "NOTE":n||(e.state="ID");continue;case "ID":if(/^NOTE($|[ \t])/.test(n)){e.state="NOTE";break}if(!n)continue;e.cue=new (e.vttjs.VTTCue||e.window.VTTCue)(0,0,"");try{e.cue.align="center"}catch(v){e.cue.align="middle"}e.state="CUE";if(-1===
n.indexOf("--\x3e")){e.cue.id=n;continue}case "CUE":try{$n(n,e.cue,e.regionList)}catch(v){e.reportOrThrowError(v);e.cue=null;e.state="BADCUE";continue}e.state="CUETEXT";continue;case "CUETEXT":var t=-1!==n.indexOf("--\x3e");if(!n||t&&(h=!0)){e.oncue&&e.oncue(e.cue);e.cue=null;e.state="ID";continue}e.cue.text&&(e.cue.text+="\n");e.cue.text+=n.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case "BADCUE":n||(e.state="ID")}}}catch(v){e.reportOrThrowError(v);if("CUETEXT"===e.state&&e.cue&&e.oncue)e.oncue(e.cue);
e.cue=null;e.state="INITIAL"===e.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{this.buffer+=this.decoder.decode();if(this.cue||"HEADER"===this.state)this.buffer+="\n\n",this.parse();if("INITIAL"===this.state)throw new Pb(Pb.Errors.BadSignature);}catch(h){this.reportOrThrowError(h)}this.onflush&&this.onflush();return this}};var go={"":1,lr:1,rl:1},fo={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};nj.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,
this.text)};var Jo={"":!0,up:!0},Ko=function(){var h=100,d=3,c=0,b=100,a=0,e=100,n="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return h},set:function(q){if(!Yd(q))throw Error("Width must be between 0 and 100.");h=q}},lines:{enumerable:!0,get:function(){return d},set:function(q){if("number"!==typeof q)throw new TypeError("Lines must be set to a number.");d=q}},regionAnchorY:{enumerable:!0,get:function(){return b},set:function(q){if(!Yd(q))throw Error("RegionAnchorX must be between 0 and 100.");
b=q}},regionAnchorX:{enumerable:!0,get:function(){return c},set:function(q){if(!Yd(q))throw Error("RegionAnchorY must be between 0 and 100.");c=q}},viewportAnchorY:{enumerable:!0,get:function(){return e},set:function(q){if(!Yd(q))throw Error("ViewportAnchorY must be between 0 and 100.");e=q}},viewportAnchorX:{enumerable:!0,get:function(){return a},set:function(q){if(!Yd(q))throw Error("ViewportAnchorX must be between 0 and 100.");a=q}},scroll:{enumerable:!0,get:function(){return n},set:function(q){q=
"string"!==typeof q?!1:Jo[q.toLowerCase()]?q.toLowerCase():!1;!1===q?console.warn("Scroll: an invalid or illegal string was specified."):n=q}}})},he=w(function(h){h=h.exports={WebVTT:qd,VTTCue:nj,VTTRegion:Ko};da.vttjs=h;da.WebVTT=h.WebVTT;var d=h.VTTCue,c=h.VTTRegion,b=da.VTTCue,a=da.VTTRegion;h.shim=function(){da.VTTCue=d;da.VTTRegion=c};h.restore=function(){da.VTTCue=b;da.VTTRegion=a};da.VTTCue||h.shim()});he.WebVTT;he.VTTCue;he.VTTRegion;var Ta=function(h){function d(b,a){void 0===b&&(b={});void 0===
a&&(a=function(){});b.reportTouchActivity=!1;var e=h.call(this,null,b,a)||this;e.hasStarted_=!1;e.on("playing",function(){this.hasStarted_=!0});e.on("loadstart",function(){this.hasStarted_=!1});Fb.names.forEach(function(n){n=Fb[n];b&&b[n.getterName]&&(e[n.privateName]=b[n.getterName])});e.featuresProgressEvents||e.manualProgressOn();e.featuresTimeupdateEvents||e.manualTimeUpdatesOn();["Text","Audio","Video"].forEach(function(n){!1===b["native"+n+"Tracks"]&&(e["featuresNative"+n+"Tracks"]=!1)});if(!1===
b.nativeCaptions||!1===b.nativeTextTracks)e.featuresNativeTextTracks=!1;else if(!0===b.nativeCaptions||!0===b.nativeTextTracks)e.featuresNativeTextTracks=!0;e.featuresNativeTextTracks||e.emulateTextTracks();e.preloadTextTracks=!1!==b.preloadTextTracks;e.autoRemoteTextTracks_=new Fb.text.ListClass;e.initTrackListeners();b.nativeControlsForTouch||e.emitTapEvents();e.constructor&&(e.name_=e.constructor.name||"Unknown Tech");return e}va(d,h);var c=d.prototype;c.triggerSourceset=function(b){var a=this;
if(!this.isReady_)this.one("ready",function(){return a.setTimeout(function(){return a.triggerSourceset(b)},1)});this.trigger({src:b,type:"sourceset"})};c.manualProgressOn=function(){this.on("durationchange",this.onDurationChange);this.manualProgress=!0;this.one("ready",this.trackProgress)};c.manualProgressOff=function(){this.manualProgress=!1;this.stopTrackingProgress();this.off("durationchange",this.onDurationChange)};c.trackProgress=function(b){this.stopTrackingProgress();this.progressInterval=
this.setInterval(Ma(this,function(){var a=this.bufferedPercent();this.bufferedPercent_!==a&&this.trigger("progress");this.bufferedPercent_=a;1===a&&this.stopTrackingProgress()}),500)};c.onDurationChange=function(b){this.duration_=this.duration()};c.buffered=function(){return Zc(0,0)};c.bufferedPercent=function(){return gj(this.buffered(),this.duration_)};c.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)};c.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0;this.on("play",
this.trackCurrentTime);this.on("pause",this.stopTrackingCurrentTime)};c.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1;this.stopTrackingCurrentTime();this.off("play",this.trackCurrentTime);this.off("pause",this.stopTrackingCurrentTime)};c.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime();this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)};c.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval);
this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})};c.dispose=function(){this.clearTracks(Xb.names);this.manualProgress&&this.manualProgressOff();this.manualTimeUpdates&&this.manualTimeUpdatesOff();h.prototype.dispose.call(this)};c.clearTracks=function(b){var a=this;b=[].concat(b);b.forEach(function(e){for(var n=a[e+"Tracks"]()||[],q=n.length;q--;){var t=n[q];"text"===e&&a.removeRemoteTextTrack(t);n.removeTrack(t)}})};c.cleanupAutoTextTracks=function(){for(var b=this.autoRemoteTextTracks_||
[],a=b.length;a--;)this.removeRemoteTextTrack(b[a])};c.reset=function(){};c.crossOrigin=function(){};c.setCrossOrigin=function(){};c.error=function(b){void 0!==b&&(this.error_=new Cb(b),this.trigger("error"));return this.error_};c.played=function(){return this.hasStarted_?Zc(0,0):Zc()};c.play=function(){};c.setScrubbing=function(){};c.scrubbing=function(){};c.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})};c.initTrackListeners=
function(){var b=this;Xb.names.forEach(function(a){var e=function(){b.trigger(a+"trackchange")},n=b[Xb[a].getterName]();n.addEventListener("removetrack",e);n.addEventListener("addtrack",e);b.on("dispose",function(){n.removeEventListener("removetrack",e);n.removeEventListener("addtrack",e)})})};c.addWebVttScript_=function(){var b=this;if(!da.WebVTT)if(qa.body.contains(this.el()))if(!this.options_["vtt.js"]&&ha(he)&&0<Object.keys(he).length)this.trigger("vttjsloaded");else{var a=qa.createElement("script");
a.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js";a.onload=function(){b.trigger("vttjsloaded")};a.onerror=function(){b.trigger("vttjserror")};this.on("dispose",function(){a.onload=null;a.onerror=null});da.WebVTT=!0;this.el().parentNode.appendChild(a)}else this.ready(this.addWebVttScript_)};c.emulateTextTracks=function(){var b=this,a=this.textTracks(),e=this.remoteTextTracks(),n=function(r){return a.addTrack(r.track)},q=function(r){return a.removeTrack(r.track)};e.on("addtrack",
n);e.on("removetrack",q);this.addWebVttScript_();var t=function(){return b.trigger("texttrackchange")},v=function(){t();for(var r=0;r<a.length;r++){var p=a[r];p.removeEventListener("cuechange",t);"showing"===p.mode&&p.addEventListener("cuechange",t)}};v();a.addEventListener("change",v);a.addEventListener("addtrack",v);a.addEventListener("removetrack",v);this.on("dispose",function(){e.off("addtrack",n);e.off("removetrack",q);a.removeEventListener("change",v);a.removeEventListener("addtrack",v);a.removeEventListener("removetrack",
v);for(var r=0;r<a.length;r++)a[r].removeEventListener("cuechange",t)})};c.addTextTrack=function(b,a,e){if(!b)throw Error("TextTrack kind is required but was not provided");var n=void 0;void 0===n&&(n={});var q=this.textTracks();n.kind=b;a&&(n.label=a);e&&(n.language=e);n.tech=this;b=new Fb.text.TrackClass(n);q.addTrack(b);return b};c.createRemoteTextTrack=function(b){b=Wa(b,{tech:this});return new Cd.remoteTextEl.TrackClass(b)};c.addRemoteTextTrack=function(b,a){var e=this;void 0===b&&(b={});var n=
this.createRemoteTextTrack(b);!0!==a&&!1!==a&&(Ka.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),a=!0);this.remoteTextTrackEls().addTrackElement_(n);this.remoteTextTracks().addTrack(n.track);!0!==a&&this.ready(function(){return e.autoRemoteTextTracks_.addTrack(n.track)});return n};c.removeRemoteTextTrack=function(b){var a=this.remoteTextTrackEls().getTrackElementByTrack_(b);this.remoteTextTrackEls().removeTrackElement_(a);
this.remoteTextTracks().removeTrack(b);this.autoRemoteTextTracks_.removeTrack(b)};c.getVideoPlaybackQuality=function(){return{}};c.requestPictureInPicture=function(){var b=this.options_.Promise||da.Promise;if(b)return b.reject()};c.disablePictureInPicture=function(){return!0};c.setDisablePictureInPicture=function(){};c.setPoster=function(){};c.playsinline=function(){};c.setPlaysinline=function(){};c.overrideNativeAudioTracks=function(){};c.overrideNativeVideoTracks=function(){};c.canPlayType=function(){return""};
d.canPlayType=function(){return""};d.canPlaySource=function(b,a){return d.canPlayType(b.type)};d.isTech=function(b){return b.prototype instanceof d||b instanceof d||b===d};d.registerTech=function(b,a){d.techs_||(d.techs_={});if(!d.isTech(a))throw Error("Tech "+b+" must be a Tech");if(!d.canPlayType)throw Error("Techs must have a static canPlayType method on them");if(!d.canPlaySource)throw Error("Techs must have a static canPlaySource method on them");b=cb(b);d.techs_[b]=a;d.techs_[cf(b)]=a;"Tech"!==
b&&d.defaultTechOrder_.push(b);return a};d.getTech=function(b){if(b){if(d.techs_&&d.techs_[b])return d.techs_[b];b=cb(b);if(da&&da.videojs&&da.videojs[b])return Ka.warn("The "+b+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),da.videojs[b]}};return d}(ja);Fb.names.forEach(function(h){var d=Fb[h];Ta.prototype[d.getterName]=function(){this[d.privateName]=this[d.privateName]||new d.ListClass;return this[d.privateName]}});Ta.prototype.featuresVolumeControl=
!0;Ta.prototype.featuresMuteControl=!0;Ta.prototype.featuresFullscreenResize=!1;Ta.prototype.featuresPlaybackRate=!1;Ta.prototype.featuresProgressEvents=!1;Ta.prototype.featuresSourceset=!1;Ta.prototype.featuresTimeupdateEvents=!1;Ta.prototype.featuresNativeTextTracks=!1;Ta.withSourceHandlers=function(h){h.registerSourceHandler=function(d,c){var b=h.sourceHandlers;b||(b=h.sourceHandlers=[]);void 0===c&&(c=b.length);b.splice(c,0,d)};h.canPlayType=function(d){for(var c=h.sourceHandlers||[],b,a=0;a<
c.length;a++)if(b=c[a].canPlayType(d))return b;return""};h.selectSourceHandler=function(d,c){for(var b=h.sourceHandlers||[],a,e=0;e<b.length;e++)if(a=b[e].canHandleSource(d,c))return b[e];return null};h.canPlaySource=function(d,c){var b=h.selectSourceHandler(d,c);return b?b.canHandleSource(d,c):""};["seekable","seeking","duration"].forEach(function(d){var c=this[d];"function"===typeof c&&(this[d]=function(){return this.sourceHandler_&&this.sourceHandler_[d]?this.sourceHandler_[d].apply(this.sourceHandler_,
arguments):c.apply(this,arguments)})},h.prototype);h.prototype.setSource=function(d){var c=h.selectSourceHandler(d,this.options_);c||(h.nativeSourceHandler?c=h.nativeSourceHandler:Ka.error("No source handler found for the current source."));this.disposeSourceHandler();this.off("dispose",this.disposeSourceHandler);c!==h.nativeSourceHandler&&(this.currentSource_=d);this.sourceHandler_=c.handleSource(d,this,this.options_);this.one("dispose",this.disposeSourceHandler)};h.prototype.disposeSourceHandler=
function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null);this.cleanupAutoTextTracks();this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};ja.registerComponent("Tech",Ta);Ta.registerTech("Tech",Ta);Ta.defaultTechOrder_=[];var ad={},vg={},Qe={},Lo={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1},Mo={setCurrentTime:1,setMuted:1,setVolume:1},tk={play:1,pause:1},No={opus:"video/ogg",
ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},Re=function(h){void 0===h&&(h="");h=Ug(h);return No[h.toLowerCase()]||""},Oo=function(h,d){if(!d)return"";if(h.cache_.source.src===d&&h.cache_.source.type)return h.cache_.source.type;
var c=h.cache_.sources.filter(function(a){return a.src===d});if(c.length)return c[0].type;h=h.doubleDollar("source");for(c=0;c<h.length;c++){var b=h[c];if(b.type&&b.src&&b.src===d)return b.type}return Re(d)},Po=function c(d){if(Array.isArray(d)){var b=[];d.forEach(function(a){a=c(a);Array.isArray(a)?b=b.concat(a):aa(a)&&b.push(a)});d=b}else d="string"===typeof d&&d.trim()?[pj({src:d})]:aa(d)&&"string"===typeof d.src&&d.src&&d.src.trim()?[pj(d)]:[];return d},Qo=function(d){function c(b,a,e){var n=
Wa({createEl:!1},a);e=d.call(this,b,n,e)||this;if(a.playerOptions.sources&&0!==a.playerOptions.sources.length)b.src(a.playerOptions.sources);else for(n=0,a=a.playerOptions.techOrder;n<a.length;n++){var q=cb(a[n]),t=Ta.getTech(q);q||(t=ja.getComponent(q));if(t&&t.isSupported()){b.loadTech_(q);break}}return e}va(c,d);return c}(ja);ja.registerComponent("MediaLoader",Qo);var ef=function(d){function c(a,e){a=d.call(this,a,e)||this;a.emitTapEvents();a.enable();return a}va(c,d);var b=c.prototype;b.createEl=
function(a,e,n){void 0===a&&(a="div");void 0===e&&(e={});void 0===n&&(n={});e=Q({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},e);"button"===a&&Ka.error("Creating a ClickableComponent with an HTML element of "+a+" is not supported; use a Button instead.");n=Q({role:"button"},n);this.tabIndex_=e.tabIndex;a=d.prototype.createEl.call(this,a,e,n);this.createControlTextEl(a);return a};b.dispose=function(){this.controlTextEl_=null;d.prototype.dispose.call(this)};
b.createControlTextEl=function(a){this.controlTextEl_=Aa("span",{className:"vjs-control-text"},{"aria-live":"polite"});a&&a.appendChild(this.controlTextEl_);this.controlText(this.controlText_,a);return this.controlTextEl_};b.controlText=function(a,e){void 0===e&&(e=this.el());if(void 0===a)return this.controlText_||"Need Text";var n=this.localize(a);this.controlText_=a;tb(this.controlTextEl_,n);this.nonIconControl||e.setAttribute("title",n)};b.buildCSSClass=function(){return"vjs-control vjs-button "+
d.prototype.buildCSSClass.call(this)};b.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),"undefined"!==typeof this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick),this.on("keydown",this.handleKeyDown))};b.disable=function(){this.enabled_=!1;this.addClass("vjs-disabled");this.el_.setAttribute("aria-disabled","true");"undefined"!==typeof this.tabIndex_&&this.el_.removeAttribute("tabIndex");
this.off("mouseover",this.handleMouseOver);this.off("mouseout",this.handleMouseOut);this.off(["tap","click"],this.handleClick);this.off("keydown",this.handleKeyDown)};b.handleLanguagechange=function(){this.controlText(this.controlText_)};b.handleClick=function(a){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)};b.handleKeyDown=function(a){Ea.isEventKey(a,"Space")||Ea.isEventKey(a,"Enter")?(a.preventDefault(),a.stopPropagation(),this.trigger("click")):d.prototype.handleKeyDown.call(this,
a)};return c}(ja);ja.registerComponent("ClickableComponent",ef);var Ro=function(d){function c(a,e){e=d.call(this,a,e)||this;e.update();a.on("posterchange",Ma(La(e),e.update));return e}va(c,d);var b=c.prototype;b.dispose=function(){this.player().off("posterchange",this.update);d.prototype.dispose.call(this)};b.createEl=function(){return Aa("div",{className:"vjs-poster",tabIndex:-1})};b.update=function(a){a=this.player().poster();this.setSrc(a);a?this.show():this.hide()};b.setSrc=function(a){var e=
"";a&&(e='url("'+a+'")');this.el_.style.backgroundImage=e};b.handleClick=function(a){this.player_.controls()&&(a=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&0<this.player_.eme.sessions.length,!this.player_.tech(!0)||(ee||de)&&a||this.player_.tech(!0).focus(),this.player_.paused()?Kc(this.player_.play()):this.player_.pause())};return c}(ef);ja.registerComponent("PosterImage",Ro);var So={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',
monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'},To=function(d){function c(a,e,n){e=d.call(this,a,e,n)||this;var q=Ma(La(e),e.updateDisplay);a.on("loadstart",Ma(La(e),e.toggleDisplay));a.on("texttrackchange",q);a.on("loadedmetadata",Ma(La(e),e.preselectTrack));a.ready(Ma(La(e),function(){if(a.tech_&&
a.tech_.featuresNativeTextTracks)this.hide();else{a.on("fullscreenchange",q);a.on("playerresize",q);da.addEventListener("orientationchange",q);a.on("dispose",function(){return da.removeEventListener("orientationchange",q)});for(var t=this.options_.playerOptions.tracks||[],v=0;v<t.length;v++)this.player_.addRemoteTextTrack(t[v],!0);this.preselectTrack()}}));return e}va(c,d);var b=c.prototype;b.preselectTrack=function(){for(var a={captions:1,subtitles:1},e=this.player_.textTracks(),n=this.player_.cache_.selectedLanguage,
q,t,v,r=0;r<e.length;r++){var p=e[r];n&&n.enabled&&n.language&&n.language===p.language&&p.kind in a?p.kind===n.kind?v=p:v||(v=p):n&&!n.enabled?t=q=v=null:p["default"]&&("descriptions"!==p.kind||q?p.kind in a&&!t&&(t=p):q=p)}v?v.mode="showing":t?t.mode="showing":q&&(q.mode="showing")};b.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()};b.createEl=function(){return d.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},
{"aria-live":"off","aria-atomic":"true"})};b.clearDisplay=function(){"function"===typeof da.WebVTT&&da.WebVTT.processCues(da,[],this.el_)};b.updateDisplay=function(){var a=this.player_.textTracks(),e=this.options_.allowMultipleShowingTracks;this.clearDisplay();if(e){e=[];for(var n=0;n<a.length;++n){var q=a[n];"showing"===q.mode&&e.push(q)}this.updateForTrack(e)}else{n=e=null;for(q=a.length;q--;){var t=a[q];"showing"===t.mode&&("descriptions"===t.kind?e=t:n=t)}n?("off"!==this.getAttribute("aria-live")&&
this.setAttribute("aria-live","off"),this.updateForTrack(n)):e&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(e))}};b.updateDisplayState=function(a){var e=this.player_.textTrackSettings.getValues();a=a.activeCues;for(var n=a.length;n--;){var q=a[n];if(q){q=q.displayState;e.color&&(q.firstChild.style.color=e.color);if(e.textOpacity){var t=wg(e.color||"#fff",e.textOpacity);try{q.firstChild.style.color=t}catch(v){}}e.backgroundColor&&(q.firstChild.style.backgroundColor=
e.backgroundColor);if(e.backgroundOpacity){t=wg(e.backgroundColor||"#000",e.backgroundOpacity);try{q.firstChild.style.backgroundColor=t}catch(v){}}if(e.windowColor)if(e.windowOpacity){t=wg(e.windowColor,e.windowOpacity);try{q.style.backgroundColor=t}catch(v){}}else q.style.backgroundColor=e.windowColor;e.edgeStyle&&("dropshadow"===e.edgeStyle?q.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px #222":"raised"===e.edgeStyle?q.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px #222":
"depressed"===e.edgeStyle?q.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px #222":"uniform"===e.edgeStyle&&(q.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px #222"));e.fontPercent&&1!==e.fontPercent&&(t=da.parseFloat(q.style.fontSize),q.style.fontSize=t*e.fontPercent+"px",q.style.height="auto",q.style.top="auto");e.fontFamily&&"default"!==e.fontFamily&&("small-caps"===e.fontFamily?q.firstChild.style.fontVariant="small-caps":q.firstChild.style.fontFamily=
So[e.fontFamily])}}};b.updateForTrack=function(a){Array.isArray(a)||(a=[a]);if("function"===typeof da.WebVTT&&!a.every(function(v){return!v.activeCues})){for(var e=[],n=0;n<a.length;++n)for(var q=a[n],t=0;t<q.activeCues.length;++t)e.push(q.activeCues[t]);da.WebVTT.processCues(da,e,this.el_);for(e=0;e<a.length;++e){n=a[e];for(q=0;q<n.activeCues.length;++q)t=n.activeCues[q].displayState,Va(t,"vjs-text-track-cue"),Va(t,"vjs-text-track-cue-"+(n.language?n.language:e));this.player_.textTrackSettings&&
this.updateDisplayState(n)}}};return c}(ja);ja.registerComponent("TextTrackDisplay",To);var Uo=function(d){function c(){return d.apply(this,arguments)||this}va(c,d);c.prototype.createEl=function(){var b=this.player_.isAudio();b=this.localize(b?"Audio Player":"Video Player");b=Aa("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",[b])});var a=d.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});a.appendChild(b);return a};return c}(ja);ja.registerComponent("LoadingSpinner",
Uo);var gc=function(d){function c(){return d.apply(this,arguments)||this}va(c,d);var b=c.prototype;b.createEl=function(a,e,n){void 0===e&&(e={});void 0===n&&(n={});a="button";e=Q({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},e);n=Q({type:"button"},n);a=ja.prototype.createEl.call(this,a,e,n);this.createControlTextEl(a);return a};b.addChild=function(a,e){void 0===e&&(e={});Ka.warn("Adding an actionable (user controllable) child to a Button ("+
this.constructor.name+") is not supported; use a ClickableComponent instead.");return ja.prototype.addChild.call(this,a,e)};b.enable=function(){d.prototype.enable.call(this);this.el_.removeAttribute("disabled")};b.disable=function(){d.prototype.disable.call(this);this.el_.setAttribute("disabled","disabled")};b.handleKeyDown=function(a){Ea.isEventKey(a,"Space")||Ea.isEventKey(a,"Enter")?a.stopPropagation():d.prototype.handleKeyDown.call(this,a)};return c}(ef);ja.registerComponent("Button",gc);var uk=
function(d){function c(a,e){a=d.call(this,a,e)||this;a.mouseused_=!1;a.on("mousedown",a.handleMouseDown);return a}va(c,d);var b=c.prototype;b.buildCSSClass=function(){return"vjs-big-play-button"};b.handleClick=function(a){var e=this.player_.play();if(this.mouseused_&&a.clientX&&a.clientY)a=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&0<this.player_.eme.sessions.length,Kc(e),!this.player_.tech(!0)||(ee||de)&&a||this.player_.tech(!0).focus();else{var n=(a=this.player_.getChild("controlBar"))&&
a.getChild("playToggle");n?(a=function(){return n.focus()},Vd(e)?e.then(a,function(){}):this.setTimeout(a,1)):this.player_.tech(!0).focus()}};b.handleKeyDown=function(a){this.mouseused_=!1;d.prototype.handleKeyDown.call(this,a)};b.handleMouseDown=function(a){this.mouseused_=!0};return c}(gc);uk.prototype.controlText_="Play Video";ja.registerComponent("BigPlayButton",uk);var Vo=function(d){function c(a,e){a=d.call(this,a,e)||this;a.controlText(e&&e.controlText||a.localize("Close"));return a}va(c,d);
var b=c.prototype;b.buildCSSClass=function(){return"vjs-close-button "+d.prototype.buildCSSClass.call(this)};b.handleClick=function(a){this.trigger({type:"close",bubbles:!1})};b.handleKeyDown=function(a){Ea.isEventKey(a,"Esc")?(a.preventDefault(),a.stopPropagation(),this.trigger("click")):d.prototype.handleKeyDown.call(this,a)};return c}(gc);ja.registerComponent("CloseButton",Vo);var vk=function(d){function c(a,e){void 0===e&&(e={});var n=d.call(this,a,e)||this;e.replay=void 0===e.replay||e.replay;
n.on(a,"play",n.handlePlay);n.on(a,"pause",n.handlePause);if(e.replay)n.on(a,"ended",n.handleEnded);return n}va(c,d);var b=c.prototype;b.buildCSSClass=function(){return"vjs-play-control "+d.prototype.buildCSSClass.call(this)};b.handleClick=function(a){this.player_.paused()?this.player_.play():this.player_.pause()};b.handleSeeked=function(a){this.removeClass("vjs-ended");this.player_.paused()?this.handlePause(a):this.handlePlay(a)};b.handlePlay=function(a){this.removeClass("vjs-ended");this.removeClass("vjs-paused");
this.addClass("vjs-playing");this.controlText("Pause")};b.handlePause=function(a){this.removeClass("vjs-playing");this.addClass("vjs-paused");this.controlText("Play")};b.handleEnded=function(a){this.removeClass("vjs-playing");this.addClass("vjs-ended");this.controlText("Replay");this.one(this.player_,"seeked",this.handleSeeked)};return c}(gc);vk.prototype.controlText_="Play";ja.registerComponent("PlayToggle",vk);var wk=function(d,c){d=0>d?0:d;var b=Math.floor(d%60),a=Math.floor(d/60%60),e=Math.floor(d/
3600),n=Math.floor(c/60%60);c=Math.floor(c/3600);if(isNaN(d)||Infinity===d)e=a=b="-";e=0<e||0<c?e+":":"";return e+(((e||10<=n)&&10>a?"0"+a:a)+":")+(10>b?"0"+b:b)},xg=wk,Dd=function(d){function c(a,e){e=d.call(this,a,e)||this;e.on(a,["timeupdate","ended"],e.updateContent);e.updateTextNode_();return e}va(c,d);var b=c.prototype;b.createEl=function(){var a=this.buildCSSClass(),e=d.prototype.createEl.call(this,"div",{className:a+" vjs-time-control vjs-control",innerHTML:'<span class="vjs-control-text" role="presentation">'+
this.localize(this.labelText_)+"\u00a0</span>"});this.contentEl_=Aa("span",{className:a+"-display"},{"aria-live":"off",role:"presentation"});e.appendChild(this.contentEl_);return e};b.dispose=function(){this.textNode_=this.contentEl_=null;d.prototype.dispose.call(this)};b.updateTextNode_=function(a){var e=this;void 0===a&&(a=0);a=rd(a);this.formattedTime_!==a&&(this.formattedTime_=a,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",function(){if(e.contentEl_){var n=e.textNode_;n&&e.contentEl_.firstChild!==
n&&(n=null,Ka.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead."));e.textNode_=qa.createTextNode(e.formattedTime_);e.textNode_&&(n?e.contentEl_.replaceChild(e.textNode_,n):e.contentEl_.appendChild(e.textNode_))}}))};b.updateContent=function(a){};return c}(ja);Dd.prototype.labelText_="Time";Dd.prototype.controlText_="Time";ja.registerComponent("TimeDisplay",Dd);var Vg=function(d){function c(){return d.apply(this,
arguments)||this}va(c,d);var b=c.prototype;b.buildCSSClass=function(){return"vjs-current-time"};b.updateContent=function(a){a=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.updateTextNode_(a)};return c}(Dd);Vg.prototype.labelText_="Current Time";Vg.prototype.controlText_="Current Time";ja.registerComponent("CurrentTimeDisplay",Vg);var Wg=function(d){function c(a,e){e=d.call(this,a,e)||this;e.on(a,"durationchange",
e.updateContent);e.on(a,"loadstart",e.updateContent);e.on(a,"loadedmetadata",e.updateContent);return e}va(c,d);var b=c.prototype;b.buildCSSClass=function(){return"vjs-duration"};b.updateContent=function(a){a=this.player_.duration();this.updateTextNode_(a)};return c}(Dd);Wg.prototype.labelText_="Duration";Wg.prototype.controlText_="Duration";ja.registerComponent("DurationDisplay",Wg);var Wo=function(d){function c(){return d.apply(this,arguments)||this}va(c,d);c.prototype.createEl=function(){return d.prototype.createEl.call(this,
"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"},{"aria-hidden":!0})};return c}(ja);ja.registerComponent("TimeDivider",Wo);var Xg=function(d){function c(a,e){e=d.call(this,a,e)||this;e.on(a,"durationchange",e.updateContent);return e}va(c,d);var b=c.prototype;b.buildCSSClass=function(){return"vjs-remaining-time"};b.createEl=function(){var a=d.prototype.createEl.call(this);a.insertBefore(Aa("span",{},{"aria-hidden":!0},"-"),this.contentEl_);return a};b.updateContent=
function(a){"number"===typeof this.player_.duration()&&(a=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(a))};return c}(Dd);Xg.prototype.labelText_="Remaining Time";Xg.prototype.controlText_="Remaining Time";ja.registerComponent("RemainingTimeDisplay",Xg);var Xo=function(d){function c(a,e){a=d.call(this,a,e)||this;a.updateShowing();a.on(a.player(),"durationchange",a.updateShowing);return a}va(c,d);var b=
c.prototype;b.createEl=function(){var a=d.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});this.contentEl_=Aa("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+"\u00a0</span>"+this.localize("LIVE")},{"aria-live":"off"});a.appendChild(this.contentEl_);return a};b.dispose=function(){this.contentEl_=null;d.prototype.dispose.call(this)};b.updateShowing=function(a){Infinity===this.player().duration()?this.show():this.hide()};
return c}(ja);ja.registerComponent("LiveDisplay",Xo);var xk=function(d){function c(a,e){a=d.call(this,a,e)||this;a.updateLiveEdgeStatus();if(a.player_.liveTracker)a.on(a.player_.liveTracker,"liveedgechange",a.updateLiveEdgeStatus);return a}va(c,d);var b=c.prototype;b.createEl=function(){var a=d.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});this.textEl_=Aa("span",{className:"vjs-seek-to-live-text",innerHTML:this.localize("LIVE")},{"aria-hidden":"true"});
a.appendChild(this.textEl_);return a};b.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))};b.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()};b.dispose=function(){this.player_.liveTracker&&
this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatus);this.textEl_=null;d.prototype.dispose.call(this)};return c}(gc);xk.prototype.controlText_="Seek to live, currently playing live";ja.registerComponent("SeekToLive",xk);var ie=function(d,c,b){d=Number(d);return Math.min(b,Math.max(c,isNaN(d)?c:d))},Yg=function(d){function c(a,e){a=d.call(this,a,e)||this;a.bar=a.getChild(a.options_.barName);a.vertical(!!a.options_.vertical);a.enable();return a}va(c,d);var b=c.prototype;b.enabled=
function(){return this.enabled_};b.enable=function(){if(!this.enabled()){this.on("mousedown",this.handleMouseDown);this.on("touchstart",this.handleMouseDown);this.on("keydown",this.handleKeyDown);this.on("click",this.handleClick);this.on(this.player_,"controlsvisible",this.update);if(this.playerEvent)this.on(this.player_,this.playerEvent,this.update);this.removeClass("disabled");this.setAttribute("tabindex",0);this.enabled_=!0}};b.disable=function(){if(this.enabled()){var a=this.bar.el_.ownerDocument;
this.off("mousedown",this.handleMouseDown);this.off("touchstart",this.handleMouseDown);this.off("keydown",this.handleKeyDown);this.off("click",this.handleClick);this.off(this.player_,"controlsvisible",this.update);this.off(a,"mousemove",this.handleMouseMove);this.off(a,"mouseup",this.handleMouseUp);this.off(a,"touchmove",this.handleMouseMove);this.off(a,"touchend",this.handleMouseUp);this.removeAttribute("tabindex");this.addClass("disabled");this.playerEvent&&this.off(this.player_,this.playerEvent,
this.update);this.enabled_=!1}};b.createEl=function(a,e,n){void 0===e&&(e={});void 0===n&&(n={});e.className+=" vjs-slider";e=Q({tabIndex:0},e);n=Q({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},n);return d.prototype.createEl.call(this,a,e,n)};b.handleMouseDown=function(a){var e=this.bar.el_.ownerDocument;"mousedown"===a.type&&a.preventDefault();"touchstart"!==a.type||zc||a.preventDefault();De();this.addClass("vjs-sliding");this.trigger("slideractive");this.on(e,
"mousemove",this.handleMouseMove);this.on(e,"mouseup",this.handleMouseUp);this.on(e,"touchmove",this.handleMouseMove);this.on(e,"touchend",this.handleMouseUp);this.handleMouseMove(a)};b.handleMouseMove=function(a){};b.handleMouseUp=function(){var a=this.bar.el_.ownerDocument;Ee();this.removeClass("vjs-sliding");this.trigger("sliderinactive");this.off(a,"mousemove",this.handleMouseMove);this.off(a,"mouseup",this.handleMouseUp);this.off(a,"touchmove",this.handleMouseMove);this.off(a,"touchend",this.handleMouseUp);
this.update()};b.update=function(){var a=this;if(this.el_&&this.bar){var e=this.getProgress();if(e===this.progress_)return e;this.progress_=e;this.requestNamedAnimationFrame("Slider#update",function(){var n=a.vertical()?"height":"width";a.bar.el().style[n]=(100*e).toFixed(2)+"%"});return e}};b.getProgress=function(){return Number(ie(this.getPercent(),0,1).toFixed(4))};b.calculateDistance=function(a){a=ub(this.el_,a);return this.vertical()?a.y:a.x};b.handleKeyDown=function(a){Ea.isEventKey(a,"Left")||
Ea.isEventKey(a,"Down")?(a.preventDefault(),a.stopPropagation(),this.stepBack()):Ea.isEventKey(a,"Right")||Ea.isEventKey(a,"Up")?(a.preventDefault(),a.stopPropagation(),this.stepForward()):d.prototype.handleKeyDown.call(this,a)};b.handleClick=function(a){a.stopPropagation();a.preventDefault()};b.vertical=function(a){if(void 0===a)return this.vertical_||!1;(this.vertical_=!!a)?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")};return c}(ja);ja.registerComponent("Slider",Yg);
var Yo=function(d){function c(a,e){e=d.call(this,a,e)||this;e.partEls_=[];e.on(a,"progress",e.update);return e}va(c,d);var b=c.prototype;b.createEl=function(){var a=d.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),e=Aa("span",{className:"vjs-control-text"}),n=Aa("span",{textContent:this.localize("Loaded")}),q=qa.createTextNode(": ");this.percentageEl_=Aa("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"});a.appendChild(e);e.appendChild(n);e.appendChild(q);
e.appendChild(this.percentageEl_);return a};b.dispose=function(){this.percentageEl_=this.partEls_=null;d.prototype.dispose.call(this)};b.update=function(a){var e=this;this.requestNamedAnimationFrame("LoadProgressBar#update",function(){var n=e.player_.liveTracker,q=e.player_.buffered(),t=n&&n.isLive()?n.seekableEnd():e.player_.duration(),v=e.player_.bufferedEnd();n=e.partEls_;t=ie(v/t*100,0,100).toFixed(2)+"%";e.percent_!==t&&(e.el_.style.width=t,tb(e.percentageEl_,t),e.percent_=t);for(t=0;t<q.length;t++){var r=
q.start(t),p=q.end(t),m=n[t];m||(m=e.el_.appendChild(Aa()),n[t]=m);if(m.dataset.start!==r||m.dataset.end!==p)m.dataset.start=r,m.dataset.end=p,m.style.left=ie(r/v*100,0,100).toFixed(2)+"%",m.style.width=ie((p-r)/v*100,0,100).toFixed(2)+"%"}for(v=n.length;v>q.length;v--)e.el_.removeChild(n[v-1]);n.length=q.length})};return c}(ja);ja.registerComponent("LoadProgressBar",Yo);var Zo=function(d){function c(a,e){a=d.call(this,a,e)||this;a.update=bd(Ma(La(a),a.update),30);return a}va(c,d);var b=c.prototype;
b.createEl=function(){return d.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})};b.update=function(a,e,n){var q=zb(this.el_),t=Nd(this.player_.el()),v=a.width*e;t&&q&&(e=a.left-t.left+v,a=a.width-v+(t.right-a.right),t=q.width/2,e<t?t+=t-e:a<t&&(t=a),0>t?t=0:t>q.width&&(t=q.width),t=Math.round(t),this.el_.style.right="-"+t+"px",this.write(n))};b.write=function(a){tb(this.el_,a)};b.updateTime=function(a,e,n,q){var t=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",
function(){var v=t.player_.duration();if(t.player_.liveTracker&&t.player_.liveTracker.isLive()){v=t.player_.liveTracker.liveWindow();var r=v-e*v;v=(1>r?"":"-")+rd(r,v)}else v=rd(n,v);t.update(a,e,v);q&&q()})};return c}(ja);ja.registerComponent("TimeTooltip",Zo);var Zg=function(d){function c(a,e){a=d.call(this,a,e)||this;a.update=bd(Ma(La(a),a.update),30);return a}va(c,d);var b=c.prototype;b.createEl=function(){return d.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},
{"aria-hidden":"true"})};b.update=function(a,e){var n=this.getChild("timeTooltip");if(n){var q=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();n.updateTime(a,e,q)}};return c}(ja);Zg.prototype.options_={children:[]};Ob||Pc||Zg.prototype.options_.children.push("timeTooltip");ja.registerComponent("PlayProgressBar",Zg);var yk=function(d){function c(a,e){a=d.call(this,a,e)||this;a.update=bd(Ma(La(a),a.update),30);return a}va(c,d);var b=c.prototype;b.createEl=function(){return d.prototype.createEl.call(this,
"div",{className:"vjs-mouse-display"})};b.update=function(a,e){var n=this,q=e*this.player_.duration();this.getChild("timeTooltip").updateTime(a,e,q,function(){n.el_.style.left=a.width*e+"px"})};return c}(ja);yk.prototype.options_={children:["timeTooltip"]};ja.registerComponent("MouseTimeDisplay",yk);var $g=function(d){function c(a,e){a=d.call(this,a,e)||this;a.setEventHandlers_();return a}va(c,d);var b=c.prototype;b.setEventHandlers_=function(){this.update_=Ma(this,this.update);this.update=bd(this.update_,
30);this.on(this.player_,["ended","durationchange","timeupdate"],this.update);if(this.player_.liveTracker)this.on(this.player_.liveTracker,"liveedgechange",this.update);this.updateInterval=null;this.on(this.player_,["playing"],this.enableInterval_);this.on(this.player_,["ended","pause","waiting"],this.disableInterval_);if("hidden"in qa&&"visibilityState"in qa)this.on(qa,"visibilitychange",this.toggleVisibility_)};b.toggleVisibility_=function(a){"hidden"===qa.visibilityState?(this.cancelNamedAnimationFrame("SeekBar#update"),
this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(a)):(this.player_.ended()||this.player_.paused()||this.enableInterval_(),this.update())};b.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,30))};b.disableInterval_=function(a){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&a&&"ended"!==a.type||!this.updateInterval||(this.clearInterval(this.updateInterval),this.updateInterval=null)};b.createEl=function(){return d.prototype.createEl.call(this,
"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})};b.update=function(a){var e=this;if("hidden"!==qa.visibilityState){var n=d.prototype.update.call(this);this.requestNamedAnimationFrame("SeekBar#update",function(){var q=e.player_.ended()?e.player_.duration():e.getCurrentTime_(),t=e.player_.liveTracker,v=e.player_.duration();t&&t.isLive()&&(v=e.player_.liveTracker.liveCurrentTime());e.percent_!==n&&(e.el_.setAttribute("aria-valuenow",(100*n).toFixed(2)),e.percent_=
n);if(e.currentTime_!==q||e.duration_!==v)e.el_.setAttribute("aria-valuetext",e.localize("progress bar timing: currentTime={1} duration={2}",[rd(q,v),rd(v,v)],"{1} of {2}")),e.currentTime_=q,e.duration_=v;e.bar&&e.bar.update(Nd(e.el()),e.getProgress())});return n}};b.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()};b.getPercent=function(){var a=this.getCurrentTime_(),e=this.player_.liveTracker;e&&e.isLive()?(a=(a-e.seekableStart())/
e.liveWindow(),e.atLiveEdge()&&(a=1)):a/=this.player_.duration();return a};b.handleMouseDown=function(a){Ic(a)&&(a.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),d.prototype.handleMouseDown.call(this,a))};b.handleMouseMove=function(a){if(Ic(a)){var e=this.calculateDistance(a);var n=this.player_.liveTracker;if(n&&n.isLive()){if(.99<=e){n.seekToLiveEdge();return}a=n.seekableStart();var q=n.liveCurrentTime();e=a+e*n.liveWindow();e>=q&&(e=
q);e<=a&&(e=a+.1);if(Infinity===e)return}else e*=this.player_.duration(),e===this.player_.duration()&&(e-=.1);this.player_.currentTime(e)}};b.enable=function(){d.prototype.enable.call(this);var a=this.getChild("mouseTimeDisplay");a&&a.show()};b.disable=function(){d.prototype.disable.call(this);var a=this.getChild("mouseTimeDisplay");a&&a.hide()};b.handleMouseUp=function(a){d.prototype.handleMouseUp.call(this,a);a&&a.stopPropagation();this.player_.scrubbing(!1);this.player_.trigger({type:"timeupdate",
target:this,manuallyTriggered:!0});this.videoWasPlaying?Kc(this.player_.play()):this.update_()};b.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)};b.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)};b.handleAction=function(a){this.player_.paused()?this.player_.play():this.player_.pause()};b.handleKeyDown=function(a){Ea.isEventKey(a,"Space")||Ea.isEventKey(a,"Enter")?(a.preventDefault(),a.stopPropagation(),this.handleAction(a)):Ea.isEventKey(a,
"Home")?(a.preventDefault(),a.stopPropagation(),this.player_.currentTime(0)):Ea.isEventKey(a,"End")?(a.preventDefault(),a.stopPropagation(),this.player_.currentTime(this.player_.duration())):/^[0-9]$/.test(Ea(a))?(a.preventDefault(),a.stopPropagation(),a=10*(Ea.codes[Ea(a)]-Ea.codes["0"])/100,this.player_.currentTime(this.player_.duration()*a)):Ea.isEventKey(a,"PgDn")?(a.preventDefault(),a.stopPropagation(),this.player_.currentTime(this.player_.currentTime()-60)):Ea.isEventKey(a,"PgUp")?(a.preventDefault(),
a.stopPropagation(),this.player_.currentTime(this.player_.currentTime()+60)):d.prototype.handleKeyDown.call(this,a)};b.dispose=function(){this.disableInterval_();this.off(this.player_,["ended","durationchange","timeupdate"],this.update);if(this.player_.liveTracker)this.on(this.player_.liveTracker,"liveedgechange",this.update);this.off(this.player_,["playing"],this.enableInterval_);this.off(this.player_,["ended","pause","waiting"],this.disableInterval_);"hidden"in qa&&"visibilityState"in qa&&this.off(qa,
"visibilitychange",this.toggleVisibility_);d.prototype.dispose.call(this)};return c}(Yg);$g.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"};Ob||Pc||$g.prototype.options_.children.splice(1,0,"mouseTimeDisplay");ja.registerComponent("SeekBar",$g);var zk=function(d){function c(a,e){a=d.call(this,a,e)||this;a.handleMouseMove=bd(Ma(La(a),a.handleMouseMove),30);a.throttledHandleMouseSeek=bd(Ma(La(a),a.handleMouseSeek),30);a.enable();return a}va(c,d);var b=c.prototype;
b.createEl=function(){return d.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})};b.handleMouseMove=function(a){var e=this.getChild("seekBar");if(e){var n=e.getChild("playProgressBar"),q=e.getChild("mouseTimeDisplay");if(n||q){var t=e.el(),v=zb(t);a=ub(t,a).x;a=ie(a,0,1);q&&q.update(v,a);n&&n.update(v,e.getProgress())}}};b.handleMouseSeek=function(a){var e=this.getChild("seekBar");e&&e.handleMouseMove(a)};b.enabled=function(){return this.enabled_};b.disable=function(){this.children().forEach(function(e){return e.disable&&
e.disable()});if(this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDown),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){var a=this.getChild("seekBar");this.player_.scrubbing(!1);a.videoWasPlaying&&Kc(this.player_.play())}};b.enable=function(){this.children().forEach(function(a){return a.enable&&a.enable()});this.enabled()||(this.on(["mousedown","touchstart"],
this.handleMouseDown),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)};b.removeListenersAddedOnMousedownAndTouchstart=function(){var a=this.el_.ownerDocument;this.off(a,"mousemove",this.throttledHandleMouseSeek);this.off(a,"touchmove",this.throttledHandleMouseSeek);this.off(a,"mouseup",this.handleMouseUp);this.off(a,"touchend",this.handleMouseUp)};b.handleMouseDown=function(a){var e=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseDown(a);
this.on(e,"mousemove",this.throttledHandleMouseSeek);this.on(e,"touchmove",this.throttledHandleMouseSeek);this.on(e,"mouseup",this.handleMouseUp);this.on(e,"touchend",this.handleMouseUp)};b.handleMouseUp=function(a){var e=this.getChild("seekBar");e&&e.handleMouseUp(a);this.removeListenersAddedOnMousedownAndTouchstart()};return c}(ja);zk.prototype.options_={children:["seekBar"]};ja.registerComponent("ProgressControl",zk);var Ak=function(d){function c(a,e){e=d.call(this,a,e)||this;e.on(a,["enterpictureinpicture",
"leavepictureinpicture"],e.handlePictureInPictureChange);e.on(a,["disablepictureinpicturechanged","loadedmetadata"],e.handlePictureInPictureEnabledChange);e.disable();return e}va(c,d);var b=c.prototype;b.buildCSSClass=function(){return"vjs-picture-in-picture-control "+d.prototype.buildCSSClass.call(this)};b.handlePictureInPictureEnabledChange=function(){qa.pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()?this.enable():this.disable()};b.handlePictureInPictureChange=function(a){this.player_.isInPictureInPicture()?
this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture");this.handlePictureInPictureEnabledChange()};b.handleClick=function(a){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()};return c}(gc);Ak.prototype.controlText_="Picture-in-Picture";ja.registerComponent("PictureInPictureToggle",Ak);var Bk=function(d){function c(a,e){e=d.call(this,a,e)||this;e.on(a,"fullscreenchange",e.handleFullscreenChange);!1===qa[a.fsApi_.fullscreenEnabled]&&
e.disable();return e}va(c,d);var b=c.prototype;b.buildCSSClass=function(){return"vjs-fullscreen-control "+d.prototype.buildCSSClass.call(this)};b.handleFullscreenChange=function(a){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")};b.handleClick=function(a){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()};return c}(gc);Bk.prototype.controlText_="Fullscreen";ja.registerComponent("FullscreenToggle",Bk);var $o=function(d,
c){c.tech_&&!c.tech_.featuresVolumeControl&&d.addClass("vjs-hidden");d.on(c,"loadstart",function(){c.tech_.featuresVolumeControl?d.removeClass("vjs-hidden"):d.addClass("vjs-hidden")})},ap=function(d){function c(){return d.apply(this,arguments)||this}va(c,d);c.prototype.createEl=function(){return d.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})};return c}(ja);ja.registerComponent("VolumeLevel",ap);var ah=function(d){function c(a,
e){var n=d.call(this,a,e)||this;n.on("slideractive",n.updateLastVolume_);n.on(a,"volumechange",n.updateARIAAttributes);a.ready(function(){return n.updateARIAAttributes()});return n}va(c,d);var b=c.prototype;b.createEl=function(){return d.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})};b.handleMouseDown=function(a){Ic(a)&&d.prototype.handleMouseDown.call(this,a)};b.handleMouseMove=function(a){Ic(a)&&
(this.checkMuted(),this.player_.volume(this.calculateDistance(a)))};b.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)};b.getPercent=function(){return this.player_.muted()?0:this.player_.volume()};b.stepForward=function(){this.checkMuted();this.player_.volume(this.player_.volume()+.1)};b.stepBack=function(){this.checkMuted();this.player_.volume(this.player_.volume()-.1)};b.updateARIAAttributes=function(a){a=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",
a);this.el_.setAttribute("aria-valuetext",a+"%")};b.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())};b.updateLastVolume_=function(){var a=this,e=this.player_.volume();this.one("sliderinactive",function(){0===a.player_.volume()&&a.player_.lastVolume_(e)})};return c}(Yg);ah.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};ah.prototype.playerEvent="volumechange";ja.registerComponent("VolumeBar",ah);var Ck=function(d){function c(a,e){void 0===e&&(e={});e.vertical=
e.vertical||!1;if("undefined"===typeof e.volumeBar||ha(e.volumeBar))e.volumeBar=e.volumeBar||{},e.volumeBar.vertical=e.vertical;var n=d.call(this,a,e)||this;$o(La(n),a);n.throttledHandleMouseMove=bd(Ma(La(n),n.handleMouseMove),30);n.on("mousedown",n.handleMouseDown);n.on("touchstart",n.handleMouseDown);n.on(n.volumeBar,["focus","slideractive"],function(){n.volumeBar.addClass("vjs-slider-active");n.addClass("vjs-slider-active");n.trigger("slideractive")});n.on(n.volumeBar,["blur","sliderinactive"],
function(){n.volumeBar.removeClass("vjs-slider-active");n.removeClass("vjs-slider-active");n.trigger("sliderinactive")});return n}va(c,d);var b=c.prototype;b.createEl=function(){var a="vjs-volume-horizontal";this.options_.vertical&&(a="vjs-volume-vertical");return d.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+a})};b.handleMouseDown=function(a){a=this.el_.ownerDocument;this.on(a,"mousemove",this.throttledHandleMouseMove);this.on(a,"touchmove",this.throttledHandleMouseMove);
this.on(a,"mouseup",this.handleMouseUp);this.on(a,"touchend",this.handleMouseUp)};b.handleMouseUp=function(a){a=this.el_.ownerDocument;this.off(a,"mousemove",this.throttledHandleMouseMove);this.off(a,"touchmove",this.throttledHandleMouseMove);this.off(a,"mouseup",this.handleMouseUp);this.off(a,"touchend",this.handleMouseUp)};b.handleMouseMove=function(a){this.volumeBar.handleMouseMove(a)};return c}(ja);Ck.prototype.options_={children:["volumeBar"]};ja.registerComponent("VolumeControl",Ck);var bp=
function(d,c){c.tech_&&!c.tech_.featuresMuteControl&&d.addClass("vjs-hidden");d.on(c,"loadstart",function(){c.tech_.featuresMuteControl?d.removeClass("vjs-hidden"):d.addClass("vjs-hidden")})},Dk=function(d){function c(a,e){e=d.call(this,a,e)||this;bp(La(e),a);e.on(a,["loadstart","volumechange"],e.update);return e}va(c,d);var b=c.prototype;b.buildCSSClass=function(){return"vjs-mute-control "+d.prototype.buildCSSClass.call(this)};b.handleClick=function(a){a=this.player_.volume();var e=this.player_.lastVolume_();
0===a?(this.player_.volume(.1>e?.1:e),this.player_.muted(!1)):this.player_.muted(this.player_.muted()?!1:!0)};b.update=function(a){this.updateIcon_();this.updateControlText_()};b.updateIcon_=function(){var a=this.player_.volume(),e=3;Ob&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted);0===a||this.player_.muted()?e=0:.33>a?e=1:.67>a&&(e=2);for(a=0;4>a;a++)tc(this.el_,"vjs-vol-"+a);Va(this.el_,"vjs-vol-"+e)};b.updateControlText_=function(){var a=this.player_.muted()||
0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==a&&this.controlText(a)};return c}(gc);Dk.prototype.controlText_="Mute";ja.registerComponent("MuteToggle",Dk);var Ek=function(d){function c(a,e){void 0===e&&(e={});e.inline="undefined"!==typeof e.inline?e.inline:!0;if("undefined"===typeof e.volumeControl||ha(e.volumeControl))e.volumeControl=e.volumeControl||{},e.volumeControl.vertical=!e.inline;e=d.call(this,a,e)||this;e.on(a,["loadstart"],e.volumePanelState_);e.on(e.muteToggle,"keyup",
e.handleKeyPress);e.on(e.volumeControl,"keyup",e.handleVolumeControlKeyUp);e.on("keydown",e.handleKeyPress);e.on("mouseover",e.handleMouseOver);e.on("mouseout",e.handleMouseOut);e.on(e.volumeControl,["slideractive"],e.sliderActive_);e.on(e.volumeControl,["sliderinactive"],e.sliderInactive_);return e}va(c,d);var b=c.prototype;b.sliderActive_=function(){this.addClass("vjs-slider-active")};b.sliderInactive_=function(){this.removeClass("vjs-slider-active")};b.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&
this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden");this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")};b.createEl=function(){var a="vjs-volume-panel-horizontal";this.options_.inline||(a="vjs-volume-panel-vertical");return d.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+a})};b.dispose=function(){this.handleMouseOut();d.prototype.dispose.call(this)};b.handleVolumeControlKeyUp=function(a){Ea.isEventKey(a,
"Esc")&&this.muteToggle.focus()};b.handleMouseOver=function(a){this.addClass("vjs-hover");Ab(qa,"keyup",Ma(this,this.handleKeyPress))};b.handleMouseOut=function(a){this.removeClass("vjs-hover");lb(qa,"keyup",Ma(this,this.handleKeyPress))};b.handleKeyPress=function(a){Ea.isEventKey(a,"Esc")&&this.handleMouseOut()};return c}(ja);Ek.prototype.options_={children:["muteToggle","volumeControl"]};ja.registerComponent("VolumePanel",Ek);var bh=function(d){function c(a,e){a=d.call(this,a,e)||this;e&&(a.menuButton_=
e.menuButton);a.focusedChild_=-1;a.on("keydown",a.handleKeyDown);a.boundHandleBlur_=Ma(La(a),a.handleBlur);a.boundHandleTapClick_=Ma(La(a),a.handleTapClick);return a}va(c,d);var b=c.prototype;b.addEventListenerForItem=function(a){a instanceof ja&&(this.on(a,"blur",this.boundHandleBlur_),this.on(a,["tap","click"],this.boundHandleTapClick_))};b.removeEventListenerForItem=function(a){a instanceof ja&&(this.off(a,"blur",this.boundHandleBlur_),this.off(a,["tap","click"],this.boundHandleTapClick_))};b.removeChild=
function(a){"string"===typeof a&&(a=this.getChild(a));this.removeEventListenerForItem(a);d.prototype.removeChild.call(this,a)};b.addItem=function(a){(a=this.addChild(a))&&this.addEventListenerForItem(a)};b.createEl=function(){this.contentEl_=Aa(this.options_.contentElType||"ul",{className:"vjs-menu-content"});this.contentEl_.setAttribute("role","menu");var a=d.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});a.appendChild(this.contentEl_);Ab(a,"click",function(e){e.preventDefault();
e.stopImmediatePropagation()});return a};b.dispose=function(){this.boundHandleTapClick_=this.boundHandleBlur_=this.contentEl_=null;d.prototype.dispose.call(this)};b.handleBlur=function(a){var e=a.relatedTarget||qa.activeElement;this.children().some(function(n){return n.el()===e})||(a=this.menuButton_)&&a.buttonPressed_&&e!==a.el().firstChild&&a.unpressButton()};b.handleTapClick=function(a){if(this.menuButton_){this.menuButton_.unpressButton();var e=this.children();Array.isArray(e)&&(e=e.filter(function(n){return n.el()===
a.target})[0])&&"CaptionSettingsMenuItem"!==e.name()&&this.menuButton_.focus()}};b.handleKeyDown=function(a){if(Ea.isEventKey(a,"Left")||Ea.isEventKey(a,"Down"))a.preventDefault(),a.stopPropagation(),this.stepForward();else if(Ea.isEventKey(a,"Right")||Ea.isEventKey(a,"Up"))a.preventDefault(),a.stopPropagation(),this.stepBack()};b.stepForward=function(){var a=0;void 0!==this.focusedChild_&&(a=this.focusedChild_+1);this.focus(a)};b.stepBack=function(){var a=0;void 0!==this.focusedChild_&&(a=this.focusedChild_-
1);this.focus(a)};b.focus=function(a){void 0===a&&(a=0);var e=this.children().slice();e.length&&e[0].hasClass("vjs-menu-title")&&e.shift();0<e.length&&(0>a?a=0:a>=e.length&&(a=e.length-1),this.focusedChild_=a,e[a].el_.focus())};return c}(ja);ja.registerComponent("Menu",bh);var ch=function(d){function c(a,e){void 0===e&&(e={});var n=d.call(this,a,e)||this;n.menuButton_=new gc(a,e);n.menuButton_.controlText(n.controlText_);n.menuButton_.el_.setAttribute("aria-haspopup","true");a=gc.prototype.buildCSSClass();
n.menuButton_.el_.className=n.buildCSSClass()+" "+a;n.menuButton_.removeClass("vjs-control");n.addChild(n.menuButton_);n.update();n.enabled_=!0;n.on(n.menuButton_,"tap",n.handleClick);n.on(n.menuButton_,"click",n.handleClick);n.on(n.menuButton_,"keydown",n.handleKeyDown);n.on(n.menuButton_,"mouseenter",function(){n.addClass("vjs-hover");n.menu.show();Ab(qa,"keyup",Ma(La(n),n.handleMenuKeyUp))});n.on("mouseleave",n.handleMouseLeave);n.on("keydown",n.handleSubmenuKeyDown);return n}va(c,d);var b=c.prototype;
b.update=function(){var a=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu));this.menu=a;this.addChild(a);this.buttonPressed_=!1;this.menuButton_.el_.setAttribute("aria-expanded","false");this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()};b.createMenu=function(){var a=new bh(this.player_,{menuButton:this});this.hideThreshold_=0;if(this.options_.title){var e=Aa("li",{className:"vjs-menu-title",innerHTML:cb(this.options_.title),tabIndex:-1});this.hideThreshold_+=
1;e=new ja(this.player_,{el:e});a.addItem(e)}if(this.items=this.createItems())for(e=0;e<this.items.length;e++)a.addItem(this.items[e]);return a};b.createItems=function(){};b.createEl=function(){return d.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})};b.buildWrapperCSSClass=function(){var a="vjs-menu-button";a=!0===this.options_.inline?a+"-inline":a+"-popup";var e=gc.prototype.buildCSSClass();return"vjs-menu-button "+a+" "+e+" "+d.prototype.buildCSSClass.call(this)};
b.buildCSSClass=function(){var a="vjs-menu-button";a=!0===this.options_.inline?a+"-inline":a+"-popup";return"vjs-menu-button "+a+" "+d.prototype.buildCSSClass.call(this)};b.controlText=function(a,e){void 0===e&&(e=this.menuButton_.el());return this.menuButton_.controlText(a,e)};b.dispose=function(){this.handleMouseLeave();d.prototype.dispose.call(this)};b.handleClick=function(a){this.buttonPressed_?this.unpressButton():this.pressButton()};b.handleMouseLeave=function(a){this.removeClass("vjs-hover");
lb(qa,"keyup",Ma(this,this.handleMenuKeyUp))};b.focus=function(){this.menuButton_.focus()};b.blur=function(){this.menuButton_.blur()};b.handleKeyDown=function(a){Ea.isEventKey(a,"Esc")||Ea.isEventKey(a,"Tab")?(this.buttonPressed_&&this.unpressButton(),Ea.isEventKey(a,"Tab")||(a.preventDefault(),this.menuButton_.focus())):!Ea.isEventKey(a,"Up")&&!Ea.isEventKey(a,"Down")||this.buttonPressed_||(a.preventDefault(),this.pressButton())};b.handleMenuKeyUp=function(a){(Ea.isEventKey(a,"Esc")||Ea.isEventKey(a,
"Tab"))&&this.removeClass("vjs-hover")};b.handleSubmenuKeyPress=function(a){this.handleSubmenuKeyDown(a)};b.handleSubmenuKeyDown=function(a){if(Ea.isEventKey(a,"Esc")||Ea.isEventKey(a,"Tab"))this.buttonPressed_&&this.unpressButton(),Ea.isEventKey(a,"Tab")||(a.preventDefault(),this.menuButton_.focus())};b.pressButton=function(){this.enabled_&&(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),Ob&&ma()||this.menu.focus())};b.unpressButton=
function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))};b.disable=function(){this.unpressButton();this.enabled_=!1;this.addClass("vjs-disabled");this.menuButton_.disable()};b.enable=function(){this.enabled_=!0;this.removeClass("vjs-disabled");this.menuButton_.enable()};return c}(ja);ja.registerComponent("MenuButton",ch);var dh=function(d){function c(b,a){var e=a.tracks;b=d.call(this,b,a)||this;1>=b.items.length&&
b.hide();if(!e)return La(b);var n=Ma(La(b),b.update);e.addEventListener("removetrack",n);e.addEventListener("addtrack",n);e.addEventListener("labelchange",n);b.player_.on("ready",n);b.player_.on("dispose",function(){e.removeEventListener("removetrack",n);e.removeEventListener("addtrack",n);e.removeEventListener("labelchange",n)});return b}va(c,d);return c}(ch);ja.registerComponent("TrackButton",dh);var cp="Tab Esc Up Down Right Left".split(" "),je=function(d){function c(a,e){a=d.call(this,a,e)||this;
a.selectable=e.selectable;a.isSelected_=e.selected||!1;a.multiSelectable=e.multiSelectable;a.selected(a.isSelected_);a.selectable?a.multiSelectable?a.el_.setAttribute("role","menuitemcheckbox"):a.el_.setAttribute("role","menuitemradio"):a.el_.setAttribute("role","menuitem");return a}va(c,d);var b=c.prototype;b.createEl=function(a,e,n){this.nonIconControl=!0;return d.prototype.createEl.call(this,"li",Q({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+
"</span>",tabIndex:-1},e),n)};b.handleKeyDown=function(a){cp.some(function(e){return Ea.isEventKey(a,e)})||d.prototype.handleKeyDown.call(this,a)};b.handleClick=function(a){this.selected(!0)};b.selected=function(a){this.selectable&&(a?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))};return c}(ef);
ja.registerComponent("MenuItem",je);var ke=function(d){function c(a,e){var n=e.track,q=a.textTracks();e.label=n.label||n.language||"Unknown";e.selected="showing"===n.mode;var t=d.call(this,a,e)||this;t.track=n;t.kinds=(e.kinds||[e.kind||t.track.kind]).filter(Boolean);var v=function(){for(var m=arguments.length,l=Array(m),f=0;f<m;f++)l[f]=arguments[f];t.handleTracksChange.apply(La(t),l)},r=function(){for(var m=arguments.length,l=Array(m),f=0;f<m;f++)l[f]=arguments[f];t.handleSelectedLanguageChange.apply(La(t),
l)};a.on(["loadstart","texttrackchange"],v);q.addEventListener("change",v);q.addEventListener("selectedlanguagechange",r);t.on("dispose",function(){a.off(["loadstart","texttrackchange"],v);q.removeEventListener("change",v);q.removeEventListener("selectedlanguagechange",r)});if(void 0===q.onchange){var p;t.on(["tap","click"],function(){if("object"!==typeof da.Event)try{p=new da.Event("change")}catch(m){}p||(p=qa.createEvent("Event"),p.initEvent("change",!0,!0));q.dispatchEvent(p)})}t.handleTracksChange();
return t}va(c,d);var b=c.prototype;b.handleClick=function(a){var e=this.track,n=this.player_.textTracks();d.prototype.handleClick.call(this,a);if(n)for(a=0;a<n.length;a++){var q=n[a];-1!==this.kinds.indexOf(q.kind)&&(q===e?"showing"!==q.mode&&(q.mode="showing"):"disabled"!==q.mode&&(q.mode="disabled"))}};b.handleTracksChange=function(a){a="showing"===this.track.mode;a!==this.isSelected_&&this.selected(a)};b.handleSelectedLanguageChange=function(a){"showing"===this.track.mode&&(a=this.player_.cache_.selectedLanguage,
a&&a.enabled&&a.language===this.track.language&&a.kind!==this.track.kind||(this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}))};b.dispose=function(){this.track=null;d.prototype.dispose.call(this)};return c}(je);ja.registerComponent("TextTrackMenuItem",ke);var Fk=function(d){function c(a,e){e.track={player:a,kind:e.kind,kinds:e.kinds,"default":!1,mode:"disabled"};e.kinds||(e.kinds=[e.kind]);e.track.label=e.label?e.label:e.kinds.join(" and ")+" off";
e.selectable=!0;e.multiSelectable=!1;return d.call(this,a,e)||this}va(c,d);var b=c.prototype;b.handleTracksChange=function(a){a=this.player().textTracks();for(var e=!0,n=0,q=a.length;n<q;n++){var t=a[n];if(-1<this.options_.kinds.indexOf(t.kind)&&"showing"===t.mode){e=!1;break}}e!==this.isSelected_&&this.selected(e)};b.handleSelectedLanguageChange=function(a){a=this.player().textTracks();for(var e=!0,n=0,q=a.length;n<q;n++){var t=a[n];if(-1<["captions","descriptions","subtitles"].indexOf(t.kind)&&
"showing"===t.mode){e=!1;break}}e&&(this.player_.cache_.selectedLanguage={enabled:!1})};return c}(ke);ja.registerComponent("OffTextTrackMenuItem",Fk);var Ed=function(d){function c(b,a){void 0===a&&(a={});a.tracks=b.textTracks();return d.call(this,b,a)||this}va(c,d);c.prototype.createItems=function(b,a){void 0===b&&(b=[]);void 0===a&&(a=ke);var e;this.label_&&(e=this.label_+" off");b.push(new Fk(this.player_,{kinds:this.kinds_,kind:this.kind_,label:e}));this.hideThreshold_+=1;e=this.player_.textTracks();
Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var n=0;n<e.length;n++){var q=e[n];if(-1<this.kinds_.indexOf(q.kind)){var t=new a(this.player_,{track:q,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});t.addClass("vjs-"+q.kind+"-menu-item");b.push(t)}}return b};return c}(dh);ja.registerComponent("TextTrackButton",Ed);var Gk=function(d){function c(a,e){var n=e.track,q=e.cue,t=a.currentTime();e.selectable=!0;e.multiSelectable=!1;e.label=q.text;e.selected=q.startTime<=t&&
t<q.endTime;a=d.call(this,a,e)||this;a.track=n;a.cue=q;n.addEventListener("cuechange",Ma(La(a),a.update));return a}va(c,d);var b=c.prototype;b.handleClick=function(a){d.prototype.handleClick.call(this);this.player_.currentTime(this.cue.startTime);this.update(this.cue.startTime)};b.update=function(a){a=this.cue;var e=this.player_.currentTime();this.selected(a.startTime<=e&&e<a.endTime)};return c}(je);ja.registerComponent("ChaptersTrackMenuItem",Gk);var eh=function(d){function c(a,e,n){return d.call(this,
a,e,n)||this}va(c,d);var b=c.prototype;b.buildCSSClass=function(){return"vjs-chapters-button "+d.prototype.buildCSSClass.call(this)};b.buildWrapperCSSClass=function(){return"vjs-chapters-button "+d.prototype.buildWrapperCSSClass.call(this)};b.update=function(a){this.track_&&(!a||"addtrack"!==a.type&&"removetrack"!==a.type)||this.setTrack(this.findChaptersTrack());d.prototype.update.call(this)};b.setTrack=function(a){if(this.track_!==a){this.updateHandler_||(this.updateHandler_=this.update.bind(this));
if(this.track_){var e=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);e&&e.removeEventListener("load",this.updateHandler_);this.track_=null}if(this.track_=a)this.track_.mode="hidden",(a=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_))&&a.addEventListener("load",this.updateHandler_)}};b.findChaptersTrack=function(){for(var a=this.player_.textTracks()||[],e=a.length-1;0<=e;e--){var n=a[e];if(n.kind===this.kind_)return n}};b.getMenuCaption=function(){return this.track_&&
this.track_.label?this.track_.label:this.localize(cb(this.kind_))};b.createMenu=function(){this.options_.title=this.getMenuCaption();return d.prototype.createMenu.call(this)};b.createItems=function(){var a=[];if(!this.track_)return a;var e=this.track_.cues;if(!e)return a;for(var n=0,q=e.length;n<q;n++){var t=new Gk(this.player_,{track:this.track_,cue:e[n]});a.push(t)}return a};return c}(Ed);eh.prototype.kind_="chapters";eh.prototype.controlText_="Chapters";ja.registerComponent("ChaptersButton",eh);
var fh=function(d){function c(a,e,n){e=d.call(this,a,e,n)||this;var q=a.textTracks(),t=Ma(La(e),e.handleTracksChange);q.addEventListener("change",t);e.on("dispose",function(){q.removeEventListener("change",t)});return e}va(c,d);var b=c.prototype;b.handleTracksChange=function(a){a=this.player().textTracks();for(var e=!1,n=0,q=a.length;n<q;n++){var t=a[n];if(t.kind!==this.kind_&&"showing"===t.mode){e=!0;break}}e?this.disable():this.enable()};b.buildCSSClass=function(){return"vjs-descriptions-button "+
d.prototype.buildCSSClass.call(this)};b.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+d.prototype.buildWrapperCSSClass.call(this)};return c}(Ed);fh.prototype.kind_="descriptions";fh.prototype.controlText_="Descriptions";ja.registerComponent("DescriptionsButton",fh);var gh=function(d){function c(a,e,n){return d.call(this,a,e,n)||this}va(c,d);var b=c.prototype;b.buildCSSClass=function(){return"vjs-subtitles-button "+d.prototype.buildCSSClass.call(this)};b.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+
d.prototype.buildWrapperCSSClass.call(this)};return c}(Ed);gh.prototype.kind_="subtitles";gh.prototype.controlText_="Subtitles";ja.registerComponent("SubtitlesButton",gh);var hh=function(d){function c(b,a){a.track={player:b,kind:a.kind,label:a.kind+" settings",selectable:!1,"default":!1,mode:"disabled"};a.selectable=!1;a.name="CaptionSettingsMenuItem";b=d.call(this,b,a)||this;b.addClass("vjs-texttrack-settings");b.controlText(", opens "+a.kind+" settings dialog");return b}va(c,d);c.prototype.handleClick=
function(b){this.player().getChild("textTrackSettings").open()};return c}(ke);ja.registerComponent("CaptionSettingsMenuItem",hh);var ih=function(d){function c(a,e,n){return d.call(this,a,e,n)||this}va(c,d);var b=c.prototype;b.buildCSSClass=function(){return"vjs-captions-button "+d.prototype.buildCSSClass.call(this)};b.buildWrapperCSSClass=function(){return"vjs-captions-button "+d.prototype.buildWrapperCSSClass.call(this)};b.createItems=function(){var a=[];this.player().tech_&&this.player().tech_.featuresNativeTextTracks||
!this.player().getChild("textTrackSettings")||(a.push(new hh(this.player_,{kind:this.kind_})),this.hideThreshold_+=1);return d.prototype.createItems.call(this,a)};return c}(Ed);ih.prototype.kind_="captions";ih.prototype.controlText_="Captions";ja.registerComponent("CaptionsButton",ih);var Hk=function(d){function c(){return d.apply(this,arguments)||this}va(c,d);c.prototype.createEl=function(b,a,e){var n='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);"captions"===this.options_.track.kind&&
(n+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Captions")+"</span>\n      ");return d.prototype.createEl.call(this,b,Q({innerHTML:n+"</span>"},a),e)};return c}(ke);ja.registerComponent("SubsCapsMenuItem",Hk);var jh=function(d){function c(a,e){void 0===e&&(e={});a=d.call(this,a,e)||this;a.label_="subtitles";-1<["en","en-us","en-ca","fr-ca"].indexOf(a.player_.language_)&&(a.label_="captions");a.menuButton_.controlText(cb(a.label_));
return a}va(c,d);var b=c.prototype;b.buildCSSClass=function(){return"vjs-subs-caps-button "+d.prototype.buildCSSClass.call(this)};b.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+d.prototype.buildWrapperCSSClass.call(this)};b.createItems=function(){var a=[];this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(a.push(new hh(this.player_,{kind:this.label_})),this.hideThreshold_+=1);return a=d.prototype.createItems.call(this,
a,Hk)};return c}(Ed);jh.prototype.kinds_=["captions","subtitles"];jh.prototype.controlText_="Subtitles";ja.registerComponent("SubsCapsButton",jh);var Ik=function(d){function c(a,e){var n=e.track,q=a.audioTracks();e.label=n.label||n.language||"Unknown";e.selected=n.enabled;var t=d.call(this,a,e)||this;t.track=n;t.addClass("vjs-"+n.kind+"-menu-item");var v=function(){for(var r=arguments.length,p=Array(r),m=0;m<r;m++)p[m]=arguments[m];t.handleTracksChange.apply(La(t),p)};q.addEventListener("change",
v);t.on("dispose",function(){q.removeEventListener("change",v)});return t}va(c,d);var b=c.prototype;b.createEl=function(a,e,n){var q='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);"main-desc"===this.options_.track.kind&&(q+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Descriptions")+"</span>\n      ");return d.prototype.createEl.call(this,a,Q({innerHTML:q+"</span>"},e),n)};b.handleClick=function(a){var e=
this.player_.audioTracks();d.prototype.handleClick.call(this,a);for(a=0;a<e.length;a++){var n=e[a];n.enabled=n===this.track}};b.handleTracksChange=function(a){this.selected(this.track.enabled)};return c}(je);ja.registerComponent("AudioTrackMenuItem",Ik);var Jk=function(d){function c(a,e){void 0===e&&(e={});e.tracks=a.audioTracks();return d.call(this,a,e)||this}va(c,d);var b=c.prototype;b.buildCSSClass=function(){return"vjs-audio-button "+d.prototype.buildCSSClass.call(this)};b.buildWrapperCSSClass=
function(){return"vjs-audio-button "+d.prototype.buildWrapperCSSClass.call(this)};b.createItems=function(a){void 0===a&&(a=[]);this.hideThreshold_=1;for(var e=this.player_.audioTracks(),n=0;n<e.length;n++)a.push(new Ik(this.player_,{track:e[n],selectable:!0,multiSelectable:!1}));return a};return c}(dh);Jk.prototype.controlText_="Audio Track";ja.registerComponent("AudioTrackButton",Jk);var kh=function(d){function c(a,e){var n=e.rate,q=parseFloat(n,10);e.label=n;e.selected=1===q;e.selectable=!0;e.multiSelectable=
!1;e=d.call(this,a,e)||this;e.label=n;e.rate=q;e.on(a,"ratechange",e.update);return e}va(c,d);var b=c.prototype;b.handleClick=function(a){d.prototype.handleClick.call(this);this.player().playbackRate(this.rate)};b.update=function(a){this.selected(this.player().playbackRate()===this.rate)};return c}(je);kh.prototype.contentElType="button";ja.registerComponent("PlaybackRateMenuItem",kh);var Kk=function(d){function c(a,e){e=d.call(this,a,e)||this;e.updateVisibility();e.updateLabel();e.on(a,"loadstart",
e.updateVisibility);e.on(a,"ratechange",e.updateLabel);return e}va(c,d);var b=c.prototype;b.createEl=function(){var a=d.prototype.createEl.call(this);this.labelEl_=Aa("div",{className:"vjs-playback-rate-value",innerHTML:"1x"});a.appendChild(this.labelEl_);return a};b.dispose=function(){this.labelEl_=null;d.prototype.dispose.call(this)};b.buildCSSClass=function(){return"vjs-playback-rate "+d.prototype.buildCSSClass.call(this)};b.buildWrapperCSSClass=function(){return"vjs-playback-rate "+d.prototype.buildWrapperCSSClass.call(this)};
b.createMenu=function(){var a=new bh(this.player()),e=this.playbackRates();if(e)for(var n=e.length-1;0<=n;n--)a.addChild(new kh(this.player(),{rate:e[n]+"x"}));return a};b.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())};b.handleClick=function(a){a=this.player().playbackRate();for(var e=this.playbackRates(),n=e[0],q=0;q<e.length;q++)if(e[q]>a){n=e[q];break}this.player().playbackRate(n)};b.playbackRates=function(){return this.options_.playbackRates||
this.options_.playerOptions&&this.options_.playerOptions.playbackRates};b.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&0<this.playbackRates().length};b.updateVisibility=function(a){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")};b.updateLabel=function(a){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")};return c}(ch);Kk.prototype.controlText_=
"Playback Rate";ja.registerComponent("PlaybackRateMenuButton",Kk);var Lk=function(d){function c(){return d.apply(this,arguments)||this}va(c,d);var b=c.prototype;b.buildCSSClass=function(){return"vjs-spacer "+d.prototype.buildCSSClass.call(this)};b.createEl=function(){return d.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})};return c}(ja);ja.registerComponent("Spacer",Lk);var dp=function(d){function c(){return d.apply(this,arguments)||this}va(c,d);var b=c.prototype;b.buildCSSClass=
function(){return"vjs-custom-control-spacer "+d.prototype.buildCSSClass.call(this)};b.createEl=function(){var a=d.prototype.createEl.call(this,{className:this.buildCSSClass()});a.innerHTML="\u00a0";return a};return c}(Lk);ja.registerComponent("CustomControlSpacer",dp);var ff=function(d){function c(){return d.apply(this,arguments)||this}va(c,d);c.prototype.createEl=function(){return d.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})};return c}(ja);ff.prototype.options_={children:"playToggle volumePanel currentTimeDisplay timeDivider durationDisplay progressControl liveDisplay seekToLive remainingTimeDisplay customControlSpacer playbackRateMenuButton chaptersButton descriptionsButton subsCapsButton audioTrackButton fullscreenToggle".split(" ")};
"exitPictureInPicture"in qa&&ff.prototype.options_.children.splice(ff.prototype.options_.children.length-1,0,"pictureInPictureToggle");ja.registerComponent("ControlBar",ff);var Mk=function(d){function c(a,e){e=d.call(this,a,e)||this;e.on(a,"error",e.open);return e}va(c,d);var b=c.prototype;b.buildCSSClass=function(){return"vjs-error-display "+d.prototype.buildCSSClass.call(this)};b.content=function(){var a=this.player().error();return a?this.localize(a.message):""};return c}(zd);Mk.prototype.options_=
Ne({},zd.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});ja.registerComponent("ErrorDisplay",Mk);var Nk=["#000","Black"],Ok=["#00F","Blue"],Pk=["#0FF","Cyan"],Qk=["#0F0","Green"],Rk=["#F0F","Magenta"],Sk=["#F00","Red"],Tk=["#FFF","White"],Uk=["#FF0","Yellow"],lh=["1","Opaque"],mh=["0.5","Semi-Transparent"],Vk=["0","Transparent"],dd={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[Nk,Tk,Sk,Qk,Ok,Uk,Rk,Pk]},backgroundOpacity:{selector:".vjs-bg-opacity > select",
id:"captions-background-opacity-%s",label:"Transparency",options:[lh,mh,Vk]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[Tk,Nk,Sk,Qk,Ok,Uk,Rk,Pk]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",
options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],
"default":2,parser:function(d){return"1.00"===d?null:Number(d)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[lh,mh]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[Vk,mh,lh]}};dd.windowColor.options=dd.backgroundColor.options;var ep=function(d){function c(a,e){e.temporary=
!1;var n=d.call(this,a,e)||this;n.updateDisplay=Ma(La(n),n.updateDisplay);n.fill();n.hasBeenOpened_=n.hasBeenFilled_=!0;n.endDialog=Aa("p",{className:"vjs-control-text",textContent:n.localize("End of dialog window.")});n.el().appendChild(n.endDialog);n.setDefaults();void 0===e.persistTextTrackSettings&&(n.options_.persistTextTrackSettings=n.options_.playerOptions.persistTextTrackSettings);n.on(n.$(".vjs-done-button"),"click",function(){n.saveSettings();n.close()});n.on(n.$(".vjs-default-button"),
"click",function(){n.setDefaults();n.updateDisplay()});Y(dd,function(q){n.on(n.$(q.selector),"change",n.updateDisplay)});n.options_.persistTextTrackSettings&&n.restoreSettings();return n}va(c,d);var b=c.prototype;b.dispose=function(){this.endDialog=null;d.prototype.dispose.call(this)};b.createElSelect_=function(a,e,n){var q=this;void 0===e&&(e="");void 0===n&&(n="label");a=dd[a];var t=a.id.replace("%s",this.id_),v=[e,t].join(" ").trim();return["<"+n+' id="'+t+'" class="'+("label"===n?"vjs-label":
"")+'">',this.localize(a.label),"</"+n+">",'<select aria-labelledby="'+v+'">'].concat(a.options.map(function(r){var p=t+"-"+r[1].replace(/\W+/g,"");return['<option id="'+p+'" value="'+r[0]+'" ','aria-labelledby="'+v+" "+p+'">',q.localize(r[1]),"</option>"].join("")})).concat("</select>").join("")};b.createElFgColor_=function(){var a="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+a+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",
a),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",a),"</span></fieldset>"].join("")};b.createElBgColor_=function(){var a="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+a+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",a),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",a),"</span></fieldset>"].join("")};b.createElWinColor_=function(){var a=
"captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+a+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",a),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",a),"</span></fieldset>"].join("")};b.createElColors_=function(){return Aa("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})};b.createElFont_=
function(){return Aa("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),'</fieldset><fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),'</fieldset><fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})};b.createElControls_=function(){var a=this.localize("restore all settings to the default values");
return Aa("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+a+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+a+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})};b.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]};b.label=function(){return this.localize("Caption Settings Dialog")};b.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")};
b.buildCSSClass=function(){return d.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"};b.getValues=function(){var a=this;return ia(dd,function(e,n,q){var t=a.$(n.selector);n=qj(t.options[t.options.selectedIndex].value,n.parser);void 0!==n&&(e[q]=n);return e},{})};b.setValues=function(a){var e=this;Y(dd,function(n,q){var t=e.$(n.selector);q=a[q];n=n.parser;if(q)for(var v=0;v<t.options.length;v++)if(qj(t.options[v].value,n)===q){t.selectedIndex=v;break}})};b.setDefaults=function(){var a=
this;Y(dd,function(e){var n=e.hasOwnProperty("default")?e["default"]:0;a.$(e.selector).selectedIndex=n})};b.restoreSettings=function(){try{var a=JSON.parse(da.localStorage.getItem("vjs-text-track-settings"))}catch(e){Ka.warn(e)}a&&this.setValues(a)};b.saveSettings=function(){if(this.options_.persistTextTrackSettings){var a=this.getValues();try{Object.keys(a).length?da.localStorage.setItem("vjs-text-track-settings",JSON.stringify(a)):da.localStorage.removeItem("vjs-text-track-settings")}catch(e){Ka.warn(e)}}};
b.updateDisplay=function(){var a=this.player_.getChild("textTrackDisplay");a&&a.updateDisplay()};b.conditionalBlur_=function(){this.previouslyActiveEl_=null;var a=this.player_.controlBar,e=a&&a.subsCapsButton;a=a&&a.captionsButton;e?e.focus():a&&a.focus()};return c}(zd);ja.registerComponent("TextTrackSettings",ep);var fp=function(d){function c(a,e){var n=e.ResizeObserver||da.ResizeObserver;null===e.ResizeObserver&&(n=!1);var q=Wa({createEl:!n,reportTouchActivity:!1},e);var t=d.call(this,a,q)||this;
t.ResizeObserver=e.ResizeObserver||da.ResizeObserver;t.loadListener_=null;t.resizeObserver_=null;t.debouncedHandler_=vo(function(){t.resizeHandler()},100,!1,La(t));n?(t.resizeObserver_=new t.ResizeObserver(t.debouncedHandler_),t.resizeObserver_.observe(a.el())):(t.loadListener_=function(){if(t.el_&&t.el_.contentWindow){var v=t.debouncedHandler_,r=t.unloadListener_=function(){lb(this,"resize",v);lb(this,"unload",r);r=null};Ab(t.el_.contentWindow,"unload",r);Ab(t.el_.contentWindow,"resize",v)}},t.one("load",
t.loadListener_));return t}va(c,d);var b=c.prototype;b.createEl=function(){return d.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1},{"aria-hidden":"true"})};b.resizeHandler=function(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")};b.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel();this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect());this.loadListener_&&
this.off("load",this.loadListener_);this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow);this.loadListener_=this.debouncedHandler_=this.resizeObserver=this.ResizeObserver=null;d.prototype.dispose.call(this)};return c}(ja);ja.registerComponent("ResizeManager",fp);var gp={trackingThreshold:30,liveTolerance:15},hp=function(d){function c(a,e){e=Wa(gp,e,{createEl:!1});var n=d.call(this,a,e)||this;n.reset_();n.on(n.player_,"durationchange",n.handleDurationchange);
n.one(n.player_,"canplay",function(){return n.toggleTracking()});if(ee&&"hidden"in qa&&"visibilityState"in qa)n.on(qa,"visibilitychange",n.handleVisibilityChange);return n}va(c,d);var b=c.prototype;b.handleVisibilityChange=function(){Infinity===this.player_.duration()&&(qa.hidden?this.stopTracking():this.startTracking())};b.trackLive_=function(){var a=this.player_.seekable();if(a&&a.length){a=Number(da.performance.now().toFixed(4));var e=-1===this.lastTime_?0:(a-this.lastTime_)/1E3;this.lastTime_=
a;this.pastSeekEnd_=this.pastSeekEnd()+e;a=this.liveCurrentTime();e=this.player_.currentTime();e=this.player_.paused()||this.seekedBehindLive_||Math.abs(a-e)>this.options_.liveTolerance;this.timeupdateSeen_&&Infinity!==a||(e=!1);e!==this.behindLiveEdge_&&(this.behindLiveEdge_=e,this.trigger("liveedgechange"))}};b.handleDurationchange=function(){this.toggleTracking()};b.toggleTracking=function(){Infinity===this.player_.duration()&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&
this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())};b.startTracking=function(){if(!this.isTracking())if(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLive_,30),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLive_),this.timeupdateSeen_)this.on(this.player_,"seeked",this.handleSeeked);else this.one(this.player_,"play",this.handlePlay),this.one(this.player_,
"timeupdate",this.handleFirstTimeupdate)};b.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0;this.on(this.player_,"seeked",this.handleSeeked)};b.handleSeeked=function(){var a=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.skipNextSeeked_?!1:2<a;this.skipNextSeeked_=!1;this.trackLive_()};b.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge)};b.reset_=function(){this.lastTime_=-1;this.pastSeekEnd_=0;this.lastSeekEnd_=-1;this.behindLiveEdge_=
!0;this.skipNextSeeked_=this.seekedBehindLive_=this.timeupdateSeen_=!1;this.clearInterval(this.trackingInterval_);this.trackingInterval_=null;this.off(this.player_,["play","pause"],this.trackLive_);this.off(this.player_,"seeked",this.handleSeeked);this.off(this.player_,"play",this.handlePlay);this.off(this.player_,"timeupdate",this.handleFirstTimeupdate);this.off(this.player_,"timeupdate",this.seekToLiveEdge)};b.stopTracking=function(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))};
b.seekableEnd=function(){for(var a=this.player_.seekable(),e=[],n=a?a.length:0;n--;)e.push(a.end(n));return e.length?e.sort()[e.length-1]:Infinity};b.seekableStart=function(){for(var a=this.player_.seekable(),e=[],n=a?a.length:0;n--;)e.push(a.start(n));return e.length?e.sort()[0]:0};b.liveWindow=function(){var a=this.liveCurrentTime();return Infinity===a?0:a-this.seekableStart()};b.isLive=function(){return this.isTracking()};b.atLiveEdge=function(){return!this.behindLiveEdge()};b.liveCurrentTime=
function(){return this.pastSeekEnd()+this.seekableEnd()};b.pastSeekEnd=function(){var a=this.seekableEnd();-1!==this.lastSeekEnd_&&a!==this.lastSeekEnd_&&(this.pastSeekEnd_=0);this.lastSeekEnd_=a;return this.pastSeekEnd_};b.behindLiveEdge=function(){return this.behindLiveEdge_};b.isTracking=function(){return"number"===typeof this.trackingInterval_};b.seekToLiveEdge=function(){this.seekedBehindLive_=!1;this.atLiveEdge()||(this.skipNextSeeked_=!0,this.player_.currentTime(this.liveCurrentTime()))};b.dispose=
function(){this.off(qa,"visibilitychange",this.handleVisibilityChange);this.stopTracking();d.prototype.dispose.call(this)};return c}(ja);ja.registerComponent("LiveTracker",hp);var nh=function(d){var c=d.el();if(c.hasAttribute("src"))return d.triggerSourceset(c.src),!0;c=d.doubleDollar("source");var b=[],a="";if(!c.length)return!1;for(var e=0;e<c.length;e++){var n=c[e].src;n&&-1===b.indexOf(n)&&b.push(n)}if(!b.length)return!1;1===b.length&&(a=b[0]);d.triggerSourceset(a);return!0},ip=Object.defineProperty({},
"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(d){var c=qa.createElement(this.nodeName.toLowerCase());c.innerHTML=d;for(d=qa.createDocumentFragment();c.childNodes.length;)d.appendChild(c.childNodes[0]);this.innerText="";da.Element.prototype.appendChild.call(this,d);return this.innerHTML}}),Wk=function(d,c){for(var b={},a=0;a<d.length&&!((b=Object.getOwnPropertyDescriptor(d[a],c))&&b.set&&b.get);a++);b.enumerable=!0;b.configurable=!0;return b},Xk=function(d){var c=d.el();
if(!c.resetSourceWatch_){var b={},a=Wk([d.el(),da.HTMLMediaElement.prototype,da.Element.prototype,ip],"innerHTML"),e=function(n){return function(){for(var q=arguments.length,t=Array(q),v=0;v<q;v++)t[v]=arguments[v];q=n.apply(c,t);nh(d);return q}};["append","appendChild","insertAdjacentHTML"].forEach(function(n){c[n]&&(b[n]=c[n],c[n]=e(b[n]))});Object.defineProperty(c,"innerHTML",Wa(a,{set:e(a.set)}));c.resetSourceWatch_=function(){c.resetSourceWatch_=null;Object.keys(b).forEach(function(n){c[n]=b[n]});
Object.defineProperty(c,"innerHTML",a)};d.one("sourceset",c.resetSourceWatch_)}},jp=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?nk(da.Element.prototype.getAttribute.call(this,"src")):""},set:function(d){da.Element.prototype.setAttribute.call(this,"src",d);return d}}),kp=function(d){if(d.featuresSourceset){var c=d.el();if(!c.resetSourceset_){var b=Wk([d.el(),da.HTMLMediaElement.prototype,jp],"src"),a=c.setAttribute,e=c.load;Object.defineProperty(c,"src",Wa(b,{set:function(n){n=
b.set.call(c,n);d.triggerSourceset(c.src);return n}}));c.setAttribute=function(n,q){q=a.call(c,n,q);/src/i.test(n)&&d.triggerSourceset(c.src);return q};c.load=function(){var n=e.call(c);nh(d)||(d.triggerSourceset(""),Xk(d));return n};c.currentSrc?d.triggerSourceset(c.currentSrc):nh(d)||Xk(d);c.resetSourceset_=function(){c.resetSourceset_=null;c.load=e;c.setAttribute=a;Object.defineProperty(c,"src",b);c.resetSourceWatch_&&c.resetSourceWatch_()}}}},oh=function(d,c,b,a){void 0===a&&(a=!0);var e=function(q){return Object.defineProperty(d,
c,{value:q,enumerable:!0,writable:!0})},n={configurable:!0,enumerable:!0,get:function(){var q=b();e(q);return q}};a&&(n.set=e);return Object.defineProperty(d,c,n)},wa=function(d){function c(a,e){e=d.call(this,a,e)||this;var n=a.source,q=!1;n&&(e.el_.currentSrc!==n.src||a.tag&&3===a.tag.initNetworkState_)?e.setSource(n):e.handleLateInit_(e.el_);a.enableSourceset&&e.setupSourcesetHandling_();e.isScrubbing_=!1;if(e.el_.hasChildNodes()){var t=e.el_.childNodes,v=t.length;for(n=[];v--;){var r=t[v];"track"===
r.nodeName.toLowerCase()&&(e.featuresNativeTextTracks?(e.remoteTextTrackEls().addTrackElement_(r),e.remoteTextTracks().addTrack(r.track),e.textTracks().addTrack(r.track),q||e.el_.hasAttribute("crossorigin")||!df(r.src)||(q=!0)):n.push(r))}for(t=0;t<n.length;t++)e.el_.removeChild(n[t])}e.proxyNativeTracks_();e.featuresNativeTextTracks&&q&&Ka.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading.");e.restoreMetadataTracksInIOSNativePlayer_();
(xd||Lg||Yj)&&!0===a.nativeControlsForTouch&&e.setControls(!0);e.proxyWebkitFullscreen_();e.triggerReady();return e}va(c,d);var b=c.prototype;b.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_();c.disposeMediaElement(this.el_);this.options_=null;d.prototype.dispose.call(this)};b.setupSourcesetHandling_=function(){kp(this)};b.restoreMetadataTracksInIOSNativePlayer_=function(){var a=this.textTracks(),e,n=function(){e=[];for(var t=0;t<a.length;t++){var v=a[t];"metadata"===
v.kind&&e.push({track:v,storedMode:v.mode})}};n();a.addEventListener("change",n);this.on("dispose",function(){return a.removeEventListener("change",n)});var q=function v(){for(var r=0;r<e.length;r++){var p=e[r];"disabled"===p.track.mode&&p.track.mode!==p.storedMode&&(p.track.mode=p.storedMode)}a.removeEventListener("change",v)};this.on("webkitbeginfullscreen",function(){a.removeEventListener("change",n);a.removeEventListener("change",q);a.addEventListener("change",q)});this.on("webkitendfullscreen",
function(){a.removeEventListener("change",n);a.addEventListener("change",n);a.removeEventListener("change",q)})};b.overrideNative_=function(a,e){var n=this;if(e===this["featuresNative"+a+"Tracks"]){var q=a.toLowerCase();this[q+"TracksListeners_"]&&Object.keys(this[q+"TracksListeners_"]).forEach(function(t){n.el()[q+"Tracks"].removeEventListener(t,n[q+"TracksListeners_"][t])});this["featuresNative"+a+"Tracks"]=!e;this[q+"TracksListeners_"]=null;this.proxyNativeTracksForType_(q)}};b.overrideNativeAudioTracks=
function(a){this.overrideNative_("Audio",a)};b.overrideNativeVideoTracks=function(a){this.overrideNative_("Video",a)};b.proxyNativeTracksForType_=function(a){var e=this,n=Xb[a],q=this.el()[n.getterName],t=this[n.getterName]();if(this["featuresNative"+n.capitalName+"Tracks"]&&q&&q.addEventListener){var v={change:function(p){p={type:"change",target:t,currentTarget:t,srcElement:t};t.trigger(p);"text"===a&&e[Cd.remoteText.getterName]().trigger(p)},addtrack:function(p){t.addTrack(p.track)},removetrack:function(p){t.removeTrack(p.track)}},
r=function(){for(var p=[],m=0;m<t.length;m++){for(var l=!1,f=0;f<q.length;f++)if(q[f]===t[m]){l=!0;break}l||p.push(t[m])}for(;p.length;)t.removeTrack(p.shift())};this[n.getterName+"Listeners_"]=v;Object.keys(v).forEach(function(p){var m=v[p];q.addEventListener(p,m);e.on("dispose",function(l){return q.removeEventListener(p,m)})});this.on("loadstart",r);this.on("dispose",function(p){return e.off("loadstart",r)})}};b.proxyNativeTracks_=function(){var a=this;Xb.names.forEach(function(e){a.proxyNativeTracksForType_(e)})};
b.createEl=function(){var a=this.options_.tag;if(!a||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(a){var e=a.cloneNode(!0);a.parentNode&&a.parentNode.insertBefore(e,a);c.disposeMediaElement(a);a=e}else a=qa.createElement("video"),e=this.options_.tag&&cc(this.options_.tag),e=Wa({},e),xd&&!0===this.options_.nativeControlsForTouch||delete e.controls,Ce(a,Q(e,{id:this.options_.techId,"class":"vjs-tech"}));a.playerId=this.options_.playerId}"undefined"!==typeof this.options_.preload&&
a.setAttribute("preload",this.options_.preload);void 0!==this.options_.disablePictureInPicture&&(a.disablePictureInPicture=this.options_.disablePictureInPicture);e=["loop","muted","playsinline","autoplay"];for(var n=0;n<e.length;n++){var q=e[n],t=this.options_[q];"undefined"!==typeof t&&(t?a.setAttribute(q,q):a.removeAttribute(q),a[q]=t)}return a};b.handleLateInit_=function(a){if(0!==a.networkState&&3!==a.networkState)if(0===a.readyState){var e=!1,n=function(){e=!0};this.on("loadstart",n);var q=function(){e||
this.trigger("loadstart")};this.on("loadedmetadata",q);this.ready(function(){this.off("loadstart",n);this.off("loadedmetadata",q);e||this.trigger("loadstart")})}else{var t=["loadstart"];t.push("loadedmetadata");2<=a.readyState&&t.push("loadeddata");3<=a.readyState&&t.push("canplay");4<=a.readyState&&t.push("canplaythrough");this.ready(function(){t.forEach(function(v){this.trigger(v)},this)})}};b.setScrubbing=function(a){this.isScrubbing_=a};b.scrubbing=function(){return this.isScrubbing_};b.setCurrentTime=
function(a){try{this.isScrubbing_&&this.el_.fastSeek&&Ze?this.el_.fastSeek(a):this.el_.currentTime=a}catch(e){Ka(e,"Video is not ready. (Video.js)")}};b.duration=function(){var a=this;return Infinity===this.el_.duration&&Pc&&zc&&0===this.el_.currentTime?(this.on("timeupdate",function n(){0<a.el_.currentTime&&(Infinity===a.el_.duration&&a.trigger("durationchange"),a.off("timeupdate",n))}),NaN):this.el_.duration||NaN};b.width=function(){return this.el_.offsetWidth};b.height=function(){return this.el_.offsetHeight};
b.proxyWebkitFullscreen_=function(){var a=this;if("webkitDisplayingFullscreen"in this.el_){var e=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},n=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",n);this.on("dispose",function(){a.off("webkitbeginfullscreen",n);a.off("webkitendfullscreen",
e)})}};b.supportsFullScreen=function(){if("function"===typeof this.el_.webkitEnterFullScreen){var a=da.navigator&&da.navigator.userAgent||"";if(/Android/.test(a)||!/Chrome|Mac OS X 10.5/.test(a))return!0}return!1};b.enterFullScreen=function(){var a=this.el_;if(a.paused&&a.networkState<=a.HAVE_METADATA)Kc(this.el_.play()),this.setTimeout(function(){a.pause();try{a.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}},0);else try{a.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",
e)}};b.exitFullScreen=function(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",Error("The video is not fullscreen"))};b.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()};b.src=function(a){if(void 0===a)return this.el_.src;this.setSrc(a)};b.reset=function(){c.resetMediaElement(this.el_)};b.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc};b.setControls=function(a){this.el_.controls=
!!a};b.addTextTrack=function(a,e,n){return this.featuresNativeTextTracks?this.el_.addTextTrack(a,e,n):d.prototype.addTextTrack.call(this,a,e,n)};b.createRemoteTextTrack=function(a){if(!this.featuresNativeTextTracks)return d.prototype.createRemoteTextTrack.call(this,a);var e=qa.createElement("track");a.kind&&(e.kind=a.kind);a.label&&(e.label=a.label);if(a.language||a.srclang)e.srclang=a.language||a.srclang;a["default"]&&(e["default"]=a["default"]);a.id&&(e.id=a.id);a.src&&(e.src=a.src);return e};b.addRemoteTextTrack=
function(a,e){a=d.prototype.addRemoteTextTrack.call(this,a,e);this.featuresNativeTextTracks&&this.el().appendChild(a);return a};b.removeRemoteTextTrack=function(a){d.prototype.removeRemoteTextTrack.call(this,a);if(this.featuresNativeTextTracks)for(var e=this.doubleDollar("track"),n=e.length;n--;)a!==e[n]&&a!==e[n].track||this.el().removeChild(e[n])};b.getVideoPlaybackQuality=function(){if("function"===typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var a={};"undefined"!==
typeof this.el().webkitDroppedFrameCount&&"undefined"!==typeof this.el().webkitDecodedFrameCount&&(a.droppedVideoFrames=this.el().webkitDroppedFrameCount,a.totalVideoFrames=this.el().webkitDecodedFrameCount);da.performance&&"function"===typeof da.performance.now?a.creationTime=da.performance.now():da.performance&&da.performance.timing&&"number"===typeof da.performance.timing.navigationStart&&(a.creationTime=da.Date.now()-da.performance.timing.navigationStart);return a};return c}(Ta);oh(wa,"TEST_VID",
function(){if(Ha()){var d=qa.createElement("video"),c=qa.createElement("track");c.kind="captions";c.srclang="en";c.label="English";d.appendChild(c);return d}});wa.isSupported=function(){try{wa.TEST_VID.volume=.5}catch(d){return!1}return!(!wa.TEST_VID||!wa.TEST_VID.canPlayType)};wa.canPlayType=function(d){return wa.TEST_VID.canPlayType(d)};wa.canPlaySource=function(d,c){return wa.canPlayType(d.type)};wa.canControlVolume=function(){try{var d=wa.TEST_VID.volume;wa.TEST_VID.volume=d/2+.1;return d!==wa.TEST_VID.volume}catch(c){return!1}};
wa.canMuteVolume=function(){try{var d=wa.TEST_VID.muted;wa.TEST_VID.muted=!d;wa.TEST_VID.muted?wa.TEST_VID.setAttribute("muted","muted"):wa.TEST_VID.removeAttribute("muted");return d!==wa.TEST_VID.muted}catch(c){return!1}};wa.canControlPlaybackRate=function(){if(Pc&&zc&&58>ak)return!1;try{var d=wa.TEST_VID.playbackRate;wa.TEST_VID.playbackRate=d/2+.1;return d!==wa.TEST_VID.playbackRate}catch(c){return!1}};wa.canOverrideAttributes=function(){try{var d=function(){};Object.defineProperty(qa.createElement("video"),
"src",{get:d,set:d});Object.defineProperty(qa.createElement("audio"),"src",{get:d,set:d});Object.defineProperty(qa.createElement("video"),"innerHTML",{get:d,set:d});Object.defineProperty(qa.createElement("audio"),"innerHTML",{get:d,set:d})}catch(c){return!1}return!0};wa.supportsNativeTextTracks=function(){return Ze||Ob&&zc};wa.supportsNativeVideoTracks=function(){return!(!wa.TEST_VID||!wa.TEST_VID.videoTracks)};wa.supportsNativeAudioTracks=function(){return!(!wa.TEST_VID||!wa.TEST_VID.audioTracks)};
wa.Events="loadstart suspend abort error emptied stalled loadedmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate progress play pause ratechange resize volumechange".split(" ");[["featuresVolumeControl","canControlVolume"],["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],
["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(d){var c=d[1];oh(wa.prototype,d[0],function(){return wa[c]()},!0)});wa.prototype.movingMediaElementInDOM=!Ob;wa.prototype.featuresFullscreenResize=!0;wa.prototype.featuresProgressEvents=!0;wa.prototype.featuresTimeupdateEvents=!0;var gf;wa.patchCanPlayType=function(){4<=Ig&&!Zj&&!zc&&(gf=wa.TEST_VID&&wa.TEST_VID.constructor.prototype.canPlayType,wa.TEST_VID.constructor.prototype.canPlayType=function(d){var c=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;
return d&&c.test(d)?"maybe":gf.call(this,d)})};wa.unpatchCanPlayType=function(){var d=wa.TEST_VID.constructor.prototype.canPlayType;gf&&(wa.TEST_VID.constructor.prototype.canPlayType=gf);return d};wa.patchCanPlayType();wa.disposeMediaElement=function(d){if(d){for(d.parentNode&&d.parentNode.removeChild(d);d.hasChildNodes();)d.removeChild(d.firstChild);d.removeAttribute("src");if("function"===typeof d.load)try{d.load()}catch(c){}}};wa.resetMediaElement=function(d){if(d){for(var c=d.querySelectorAll("source"),
b=c.length;b--;)d.removeChild(c[b]);d.removeAttribute("src");if("function"===typeof d.load)try{d.load()}catch(a){}}};"muted defaultMuted autoplay controls loop playsinline".split(" ").forEach(function(d){wa.prototype[d]=function(){return this.el_[d]||this.el_.hasAttribute(d)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(d){wa.prototype["set"+cb(d)]=function(c){(this.el_[d]=c)?this.el_.setAttribute(d,d):this.el_.removeAttribute(d)}});"paused currentTime buffered volume poster preload error seeking seekable ended playbackRate defaultPlaybackRate disablePictureInPicture played networkState readyState videoWidth videoHeight crossOrigin".split(" ").forEach(function(d){wa.prototype[d]=
function(){return this.el_[d]}});"volume src poster preload playbackRate defaultPlaybackRate disablePictureInPicture crossOrigin".split(" ").forEach(function(d){wa.prototype["set"+cb(d)]=function(c){this.el_[d]=c}});["pause","load","play"].forEach(function(d){wa.prototype[d]=function(){return this.el_[d]()}});Ta.withSourceHandlers(wa);wa.nativeSourceHandler={};wa.nativeSourceHandler.canPlayType=function(d){try{return wa.TEST_VID.canPlayType(d)}catch(c){return""}};wa.nativeSourceHandler.canHandleSource=
function(d,c){return d.type?wa.nativeSourceHandler.canPlayType(d.type):d.src?(d=Ug(d.src),wa.nativeSourceHandler.canPlayType("video/"+d)):""};wa.nativeSourceHandler.handleSource=function(d,c,b){c.setSrc(d.src)};wa.nativeSourceHandler.dispose=function(){};wa.registerSourceHandler(wa.nativeSourceHandler);Ta.registerTech("Html5",wa);var Yk="progress abort suspend emptied stalled loadedmetadata loadeddata timeupdate resize volumechange texttrackchange".split(" "),ph={canplay:"CanPlay",canplaythrough:"CanPlayThrough",
playing:"Playing",seeked:"Seeked"},qh="tiny xsmall small medium large xlarge huge".split(" "),hf={};qh.forEach(function(d){var c="x"===d.charAt(0)?"x-"+d.substring(1):d;hf[d]="vjs-layout-"+c});var lp={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:Infinity},gb=function(d){function c(a,e,n){a.id=a.id||e.id||"vjs_video_"+Jc++;e=Q(c.getTagSettings(a),e);e.initChildren=!1;e.createEl=!1;e.evented=!1;e.reportTouchActivity=!1;if(!e.language)if("function"===typeof a.closest){var q=a.closest("[lang]");
q&&q.getAttribute&&(e.language=q.getAttribute("lang"))}else for(q=a;q&&1===q.nodeType;){if(cc(q).hasOwnProperty("lang")){e.language=q.getAttribute("lang");break}q=q.parentNode}var t=d.call(this,null,e,n)||this;t.boundDocumentFullscreenChange_=function(r){return t.documentFullscreenChange_(r)};t.boundFullWindowOnEscKey_=function(r){return t.fullWindowOnEscKey(r)};t.isFullscreen_=!1;t.log=Vj(t.id_);t.fsApi_=Oe;t.isPosterFromTech_=!1;t.queuedCallbacks_=[];t.isReady_=!1;t.hasStarted_=!1;t.userActive_=
!1;t.debugEnabled_=!1;if(!t.options_||!t.options_.techOrder||!t.options_.techOrder.length)throw Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");t.tag=a;t.tagAttributes=a&&cc(a);t.language(t.options_.language);if(e.languages){var v={};Object.getOwnPropertyNames(e.languages).forEach(function(r){v[r.toLowerCase()]=e.languages[r]});t.languages_=v}else t.languages_=c.prototype.options_.languages;t.resetCache_();t.poster_=
e.poster||"";t.controls_=!!e.controls;a.controls=!1;a.removeAttribute("controls");t.changingSrc_=!1;t.playCallbacks_=[];t.playTerminatedQueue_=[];a.hasAttribute("autoplay")?t.autoplay(!0):t.autoplay(t.options_.autoplay);e.plugins&&Object.keys(e.plugins).forEach(function(r){if("function"!==typeof t[r])throw Error('plugin "'+r+'" does not exist');});t.scrubbing_=!1;t.el_=t.createEl();ng(La(t),{eventBusKey:"el_"});t.fsApi_.requestFullscreen&&(Ab(qa,t.fsApi_.fullscreenchange,t.boundDocumentFullscreenChange_),
t.on(t.fsApi_.fullscreenchange,t.boundDocumentFullscreenChange_));if(t.fluid_)t.on(["playerreset","resize"],t.updateStyleEl_);n=Wa(t.options_);e.plugins&&Object.keys(e.plugins).forEach(function(r){t[r](e.plugins[r])});e.debug&&t.debug(!0);t.options_.playerOptions=n;t.middleware_=[];t.initChildren();t.isAudio("audio"===a.nodeName.toLowerCase());t.controls()?t.addClass("vjs-controls-enabled"):t.addClass("vjs-controls-disabled");t.el_.setAttribute("role","region");t.isAudio()?t.el_.setAttribute("aria-label",
t.localize("Audio Player")):t.el_.setAttribute("aria-label",t.localize("Video Player"));t.isAudio()&&t.addClass("vjs-audio");t.flexNotSupported_()&&t.addClass("vjs-no-flex");xd&&t.addClass("vjs-touch-enabled");Ob||t.addClass("vjs-workinghover");c.players[t.id_]=La(t);t.addClass("vjs-v7");t.userActive(!0);t.reportUserActivity();t.one("play",t.listenForUserActivity_);t.on("stageclick",t.handleStageClick_);t.on("keydown",t.handleKeyDown);t.on("languagechange",t.handleLanguagechange);t.breakpoints(t.options_.breakpoints);
t.responsive(t.options_.responsive);return t}va(c,d);var b=c.prototype;b.dispose=function(){var a=this;this.trigger("dispose");this.off("dispose");lb(qa,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_);lb(qa,"keydown",this.boundFullWindowOnEscKey_);this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null);c.players[this.id_]=null;this.tag&&this.tag.player&&(this.tag.player=null);this.el_&&this.el_.player&&(this.el_.player=null);
this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_="");this.playerElIngest_&&(this.playerElIngest_=null);this.tag&&(this.tag=null);vg[this.id()]=null;Fb.names.forEach(function(e){(e=a[Fb[e].getterName]())&&e.off&&e.off()});d.prototype.dispose.call(this)};b.createEl=function(){var a=this.tag,e=this.playerElIngest_=a.parentNode&&a.parentNode.hasAttribute&&a.parentNode.hasAttribute("data-vjs-player"),n="video-js"===this.tag.tagName.toLowerCase();if(e)var q=this.el_=a.parentNode;
else n||(q=this.el_=d.prototype.createEl.call(this,"div"));var t=cc(a);if(n){q=this.el_=a;for(a=this.tag=qa.createElement("video");q.children.length;)a.appendChild(q.firstChild);Fa(q,"video-js")||Va(q,"video-js");q.appendChild(a);e=this.playerElIngest_=q;Object.keys(q).forEach(function(m){try{a[m]=q[m]}catch(l){}})}a.setAttribute("tabindex","-1");t.tabindex="-1";if(ee||zc&&bk)a.setAttribute("role","application"),t.role="application";a.removeAttribute("width");a.removeAttribute("height");"width"in
t&&delete t.width;"height"in t&&delete t.height;Object.getOwnPropertyNames(t).forEach(function(m){n&&"class"===m||q.setAttribute(m,t[m]);n&&a.setAttribute(m,t[m])});a.playerId=a.id;a.id+="_html5_api";a.className="vjs-tech";a.player=q.player=this;this.addClass("vjs-paused");if(!0!==da.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=ek("vjs-styles-dimensions");var v=Lc(".vjs-styles-defaults"),r=Lc("head");r.insertBefore(this.styleEl_,v?v.nextSibling:r.firstChild)}this.fluid_=this.fill_=!1;this.width(this.options_.width);
this.height(this.options_.height);this.fill(this.options_.fill);this.fluid(this.options_.fluid);this.aspectRatio(this.options_.aspectRatio);this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);v=a.getElementsByTagName("a");for(r=0;r<v.length;r++){var p=v.item(r);Va(p,"vjs-hidden");p.setAttribute("hidden","hidden")}a.initNetworkState_=a.networkState;a.parentNode&&!e&&a.parentNode.insertBefore(q,a);Ga(a,q);this.children_.unshift(a);this.el_.setAttribute("lang",this.language_);return this.el_=
q};b.crossOrigin=function(a){if(!a)return this.techGet_("crossOrigin");"anonymous"!==a&&"use-credentials"!==a?Ka.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+a+'"'):this.techCall_("setCrossOrigin",a)};b.width=function(a){return this.dimension("width",a)};b.height=function(a){return this.dimension("height",a)};b.dimension=function(a,e){var n=a+"_";if(void 0===e)return this[n]||0;if(""===e||"auto"===e)this[n]=void 0,this.updateStyleEl_();else{var q=parseFloat(e);isNaN(q)?Ka.error('Improper value "'+
e+'" supplied for for '+a):(this[n]=q,this.updateStyleEl_())}};b.fluid=function(a){var e=this;if(void 0===a)return!!this.fluid_;this.fluid_=!!a;xc(this)&&this.off(["playerreset","resize"],this.updateStyleEl_);a?(this.addClass("vjs-fluid"),this.fill(!1),wo(this,function(){e.on(["playerreset","resize"],e.updateStyleEl_)})):this.removeClass("vjs-fluid");this.updateStyleEl_()};b.fill=function(a){if(void 0===a)return!!this.fill_;this.fill_=!!a;a?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")};
b.aspectRatio=function(a){if(void 0===a)return this.aspectRatio_;if(!/^\d+:\d+$/.test(a))throw Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=a;this.fluid(!0);this.updateStyleEl_()};b.updateStyleEl_=function(){if(!0===da.VIDEOJS_NO_DYNAMIC_STYLE){var a="number"===typeof this.width_?this.width_:this.options_.width,e="number"===typeof this.height_?this.height_:this.options_.height,n=this.tech_&&this.tech_.el();n&&(0<=a&&(n.width=
a),0<=e&&(n.height=e))}else{a=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:0<this.videoWidth()?this.videoWidth()+":"+this.videoHeight():"16:9").split(":");var q=a[1]/a[0];a=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/q:this.videoWidth()||300;e=void 0!==this.height_?this.height_:a*q;n=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions";this.addClass(n);fk(this.styleEl_,"\n      ."+n+" {\n        width: "+a+"px;\n        height: "+
e+"px;\n      }\n\n      ."+n+".vjs-fluid {\n        padding-top: "+100*q+"%;\n      }\n    ")}};b.loadTech_=function(a,e){var n=this;this.tech_&&this.unloadTech_();var q=cb(a),t=a.charAt(0).toLowerCase()+a.slice(1);"Html5"!==q&&this.tag&&(Ta.getTech("Html5").disposeMediaElement(this.tag),this.tag=this.tag.player=null);this.techName_=q;this.isReady_=!1;var v="string"===typeof this.autoplay()?!1:this.autoplay(),r={source:e,autoplay:v,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),
techId:this.id()+"_"+t+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};Fb.names.forEach(function(p){p=Fb[p];r[p.getterName]=
n[p.privateName]});Q(r,this.options_[q]);Q(r,this.options_[t]);Q(r,this.options_[a.toLowerCase()]);this.tag&&(r.tag=this.tag);e&&e.src===this.cache_.src&&0<this.cache_.currentTime&&(r.startTime=this.cache_.currentTime);a=Ta.getTech(a);if(!a)throw Error("No Tech named '"+q+"' exists! '"+q+"' should be registered using videojs.registerTech()'");this.tech_=new a(r);this.tech_.ready(Ma(this,this.handleTechReady_),!0);jk.jsonToTextTracks(this.textTracksJson_||[],this.tech_);Yk.forEach(function(p){n.on(n.tech_,
p,n["handleTech"+cb(p)+"_"])});Object.keys(ph).forEach(function(p){n.on(n.tech_,p,function(m){if(0===n.tech_.playbackRate()&&n.tech_.seeking())n.queuedCallbacks_.push({callback:n["handleTech"+ph[p]+"_"].bind(n),event:m});else n["handleTech"+ph[p]+"_"](m)})});this.on(this.tech_,"loadstart",this.handleTechLoadStart_);this.on(this.tech_,"sourceset",this.handleTechSourceset_);this.on(this.tech_,"waiting",this.handleTechWaiting_);this.on(this.tech_,"ended",this.handleTechEnded_);this.on(this.tech_,"seeking",
this.handleTechSeeking_);this.on(this.tech_,"play",this.handleTechPlay_);this.on(this.tech_,"firstplay",this.handleTechFirstPlay_);this.on(this.tech_,"pause",this.handleTechPause_);this.on(this.tech_,"durationchange",this.handleTechDurationChange_);this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_);this.on(this.tech_,"fullscreenerror",this.handleTechFullscreenError_);this.on(this.tech_,"enterpictureinpicture",this.handleTechEnterPictureInPicture_);this.on(this.tech_,"leavepictureinpicture",
this.handleTechLeavePictureInPicture_);this.on(this.tech_,"error",this.handleTechError_);this.on(this.tech_,"loadedmetadata",this.updateStyleEl_);this.on(this.tech_,"posterchange",this.handleTechPosterChange_);this.on(this.tech_,"textdata",this.handleTechTextData_);this.on(this.tech_,"ratechange",this.handleTechRateChange_);this.usingNativeControls(this.techGet_("controls"));this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_();this.tech_.el().parentNode===this.el()||"Html5"===
q&&this.tag||Ga(this.tech_.el(),this.el());this.tag&&(this.tag=this.tag.player=null)};b.unloadTech_=function(){var a=this;Fb.names.forEach(function(e){e=Fb[e];a[e.privateName]=a[e.getterName]()});this.textTracksJson_=jk.textTracksToJson(this.tech_);this.isReady_=!1;this.tech_.dispose();this.tech_=!1;this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange"));this.isPosterFromTech_=!1};b.tech=function(a){void 0===a&&Ka.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n");
return this.tech_};b.addTechControlsListeners_=function(){this.removeTechControlsListeners_();this.on(this.tech_,"mouseup",this.handleTechClick_);this.on(this.tech_,"dblclick",this.handleTechDoubleClick_);this.on(this.tech_,"touchstart",this.handleTechTouchStart_);this.on(this.tech_,"touchmove",this.handleTechTouchMove_);this.on(this.tech_,"touchend",this.handleTechTouchEnd_);this.on(this.tech_,"tap",this.handleTechTap_)};b.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_);
this.off(this.tech_,"touchstart",this.handleTechTouchStart_);this.off(this.tech_,"touchmove",this.handleTechTouchMove_);this.off(this.tech_,"touchend",this.handleTechTouchEnd_);this.off(this.tech_,"mouseup",this.handleTechClick_);this.off(this.tech_,"dblclick",this.handleTechDoubleClick_)};b.handleTechReady_=function(){this.triggerReady();this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume);this.handleTechPosterChange_();this.handleTechDurationChange_()};b.handleTechLoadStart_=function(){this.removeClass("vjs-ended");
this.removeClass("vjs-seeking");this.error(null);this.handleTechDurationChange_();this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay"));this.manualAutoplay_(this.autoplay())};b.manualAutoplay_=function(a){var e=this;if(this.tech_&&"string"===typeof a){var n=function(){var t=e.muted();e.muted(!0);var v=function(){e.muted(t)};e.playTerminatedQueue_.push(v);var r=e.play();if(Vd(r))return r["catch"](v)};if("any"===a&&!0!==this.muted()){var q=
this.play();Vd(q)&&(q=q["catch"](n))}else q="muted"===a&&!0!==this.muted()?n():this.play();if(Vd(q))return q.then(function(){e.trigger({type:"autoplay-success",autoplay:a})})["catch"](function(t){e.trigger({type:"autoplay-failure",autoplay:a})})}};b.updateSourceCaches_=function(a){void 0===a&&(a="");var e=a,n="";"string"!==typeof e&&(e=a.src,n=a.type);this.cache_.source=this.cache_.source||{};this.cache_.sources=this.cache_.sources||[];e&&!n&&(n=Oo(this,e));this.cache_.source=Wa({},a,{src:e,type:n});
a=this.cache_.sources.filter(function(p){return p.src&&p.src===e});n=[];for(var q=this.doubleDollar("source"),t=[],v=0;v<q.length;v++){var r=cc(q[v]);n.push(r);r.src&&r.src===e&&t.push(r.src)}t.length&&!a.length?this.cache_.sources=n:a.length||(this.cache_.sources=[this.cache_.source]);this.cache_.src=e};b.handleTechSourceset_=function(a){var e=this;if(!this.changingSrc_){var n=function(v){return e.updateSourceCaches_(v)},q=this.currentSource().src,t=a.src;q&&!/^blob:/.test(q)&&/^blob:/.test(t)&&
(!this.lastSource_||this.lastSource_.tech!==t&&this.lastSource_.player!==q)&&(n=function(){});n(t);a.src||this.tech_.any(["sourceset","loadstart"],function(v){"sourceset"!==v.type&&(v=e.techGet("currentSrc"),e.lastSource_.tech=v,e.updateSourceCaches_(v))})}this.lastSource_={player:this.currentSource().src,tech:a.src};this.trigger({src:a.src,type:"sourceset"})};b.hasStarted=function(a){if(void 0===a)return this.hasStarted_;a!==this.hasStarted_&&((this.hasStarted_=a)?(this.addClass("vjs-has-started"),
this.trigger("firstplay")):this.removeClass("vjs-has-started"))};b.handleTechPlay_=function(){this.removeClass("vjs-ended");this.removeClass("vjs-paused");this.addClass("vjs-playing");this.hasStarted(!0);this.trigger("play")};b.handleTechRateChange_=function(){0<this.tech_.playbackRate()&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(a){return a.callback(a.event)}),this.queuedCallbacks_=[]);this.cache_.lastPlaybackRate=this.tech_.playbackRate();this.trigger("ratechange")};
b.handleTechWaiting_=function(){var a=this;this.addClass("vjs-waiting");this.trigger("waiting");var e=this.currentTime();this.on("timeupdate",function q(){e!==a.currentTime()&&(a.removeClass("vjs-waiting"),a.off("timeupdate",q))})};b.handleTechCanPlay_=function(){this.removeClass("vjs-waiting");this.trigger("canplay")};b.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting");this.trigger("canplaythrough")};b.handleTechPlaying_=function(){this.removeClass("vjs-waiting");this.trigger("playing")};
b.handleTechSeeking_=function(){this.addClass("vjs-seeking");this.trigger("seeking")};b.handleTechSeeked_=function(){this.removeClass("vjs-seeking");this.removeClass("vjs-ended");this.trigger("seeked")};b.handleTechFirstPlay_=function(){this.options_.starttime&&(Ka.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime));this.addClass("vjs-has-started");this.trigger("firstplay")};b.handleTechPause_=function(){this.removeClass("vjs-playing");
this.addClass("vjs-paused");this.trigger("pause")};b.handleTechEnded_=function(){this.addClass("vjs-ended");this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause();this.trigger("ended")};b.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))};b.handleTechClick_=function(a){Ic(a)&&this.controls_&&(this.paused()?Kc(this.play()):this.pause())};b.handleTechDoubleClick_=function(a){this.controls_&&(Array.prototype.some.call(this.doubleDollar(".vjs-control-bar, .vjs-modal-dialog"),
function(e){return e.contains(a.target)})||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"===typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,a):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))};b.handleTechTap_=function(){this.userActive(!this.userActive())};b.handleTechTouchStart_=
function(){this.userWasActive=this.userActive()};b.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()};b.handleTechTouchEnd_=function(a){a.cancelable&&a.preventDefault()};b.handleStageClick_=function(){this.reportUserActivity()};b.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")};b.documentFullscreenChange_=function(a){a=a.target.player;if(!a||a===this){a=this.el();var e=qa[this.fsApi_.fullscreenElement]===
a;!e&&a.matches?e=a.matches(":"+this.fsApi_.fullscreen):!e&&a.msMatchesSelector&&(e=a.msMatchesSelector(":"+this.fsApi_.fullscreen));this.isFullscreen(e)}};b.handleTechFullscreenChange_=function(a,e){e&&(e.nativeIOSFullscreen&&this.toggleClass("vjs-ios-native-fs"),this.isFullscreen(e.isFullscreen))};b.handleTechFullscreenError_=function(a,e){this.trigger("fullscreenerror",e)};b.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")};
b.handleTechEnterPictureInPicture_=function(a){this.isInPictureInPicture(!0)};b.handleTechLeavePictureInPicture_=function(a){this.isInPictureInPicture(!1)};b.handleTechError_=function(){var a=this.tech_.error();this.error(a)};b.handleTechTextData_=function(){var a=null;1<arguments.length&&(a=arguments[1]);this.trigger("textdata",a)};b.getCache=function(){return this.cache_};b.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,
lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],volume:1}};b.techCall_=function(a,e){this.ready(function(){if(a in Mo)return this.tech_[a](this.middleware_.reduce(ug(a),e));if(a in tk)return oj(this.middleware_,this.tech_,a,e);try{if(this.tech_)this.tech_[a](e)}catch(n){throw Ka(n),n;}},!0)};b.techGet_=function(a){if(this.tech_&&this.tech_.isReady_){if(a in Lo){var e=this.tech_;return this.middleware_.reduceRight(ug(a),e[a]())}if(a in tk)return oj(this.middleware_,
this.tech_,a);try{return this.tech_[a]()}catch(n){if(void 0===this.tech_[a])throw Ka("Video.js: "+a+" method not defined for "+this.techName_+" playback technology.",n),n;if("TypeError"===n.name)throw Ka("Video.js: "+a+" unavailable on "+this.techName_+" playback technology element.",n),this.tech_.isReady_=!1,n;Ka(n);throw n;}}};b.play=function(){var a=this,e=this.options_.Promise||da.Promise;return e?new e(function(n){a.play_(n)}):this.play_()};b.play_=function(a){var e=this;void 0===a&&(a=Kc);this.playCallbacks_.push(a);
a=!(this.changingSrc_||!this.src()&&!this.currentSrc());this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null);this.isReady_&&a?(a=this.techGet_("play"),null===a?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(a)):(this.waitToPlay_=function(n){e.play_()},this.one(["ready","loadstart"],this.waitToPlay_),a||!Ze&&!Ob||this.load())};b.runPlayTerminatedQueue_=function(){var a=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[];a.forEach(function(e){e()})};
b.runPlayCallbacks_=function(a){var e=this.playCallbacks_.slice(0);this.playCallbacks_=[];this.playTerminatedQueue_=[];e.forEach(function(n){n(a)})};b.pause=function(){this.techCall_("pause")};b.paused=function(){return!1===this.techGet_("paused")?!1:!0};b.played=function(){return this.techGet_("played")||Zc(0,0)};b.scrubbing=function(a){if("undefined"===typeof a)return this.scrubbing_;this.scrubbing_=!!a;this.techCall_("setScrubbing",this.scrubbing_);a?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")};
b.currentTime=function(a){if("undefined"!==typeof a)0>a&&(a=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",a),this.cache_.initTime=0):(this.cache_.initTime=a,this.off("canplay",this.applyInitTime_),this.one("canplay",this.applyInitTime_));else return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime};b.applyInitTime_=function(){this.currentTime(this.cache_.initTime)};b.duration=function(a){if(void 0===a)return void 0!==
this.cache_.duration?this.cache_.duration:NaN;a=parseFloat(a);0>a&&(a=Infinity);a!==this.cache_.duration&&(this.cache_.duration=a,Infinity===a?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(a)||this.trigger("durationchange"))};b.remainingTime=function(){return this.duration()-this.currentTime()};b.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())};b.buffered=function(){var a=this.techGet_("buffered");a&&a.length||(a=Zc(0,0));return a};
b.bufferedPercent=function(){return gj(this.buffered(),this.duration())};b.bufferedEnd=function(){var a=this.buffered(),e=this.duration();a=a.end(a.length-1);a>e&&(a=e);return a};b.volume=function(a){if(void 0!==a)a=Math.max(0,Math.min(1,parseFloat(a))),this.cache_.volume=a,this.techCall_("setVolume",a),0<a&&this.lastVolume_(a);else return a=parseFloat(this.techGet_("volume")),isNaN(a)?1:a};b.muted=function(a){if(void 0!==a)this.techCall_("setMuted",a);else return this.techGet_("muted")||!1};b.defaultMuted=
function(a){return void 0!==a?this.techCall_("setDefaultMuted",a):this.techGet_("defaultMuted")||!1};b.lastVolume_=function(a){if(void 0!==a&&0!==a)this.cache_.lastVolume=a;else return this.cache_.lastVolume};b.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1};b.isFullscreen=function(a){if(void 0!==a){var e=this.isFullscreen_;this.isFullscreen_=!!a;this.isFullscreen_!==e&&this.fsApi_.prefixed&&this.trigger("fullscreenchange");this.toggleFullscreenClass_()}else return this.isFullscreen_};
b.requestFullscreen=function(a){var e=this.options_.Promise||da.Promise;if(e){var n=this;return new e(function(q,t){function v(){n.off("fullscreenerror",p);n.off("fullscreenchange",r)}function r(){v();q()}function p(l,f){v();t(f)}n.one("fullscreenchange",r);n.one("fullscreenerror",p);var m=n.requestFullscreenHelper_(a);if(m)return m.then(v,v),m})}return this.requestFullscreenHelper_()};b.requestFullscreenHelper_=function(a){var e=this;if(!this.fsApi_.prefixed){var n=this.options_.fullscreen&&this.options_.fullscreen.options||
{};void 0!==a&&(n=a)}if(this.fsApi_.requestFullscreen)return(a=this.el_[this.fsApi_.requestFullscreen](n))&&a.then(function(){return e.isFullscreen(!0)},function(){return e.isFullscreen(!1)}),a;this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):this.enterFullWindow()};b.exitFullscreen=function(){var a=this.options_.Promise||da.Promise;if(a){var e=this;return new a(function(n,q){function t(){e.off("fullscreenerror",r);e.off("fullscreenchange",v)}function v(){t();n()}function r(m,l){t();
q(l)}e.one("fullscreenchange",v);e.one("fullscreenerror",r);var p=e.exitFullscreenHelper_();if(p)return p.then(t,t),p})}return this.exitFullscreenHelper_()};b.exitFullscreenHelper_=function(){var a=this;if(this.fsApi_.requestFullscreen){var e=qa[this.fsApi_.exitFullscreen]();e&&e.then(function(){return a.isFullscreen(!1)});return e}this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):this.exitFullWindow()};b.enterFullWindow=function(){this.isFullscreen(!0);this.isFullWindow=!0;this.docOrigOverflow=
qa.documentElement.style.overflow;Ab(qa,"keydown",this.boundFullWindowOnEscKey_);qa.documentElement.style.overflow="hidden";Va(qa.body,"vjs-full-window");this.trigger("enterFullWindow")};b.fullWindowOnEscKey=function(a){Ea.isEventKey(a,"Esc")&&(!0===this.isFullscreen()?this.exitFullscreen():this.exitFullWindow())};b.exitFullWindow=function(){this.isFullscreen(!1);this.isFullWindow=!1;lb(qa,"keydown",this.boundFullWindowOnEscKey_);qa.documentElement.style.overflow=this.docOrigOverflow;tc(qa.body,"vjs-full-window");
this.trigger("exitFullWindow")};b.disablePictureInPicture=function(a){if(void 0===a)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",a);this.options_.disablePictureInPicture=a;this.trigger("disablepictureinpicturechanged")};b.isInPictureInPicture=function(a){if(void 0!==a)this.isInPictureInPicture_=!!a,this.togglePictureInPictureClass_();else return!!this.isInPictureInPicture_};b.requestPictureInPicture=function(){if("pictureInPictureEnabled"in qa&&!1===
this.disablePictureInPicture())return this.techGet_("requestPictureInPicture")};b.exitPictureInPicture=function(){if("pictureInPictureEnabled"in qa)return qa.exitPictureInPicture()};b.handleKeyDown=function(a){var e=this.options_.userActions;if(e&&e.hotkeys){var n=this.el_.ownerDocument.activeElement;var q=n.tagName.toLowerCase();if(n.isContentEditable)n=!0;else{var t="button checkbox hidden radio reset submit".split(" ");n="input"===q?-1===t.indexOf(n.type):-1!==["textarea"].indexOf(q)}n||("function"===
typeof e.hotkeys?e.hotkeys.call(this,a):this.handleHotkeys(a))}};b.handleHotkeys=function(a){var e=this.options_.userActions?this.options_.userActions.hotkeys:{},n=e.fullscreenKey,q=e.muteKey;q=void 0===q?function(t){return Ea.isEventKey(t,"m")}:q;e=e.playPauseKey;e=void 0===e?function(t){return Ea.isEventKey(t,"k")||Ea.isEventKey(t,"Space")}:e;(void 0===n?function(t){return Ea.isEventKey(t,"f")}:n).call(this,a)?(a.preventDefault(),a.stopPropagation(),n=ja.getComponent("FullscreenToggle"),!1!==qa[this.fsApi_.fullscreenEnabled]&&
n.prototype.handleClick.call(this,a)):q.call(this,a)?(a.preventDefault(),a.stopPropagation(),ja.getComponent("MuteToggle").prototype.handleClick.call(this,a)):e.call(this,a)&&(a.preventDefault(),a.stopPropagation(),ja.getComponent("PlayToggle").prototype.handleClick.call(this,a))};b.canPlayType=function(a){for(var e,n=0,q=this.options_.techOrder;n<q.length;n++){e=q[n];var t=Ta.getTech(e);t||(t=ja.getComponent(e));if(!t)Ka.error('The "'+e+'" tech is undefined. Skipped browser support check for that tech.');
else if(t.isSupported()&&(e=t.canPlayType(a)))return e}return""};b.selectSource=function(a){var e=this,n=this.options_.techOrder.map(function(r){return[r,Ta.getTech(r)]}).filter(function(r){var p=r[0];if(r=r[1])return r.isSupported();Ka.error('The "'+p+'" tech is undefined. Skipped browser support check for that tech.');return!1}),q=function(r,p,m){var l;r.some(function(f){return p.some(function(g){if(l=m(f,g))return!0})});return l},t=function(r){return function(p,m){return r(m,p)}},v=function(r,
p){var m=r[0];if(r[1].canPlaySource(p,e.options_[m.toLowerCase()]))return{source:p,tech:m}};return(this.options_.sourceOrder?q(a,n,t(v)):q(n,a,v))||!1};b.src=function(a){var e=this;if("undefined"===typeof a)return this.cache_.src||"";var n=Po(a);n.length?(this.changingSrc_=!0,this.cache_.sources=n,this.updateSourceCaches_(n[0]),ho(this,n[0],function(q,t){e.middleware_=t;e.cache_.sources=n;e.updateSourceCaches_(q);if(e.src_(q)){if(1<n.length)return e.src(n.slice(1));e.changingSrc_=!1;e.setTimeout(function(){this.error({code:4,
message:this.localize(this.options_.notSupportedMessage)})},0);e.triggerReady()}else io(t,e.tech_)})):this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0)};b.src_=function(a){var e=this,n=this.selectSource([a]);if(!n)return!0;if(!xo(n.tech,this.techName_))return this.changingSrc_=!0,this.loadTech_(n.tech,n.source),this.tech_.ready(function(){e.changingSrc_=!1}),!1;this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?
this.techCall_("setSource",a):this.techCall_("src",a.src);this.changingSrc_=!1},!0);return!1};b.load=function(){this.techCall_("load")};b.reset=function(){var a=this,e=this.options_.Promise||da.Promise;this.paused()||!e?this.doReset_():(e=this.play(),Kc(e.then(function(){return a.doReset_()})))};b.doReset_=function(){this.tech_&&this.tech_.clearTracks("text");this.resetCache_();this.poster("");this.loadTech_(this.options_.techOrder[0],null);this.techCall_("reset");this.resetControlBarUI_();xc(this)&&
this.trigger("playerreset")};b.resetControlBarUI_=function(){this.resetProgressBar_();this.resetPlaybackRate_();this.resetVolumeBar_()};b.resetProgressBar_=function(){this.currentTime(0);var a=this.controlBar,e=a.durationDisplay;a=a.remainingTimeDisplay;e&&e.updateContent();a&&a.updateContent()};b.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate());this.handleTechRateChange_()};b.resetVolumeBar_=function(){this.volume(1);this.trigger("volumechange")};b.currentSources=function(){var a=
this.currentSource(),e=[];0!==Object.keys(a).length&&e.push(a);return this.cache_.sources||e};b.currentSource=function(){return this.cache_.source||{}};b.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""};b.currentType=function(){return this.currentSource()&&this.currentSource().type||""};b.preload=function(a){if(void 0!==a)this.techCall_("setPreload",a),this.options_.preload=a;else return this.techGet_("preload")};b.autoplay=function(a){if(void 0===a)return this.options_.autoplay||
!1;if("string"===typeof a&&/(any|play|muted)/.test(a)){this.options_.autoplay=a;this.manualAutoplay_(a);var e=!1}else this.options_.autoplay=a?!0:!1;e="undefined"===typeof e?this.options_.autoplay:e;this.tech_&&this.techCall_("setAutoplay",e)};b.playsinline=function(a){return void 0!==a?(this.techCall_("setPlaysinline",a),this.options_.playsinline=a,this):this.techGet_("playsinline")};b.loop=function(a){if(void 0!==a)this.techCall_("setLoop",a),this.options_.loop=a;else return this.techGet_("loop")};
b.poster=function(a){if(void 0===a)return this.poster_;a||(a="");a!==this.poster_&&(this.poster_=a,this.techCall_("setPoster",a),this.isPosterFromTech_=!1,this.trigger("posterchange"))};b.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var a=this.tech_.poster()||"";a!==this.poster_&&(this.poster_=a,this.isPosterFromTech_=!0,this.trigger("posterchange"))}};b.controls=function(a){if(void 0===a)return!!this.controls_;a=!!a;this.controls_!==
a&&(this.controls_=a,this.usingNativeControls()&&this.techCall_("setControls",a),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))};b.usingNativeControls=function(a){if(void 0===a)return!!this.usingNativeControls_;
a=!!a;this.usingNativeControls_!==a&&((this.usingNativeControls_=a)?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))};b.error=function(a){if(void 0===a)return this.error_||null;if(this.options_.suppressNotSupportedError&&a&&4===a.code){var e=function(){this.error(a)};this.options_.suppressNotSupportedError=!1;this.any(["click","touchstart"],e);this.one("loadstart",function(){this.off(["click",
"touchstart"],e)})}else null===a?(this.error_=a,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close()):(this.error_=new Cb(a),this.addClass("vjs-error"),Ka.error("(CODE:"+this.error_.code+" "+Cb.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"))};b.reportUserActivity=function(a){this.userActivity_=!0};b.userActive=function(a){if(void 0===a)return this.userActive_;a=!!a;if(a!==this.userActive_)if(this.userActive_=a)this.userActivity_=!0,this.removeClass("vjs-user-inactive"),
this.addClass("vjs-user-active"),this.trigger("useractive");else{if(this.tech_)this.tech_.one("mousemove",function(e){e.stopPropagation();e.preventDefault()});this.userActivity_=!1;this.removeClass("vjs-user-active");this.addClass("vjs-user-inactive");this.trigger("userinactive")}};b.listenForUserActivity_=function(){var a,e,n,q=Ma(this,this.reportUserActivity),t=function(r){q();this.clearInterval(a)};this.on("mousedown",function(){q();this.clearInterval(a);a=this.setInterval(q,250)});this.on("mousemove",
function(r){if(r.screenX!==e||r.screenY!==n)e=r.screenX,n=r.screenY,q()});this.on("mouseup",t);this.on("mouseleave",t);!(t=this.getChild("controlBar"))||Ob||Pc||(t.on("mouseenter",function(r){this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout;this.player().options_.inactivityTimeout=0}),t.on("mouseleave",function(r){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout}));this.on("keydown",q);this.on("keyup",q);var v;this.setInterval(function(){if(this.userActivity_){this.userActivity_=
!1;this.userActive(!0);this.clearTimeout(v);var r=this.options_.inactivityTimeout;0>=r||(v=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},r))}},250)};b.playbackRate=function(a){if(void 0!==a)this.techCall_("setPlaybackRate",a);else return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1};b.defaultPlaybackRate=function(a){return void 0!==a?this.techCall_("setDefaultPlaybackRate",a):this.tech_&&this.tech_.featuresPlaybackRate?
this.techGet_("defaultPlaybackRate"):1};b.isAudio=function(a){if(void 0!==a)this.isAudio_=!!a;else return!!this.isAudio_};b.addTextTrack=function(a,e,n){if(this.tech_)return this.tech_.addTextTrack(a,e,n)};b.addRemoteTextTrack=function(a,e){if(this.tech_)return this.tech_.addRemoteTextTrack(a,e)};b.removeRemoteTextTrack=function(a){void 0===a&&(a={});var e=a.track;e||(e=a);if(this.tech_)return this.tech_.removeRemoteTextTrack(e)};b.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")};
b.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0};b.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0};b.language=function(a){if(void 0===a)return this.language_;this.language_!==String(a).toLowerCase()&&(this.language_=String(a).toLowerCase(),xc(this)&&this.trigger("languagechange"))};b.languages=function(){return Wa(c.prototype.options_.languages,this.languages_)};b.toJSON=function(){var a=Wa(this.options_),
e=a.tracks;a.tracks=[];for(var n=0;n<e.length;n++){var q=e[n];q=Wa(q);q.player=void 0;a.tracks[n]=q}return a};b.createModal=function(a,e){var n=this;e=e||{};e.content=a||"";var q=new zd(this,e);this.addChild(q);q.on("dispose",function(){n.removeChild(q)});q.open();return q};b.updateCurrentBreakpoint_=function(){if(this.responsive())for(var a=this.currentBreakpoint(),e=this.currentWidth(),n=0;n<qh.length;n++){var q=qh[n];if(e<=this.breakpoints_[q]){if(a===q)break;a&&this.removeClass(hf[a]);this.addClass(hf[q]);
this.breakpoint_=q;break}}};b.removeCurrentBreakpoint_=function(){var a=this.currentBreakpointClass();this.breakpoint_="";a&&this.removeClass(a)};b.breakpoints=function(a){if(void 0===a)return Q(this.breakpoints_);this.breakpoint_="";this.breakpoints_=Q({},lp,a);this.updateCurrentBreakpoint_();return Q(this.breakpoints_)};b.responsive=function(a){if(void 0===a)return this.responsive_;a=!!a;if(a!==this.responsive_)return(this.responsive_=a)?(this.on("playerresize",this.updateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):
(this.off("playerresize",this.updateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),a};b.currentBreakpoint=function(){return this.breakpoint_};b.currentBreakpointClass=function(){return hf[this.breakpoint_]||""};b.loadMedia=function(a,e){var n=this;if(a&&"object"===typeof a){this.reset();this.cache_.media=Wa(a);a=this.cache_.media;var q=a.poster,t=a.src,v=a.textTracks;!a.artwork&&q&&(this.cache_.media.artwork=[{src:q,type:Re(q)}]);t&&this.src(t);q&&this.poster(q);Array.isArray(v)&&v.forEach(function(r){return n.addRemoteTextTrack(r,
!1)});this.ready(e)}};b.getMedia=function(){if(!this.cache_.media){var a=this.poster(),e=this.currentSources(),n=Array.prototype.map.call(this.remoteTextTracks(),function(q){return{kind:q.kind,label:q.label,language:q.language,src:q.src}});e={src:e,textTracks:n};a&&(e.poster=a,e.artwork=[{src:e.poster,type:Re(e.poster)}]);return e}return Wa(this.cache_.media)};c.getTagSettings=function(a){var e={sources:[],tracks:[]},n=cc(a),q=n["data-setup"];Fa(a,"vjs-fill")&&(n.fill=!0);Fa(a,"vjs-fluid")&&(n.fluid=
!0);if(null!==q){var t=null;try{var v=JSON.parse(q||"{}",void 0)}catch(r){t=r}v=[t,v];q=v[0];v=v[1];q&&Ka.error(q);Q(n,v)}Q(e,n);if(a.hasChildNodes())for(a=a.childNodes,n=0,q=a.length;n<q;n++)v=a[n],t=v.nodeName.toLowerCase(),"source"===t?e.sources.push(cc(v)):"track"===t&&e.tracks.push(cc(v));return e};b.flexNotSupported_=function(){var a=qa.createElement("i");return!("flexBasis"in a.style||"webkitFlexBasis"in a.style||"mozFlexBasis"in a.style||"msFlexBasis"in a.style||"msFlexOrder"in a.style)};
b.debug=function(a){if(void 0===a)return this.debugEnabled_;a?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)};return c}(ja);Fb.names.forEach(function(d){var c=Fb[d];gb.prototype[c.getterName]=function(){if(this.tech_)return this.tech_[c.getterName]();this[c.privateName]=this[c.privateName]||new c.ListClass;return this[c.privateName]}});
gb.prototype.crossorigin=gb.prototype.crossOrigin;gb.players={};var le=da.navigator;gb.prototype.options_={techOrder:Ta.defaultTechOrder_,html5:{},inactivityTimeout:2E3,playbackRates:[],liveui:!1,children:"mediaLoader posterImage textTrackDisplay loadingSpinner bigPlayButton liveTracker controlBar errorDisplay textTrackSettings resizeManager".split(" "),language:le&&(le.languages&&le.languages[0]||le.userLanguage||le.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",
fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1};["ended","seeking","seekable","networkState","readyState"].forEach(function(d){gb.prototype[d]=function(){return this.techGet_(d)}});Yk.forEach(function(d){gb.prototype["handleTech"+cb(d)+"_"]=function(){return this.trigger(d)}});ja.registerComponent("Player",gb);var Zk=w(function(d){function c(b,a){d.exports=c=Object.setPrototypeOf||function(e,n){e.__proto__=n;return e};return c(b,a)}d.exports=c}),mp=function(){if("undefined"===
typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(d){return!1}},np=w(function(d){function c(b,a,e){mp()?d.exports=c=Reflect.construct:d.exports=c=function(n,q,t){var v=[null];v.push.apply(v,q);n=new (Function.bind.apply(n,v));t&&Zk(n,t.prototype);return n};return c.apply(null,arguments)}d.exports=c}),Ac={},jf=function(d){return Ac.hasOwnProperty(d)?Ac[d]:
void 0},kf=function(d,c,b){b=(b?"before":"")+"pluginsetup";d.trigger(b,c);d.trigger(b+":"+c.name,c)},op=function(d,c){var b=function(){kf(this,{name:d,plugin:c,instance:null},!0);var a=c.apply(this,arguments);this.activePlugins_=this.activePlugins_||{};this.activePlugins_[d]=!0;kf(this,{name:d,plugin:c,instance:a});return a};Object.keys(c).forEach(function(a){b[a]=c[a]});return b},$k=function(d,c){c.prototype.name=d;return function(){kf(this,{name:d,plugin:c,instance:null},!0);for(var b=arguments.length,
a=Array(b),e=0;e<b;e++)a[e]=arguments[e];var n=np(c,[this].concat(a));this[d]=function(){return n};kf(this,n.getEventHash());return n}},mc=function(){function d(b){if(this.constructor===d)throw Error("Plugin must be sub-classed; not directly instantiated.");this.player=b;this.log||(this.log=this.player.log.createLogger(this.name));ng(this);delete this.trigger;ej(this,this.constructor.defaultState);var a=this.name;b.activePlugins_=b.activePlugins_||{};b.activePlugins_[a]=!0;this.dispose=Ma(this,this.dispose);
b.on("dispose",this.dispose)}var c=d.prototype;c.version=function(){return this.constructor.VERSION};c.getEventHash=function(b){void 0===b&&(b={});b.name=this.name;b.plugin=this.constructor;b.instance=this;return b};c.trigger=function(b,a){void 0===a&&(a={});return vc(this.eventBusEl_,b,this.getEventHash(a))};c.handleStateChanged=function(b){};c.dispose=function(){var b=this.name,a=this.player;this.trigger("dispose");this.off();a.off("dispose",this.dispose);a.activePlugins_[b]=!1;this.player=this.state=
null;a[b]=$k(b,Ac[b])};d.isBasic=function(b){b="string"===typeof b?jf(b):b;return"function"===typeof b&&!d.prototype.isPrototypeOf(b.prototype)};d.registerPlugin=function(b,a){if("string"!==typeof b)throw Error('Illegal plugin name, "'+b+'", must be a string, was '+typeof b+".");if(Ac.hasOwnProperty(b))Ka.warn('A plugin named "'+b+'" already exists. You may want to avoid re-registering plugins!');else if(gb.prototype.hasOwnProperty(b))throw Error('Illegal plugin name, "'+b+'", cannot share a name with an existing player method!');
if("function"!==typeof a)throw Error('Illegal plugin for "'+b+'", must be a function, was '+typeof a+".");Ac[b]=a;"plugin"!==b&&(d.isBasic(a)?gb.prototype[b]=op(b,a):gb.prototype[b]=$k(b,a));return a};d.deregisterPlugin=function(b){if("plugin"===b)throw Error("Cannot de-register base plugin.");Ac.hasOwnProperty(b)&&(delete Ac[b],delete gb.prototype[b])};d.getPlugins=function(b){void 0===b&&(b=Object.keys(Ac));var a;b.forEach(function(e){var n=jf(e);n&&(a=a||{},a[e]=n)});return a};d.getPluginVersion=
function(b){return(b=jf(b))&&b.VERSION||""};return d}();mc.getPlugin=jf;mc.BASE_PLUGIN_NAME="plugin";mc.registerPlugin("plugin",mc);gb.prototype.usingPlugin=function(d){return!!this.activePlugins_&&!0===this.activePlugins_[d]};gb.prototype.hasPlugin=function(d){return!!Ac.hasOwnProperty(d)};var pp=function(d,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(c&&c.prototype,{constructor:{value:d,writable:!0,configurable:!0}});
c&&Zk(d,c)},rj=function(d){return 0===d.indexOf("#")?d.slice(1):d};U.hooks_={};U.hooks=function(d,c){U.hooks_[d]=U.hooks_[d]||[];c&&(U.hooks_[d]=U.hooks_[d].concat(c));return U.hooks_[d]};U.hook=function(d,c){U.hooks(d,c)};U.hookOnce=function(d,c){U.hooks(d,[].concat(c).map(function(b){return function e(){U.removeHook(d,e);return b.apply(void 0,arguments)}}))};U.removeHook=function(d,c){c=U.hooks(d).indexOf(c);if(-1>=c)return!1;U.hooks_[d]=U.hooks_[d].slice();U.hooks_[d].splice(c,1);return!0};if(!0!==
da.VIDEOJS_NO_DYNAMIC_STYLE&&Ha()){var lf=Lc(".vjs-styles-defaults");if(!lf){lf=ek("vjs-styles-defaults");var rh=Lc("head");rh&&rh.insertBefore(lf,rh.firstChild);fk(lf,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}Pd(1,U);U.VERSION="7.11.8";U.options=gb.prototype.options_;U.getPlayers=function(){return gb.players};U.getPlayer=function(d){var c=gb.players;if("string"===typeof d){d=rj(d);var b=c[d];if(b)return b;
d=Lc("#"+d)}if(Ua(d)&&(b=d,d=b.player,b=b.playerId,d||c[b]))return d||c[b]};U.getAllPlayers=function(){return Object.keys(gb.players).map(function(d){return gb.players[d]}).filter(Boolean)};U.players=gb.players;U.getComponent=ja.getComponent;U.registerComponent=function(d,c){Ta.isTech(c)&&Ka.warn("The "+d+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)");ja.registerComponent.call(ja,d,c)};U.getTech=Ta.getTech;U.registerTech=Ta.registerTech;
U.use=function(d,c){ad[d]=ad[d]||[];ad[d].push(c)};Object.defineProperty(U,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty(U.middleware,"TERMINATOR",{value:Qe,writeable:!1,enumerable:!0});U.browser=to;U.TOUCH_ENABLED=xd;U.extend=function(d,c){void 0===c&&(c={});var b=function(){d.apply(this,arguments)},a={};"object"===typeof c?(c.constructor!==Object.prototype.constructor&&(b=c.constructor),a=c):"function"===typeof c&&(b=c);pp(b,d);d&&(b.super_=d);for(var e in a)a.hasOwnProperty(e)&&
(b.prototype[e]=a[e]);return b};U.mergeOptions=Wa;U.bind=Ma;U.registerPlugin=mc.registerPlugin;U.deregisterPlugin=mc.deregisterPlugin;U.plugin=function(d,c){Ka.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead");return mc.registerPlugin(d,c)};U.getPlugins=mc.getPlugins;U.getPlugin=mc.getPlugin;U.getPluginVersion=mc.getPluginVersion;U.addLanguage=function(d,c){var b;d=(""+d).toLowerCase();U.options.languages=Wa(U.options.languages,(b={},b[d]=c,b));return U.options.languages[d]};
U.log=Ka;U.createLogger=Vj;U.createTimeRange=U.createTimeRanges=Zc;U.formatTime=rd;U.setFormatTime=function(d){xg=d};U.resetFormatTime=function(){xg=wk};U.parseUrl=Tg;U.isCrossOrigin=df;U.EventTarget=pb;U.on=Ab;U.one=Yc;U.off=lb;U.trigger=vc;U.xhr=ec;U.TextTrack=ge;U.AudioTrack=rk;U.VideoTrack=sk;"isEl isTextNode createEl hasClass addClass removeClass toggleClass setAttributes getAttributes emptyEl appendContent insertContent".split(" ").forEach(function(d){U[d]=function(){Ka.warn("videojs."+d+"() is deprecated; use videojs.dom."+
d+"() instead");return dk[d].apply(null,arguments)}});U.computedStyle=ya;U.dom=dk;U.url=Io;U.defineLazyProperty=oh;var qp=w(function(d){d.exports=function(c){if(void 0===c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c};d.exports["default"]=d.exports;d.exports.__esModule=!0}),Yb=F(qp),al=w(function(d){function c(b,a){d.exports=c=Object.setPrototypeOf||function(e,n){e.__proto__=n;return e};d.exports["default"]=d.exports;d.exports.__esModule=!0;return c(b,
a)}d.exports=c;d.exports["default"]=d.exports;d.exports.__esModule=!0});F(al);var rp=w(function(d){d.exports=function(c,b){c.prototype=Object.create(b.prototype);c.prototype.constructor=c;al(c,b)};d.exports["default"]=d.exports;d.exports.__esModule=!0}),Bc=F(rp),bl="undefined"!==typeof Jb?Jb:"undefined"!==typeof window?window:{};if("undefined"!==typeof document)var sh=document;else(sh=bl["__GLOBAL_DOCUMENT_CACHE@4"])||(sh=bl["__GLOBAL_DOCUMENT_CACHE@4"]=Sj);var hc=sh,ra="undefined"!==typeof window?
window:"undefined"!==typeof Jb?Jb:"undefined"!==typeof self?self:{},cl=w(function(d,c){(function(b){var a=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#.*)?$/,e=/^([^\/?#]*)(.*)$/,n=/(?:\/|^)\.(?=\/)/g,q=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,t={buildAbsoluteURL:function(v,r,p){p=p||{};v=v.trim();r=r.trim();if(!r){if(!p.alwaysNormalize)return v;p=t.parseURL(v);if(!p)throw Error("Error trying to parse base URL.");p.path=t.normalizePath(p.path);return t.buildURLFromParts(p)}var m=
t.parseURL(r);if(!m)throw Error("Error trying to parse relative URL.");if(m.scheme){if(!p.alwaysNormalize)return r;m.path=t.normalizePath(m.path);return t.buildURLFromParts(m)}r=t.parseURL(v);if(!r)throw Error("Error trying to parse base URL.");!r.netLoc&&r.path&&"/"!==r.path[0]&&(v=e.exec(r.path),r.netLoc=v[1],r.path=v[2]);r.netLoc&&!r.path&&(r.path="/");v={scheme:r.scheme,netLoc:m.netLoc,path:null,params:m.params,query:m.query,fragment:m.fragment};m.netLoc||(v.netLoc=r.netLoc,"/"!==m.path[0]&&(m.path?
(r=r.path,r=r.substring(0,r.lastIndexOf("/")+1)+m.path,v.path=t.normalizePath(r)):(v.path=r.path,m.params||(v.params=r.params,m.query||(v.query=r.query)))));null===v.path&&(v.path=p.alwaysNormalize?t.normalizePath(m.path):m.path);return t.buildURLFromParts(v)},parseURL:function(v){return(v=a.exec(v))?{scheme:v[1]||"",netLoc:v[2]||"",path:v[3]||"",params:v[4]||"",query:v[5]||"",fragment:v[6]||""}:null},normalizePath:function(v){for(v=v.split("").reverse().join("").replace(n,"");v.length!==(v=v.replace(q,
"")).length;);return v.split("").reverse().join("")},buildURLFromParts:function(v){return v.scheme+v.netLoc+v.path+v.params+v.query+v.fragment}};d.exports=t})()}),Mc="undefined"!==typeof window?window:"undefined"!==typeof Jb?Jb:"undefined"!==typeof self?self:{},nc=function(d,c){if(/^[a-z]+:/i.test(c))return c;/\/\//i.test(d)||(d=cl.buildAbsoluteURL(Mc.location&&Mc.location.href||"",d));return cl.buildAbsoluteURL(d,c)},dl=w(function(d){function c(b,a){d.exports=c=Object.setPrototypeOf||function(e,
n){e.__proto__=n;return e};d.exports["default"]=d.exports;d.exports.__esModule=!0;return c(b,a)}d.exports=c;d.exports["default"]=d.exports;d.exports.__esModule=!0});F(dl);var sp=w(function(d){d.exports=function(c,b){c.prototype=Object.create(b.prototype);c.prototype.constructor=c;dl(c,b)};d.exports["default"]=d.exports;d.exports.__esModule=!0}),th=F(sp),uh=function(){function d(){this.listeners={}}var c=d.prototype;c.on=function(b,a){this.listeners[b]||(this.listeners[b]=[]);this.listeners[b].push(a)};
c.off=function(b,a){if(!this.listeners[b])return!1;a=this.listeners[b].indexOf(a);this.listeners[b]=this.listeners[b].slice(0);this.listeners[b].splice(a,1);return-1<a};c.trigger=function(b){var a=this.listeners[b];if(a)if(2===arguments.length)for(var e=a.length,n=0;n<e;++n)a[n].call(this,arguments[1]);else{e=Array.prototype.slice.call(arguments,1);n=a.length;for(var q=0;q<n;++q)a[q].apply(this,e)}};c.dispose=function(){this.listeners={}};c.pipe=function(b){this.on("data",function(a){b.push(a)})};
return d}(),tp=w(function(d){function c(){d.exports=c=Object.assign||function(b){for(var a=1;a<arguments.length;a++){var e=arguments[a],n;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(b[n]=e[n])}return b};d.exports["default"]=d.exports;d.exports.__esModule=!0;return c.apply(this,arguments)}d.exports=c;d.exports["default"]=d.exports;d.exports.__esModule=!0}),up=F(tp),vp=w(function(d){d.exports=function(c){if(void 0===c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return c};d.exports["default"]=d.exports;d.exports.__esModule=!0}),wp=F(vp),xp=function(d){function c(){var b=d.call(this)||this;b.buffer="";return b}th(c,d);c.prototype.push=function(b){this.buffer+=b;for(b=this.buffer.indexOf("\n");-1<b;b=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,b)),this.buffer=this.buffer.substring(b+1)};return c}(uh),me=function(d){d=d.split.call(d,RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))'));for(var c={},b=d.length,a;b--;)""!==d[b]&&(a=/([^=]*)=(.*)/.exec(d[b]).slice(1),
a[0]=a[0].replace(/^\s+|\s+$/g,""),a[1]=a[1].replace(/^\s+|\s+$/g,""),a[1]=a[1].replace(/^['"](.*)['"]$/g,"$1"),c[a[0]]=a[1]);return c},yp=function(d){function c(){var a=d.call(this)||this;a.customParsers=[];a.tagMappers=[];return a}th(c,d);var b=c.prototype;b.push=function(a){var e=this,n,q;a=a.trim();0!==a.length&&("#"!==a[0]?this.trigger("data",{type:"uri",uri:a}):this.tagMappers.reduce(function(t,v){v=v(a);return v===a?t:t.concat([v])},[a]).forEach(function(t){for(var v=0;v<e.customParsers.length;v++)if(e.customParsers[v].call(e,
t))return;0!==t.indexOf("#EXT")?e.trigger("data",{type:"comment",text:t.slice(1)}):(t=t.replace("\r",""),(n=/^#EXTM3U/.exec(t))?e.trigger("data",{type:"tag",tagType:"m3u"}):(n=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(t))?(q={type:"tag",tagType:"inf"},n[1]&&(q.duration=parseFloat(n[1])),n[2]&&(q.title=n[2]),e.trigger("data",q)):(n=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(t))?(q={type:"tag",tagType:"targetduration"},n[1]&&(q.duration=parseInt(n[1],10)),e.trigger("data",q)):(n=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(t))?
(q={type:"tag",tagType:"totalduration"},n[1]&&(q.duration=parseInt(n[1],10)),e.trigger("data",q)):(n=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(t))?(q={type:"tag",tagType:"version"},n[1]&&(q.version=parseInt(n[1],10)),e.trigger("data",q)):(n=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))?(q={type:"tag",tagType:"media-sequence"},n[1]&&(q.number=parseInt(n[1],10)),e.trigger("data",q)):(n=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))?(q={type:"tag",tagType:"discontinuity-sequence"},n[1]&&(q.number=
parseInt(n[1],10)),e.trigger("data",q)):(n=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(t))?(q={type:"tag",tagType:"playlist-type"},n[1]&&(q.playlistType=n[1]),e.trigger("data",q)):(n=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(t))?(q={type:"tag",tagType:"byterange"},n[1]&&(q.length=parseInt(n[1],10)),n[2]&&(q.offset=parseInt(n[2],10)),e.trigger("data",q)):(n=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(t))?(q={type:"tag",tagType:"allow-cache"},n[1]&&(q.allowed=!/NO/.test(n[1])),e.trigger("data",q)):(n=/^#EXT-X-MAP:?(.*)$/.exec(t))?
(q={type:"tag",tagType:"map"},n[1]&&(t=me(n[1]),t.URI&&(q.uri=t.URI),t.BYTERANGE&&(v=t.BYTERANGE.split("@"),t=v[0],v=v[1],q.byterange={},t&&(q.byterange.length=parseInt(t,10)),v&&(q.byterange.offset=parseInt(v,10)))),e.trigger("data",q)):(n=/^#EXT-X-STREAM-INF:?(.*)$/.exec(t))?(q={type:"tag",tagType:"stream-inf"},n[1]&&(q.attributes=me(n[1]),q.attributes.RESOLUTION&&(t=q.attributes.RESOLUTION.split("x"),v={},t[0]&&(v.width=parseInt(t[0],10)),t[1]&&(v.height=parseInt(t[1],10)),q.attributes.RESOLUTION=
v),q.attributes.BANDWIDTH&&(q.attributes.BANDWIDTH=parseInt(q.attributes.BANDWIDTH,10)),q.attributes["PROGRAM-ID"]&&(q.attributes["PROGRAM-ID"]=parseInt(q.attributes["PROGRAM-ID"],10))),e.trigger("data",q)):(n=/^#EXT-X-MEDIA:?(.*)$/.exec(t))?(q={type:"tag",tagType:"media"},n[1]&&(q.attributes=me(n[1])),e.trigger("data",q)):(n=/^#EXT-X-ENDLIST/.exec(t))?e.trigger("data",{type:"tag",tagType:"endlist"}):(n=/^#EXT-X-DISCONTINUITY/.exec(t))?e.trigger("data",{type:"tag",tagType:"discontinuity"}):(n=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(t))?
(q={type:"tag",tagType:"program-date-time"},n[1]&&(q.dateTimeString=n[1],q.dateTimeObject=new Date(n[1])),e.trigger("data",q)):(n=/^#EXT-X-KEY:?(.*)$/.exec(t))?(q={type:"tag",tagType:"key"},n[1]&&(q.attributes=me(n[1]),q.attributes.IV&&("0x"===q.attributes.IV.substring(0,2).toLowerCase()&&(q.attributes.IV=q.attributes.IV.substring(2)),q.attributes.IV=q.attributes.IV.match(/.{8}/g),q.attributes.IV[0]=parseInt(q.attributes.IV[0],16),q.attributes.IV[1]=parseInt(q.attributes.IV[1],16),q.attributes.IV[2]=
parseInt(q.attributes.IV[2],16),q.attributes.IV[3]=parseInt(q.attributes.IV[3],16),q.attributes.IV=new Uint32Array(q.attributes.IV))),e.trigger("data",q)):(n=/^#EXT-X-START:?(.*)$/.exec(t))?(q={type:"tag",tagType:"start"},n[1]&&(q.attributes=me(n[1]),q.attributes["TIME-OFFSET"]=parseFloat(q.attributes["TIME-OFFSET"]),q.attributes.PRECISE=/YES/.test(q.attributes.PRECISE)),e.trigger("data",q)):(n=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(t))?(q={type:"tag",tagType:"cue-out-cont"},q.data=n[1]?n[1]:"",e.trigger("data",
q)):(n=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(t))?(q={type:"tag",tagType:"cue-out"},q.data=n[1]?n[1]:"",e.trigger("data",q)):(n=/^#EXT-X-CUE-IN:?(.*)?$/.exec(t))?(q={type:"tag",tagType:"cue-in"},q.data=n[1]?n[1]:"",e.trigger("data",q)):e.trigger("data",{type:"tag",data:t.slice(4)}))}))};b.addParser=function(a){var e=this,n=a.expression,q=a.customType,t=a.dataParser,v=a.segment;"function"!==typeof t&&(t=function(r){return r});this.customParsers.push(function(r){if(n.exec(r))return e.trigger("data",{type:"custom",
data:t(r),customType:q,segment:v}),!0})};b.addTagMapper=function(a){var e=a.expression,n=a.map;this.tagMappers.push(function(q){return e.test(q)?n(q):q})};return c}(uh),zp=function(d){function c(){var a=d.call(this)||this;a.lineStream=new xp;a.parseStream=new yp;a.lineStream.pipe(a.parseStream);var e=wp(a),n=[],q={},t,v,r=function(){},p={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},m=0;a.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var l=0;a.parseStream.on("data",function(f){var g,
k;({tag:function(){({"allow-cache":function(){this.manifest.allowCache=f.allowed;"allowed"in f||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var u={};"length"in f&&(q.byterange=u,u.length=f.length,"offset"in f||(f.offset=l));"offset"in f&&(q.byterange=u,u.offset=f.offset);l=u.offset+u.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",
{message:"defaulting media sequence to zero"}));"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"}));0<f.duration&&(q.duration=f.duration);0===f.duration&&(q.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"}));this.manifest.segments=n},key:function(){f.attributes?"NONE"===f.attributes.METHOD?v=null:f.attributes.URI?"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===
f.attributes.KEYFORMAT?-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(f.attributes.METHOD)?this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===f.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==f.attributes.URI.substring(0,23)?this.trigger("warn",{message:"invalid key URI provided for Widevine"}):f.attributes.KEYID&&"0x"===f.attributes.KEYID.substring(0,
2)?this.manifest.contentProtection={"com.widevine.alpha":{attributes:{schemeIdUri:f.attributes.KEYFORMAT,keyId:f.attributes.KEYID.substring(2)},pssh:sj(f.attributes.URI.split(",")[1])}}:this.trigger("warn",{message:"invalid key ID provided for Widevine"})):(f.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),v={method:f.attributes.METHOD||"AES-128",uri:f.attributes.URI},"undefined"!==typeof f.attributes.IV&&(v.iv=f.attributes.IV)):this.trigger("warn",{message:"ignoring key declaration without URI"}):
this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(f.number)?this.manifest.mediaSequence=f.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+f.number})},"discontinuity-sequence":function(){isFinite(f.number)?m=this.manifest.discontinuitySequence=f.number:this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+f.number})},"playlist-type":function(){/VOD|EVENT/.test(f.playlistType)?this.manifest.playlistType=
f.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+f.playlist})},map:function(){t={};f.uri&&(t.uri=f.uri);f.byterange&&(t.byterange=f.byterange)},"stream-inf":function(){this.manifest.playlists=n;this.manifest.mediaGroups=this.manifest.mediaGroups||p;f.attributes?(q.attributes||(q.attributes={}),up(q.attributes,f.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){this.manifest.mediaGroups=this.manifest.mediaGroups||p;if(f.attributes&&
f.attributes.TYPE&&f.attributes["GROUP-ID"]&&f.attributes.NAME){var u=this.manifest.mediaGroups[f.attributes.TYPE];u[f.attributes["GROUP-ID"]]=u[f.attributes["GROUP-ID"]]||{};g=u[f.attributes["GROUP-ID"]];k={"default":/yes/i.test(f.attributes.DEFAULT)};k.autoselect=k["default"]?!0:/yes/i.test(f.attributes.AUTOSELECT);f.attributes.LANGUAGE&&(k.language=f.attributes.LANGUAGE);f.attributes.URI&&(k.uri=f.attributes.URI);f.attributes["INSTREAM-ID"]&&(k.instreamId=f.attributes["INSTREAM-ID"]);f.attributes.CHARACTERISTICS&&
(k.characteristics=f.attributes.CHARACTERISTICS);f.attributes.FORCED&&(k.forced=/yes/i.test(f.attributes.FORCED));g[f.attributes.NAME]=k}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){m+=1;q.discontinuity=!0;this.manifest.discontinuityStarts.push(n.length)},"program-date-time":function(){"undefined"===typeof this.manifest.dateTimeString&&(this.manifest.dateTimeString=f.dateTimeString,this.manifest.dateTimeObject=f.dateTimeObject);q.dateTimeString=
f.dateTimeString;q.dateTimeObject=f.dateTimeObject},targetduration:function(){!isFinite(f.duration)||0>f.duration?this.trigger("warn",{message:"ignoring invalid target duration: "+f.duration}):this.manifest.targetDuration=f.duration},totalduration:function(){!isFinite(f.duration)||0>f.duration?this.trigger("warn",{message:"ignoring invalid total duration: "+f.duration}):this.manifest.totalDuration=f.duration},start:function(){!f.attributes||isNaN(f.attributes["TIME-OFFSET"])?this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"}):
this.manifest.start={timeOffset:f.attributes["TIME-OFFSET"],precise:f.attributes.PRECISE}},"cue-out":function(){q.cueOut=f.data},"cue-out-cont":function(){q.cueOutCont=f.data},"cue-in":function(){q.cueIn=f.data}}[f.tagType]||r).call(e)},uri:function(){q.uri=f.uri;n.push(q);!this.manifest.targetDuration||"duration"in q||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),q.duration=this.manifest.targetDuration);v&&(q.key=v);q.timeline=m;t&&(q.map=t);q={}},comment:function(){},
custom:function(){f.segment?(q.custom=q.custom||{},q.custom[f.customType]=f.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[f.customType]=f.data)}})[f.type].call(e)});return a}th(c,d);var b=c.prototype;b.push=function(a){this.lineStream.push(a)};b.end=function(){this.lineStream.push("\n")};b.addParser=function(a){this.parseStream.addParser(a)};b.addTagMapper=function(a){this.parseStream.addTagMapper(a)};return c}(uh),Ap=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,
Bp=/^application\/dash\+xml/i,el=function(d){return Ap.test(d)?"hls":Bp.test(d)?"dash":"application/vnd.videojs.vhs+json"===d?"vhs-json":null},Cp="undefined"!==typeof window?window:"undefined"!==typeof Jb?Jb:"undefined"!==typeof self?self:{},Dp={lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"\u00c0",Aacute:"\u00c1",Acirc:"\u00c2",Atilde:"\u00c3",Auml:"\u00c4",Aring:"\u00c5",AElig:"\u00c6",Ccedil:"\u00c7",Egrave:"\u00c8",Eacute:"\u00c9",Ecirc:"\u00ca",Euml:"\u00cb",Igrave:"\u00cc",Iacute:"\u00cd",
Icirc:"\u00ce",Iuml:"\u00cf",ETH:"\u00d0",Ntilde:"\u00d1",Ograve:"\u00d2",Oacute:"\u00d3",Ocirc:"\u00d4",Otilde:"\u00d5",Ouml:"\u00d6",Oslash:"\u00d8",Ugrave:"\u00d9",Uacute:"\u00da",Ucirc:"\u00db",Uuml:"\u00dc",Yacute:"\u00dd",THORN:"\u00de",szlig:"\u00df",agrave:"\u00e0",aacute:"\u00e1",acirc:"\u00e2",atilde:"\u00e3",auml:"\u00e4",aring:"\u00e5",aelig:"\u00e6",ccedil:"\u00e7",egrave:"\u00e8",eacute:"\u00e9",ecirc:"\u00ea",euml:"\u00eb",igrave:"\u00ec",iacute:"\u00ed",icirc:"\u00ee",iuml:"\u00ef",
eth:"\u00f0",ntilde:"\u00f1",ograve:"\u00f2",oacute:"\u00f3",ocirc:"\u00f4",otilde:"\u00f5",ouml:"\u00f6",oslash:"\u00f8",ugrave:"\u00f9",uacute:"\u00fa",ucirc:"\u00fb",uuml:"\u00fc",yacute:"\u00fd",thorn:"\u00fe",yuml:"\u00ff",nbsp:"\u00a0",iexcl:"\u00a1",cent:"\u00a2",pound:"\u00a3",curren:"\u00a4",yen:"\u00a5",brvbar:"\u00a6",sect:"\u00a7",uml:"\u00a8",copy:"\u00a9",ordf:"\u00aa",laquo:"\u00ab",not:"\u00ac",shy:"\u00ad\u00ad",reg:"\u00ae",macr:"\u00af",deg:"\u00b0",plusmn:"\u00b1",sup2:"\u00b2",
sup3:"\u00b3",acute:"\u00b4",micro:"\u00b5",para:"\u00b6",middot:"\u00b7",cedil:"\u00b8",sup1:"\u00b9",ordm:"\u00ba",raquo:"\u00bb",frac14:"\u00bc",frac12:"\u00bd",frac34:"\u00be",iquest:"\u00bf",times:"\u00d7",divide:"\u00f7",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220b",prod:"\u220f",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221a",prop:"\u221d",infin:"\u221e",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222a",
"int":"\u222b",there4:"\u2234",sim:"\u223c",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22a5",sdot:"\u22c5",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039a",Lambda:"\u039b",Mu:"\u039c",Nu:"\u039d",Xi:"\u039e",Omicron:"\u039f",Pi:"\u03a0",Rho:"\u03a1",Sigma:"\u03a3",
Tau:"\u03a4",Upsilon:"\u03a5",Phi:"\u03a6",Chi:"\u03a7",Psi:"\u03a8",Omega:"\u03a9",alpha:"\u03b1",beta:"\u03b2",gamma:"\u03b3",delta:"\u03b4",epsilon:"\u03b5",zeta:"\u03b6",eta:"\u03b7",theta:"\u03b8",iota:"\u03b9",kappa:"\u03ba",lambda:"\u03bb",mu:"\u03bc",nu:"\u03bd",xi:"\u03be",omicron:"\u03bf",pi:"\u03c0",rho:"\u03c1",sigmaf:"\u03c2",sigma:"\u03c3",tau:"\u03c4",upsilon:"\u03c5",phi:"\u03c6",chi:"\u03c7",psi:"\u03c8",omega:"\u03c9",thetasym:"\u03d1",upsih:"\u03d2",piv:"\u03d6",OElig:"\u0152",
oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",fnof:"\u0192",circ:"\u02c6",tilde:"\u02dc",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200c",zwj:"\u200d",lrm:"\u200e",rlm:"\u200f",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201a",ldquo:"\u201c",rdquo:"\u201d",bdquo:"\u201e",dagger:"\u2020",Dagger:"\u2021",bull:"\u2022",hellip:"\u2026",permil:"\u2030",prime:"\u2032",Prime:"\u2033",lsaquo:"\u2039",rsaquo:"\u203a",oline:"\u203e",euro:"\u20ac",trade:"\u2122",
larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21b5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230a",rfloor:"\u230b",loz:"\u25ca",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666"},vh=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,fl=new RegExp("[\\-\\.0-9"+vh.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),gl=new RegExp("^"+vh.source+fl.source+
"*(?::"+vh.source+fl.source+"*)?$");tj.prototype={parse:function(d,c,b){var a=this.domBuilder;a.startDocument();var e=c,n=c={},q;for(q in e)n[q]=e[q];ko(d,c,b,a,this.errorHandler);a.endDocument()}};uj.prototype={setTagName:function(d){if(!gl.test(d))throw Error("invalid tagName:"+d);this.tagName=d},add:function(d,c,b){if(!gl.test(d))throw Error("invalid attribute:"+d);this[this.length++]={qName:d,value:c,offset:b}},length:0,getLocalName:function(d){return this[d].localName},getLocator:function(d){return this[d].locator},
getQName:function(d){return this[d].qName},getURI:function(d){return this[d].uri},getValue:function(d){return this[d].value}};var Kb={},fc=Kb.ELEMENT_NODE=1,wd=Kb.ATTRIBUTE_NODE=2,Ve=Kb.TEXT_NODE=3,Mj=Kb.CDATA_SECTION_NODE=4,Qj=Kb.ENTITY_REFERENCE_NODE=5,Ep=Kb.ENTITY_NODE=6,Pj=Kb.PROCESSING_INSTRUCTION_NODE=7,Nj=Kb.COMMENT_NODE=8,Lj=Kb.DOCUMENT_NODE=9,Oj=Kb.DOCUMENT_TYPE_NODE=10,yc=Kb.DOCUMENT_FRAGMENT_NODE=11,Fp=Kb.NOTATION_NODE=12,yb={},nb={};yb.INDEX_SIZE_ERR=(nb[1]="Index size error",1);yb.DOMSTRING_SIZE_ERR=
(nb[2]="DOMString size error",2);var Gp=yb.HIERARCHY_REQUEST_ERR=(nb[3]="Hierarchy request error",3);yb.WRONG_DOCUMENT_ERR=(nb[4]="Wrong document",4);yb.INVALID_CHARACTER_ERR=(nb[5]="Invalid character",5);yb.NO_DATA_ALLOWED_ERR=(nb[6]="No data allowed",6);yb.NO_MODIFICATION_ALLOWED_ERR=(nb[7]="No modification allowed",7);var qo=yb.NOT_FOUND_ERR=(nb[8]="Not found",8);yb.NOT_SUPPORTED_ERR=(nb[9]="Not supported",9);var hl=yb.INUSE_ATTRIBUTE_ERR=(nb[10]="Attribute in use",10);yb.INVALID_STATE_ERR=(nb[11]=
"Invalid state",11);yb.SYNTAX_ERR=(nb[12]="Syntax error",12);yb.INVALID_MODIFICATION_ERR=(nb[13]="Invalid modification",13);yb.NAMESPACE_ERR=(nb[14]="Invalid namespace",14);yb.INVALID_ACCESS_ERR=(nb[15]="Invalid access",15);sd.prototype=Error.prototype;Zd(yb,sd);Nc.prototype={length:0,item:function(d){return this[d]||null},toString:function(d,c){for(var b=[],a=0;a<this.length;a++)vd(this[a],b,d,c);return b.join("")}};td.prototype.item=function(d){yg(this);return this[d]};Ib(td,Nc);Se.prototype={length:0,
item:Nc.prototype.item,getNamedItem:function(d){for(var c=this.length;c--;){var b=this[c];if(b.nodeName==d)return b}},setNamedItem:function(d){var c=d.ownerElement;if(c&&c!=this._ownerElement)throw new sd(hl);c=this.getNamedItem(d.nodeName);zj(this._ownerElement,this,d,c);return c},setNamedItemNS:function(d){var c=d.ownerElement;if(c&&c!=this._ownerElement)throw new sd(hl);c=this.getNamedItemNS(d.namespaceURI,d.localName);zj(this._ownerElement,this,d,c);return c},removeNamedItem:function(d){d=this.getNamedItem(d);
Bj(this._ownerElement,this,d);return d},removeNamedItemNS:function(d,c){d=this.getNamedItemNS(d,c);Bj(this._ownerElement,this,d);return d},getNamedItemNS:function(d,c){for(var b=this.length;b--;){var a=this[b];if(a.localName==c&&a.namespaceURI==d)return a}return null}};Cj.prototype={hasFeature:function(d,c){return(d=this._features[d.toLowerCase()])&&(!c||c in d)?!0:!1},createDocument:function(d,c,b){var a=new ae;a.implementation=this;a.childNodes=new Nc;(a.doctype=b)&&a.appendChild(b);c&&(d=a.createElementNS(d,
c),a.appendChild(d));return a},createDocumentType:function(d,c,b){var a=new Dg;a.name=d;a.nodeName=d;a.publicId=c;a.systemId=b;return a}};Eb.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(d,c){return Fj(this,d,c)},replaceChild:function(d,c){this.insertBefore(d,c);c&&this.removeChild(c)},removeChild:function(d){return Ej(this,
d)},appendChild:function(d){return this.insertBefore(d,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(d){return Gg(this.ownerDocument||this,this,d)},normalize:function(){for(var d=this.firstChild;d;){var c=d.nextSibling;c&&c.nodeType==Ve&&d.nodeType==Ve?(this.removeChild(c),d.appendData(c.data)):(d.normalize(),d=c)}},isSupported:function(d,c){return this.ownerDocument.implementation.hasFeature(d,c)},hasAttributes:function(){return 0<this.attributes.length},lookupPrefix:function(d){for(var c=
this;c;){var b=c._nsMap;if(b)for(var a in b)if(b[a]==d)return a;c=c.nodeType==wd?c.ownerDocument:c.parentNode}return null},lookupNamespaceURI:function(d){for(var c=this;c;){var b=c._nsMap;if(b&&d in b)return b[d];c=c.nodeType==wd?c.ownerDocument:c.parentNode}return null},isDefaultNamespace:function(d){return null==this.lookupPrefix(d)}};Zd(Kb,Eb);Zd(Kb,Eb.prototype);ae.prototype={nodeName:"#document",nodeType:Lj,doctype:null,documentElement:null,_inc:1,insertBefore:function(d,c){if(d.nodeType==yc){for(var b=
d.firstChild;b;){var a=b.nextSibling;this.insertBefore(b,c);b=a}return d}null==this.documentElement&&d.nodeType==fc&&(this.documentElement=d);return Fj(this,d,c),d.ownerDocument=this,d},removeChild:function(d){this.documentElement==d&&(this.documentElement=null);return Ej(this,d)},importNode:function(d,c){return Rj(this,d,c)},getElementById:function(d){var c=null;$d(this.documentElement,function(b){if(b.nodeType==fc&&b.getAttribute("id")==d)return c=b,!0});return c},getElementsByClassName:function(d){var c=
new RegExp("(^|\\s)"+d+"(\\s|$)");return new td(this,function(b){var a=[];$d(b.documentElement,function(e){e!==b&&e.nodeType==fc&&c.test(e.getAttribute("class"))&&a.push(e)});return a})},createElement:function(d){var c=new ud;c.ownerDocument=this;c.nodeName=d;c.tagName=d;c.childNodes=new Nc;return(c.attributes=new Se)._ownerElement=c},createDocumentFragment:function(){var d=new Ue;d.ownerDocument=this;d.childNodes=new Nc;return d},createTextNode:function(d){var c=new Ag;c.ownerDocument=this;c.appendData(d);
return c},createComment:function(d){var c=new Bg;c.ownerDocument=this;c.appendData(d);return c},createCDATASection:function(d){var c=new Cg;c.ownerDocument=this;c.appendData(d);return c},createProcessingInstruction:function(d,c){var b=new Fg;b.ownerDocument=this;b.tagName=b.target=d;b.nodeValue=b.data=c;return b},createAttribute:function(d){var c=new Te;c.ownerDocument=this;c.name=d;c.nodeName=d;c.localName=d;c.specified=!0;return c},createEntityReference:function(d){var c=new Eg;c.ownerDocument=
this;c.nodeName=d;return c},createElementNS:function(d,c){var b=new ud,a=c.split(":"),e=b.attributes=new Se;b.childNodes=new Nc;b.ownerDocument=this;b.nodeName=c;b.tagName=c;b.namespaceURI=d;2==a.length?(b.prefix=a[0],b.localName=a[1]):b.localName=c;return e._ownerElement=b},createAttributeNS:function(d,c){var b=new Te,a=c.split(":");b.ownerDocument=this;b.nodeName=c;b.name=c;b.namespaceURI=d;b.specified=!0;2==a.length?(b.prefix=a[0],b.localName=a[1]):b.localName=c;return b}};Ib(ae,Eb);ud.prototype=
{nodeType:fc,hasAttribute:function(d){return null!=this.getAttributeNode(d)},getAttribute:function(d){return(d=this.getAttributeNode(d))&&d.value||""},getAttributeNode:function(d){return this.attributes.getNamedItem(d)},setAttribute:function(d,c){d=this.ownerDocument.createAttribute(d);d.value=d.nodeValue=""+c;this.setAttributeNode(d)},removeAttribute:function(d){(d=this.getAttributeNode(d))&&this.removeAttributeNode(d)},appendChild:function(d){if(d.nodeType===yc)return this.insertBefore(d,null);
var c=d.parentNode;c&&c.removeChild(d);c=this.lastChild;d.parentNode=this;d.previousSibling=c;d.nextSibling=null;c?c.nextSibling=d:this.firstChild=d;this.lastChild=d;zg(this.ownerDocument,this,d);return d},setAttributeNode:function(d){return this.attributes.setNamedItem(d)},setAttributeNodeNS:function(d){return this.attributes.setNamedItemNS(d)},removeAttributeNode:function(d){return this.attributes.removeNamedItem(d.nodeName)},removeAttributeNS:function(d,c){(d=this.getAttributeNodeNS(d,c))&&this.removeAttributeNode(d)},
hasAttributeNS:function(d,c){return null!=this.getAttributeNodeNS(d,c)},getAttributeNS:function(d,c){return(d=this.getAttributeNodeNS(d,c))&&d.value||""},setAttributeNS:function(d,c,b){d=this.ownerDocument.createAttributeNS(d,c);d.value=d.nodeValue=""+b;this.setAttributeNode(d)},getAttributeNodeNS:function(d,c){return this.attributes.getNamedItemNS(d,c)},getElementsByTagName:function(d){return new td(this,function(c){var b=[];$d(c,function(a){a===c||a.nodeType!=fc||"*"!==d&&a.tagName!=d||b.push(a)});
return b})},getElementsByTagNameNS:function(d,c){return new td(this,function(b){var a=[];$d(b,function(e){e===b||e.nodeType!==fc||"*"!==d&&e.namespaceURI!==d||"*"!==c&&e.localName!=c||a.push(e)});return a})}};ae.prototype.getElementsByTagName=ud.prototype.getElementsByTagName;ae.prototype.getElementsByTagNameNS=ud.prototype.getElementsByTagNameNS;Ib(ud,Eb);Te.prototype.nodeType=wd;Ib(Te,Eb);be.prototype={data:"",substringData:function(d,c){return this.data.substring(d,d+c)},appendData:function(d){this.nodeValue=
this.data=d=this.data+d;this.length=d.length},insertData:function(d,c){this.replaceData(d,0,c)},appendChild:function(d){throw Error(nb[Gp]);},deleteData:function(d,c){this.replaceData(d,c,"")},replaceData:function(d,c,b){var a=this.data.substring(0,d);d=this.data.substring(d+c);this.nodeValue=this.data=b=a+b+d;this.length=b.length}};Ib(be,Eb);Ag.prototype={nodeName:"#text",nodeType:Ve,splitText:function(d){var c=this.data,b=c.substring(d);this.data=this.nodeValue=c=c.substring(0,d);this.length=c.length;
d=this.ownerDocument.createTextNode(b);this.parentNode&&this.parentNode.insertBefore(d,this.nextSibling);return d}};Ib(Ag,be);Bg.prototype={nodeName:"#comment",nodeType:Nj};Ib(Bg,be);Cg.prototype={nodeName:"#cdata-section",nodeType:Mj};Ib(Cg,be);Dg.prototype.nodeType=Oj;Ib(Dg,Eb);Gj.prototype.nodeType=Fp;Ib(Gj,Eb);Hj.prototype.nodeType=Ep;Ib(Hj,Eb);Eg.prototype.nodeType=Qj;Ib(Eg,Eb);Ue.prototype.nodeName="#document-fragment";Ue.prototype.nodeType=yc;Ib(Ue,Eb);Fg.prototype.nodeType=Pj;Ib(Fg,Eb);Ij.prototype.serializeToString=
function(d,c,b){return Jj.call(d,c,b)};Eb.prototype.toString=Jj;try{if(Object.defineProperty){var Hp=function b(c){switch(c.nodeType){case fc:case yc:var a=[];for(c=c.firstChild;c;)7!==c.nodeType&&8!==c.nodeType&&a.push(b(c)),c=c.nextSibling;return a.join("");default:return c.nodeValue}};Object.defineProperty(td.prototype,"length",{get:function(){yg(this);return this.$$length}});Object.defineProperty(Eb.prototype,"textContent",{get:function(){return Hp(this)},set:function(c){switch(this.nodeType){case fc:case yc:for(;this.firstChild;)this.removeChild(this.firstChild);
(c||String(c))&&this.appendChild(this.ownerDocument.createTextNode(c));break;default:this.nodeValue=this.value=this.data=c}}});xj=function(c,b,a){c["doubleDollar"+b]=a}}}catch(d){}var wh=w(function(d,c){function b(m){this.options=m||{locator:{}}}function a(m,l,f){function g(y){var A=m[y];!A&&u&&(A=2==m.length?function(H){m(y,H)}:m);k[y]=A&&function(H){A("[xmldom "+y+"]\t"+H+q(f))}||function(){}}if(!m){if(l instanceof e)return l;m=l}var k={},u=m instanceof Function;f=f||{};g("warning");g("error");
g("fatalError");return k}function e(){this.cdata=!1}function n(m,l){l.lineNumber=m.lineNumber;l.columnNumber=m.columnNumber}function q(m){if(m)return"\n@"+(m.systemId||"")+"#[line:"+m.lineNumber+",col:"+m.columnNumber+"]"}function t(m,l,f){return"string"==typeof m?m.substr(l,f):m.length>=l+f||l?new java.lang.String(m,l,f)+"":m}function v(m,l){m.currentElement?m.currentElement.appendChild(l):m.doc.appendChild(l)}b.prototype.parseFromString=function(m,l){var f=this.options,g=new r,k=f.domBuilder||new e,
u=f.errorHandler,y=f.locator,A=f.xmlns||{},H=(l=/\/x?html?$/.test(l))?Dp:{lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};y&&k.setDocumentLocator(y);g.errorHandler=a(u,k,y);g.domBuilder=f.domBuilder||k;l&&(A[""]="http://www.w3.org/1999/xhtml");A.xml=A.xml||"http://www.w3.org/XML/1998/namespace";m&&"string"===typeof m?g.parse(m,A,H):g.errorHandler.error("invalid doc source");return k.doc};e.prototype={startDocument:function(){this.doc=(new p).createDocument(null,null,null);this.locator&&(this.doc.documentURI=
this.locator.systemId)},startElement:function(m,l,f,g){var k=this.doc;l=k.createElementNS(m,f||l);var u=g.length;v(this,l);this.currentElement=l;this.locator&&n(this.locator,l);for(var y=0;y<u;y++){m=g.getURI(y);var A=g.getValue(y);f=g.getQName(y);m=k.createAttributeNS(m,f);this.locator&&n(g.getLocator(y),m);m.value=m.nodeValue=A;l.setAttributeNode(m)}},endElement:function(m,l,f){m=this.currentElement;m.tagName;this.currentElement=m.parentNode},startPrefixMapping:function(m,l){},endPrefixMapping:function(m){},
processingInstruction:function(m,l){m=this.doc.createProcessingInstruction(m,l);this.locator&&n(this.locator,m);v(this,m)},ignorableWhitespace:function(m,l,f){},characters:function(m,l,f){if(m=t.apply(this,arguments)){var g=this.cdata?this.doc.createCDATASection(m):this.doc.createTextNode(m);this.currentElement?this.currentElement.appendChild(g):/^\s*$/.test(m)&&this.doc.appendChild(g);this.locator&&n(this.locator,g)}},skippedEntity:function(m){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(m){if(this.locator=
m)m.lineNumber=0},comment:function(m,l,f){m=t.apply(this,arguments);var g=this.doc.createComment(m);this.locator&&n(this.locator,g);v(this,g)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(m,l,f){var g=this.doc.implementation;g&&g.createDocumentType&&(m=g.createDocumentType(m,l,f),this.locator&&n(this.locator,m),v(this,m))},warning:function(m){console.warn("[xmldom warning]\t"+m,q(this.locator))},error:function(m){console.error("[xmldom error]\t"+m,q(this.locator))},
fatalError:function(m){console.error("[xmldom fatalError]\t"+m,q(this.locator));throw m;}};"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(m){e.prototype[m]=function(){return null}});var r=tj,p=c.DOMImplementation=Cj;c.XMLSerializer=Ij;c.DOMParser=b});wh.DOMImplementation;wh.XMLSerializer;var Ip=wh.DOMParser,il=function(d){return!!d&&"object"===typeof d},Qb=function c(){for(var b=
arguments.length,a=Array(b),e=0;e<b;e++)a[e]=arguments[e];return a.reduce(function(n,q){if("object"!==typeof q)return n;Object.keys(q).forEach(function(t){Array.isArray(n[t])&&Array.isArray(q[t])?n[t]=n[t].concat(q[t]):il(n[t])&&il(q[t])?n[t]=c(n[t],q[t]):n[t]=q[t]});return n},{})},Jp=function(c){return Object.keys(c).map(function(b){return c[b]})},mf=function(c){return c.reduce(function(b,a){return b.concat(a)},[])},jl=function(c){if(!c.length)return[];for(var b=[],a=0;a<c.length;a++)b.push(c[a]);
return b},Kp=function(c,b){return c.reduce(function(a,e,n){e[b]&&a.push(n);return a},[])},ne=function(c){var b=c.baseUrl,a=c.source;a=void 0===a?"":a;var e=c.range;e=void 0===e?"":e;c=c.indexRange;c=void 0===c?"":c;b={uri:a,resolvedUri:nc((void 0===b?"":b)||"",a)};if(e||c)e=(e?e:c).split("-"),a=parseInt(e[0],10),e=parseInt(e[1],10),b.byterange={length:e-a+1,offset:a};return b},kl=function(c){c&&"number"!==typeof c&&(c=parseInt(c,10));return isNaN(c)?null:c},Lp={"static":function(c){var b=c.duration,
a=c.timescale;a=void 0===a?1:a;var e=c.sourceDuration;c=kl(c.endNumber);return{start:0,end:"number"===typeof c?c:Math.ceil(e/(b/a))}},dynamic:function(c){var b=c.NOW,a=c.clientOffset,e=c.availabilityStartTime,n=c.timescale;n=void 0===n?1:n;var q=c.duration,t=c.start,v=void 0===t?0:t;t=c.minimumUpdatePeriod;var r=void 0===t?0:t;t=c.timeShiftBufferDepth;t=void 0===t?Infinity:t;c=kl(c.endNumber);b=(b+a)/1E3;e+=v;a=Math.ceil((b+r-e)*n/q);v=Math.floor((b-e)*n/q);return{start:Math.max(0,Math.floor((b-e-
t)*n/q)),end:"number"===typeof c?c:Math.min(a,v)}}},Mp=function(c){return function(b,a){var e=c.duration,n=c.timescale,q=c.startNumber;return{number:(void 0===q?1:q)+b,duration:e/(void 0===n?1:n),timeline:c.periodIndex,time:a*e}}},xh=function(c){var b=c.type,a=void 0===b?"static":b;b=c.duration;var e=c.timescale;e=void 0===e?1:e;var n=c.sourceDuration,q=Lp[a](c),t=q.end,v=[];for(q=q.start;q<t;q++)v.push(q);c=v.map(Mp(c));"static"===a&&(a=c.length-1,c[a].duration=n-b/e*a);return c},ll=function(c){var b=
c.baseUrl,a=c.initialization,e=void 0===a?{}:a;a=c.sourceDuration;var n=c.indexRange,q=void 0===n?"":n;n=c.duration;if(!b)throw Error("NO_BASE_URL");e=ne({baseUrl:b,source:e.sourceURL,range:e.range});b=ne({baseUrl:b,source:b,indexRange:q});b.map=e;n?(c=xh(c),c.length&&(b.duration=c[0].duration,b.timeline=c[0].timeline)):a&&(b.duration=a,b.timeline=0);b.number=0;return[b]},yh=function(c,b,a){var e=c.sidx.map?c.sidx.map:null,n=c.sidx.duration,q=c.timeline||0,t=c.sidx.byterange,v=t.offset+t.length;t=
b.timescale;var r=b.references.filter(function(g){return 1!==g.referenceType}),p=[];v+=b.firstOffset;for(var m=0;m<r.length;m++){var l=b.references[m],f=l.referencedSize;l=ll({baseUrl:a,timescale:t,timeline:q,periodIndex:q,duration:l.subsegmentDuration,sourceDuration:n,indexRange:v+"-"+(v+f-1)})[0];e&&(l.map=e);p.push(l);v+=f}c.segments=p;return c},ml=function(c){return Jp(c.reduce(function(b,a){var e=a.attributes.id+(a.attributes.lang||"");if(b[e]){var n;a.segments[0]&&(a.segments[0].discontinuity=
!0);(n=b[e].segments).push.apply(n,a.segments);a.attributes.contentProtection&&(b[e].attributes.contentProtection=a.attributes.contentProtection)}else b[e]=a;return b},{})).map(function(b){b.discontinuityStarts=Kp(b.segments,"discontinuity");return b})},zh=function(c,b){void 0===b&&(b={});if(!Object.keys(b).length)return c;for(var a in c){var e=c[a];if(e.sidx){var n=e.sidx.byterange;n=e.sidx.uri+"-"+(n.offset+"-"+(n.offset+n.length-1));n=b[n]&&b[n].sidx;e.sidx&&n&&yh(e,n,e.sidx.resolvedUri)}}return c},
Np=function(c,b){void 0===b&&(b={});var a;c=c.reduce(function(n,q){var t=q.attributes.role&&q.attributes.role.value||"",v=q.attributes.lang||"",r="main";v&&(r=""+q.attributes.lang+(t?" ("+t+")":""));if(n[r]&&n[r].playlists[0].attributes.BANDWIDTH>q.attributes.bandwidth)return n;var p,m=q.attributes,l=q.segments,f=q.sidx,g={attributes:(p={NAME:m.id,BANDWIDTH:m.bandwidth,CODECS:m.codecs},p["PROGRAM-ID"]=1,p),uri:"",endList:"static"===(m.type||"static"),timeline:m.periodIndex,resolvedUri:"",targetDuration:m.duration,
segments:l,mediaSequence:l.length?l[0].number:1};m.contentProtection&&(g.contentProtection=m.contentProtection);f&&(g.sidx=f);n[r]={language:v,autoselect:!0,"default":"main"===t,playlists:zh([g],b),uri:""};"undefined"===typeof a&&"main"===t&&(a=q,a["default"]=!0);return n},{});if(!a){var e=Object.keys(c)[0];c[e]["default"]=!0}return c},Op=function(c,b){void 0===b&&(b={});return c.reduce(function(a,e){var n=e.attributes.lang||"text";if(a[n])return a;var q,t=e.attributes;e=e.segments;"undefined"===
typeof e&&(e=[{uri:t.baseUrl,timeline:t.periodIndex,resolvedUri:t.baseUrl||"",duration:t.sourceDuration,number:0}],t.duration=t.sourceDuration);var v=(q={NAME:t.id,BANDWIDTH:t.bandwidth},q["PROGRAM-ID"]=1,q);t.codecs&&(v.CODECS=t.codecs);a[n]={language:n,"default":!1,autoselect:!1,playlists:zh([{attributes:v,uri:"",endList:"static"===(t.type||"static"),timeline:t.periodIndex,resolvedUri:t.baseUrl||"",targetDuration:t.duration,segments:e,mediaSequence:e.length?e[0].number:1}],b),uri:""};return a},
{})},Pp=function(c){var b,a=c.attributes,e=c.segments;c=c.sidx;var n={attributes:(b={NAME:a.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:a.width,height:a.height},CODECS:a.codecs,BANDWIDTH:a.bandwidth},b["PROGRAM-ID"]=1,b),uri:"",endList:"static"===(a.type||"static"),timeline:a.periodIndex,resolvedUri:"",targetDuration:a.duration,segments:e,mediaSequence:e.length?e[0].number:1};a.contentProtection&&(n.contentProtection=a.contentProtection);c&&(n.sidx=c);return n},Qp=function(c,b,a){var e;void 0===
a&&(a={});if(!c.length)return{};var n=c[0].attributes,q=n.sourceDuration,t=n.type;t=void 0===t?"static":t;var v=n.suggestedPresentationDelay;n=n.minimumUpdatePeriod;var r=ml(c.filter(function(l){l=l.attributes;return"video/mp4"===l.mimeType||"video/webm"===l.mimeType||"video"===l.contentType})).map(Pp),p=ml(c.filter(function(l){l=l.attributes;return"audio/mp4"===l.mimeType||"audio/webm"===l.mimeType||"audio"===l.contentType}));c=c.filter(function(l){l=l.attributes;return"text/vtt"===l.mimeType||"text"===
l.contentType});var m={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(e={AUDIO:{},VIDEO:{}},e["CLOSED-CAPTIONS"]={},e.SUBTITLES={},e),uri:"",duration:q,playlists:zh(r,a)};0<=n&&(m.minimumUpdatePeriod=1E3*n);b&&(m.locations=b);"dynamic"===t&&(m.suggestedPresentationDelay=v);p.length&&(m.mediaGroups.AUDIO.audio=Np(p,a));c.length&&(m.mediaGroups.SUBTITLES.subs=Op(c,a));return m},nl=function(c,b){var a=c.type;a=void 0===a?"static":a;var e=c.minimumUpdatePeriod;e=void 0===e?0:
e;var n=c.media;n=void 0===n?"":n;var q=c.sourceDuration,t=c.timescale;t=void 0===t?1:t;var v=c.startNumber;v=void 0===v?1:v;for(var r=c.periodIndex,p=[],m=-1,l=0;l<b.length;l++){var f=b[l],g=f.d,k=f.r||0;f=f.t||0;0>m&&(m=f);f&&f>m&&(m=f);if(0>k)if(k=l+1,k===b.length)if("dynamic"===a&&0<e&&0<n.indexOf("$Number$")){k=c.timescale;f=c.start;var u=c.minimumUpdatePeriod;k=Math.ceil((((c.NOW+c.clientOffset)/1E3+(void 0===u?0:u)-(c.availabilityStartTime+(void 0===f?0:f)))*(void 0===k?1:k)-m)/g)}else k=(q*
t-m)/g;else k=(b[k].t-m)/g;else k+=1;k=v+p.length+k;for(f=v+p.length;f<k;)p.push({number:f,duration:g/t,time:m,timeline:r}),m+=g,f++}return p},ol=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,pl=function(c){return function(b,a,e,n){if("doubleDollar"===b)return"$";if("undefined"===typeof c[a])return b;b=""+c[a];if("RepresentationID"===a)return b;n=e?parseInt(n,10):1;return b.length>=n?b:""+Array(n-b.length+1).join("0")+b}},Rp=function(c,b){return c.duration||b?c.duration?xh(c):nl(c,b):[{number:c.startNumber||
1,duration:c.sourceDuration,time:0,timeline:c.periodIndex}]},Sp=function(c,b){var a={RepresentationID:c.id,Bandwidth:c.bandwidth||0},e=c.initialization;e=void 0===e?{sourceURL:"",range:""}:e;var n=ne({baseUrl:c.baseUrl,source:e.sourceURL.replace(ol,pl(a)),range:e.range});return Rp(c,b).map(function(q){a.Number=q.number;a.Time=q.time;var t=(c.media||"").replace(ol,pl(a));return{uri:t,timeline:q.timeline,duration:q.duration,resolvedUri:nc(c.baseUrl||"",t),map:n,number:q.number}})},Tp=function(c,b){var a=
c.duration,e=c.segmentUrls;e=void 0===e?[]:e;if(!a&&!b||a&&b)throw Error("SEGMENT_TIME_UNSPECIFIED");var n=e.map(function(t){var v=c.baseUrl,r=c.initialization;r=void 0===r?{}:r;r=ne({baseUrl:v,source:r.sourceURL,range:r.range});t=ne({baseUrl:v,source:t.media,range:t.mediaRange});t.map=r;return t}),q;a&&(q=xh(c));b&&(q=nl(c,b));return q.map(function(t,v){if(n[v])return v=n[v],v.timeline=t.timeline,v.duration=t.duration,v.number=t.number,v}).filter(function(t){return t})},Up=function(c){var b=c.attributes;
c=c.segmentInfo;if(c.template){var a=Sp;var e=Qb(b,c.template)}else c.base?(a=ll,e=Qb(b,c.base)):c.list&&(a=Tp,e=Qb(b,c.list));b={attributes:b};if(!a)return b;a=a(e,c.timeline);if(e.duration){var n=e,q=n.timescale;e.duration=n.duration/(void 0===q?1:q)}else e.duration=a.length?a.reduce(function(t,v){return Math.max(t,Math.ceil(v.duration))},0):0;b.attributes=e;b.segments=a;c.base&&e.indexRange&&(b.sidx=a[0],b.segments=[]);return b},ib=function(c,b){return jl(c.childNodes).filter(function(a){return a.tagName===
b})},Ah=function(c){return c.textContent.trim()},Fd=function(c){c=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(c);if(!c)return 0;c=c.slice(1);var b=c[1],a=c[2],e=c[3],n=c[4],q=c[5];return 31536E3*parseFloat(c[0]||0)+2592E3*parseFloat(b||0)+86400*parseFloat(a||0)+3600*parseFloat(e||0)+60*parseFloat(n||0)+parseFloat(q||0)},ql={mediaPresentationDuration:function(c){return Fd(c)},availabilityStartTime:function(c){/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(c)&&(c+=
"Z");return Date.parse(c)/1E3},minimumUpdatePeriod:function(c){return Fd(c)},suggestedPresentationDelay:function(c){return Fd(c)},type:function(c){return c},timeShiftBufferDepth:function(c){return Fd(c)},start:function(c){return Fd(c)},width:function(c){return parseInt(c,10)},height:function(c){return parseInt(c,10)},bandwidth:function(c){return parseInt(c,10)},startNumber:function(c){return parseInt(c,10)},timescale:function(c){return parseInt(c,10)},duration:function(c){var b=parseInt(c,10);return isNaN(b)?
Fd(c):b},d:function(c){return parseInt(c,10)},t:function(c){return parseInt(c,10)},r:function(c){return parseInt(c,10)},DEFAULT:function(c){return c}},Gb=function(c){return c&&c.attributes?jl(c.attributes).reduce(function(b,a){b[a.name]=(ql[a.name]||ql.DEFAULT)(a.value);return b},{}):{}},Vp={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready",
"urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},nf=function(c,b){return b.length?mf(c.map(function(a){return b.map(function(e){return nc(a,Ah(e))})})):c},Bh=function(c){var b=ib(c,"SegmentTemplate")[0],a=ib(c,"SegmentList")[0],e=a&&ib(a,"SegmentURL").map(function(v){return Qb({tag:"SegmentURL"},Gb(v))});c=ib(c,"SegmentBase")[0];var n=a||b;n=n&&ib(n,"SegmentTimeline")[0];var q=a||c||b;q=q&&ib(q,"Initialization")[0];(b=b&&Gb(b))&&q?b.initialization=q&&Gb(q):b&&b.initialization&&
(b.initialization={sourceURL:b.initialization});var t={template:b,timeline:n&&ib(n,"S").map(function(v){return Gb(v)}),list:a&&Qb(Gb(a),{segmentUrls:e,initialization:Gb(q)}),base:c&&Qb(Gb(c),{initialization:Gb(q)})};Object.keys(t).forEach(function(v){t[v]||delete t[v]});return t},Wp=function(c,b,a){return function(e){var n=ib(e,"BaseURL");n=nf(b,n);var q=Qb(c,Gb(e)),t=Bh(e);return n.map(function(v){return{segmentInfo:Qb(a,t),attributes:Qb(q,{baseUrl:v})}})}},Xp=function(c){return c.reduce(function(b,
a){var e=Gb(a),n=Vp[e.schemeIdUri];n&&(b[n]={attributes:e},a=ib(a,"cenc:pssh")[0])&&(a=(a=Ah(a))&&sj(a),b[n].pssh=a);return b},{})},Yp=function(c,b,a){return function(e){var n=Gb(e),q=nf(b,ib(e,"BaseURL")),t=ib(e,"Role")[0];t={role:Gb(t)};n=Qb(c,n,t);t=Xp(ib(e,"ContentProtection"));Object.keys(t).length&&(n=Qb(n,{contentProtection:t}));t=Bh(e);e=ib(e,"Representation");t=Qb(a,t);return mf(e.map(Wp(n,q,t)))}},Zp=function(c,b){return function(a,e){var n=nf(b,ib(a,"BaseURL")),q=Gb(a);q=parseInt(q.id,
10);e=Cp.isNaN(q)?e:q;e=Qb(c,{periodIndex:e});q=ib(a,"AdaptationSet");a=Bh(a);return mf(q.map(Yp(e,n,a)))}},rl=function(c){if(""===c)throw Error("DASH_EMPTY_MANIFEST");var b=new Ip,a;try{var e=(a=b.parseFromString(c,"application/xml"))&&"MPD"===a.documentElement.tagName?a.documentElement:null}catch(n){}if(!e||e&&0<e.getElementsByTagName("parsererror").length)throw Error("DASH_INVALID_XML");return e},$p=function(c){c=ib(c,"UTCTiming")[0];if(!c)return null;c=Gb(c);switch(c.schemeIdUri){case "urn:mpeg:dash:utc:http-head:2014":case "urn:mpeg:dash:utc:http-head:2012":c.method=
"HEAD";break;case "urn:mpeg:dash:utc:http-xsdate:2014":case "urn:mpeg:dash:utc:http-iso:2014":case "urn:mpeg:dash:utc:http-xsdate:2012":case "urn:mpeg:dash:utc:http-iso:2012":c.method="GET";break;case "urn:mpeg:dash:utc:direct:2014":case "urn:mpeg:dash:utc:direct:2012":c.method="DIRECT";c.value=Date.parse(c.value);break;default:throw Error("UNSUPPORTED_UTC_TIMING_SCHEME");}return c},sl=Math.pow(2,32),Ca=function(c){if(c instanceof Uint8Array)return c;Array.isArray(c)||ArrayBuffer.isView(c)||c instanceof
ArrayBuffer||(c="number"!==typeof c||"number"===typeof c&&c!==c?0:[c]);return new Uint8Array(c&&c.buffer||c,c&&c.byteOffset||0,c&&c.byteLength||0)},vb=Mc.BigInt||Number,Ch=[vb("0x1"),vb("0x100"),vb("0x10000"),vb("0x1000000"),vb("0x100000000"),vb("0x10000000000"),vb("0x1000000000000"),vb("0x100000000000000"),vb("0x10000000000000000")],aq=function(c,b){var a=void 0===b?{}:b;b=a.signed;b=void 0===b?!1:b;a=a.le;var e=void 0===a?!1:a;c=Ca(c);a=e?"reduce":"reduceRight";a=(c[a]?c[a]:Array.prototype[a]).call(c,
function(n,q,t){t=e?t:Math.abs(t+1-c.length);return n+vb(q)*Ch[t]},vb(0));b&&(b=Ch[c.length]/vb(2)-vb(1),a=vb(a),a>b&&(a=a-b-b-vb(2)));return Number(a)},bq=function(c,b){b=(void 0===b?{}:b).le;b=void 0===b?!1:b;if("bigint"!==typeof c&&"number"!==typeof c||"number"===typeof c&&c!==c)c=0;c=vb(c);for(var a=Math.ceil(c.toString(2).length/8),e=new Uint8Array(new ArrayBuffer(a)),n=0;n<a;n++){var q=b?n:Math.abs(n+1-e.length);e[q]=Number(c/Ch[n]&vb(255));0>c&&(e[q]=Math.abs(~e[q]),e[q]-=0===n?1:2)}return e},
tl=function(c,b){"string"!==typeof c&&c&&"function"===typeof c.toString&&(c=c.toString());if("string"!==typeof c)return new Uint8Array;b||(c=unescape(encodeURIComponent(c)));b=new Uint8Array(c.length);for(var a=0;a<c.length;a++)b[a]=c.charCodeAt(a);return b},cq=function(){for(var c=arguments.length,b=Array(c),a=0;a<c;a++)b[a]=arguments[a];b=b.filter(function(q){return q&&(q.byteLength||q.length)&&"string"!==typeof q});if(1>=b.length)return Ca(b[0]);c=b.reduce(function(q,t,v){return q+(t.byteLength||
t.length)},0);var e=new Uint8Array(c),n=0;b.forEach(function(q){q=Ca(q);e.set(q,n);n+=q.byteLength});return e},$a=function(c,b,a){a=void 0===a?{}:a;var e=a.offset,n=void 0===e?0:e;a=a.mask;var q=void 0===a?[]:a;c=Ca(c);b=Ca(b);a=b.every?b.every:Array.prototype.every;return b.length&&c.length-n>=b.length&&a.call(b,function(t,v){return t===(q[v]?q[v]&c[n+v]:c[n+v])})},dq=Ca([73,68,51]),oe=function e(b,a){void 0===a&&(a=0);b=Ca(b);if(10>b.length-a||!$a(b,dq,{offset:a}))return a;var n=a;var q=a;void 0===
q&&(q=0);a=Ca(b);var t=a[q+6]<<21|a[q+7]<<14|a[q+8]<<7|a[q+9];a=(a[q+5]&16)>>4?t+20:t+10;return e(b,n+a)},ul=function(b){return"string"===typeof b?tl(b):b},eq=function(b){return Array.isArray(b)?b.map(function(a){return ul(a)}):[ul(b)]},vl=function q(a,e,n){void 0===n&&(n=!1);e=eq(e);a=Ca(a);var t=[];if(!e.length)return t;for(var v=0;v<a.length;){var r=(a[v]<<24|a[v+1]<<16|a[v+2]<<8|a[v+3])>>>0,p=a.subarray(v+4,v+8);if(0===r)break;r=v+r;if(r>a.length){if(n)break;r=a.length}v=a.subarray(v+8,r);$a(p,
e[0])&&(1===e.length?t.push(v):t.push.apply(t,q(v,e.slice(1),n)));v=r}return t},wl=Ca([26,69,223,163]),xl=Ca([66,130]);Ca([24,83,128,103]);Ca([21,73,169,102]);Ca([22,84,174,107]);Ca([174]);Ca([215]);Ca([35,227,131]);Ca([174]);Ca([131]);Ca([136]);Ca([134]);Ca([99,162]);Ca([224]);Ca([225]);Ca([31,67,182,117]);Ca([231]);Ca([42,215,177]);Ca([160]);Ca([155]);Ca([161]);Ca([163]);var Dh=[128,64,32,16,8,4,2,1],of=function(a,e,n,q){void 0===n&&(n=!0);void 0===q&&(q=!1);var t=1;for(var v=0;v<Dh.length&&!(a[e]&
Dh[v]);v++)t++;v=a.subarray(e,e+t);n&&(v=Array.prototype.slice.call(a,e,e+t),v[0]^=Dh[t-1]);return{length:t,value:aq(v,{signed:q}),bytes:v}},yl=function n(e){return"string"===typeof e?e.match(/.{1,2}/g).map(function(q){return n(q)}):"number"===typeof e?bq(e):e},fq=function(e){return Array.isArray(e)?e.map(function(n){return yl(n)}):[yl(e)]},gq=function v(n,q,t){if(t>=q.length)return q.length;var r=of(q,t,!1);if($a(n.bytes,r.bytes))return t;var p=of(q,t+r.length);return v(n,q,t+p.length+p.value+r.length)},
zl=function v(q,t){t=fq(t);q=Ca(q);var r=[];if(!t.length)return r;for(var p=0;p<q.length;){var m=of(q,p,!1),l=of(q,p+m.length),f=p+m.length+l.length;127===l.value&&(l.value=gq(m,q,f),l.value!==q.length&&(l.value-=f));f=q.subarray(f,f+l.value>q.length?q.length:f+l.value);$a(t[0],m.bytes)&&(1===t.length?r.push(f):r=r.concat(v(f,t.slice(1))));p+=m.length+l.length+f.length}return r},hq=Ca([0,0,0,1]),iq=Ca([0,0,1]),jq=Ca([0,0,3]),Al=function(q,t,v,r){void 0===r&&(r=Infinity);q=Ca(q);v=[].concat(v);for(var p=
0,m,l=0;p<q.length&&(l<r||m);){var f=void 0;$a(q.subarray(p),hq)?f=4:$a(q.subarray(p),iq)&&(f=3);if(f){l++;if(m){q=q.subarray(m,p);t=[];for(v=1;v<q.length-2;)$a(q.subarray(v,v+3),jq)&&(t.push(v+2),v++),v++;if(0!==t.length){r=q.length-t.length;p=new Uint8Array(r);for(v=m=0;v<r;m++,v++)m===t[0]&&(m++,t.shift()),p[v]=q[m];q=p}return q}var g=void 0;"h264"===t?g=q[p+f]&31:"h265"===t&&(g=q[p+f]>>1&63);-1!==v.indexOf(g)&&(m=p+f);p+=f+("h264"===t?1:2)}else p++}return q.subarray(0,0)},Rb={webm:Ca([119,101,
98,109]),matroska:Ca([109,97,116,114,111,115,107,97]),flac:Ca([102,76,97,67]),ogg:Ca([79,103,103,83]),ac3:Ca([11,119]),riff:Ca([82,73,70,70]),avi:Ca([65,86,73]),wav:Ca([87,65,86,69]),"3gp":Ca([102,116,121,112,51,103]),mp4:Ca([102,116,121,112]),fmp4:Ca([115,116,121,112]),mov:Ca([102,116,121,112,113,116])},Gd={aac:function(q){var t=oe(q);return $a(q,[255,16],{offset:t,mask:[255,22]})},mp3:function(q){var t=oe(q);return $a(q,[255,2],{offset:t,mask:[255,6]})},webm:function(q){q=zl(q,[wl,xl])[0];return $a(q,
Rb.webm)},mkv:function(q){q=zl(q,[wl,xl])[0];return $a(q,Rb.matroska)},mp4:function(q){return!Gd["3gp"](q)&&!Gd.mov(q)&&($a(q,Rb.mp4,{offset:4})||$a(q,Rb.fmp4,{offset:4}))},mov:function(q){return $a(q,Rb.mov,{offset:4})},"3gp":function(q){return $a(q,Rb["3gp"],{offset:4})},ac3:function(q){var t=oe(q);return $a(q,Rb.ac3,{offset:t})},ts:function(q){if(189>q.length&&1<=q.length)return 71===q[0];for(var t=0;t+188<q.length&&188>t;){if(71===q[t]&&71===q[t+188])return!0;t+=1}return!1},flac:function(q){var t=
oe(q);return $a(q,Rb.flac,{offset:t})},ogg:function(q){return $a(q,Rb.ogg)},avi:function(q){return $a(q,Rb.riff)&&$a(q,Rb.avi,{offset:8})},wav:function(q){return $a(q,Rb.riff)&&$a(q,Rb.wav,{offset:8})},h264:function(q){return Al(q,"h264",7,3).length},h265:function(q){return Al(q,"h265",[32,33],3).length}},Eh=Object.keys(Gd).filter(function(q){return"ts"!==q&&"h264"!==q&&"h265"!==q}).concat(["ts","h264","h265"]);Eh.forEach(function(q){var t=Gd[q];Gd[q]=function(v){return t(Ca(v))}});var kq=Gd,Fh=function(q){q=
Ca(q);for(var t=0;t<Eh.length;t++){var v=Eh[t];if(kq[v](q))return v}return""},ed=function(){this.init=function(){var q={};this.on=function(t,v){q[t]||(q[t]=[]);q[t]=q[t].concat(v)};this.off=function(t,v){if(!q[t])return!1;v=q[t].indexOf(v);q[t]=q[t].slice();q[t].splice(v,1);return-1<v};this.trigger=function(t){var v,r;if(v=q[t])if(2===arguments.length){var p=v.length;for(r=0;r<p;++r)v[r].call(this,arguments[1])}else{var m=[];for(r=1;r<arguments.length;++r)m.push(arguments[r]);p=v.length;for(r=0;r<
p;++r)v[r].apply(this,m)}};this.dispose=function(){q={}}}};ed.prototype.pipe=function(q){this.on("data",function(t){q.push(t)});this.on("done",function(t){q.flush(t)});this.on("partialdone",function(t){q.partialFlush(t)});this.on("endedtimeline",function(t){q.endTimeline(t)});this.on("reset",function(t){q.reset(t)});return q};ed.prototype.push=function(q){this.trigger("data",q)};ed.prototype.flush=function(q){this.trigger("done",q)};ed.prototype.partialFlush=function(q){this.trigger("partialdone",
q)};ed.prototype.endTimeline=function(q){this.trigger("endedtimeline",q)};ed.prototype.reset=function(q){this.trigger("reset",q)};var Qc=function(q,t){var v=1;for(q>t&&(v=-1);4294967296<Math.abs(t-q);)q+=8589934592*v;return q};(function v(t){var r,p;v.prototype.init.call(this);this.type_=t||"shared";this.push=function(m){if("shared"===this.type_||m.type===this.type_)void 0===p&&(p=m.dts),m.dts=Qc(m.dts,p),m.pts=Qc(m.pts,p),r=m.dts,this.trigger("data",m)};this.flush=function(){p=r;this.trigger("done")};
this.endTimeline=function(){this.flush();this.trigger("endedtimeline")};this.discontinuity=function(){r=p=void 0};this.reset=function(){this.discontinuity();this.trigger("reset")}}).prototype=new ed;var Bl=function(t){var v=t[1]&31;return v=v<<8|t[2]},pf=function(t){return!!(t[1]&64)},qf=function(t){var v=0;1<(t[3]&48)>>>4&&(v+=t[4]+1);return v},Gh=function(t){switch(t){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";
case 9:return"access_unit_delimiter_rbsp";default:return null}},lq=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350],Cl=function(t,v){var r=t[v+6]<<21|t[v+7]<<14|t[v+8]<<7|t[v+9];t=t[v+5];r=0<=r?r:0;return(t&16)>>4?r+20:r+10},mq=function p(v,r){if(10>v.length-r||73!==v[r]||68!==v[r+1]||51!==v[r+2])return r;r+=Cl(v,r);return p(v,r)},Dl=function(v){return v[0]<<21|v[1]<<14|v[2]<<7|v[3]},Hd={isLikelyAacData:function(v){var r=mq(v,0);return v.length>=r+2&&255===(v[r]&255)&&240===(v[r+
1]&240)&&16===(v[r+1]&22)},parseId3TagSize:Cl,parseAdtsSize:function(v,r){return v[r+3]&6144|v[r+4]<<3|(v[r+5]&224)>>5},parseType:function(v,r){return 73===v[r]&&68===v[r+1]&&51===v[r+2]?"timed-metadata":v[r]&1&&240===(v[r+1]&240)?"audio":null},parseSampleRate:function(v){for(var r=0;r+5<v.length;)if(255!==v[r]||240!==(v[r+1]&246))r++;else return lq[(v[r+2]&60)>>>2];return null},parseAacTimestamp:function(v){var r=10;v[5]&64&&(r=r+4+Dl(v.subarray(10,14)));do{var p=Dl(v.subarray(r+4,r+8));if(1>p)break;
var m=String.fromCharCode(v[r],v[r+1],v[r+2],v[r+3]);if("PRIV"===m){m=v.subarray(r+10,r+p+10);for(var l=0;l<m.byteLength;l++)if(0===m[l]){var f=unescape,g,k=m,u=l,y="";for(g=0;g<u;g++)y+="%"+("00"+k[g].toString(16)).slice(-2);if("com.apple.streaming.transportStreamTimestamp"===f(y))return v=m.subarray(l+1),r=(v[3]&1)<<30|v[4]<<22|v[5]<<14|v[6]<<6|v[7]>>>2,r*=4,r+=v[7]&3;break}}r+=10;r+=p}while(r<v.byteLength);return null}};var db={parseType:function(v,r){v=Bl(v);return 0===v?"pat":v===r?"pmt":r?"pes":
null},parsePat:function(v){var r=pf(v),p=4+qf(v);r&&(p+=v[p]+1);return(v[p+10]&31)<<8|v[p+11]},parsePmt:function(v){var r={},p=pf(v),m=4+qf(v);p&&(m+=v[m]+1);if(v[m+5]&1){p=3+((v[m+1]&15)<<8|v[m+2])-4;for(var l=12+((v[m+10]&15)<<8|v[m+11]);l<p;){var f=m+l;r[(v[f+1]&31)<<8|v[f+2]]=v[f];l+=((v[f+3]&15)<<8|v[f+4])+5}return r}},parsePayloadUnitStartIndicator:pf,parsePesType:function(v,r){v=Bl(v);switch(r[v]){case 27:return"video";case 15:return"audio";case 21:return"timed-metadata";default:return null}},
parsePesTime:function(v){if(!pf(v))return null;var r=4+qf(v);if(r>=v.byteLength)return null;var p=null;var m=v[r+7];m&192&&(p={},p.pts=(v[r+9]&14)<<27|(v[r+10]&255)<<20|(v[r+11]&254)<<12|(v[r+12]&255)<<5|(v[r+13]&254)>>>3,p.pts*=4,p.pts+=(v[r+13]&6)>>>1,p.dts=p.pts,m&64&&(p.dts=(v[r+14]&14)<<27|(v[r+15]&255)<<20|(v[r+16]&254)<<12|(v[r+17]&255)<<5|(v[r+18]&254)>>>3,p.dts*=4,p.dts+=(v[r+18]&6)>>>1));return p},videoPacketContainsKeyFrame:function(v){var r=4+qf(v);v=v.subarray(r);for(var p=r=0,m=!1;p<
v.byteLength-3;p++)if(1===v[p+2]){r=p+5;break}for(;r<v.byteLength;)switch(v[r]){case 0:if(0!==v[r-1]){r+=2;break}else if(0!==v[r-2]){r++;break}p+3!==r-2&&(p=Gh(v[p+3]&31),"slice_layer_without_partitioning_rbsp_idr"===p&&(m=!0));do r++;while(1!==v[r]&&r<v.length);p=r-2;r+=3;break;case 1:if(0!==v[r-1]||0!==v[r-2]){r+=3;break}p=Gh(v[p+3]&31);"slice_layer_without_partitioning_rbsp_idr"===p&&(m=!0);p=r-2;r+=3;break;default:r+=3}(v=v.subarray(p))&&3<v.byteLength&&(p=Gh(v[3]&31),"slice_layer_without_partitioning_rbsp_idr"===
p&&(m=!0));return m}};var El=function(v,r,p){for(var m=0,l=188,f,g,k,u=!1;l<=v.byteLength;)if(71!==v[m]||71!==v[l]&&l!==v.byteLength)m++,l++;else{f=v.subarray(m,l);g=db.parseType(f,r.pid);switch(g){case "pes":if(g=db.parsePesType(f,r.table),k=db.parsePayloadUnitStartIndicator(f),"audio"===g&&k&&(f=db.parsePesTime(f)))f.type="audio",p.audio.push(f),u=!0}if(u)break;m+=188;l+=188}l=v.byteLength;m=l-188;for(u=!1;0<=m;)if(71!==v[m]||71!==v[l]&&l!==v.byteLength)m--,l--;else{f=v.subarray(m,l);g=db.parseType(f,
r.pid);switch(g){case "pes":if(g=db.parsePesType(f,r.table),k=db.parsePayloadUnitStartIndicator(f),"audio"===g&&k&&(f=db.parsePesTime(f)))f.type="audio",p.audio.push(f),u=!0}if(u)break;m-=188;l-=188}},nq=function(v,r){if(v.audio&&v.audio.length){var p=r;if("undefined"===typeof p||isNaN(p))p=v.audio[0].dts;v.audio.forEach(function(l){l.dts=Qc(l.dts,p);l.pts=Qc(l.pts,p);l.dtsTime=l.dts/9E4;l.ptsTime=l.pts/9E4})}if(v.video&&v.video.length){var m=r;if("undefined"===typeof m||isNaN(m))m=v.video[0].dts;
v.video.forEach(function(l){l.dts=Qc(l.dts,m);l.pts=Qc(l.pts,m);l.dtsTime=l.dts/9E4;l.ptsTime=l.pts/9E4});v.firstKeyFrame&&(v=v.firstKeyFrame,v.dts=Qc(v.dts,m),v.pts=Qc(v.pts,m),v.dtsTime=v.dts/9E4,v.ptsTime=v.pts/9E4)}},oq={inspect:function(v,r){if(Hd.isLikelyAacData(v))a:{for(var p=!1,m=0,l=null,f=null,g,k=0,u;3<=v.length-k;){switch(Hd.parseType(v,k)){case "timed-metadata":if(10>v.length-k){p=!0;break}g=Hd.parseId3TagSize(v,k);if(g>v.length){p=!0;break}null===f&&(u=v.subarray(k,k+g),f=Hd.parseAacTimestamp(u));
k+=g;break;case "audio":if(7>v.length-k){p=!0;break}g=Hd.parseAdtsSize(v,k);if(g>v.length){p=!0;break}null===l&&(u=v.subarray(k,k+g),l=Hd.parseSampleRate(u));m++;k+=g;break;default:k++}if(p){v=null;break a}}null===l||null===f?v=null:(v=9E4/l,v={audio:[{type:"audio",dts:f,pts:f},{type:"audio",dts:f+1024*m*v,pts:f+1024*m*v}]})}else{m={pid:null,table:null};f={};l=0;for(g=188;g<v.byteLength;)if(71===v[l]&&71===v[g]){k=v.subarray(l,g);u=db.parseType(k,m.pid);switch(u){case "pat":m.pid||(m.pid=db.parsePat(k));
break;case "pmt":m.table||(m.table=db.parsePmt(k))}if(m.pid&&m.table)break;l+=188;g+=188}else l++,g++;for(p in m.table)if(m.table.hasOwnProperty(p))switch(m.table[p]){case 27:f.video=[];var y;g=v;k=m;u=f;var A=0,H=188,S=!1,W=[];for(y=0;H<g.byteLength;)if(71===g[A]&&71===g[H]){l=g.subarray(A,H);var M=db.parseType(l,k.pid);switch(M){case "pes":var T=db.parsePesType(l,k.table);M=db.parsePayloadUnitStartIndicator(l);if("video"===T&&(M&&!S&&(T=db.parsePesTime(l))&&(T.type="video",u.video.push(T),S=!0),
!u.firstKeyFrame)){if(M&&0!==y){T=new Uint8Array(y);for(M=0;W.length;)y=W.shift(),T.set(y,M),M+=y.byteLength;db.videoPacketContainsKeyFrame(T)&&((y=db.parsePesTime(T))?(u.firstKeyFrame=y,u.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself."));
y=0}W.push(l);y+=l.byteLength}}if(S&&u.firstKeyFrame)break;A+=188;H+=188}else A++,H++;H=g.byteLength;A=H-188;for(S=!1;0<=A;)if(71===g[A]&&71===g[H]){l=g.subarray(A,H);M=db.parseType(l,k.pid);switch(M){case "pes":if(T=db.parsePesType(l,k.table),M=db.parsePayloadUnitStartIndicator(l),"video"===T&&M&&(T=db.parsePesTime(l)))T.type="video",u.video.push(T),S=!0}if(S)break;A-=188;H-=188}else A--,H--;0===f.video.length&&delete f.video;break;case 15:f.audio=[],El(v,m,f),0===f.audio.length&&delete f.audio}v=
f}if(!v||!v.audio&&!v.video)return null;nq(v,r);return v},parseAudioPes_:El},fd=function(v){var r=""+String.fromCharCode(v[0]);r+=String.fromCharCode(v[1]);r+=String.fromCharCode(v[2]);return r+=String.fromCharCode(v[3])},hb=function m(r,p){var l=[],f;if(!p.length)return null;for(f=0;f<r.byteLength;){var g=(r[f]<<24|r[f+1]<<16|r[f+2]<<8|r[f+3])>>>0;var k=fd(r.subarray(f+4,f+8));g=1<g?f+g:r.byteLength;k===p[0]&&(1===p.length?l.push(r.subarray(f+8,g)):(f=m(r.subarray(f+8,g),p.slice(1)),f.length&&(l=
l.concat(f))));f=g}return l},Fl=function(r){return{isLeading:(r[0]&12)>>>2,dependsOn:r[0]&3,isDependedOn:(r[1]&192)>>>6,hasRedundancy:(r[1]&48)>>>4,paddingValue:(r[1]&14)>>>1,isNonSyncSample:r[1]&1,degradationPriority:r[2]<<8|r[3]}},pe=function(r){return("00"+r.toString(16)).slice(-2)};var Gl=function(r){var p=0===r[0]?12:20;return(r[p]<<24|r[p+1]<<16|r[p+2]<<8|r[p+3])>>>0};var Hl={findBox:hb,parseType:fd,timescale:function(r){return hb(r,["moov","trak"]).reduce(function(p,m){var l=hb(m,["tkhd"])[0];
if(!l)return null;var f=l[0];f=0===f?12:20;l=(l[f]<<24|l[f+1]<<16|l[f+2]<<8|l[f+3])>>>0;m=hb(m,["mdia","mdhd"])[0];if(!m)return null;f=m[0];f=0===f?12:20;p[l]=(m[f]<<24|m[f+1]<<16|m[f+2]<<8|m[f+3])>>>0;return p},{})},startTime:function(r,p){p=hb(p,["moof","traf"]);p=[].concat.apply([],p.map(function(m){return hb(m,["tfhd"]).map(function(l){l=r[(l[4]<<24|l[5]<<16|l[6]<<8|l[7])>>>0]||9E4;var f=hb(m,["tfdt"]).map(function(g){var k=g[0];var u=(g[4]<<24|g[5]<<16|g[6]<<8|g[7])>>>0;1===k&&(u*=Math.pow(2,
32),u+=(g[8]<<24|g[9]<<16|g[10]<<8|g[11])>>>0);return u})[0];f="number"!==typeof f||isNaN(f)?Infinity:f;return f/l})}));p=Math.min.apply(null,p);return isFinite(p)?p:0},compositionStartTime:function(r,p){var m=hb(p,["moof","traf"]),l=0;p=0;if(m&&m.length){var f=hb(m[0],["tfhd"])[0],g=hb(m[0],["trun"])[0];m=hb(m[0],["tfdt"])[0];if(f){var k=new DataView(f.buffer,f.byteOffset,f.byteLength);var u=new Uint8Array(f.subarray(1,4));f=k.getUint32(4);var y=u[2]&1,A=u[2]&2,H=u[2]&8,S=u[2]&16;u=u[2]&32;var W=
8;y&&(W+=4,k.getUint32(12),W+=4);A&&(k.getUint32(W),W+=4);H&&(k.getUint32(W),W+=4);S&&(k.getUint32(W),W+=4);u&&k.getUint32(W);k=f}m&&(l=m[0],new Uint8Array(m.subarray(1,4)),f=(m[4]<<24|m[5]<<16|m[6]<<8|m[7])>>>0,1===l&&(f*=Math.pow(2,32),f+=(m[8]<<24|m[9]<<16|m[10]<<8|m[11])>>>0),l=f);if(g){m=g[0];var M=new Uint8Array(g.subarray(1,4));f=[];y=new DataView(g.buffer,g.byteOffset,g.byteLength);u=M[2]&1;W=M[2]&4;A=M[1]&1;H=M[1]&2;S=M[1]&4;M=M[1]&8;var T=y.getUint32(4),R=8;u&&(y.getInt32(R),R+=4);W&&T&&
(u={flags:Fl(g.subarray(R,R+4))},R+=4,A&&(u.duration=y.getUint32(R),R+=4),H&&(u.size=y.getUint32(R),R+=4),M&&(u.compositionTimeOffset=1===m?y.getInt32(R):y.getUint32(R),R+=4),f.push(u),T--);for(;T--;)u={},A&&(u.duration=y.getUint32(R),R+=4),H&&(u.size=y.getUint32(R),R+=4),S&&(u.flags=Fl(g.subarray(R,R+4)),R+=4),M&&(u.compositionTimeOffset=1===m?y.getInt32(R):y.getUint32(R),R+=4),f.push(u);f&&f.length&&(p=f[0].compositionTimeOffset||0)}}return(l+p)/(r[k]||9E4)},videoTrackIds:function(r){var p=[];hb(r,
["moov","trak"]).forEach(function(m){var l=hb(m,["mdia","hdlr"]),f=hb(m,["tkhd"]);l.forEach(function(g,k){g=fd(g.subarray(8,12));k=f[k];"vide"===g&&(k=new DataView(k.buffer,k.byteOffset,k.byteLength),g=k.getUint8(0),k=0===g?k.getUint32(12):k.getUint32(20),p.push(k))})});return p},tracks:function(r){var p=[];hb(r,["moov","trak"]).forEach(function(m){var l={},f=hb(m,["tkhd"])[0];if(f){f=new DataView(f.buffer,f.byteOffset,f.byteLength);var g=f.getUint8(0);l.id=0===g?f.getUint32(12):f.getUint32(20)}if(f=
hb(m,["mdia","hdlr"])[0])f=fd(f.subarray(8,12)),l.type="vide"===f?"video":"soun"===f?"audio":f;if(f=hb(m,["mdia","minf","stbl","stsd"])[0])if(f=f.subarray(8),l.codec=fd(f.subarray(4,8)),f=hb(f,[l.codec])[0])/^[a-z]vc[1-9]$/i.test(l.codec)?(f=f.subarray(78),g=fd(f.subarray(4,8)),"avcC"===g&&11<f.length?(l.codec+=".",l.codec+=pe(f[9]),l.codec+=pe(f[10]),l.codec+=pe(f[11])):l.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(l.codec)?(f=f.subarray(28),g=fd(f.subarray(4,8)),"esds"===g&&20<f.length&&0!==f[19]?(l.codec+=
"."+pe(f[19]),l.codec+="."+pe(f[20]>>>2&63).replace(/^0/,"")):l.codec="mp4a.40.2"):l.codec=l.codec.toLowerCase();if(m=hb(m,["mdia","mdhd"])[0])l.timescale=Gl(m);p.push(l)});return p},getTimescaleFromMediaHeader:Gl},Rc={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,
muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},pq=["video","audio","text"],Il=["Video","Audio","Text"],Jl=function(r){return r?r.replace(/avc1\.(\d+)\.(\d+)/i,function(p,m,l){p=("00"+Number(m).toString(16)).slice(-2);l=("00"+Number(l).toString(16)).slice(-2);return"avc1."+p+"00"+l}):r},Cc=function(r){void 0===r&&(r="");var p=[];r.split(",").forEach(function(m){m=m.trim();var l;pq.forEach(function(f){var g=Rc[f].exec(m.toLowerCase());if(g&&!(1>=g.length)){l=f;g=m.substring(0,g[1].length);
var k=m.replace(g,"");p.push({type:g,details:k,mediaType:f})}});l||p.push({type:m,details:"",mediaType:"unknown"})});return p},qq=function(r,p){if(!r.mediaGroups.AUDIO||!p)return null;r=r.mediaGroups.AUDIO[p];if(!r)return null;for(var m in r)if(p=r[m],p["default"]&&p.playlists)return Cc(p.playlists[0].attributes.CODECS);return null},Kl=function(r){void 0===r&&(r="");return Rc.audio.test(r.trim().toLowerCase())},rq=function(r){void 0===r&&(r="");return Rc.text.test(r.trim().toLowerCase())},Hh=function(r){if(r&&
"string"===typeof r){var p=r.toLowerCase().split(",").map(function(f){return Jl(f.trim())}),m="video";1===p.length&&Kl(p[0])?m="audio":1===p.length&&rq(p[0])&&(m="application");var l="mp4";p.every(function(f){return Rc.mp4.test(f)})?l="mp4":p.every(function(f){return Rc.webm.test(f)})?l="webm":p.every(function(f){return Rc.ogg.test(f)})&&(l="ogg");return m+"/"+l+';codecs="'+r+'"'}},rf=function(r){void 0===r&&(r="");return Mc.MediaSource&&Mc.MediaSource.isTypeSupported&&Mc.MediaSource.isTypeSupported(Hh(r))||
!1},Ih=function(r){void 0===r&&(r="");return r.toLowerCase().split(",").every(function(p){p=p.trim();for(var m=0;m<Il.length;m++)if(Rc["muxer"+Il[m]].test(p))return!0;return!1})},sf=function(r,p,m){return r&&m&&m.responseURL&&p!==m.responseURL?m.responseURL:p},oc=function(r){return U.log.debug?U.log.debug.bind(U,"VHS:",r+" >"):function(){}},sq=U.log,Ll=function(r){var p=r.onwarn,m=r.oninfo,l=r.manifestString,f=r.customTagParsers;f=void 0===f?[]:f;r=r.customTagMappers;r=void 0===r?[]:r;var g=new zp;
if(p)g.on("warn",p);if(m)g.on("info",m);f.forEach(function(k){return g.addParser(k)});r.forEach(function(k){return g.addTagMapper(k)});g.push(l);g.end();return g.manifest},tf=function(r,p){["AUDIO","SUBTITLES"].forEach(function(m){for(var l in r.mediaGroups[m])for(var f in r.mediaGroups[m][l])p(r.mediaGroups[m][l][f],m,l,f)})},Ml=function(r){var p=r.playlist,m=r.uri;p.id=r.id;m&&(p.uri=m);p.attributes=p.attributes||{}},tq=function(r){for(var p=r.playlists.length;p--;){var m=r.playlists[p];Ml({playlist:m,
id:p+"-"+m.uri});m.resolvedUri=nc(r.uri,m.uri);r.playlists[m.id]=m;r.playlists[m.uri]=m;m.attributes.BANDWIDTH||sq.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},uq=function(r){tf(r,function(p){p.uri&&(p.resolvedUri=nc(r.uri,p.uri))})},vq=function(r,p){r="0-"+p;var m={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:ra.location.href,resolvedUri:ra.location.href,playlists:[{uri:p,id:r,resolvedUri:p,attributes:{}}]};m.playlists[r]=m.playlists[0];m.playlists[p]=
m.playlists[0];return m},Nl=function(r,p){r.uri=p;for(p=0;p<r.playlists.length;p++)r.playlists[p].uri||(r.playlists[p].uri="placeholder-uri-"+p);tf(r,function(m,l,f,g){m.playlists&&m.playlists.length&&!m.playlists[0].uri&&(l="placeholder-uri-"+l+"-"+f+"-"+g,f="0-"+l,m.playlists[0].uri=l,m.playlists[0].id=f,r.playlists[f]=m.playlists[0],r.playlists[l]=m.playlists[0])});tq(r);uq(r)},Jh=U.mergeOptions,wq=function(r,p,m){var l=p.slice();m=m||0;p=Math.min(r.length,p.length+m);for(var f=m;f<p;f++)l[f-m]=
Jh(r[f],l[f-m]);return l},Ol=function(r,p){r.resolvedUri||(r.resolvedUri=nc(p,r.uri));r.key&&!r.key.resolvedUri&&(r.key.resolvedUri=nc(p,r.key.uri));r.map&&!r.map.resolvedUri&&(r.map.resolvedUri=nc(p,r.map.uri))},Pl=function(r,p){return r===p||r.segments&&p.segments&&r.segments.length===p.segments.length&&r.endList===p.endList&&r.mediaSequence===p.mediaSequence},Kh=function(r,p,m){void 0===m&&(m=Pl);r=Jh(r,{});var l=r.playlists[p.id];if(!l||m(l,p))return null;var f=Jh(l,p);l.segments&&(f.segments=
wq(l.segments,p.segments,p.mediaSequence-l.mediaSequence));f.segments.forEach(function(g){Ol(g,f.resolvedUri)});for(m=0;m<r.playlists.length;m++)r.playlists[m].id===p.id&&(r.playlists[m]=f);r.playlists[p.id]=f;r.playlists[p.uri]=f;return r},Ql=function(r,p){var m=r.segments[r.segments.length-1];return p&&m&&m.duration?1E3*m.duration:500*(r.targetDuration||10)},Id=function(r){function p(l,f,g){void 0===g&&(g={});var k=r.call(this)||this;if(!l)throw Error("A non-empty playlist URL or object is required");
k.logger_=oc("PlaylistLoader");var u=g;g=u.withCredentials;u=u.handleManifestRedirects;k.src=l;k.vhs_=f;k.withCredentials=void 0===g?!1:g;k.handleManifestRedirects=void 0===u?!1:u;l=f.options_;k.customTagParsers=l&&l.customTagParsers||[];k.customTagMappers=l&&l.customTagMappers||[];k.state="HAVE_NOTHING";k.on("mediaupdatetimeout",function(){"HAVE_METADATA"===k.state&&(k.state="HAVE_CURRENT_METADATA",k.request=k.vhs_.xhr({uri:nc(k.master.uri,k.media().uri),withCredentials:k.withCredentials},function(y,
A){if(k.request){if(y)return k.playlistRequestError(k.request,k.media(),"HAVE_METADATA");k.haveMetadata({playlistString:k.request.responseText,url:k.media().uri,id:k.media().id})}}))});return k}Bc(p,r);var m=p.prototype;m.playlistRequestError=function(l,f,g){var k=f.uri;f=f.id;this.request=null;g&&(this.state=g);this.error={playlist:this.master.playlists[f],status:l.status,message:"HLS playlist request error at URL: "+k+".",responseText:l.responseText,code:500<=l.status?4:2};this.trigger("error")};
m.haveMetadata=function(l){var f=this,g=l.playlistString,k=l.playlistObject,u=l.url,y=l.id;this.request=null;this.state="HAVE_METADATA";l=k||Ll({onwarn:function(A){return f.logger_("m3u8-parser warn for "+y+": "+A.message)},oninfo:function(A){return f.logger_("m3u8-parser info for "+y+": "+A.message)},manifestString:g,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers});l.lastRequest=Date.now();Ml({playlist:l,uri:u,id:y});u=Kh(this.master,l);this.targetDuration=l.targetDuration;
u?(this.master=u,this.media_=this.master.playlists[y]):this.trigger("playlistunchanged");this.media().endList||(ra.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=ra.setTimeout(function(){f.trigger("mediaupdatetimeout")},Ql(this.media(),!!u)));this.trigger("loadedplaylist")};m.dispose=function(){this.trigger("dispose");this.stopRequest();ra.clearTimeout(this.mediaUpdateTimeout);ra.clearTimeout(this.finalRenditionTimeout);this.off()};m.stopRequest=function(){if(this.request){var l=this.request;
this.request=null;l.onreadystatechange=null;l.abort()}};m.media=function(l,f){var g=this;if(!l)return this.media_;if("HAVE_NOTHING"===this.state)throw Error("Cannot switch media playlist from "+this.state);if("string"===typeof l){if(!this.master.playlists[l])throw Error("Unknown playlist URI: "+l);l=this.master.playlists[l]}ra.clearTimeout(this.finalRenditionTimeout);if(f)f=l.targetDuration/2*1E3||5E3,this.finalRenditionTimeout=ra.setTimeout(this.media.bind(this,l,!1),f);else{var k=this.state;f=!this.media_||
l.id!==this.media_.id;if(this.master.playlists[l.id].endList||l.endList&&l.segments.length)this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=l,f&&(this.trigger("mediachanging"),"HAVE_MASTER"===k?this.trigger("loadedmetadata"):this.trigger("mediachange"));else if(f){this.state="SWITCHING_MEDIA";if(this.request){if(l.resolvedUri===this.request.url)return;this.request.onreadystatechange=null;this.request.abort();this.request=
null}this.media_&&this.trigger("mediachanging");this.request=this.vhs_.xhr({uri:l.resolvedUri,withCredentials:this.withCredentials},function(u,y){if(g.request){l.lastRequest=Date.now();l.resolvedUri=sf(g.handleManifestRedirects,l.resolvedUri,y);if(u)return g.playlistRequestError(g.request,l,k);g.haveMetadata({playlistString:y.responseText,url:l.uri,id:l.id});"HAVE_MASTER"===k?g.trigger("loadedmetadata"):g.trigger("mediachange")}})}}};m.pause=function(){this.stopRequest();ra.clearTimeout(this.mediaUpdateTimeout);
"HAVE_NOTHING"===this.state&&(this.started=!1);"SWITCHING_MEDIA"===this.state?this.state=this.media_?"HAVE_METADATA":"HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")};m.load=function(l){var f=this;ra.clearTimeout(this.mediaUpdateTimeout);var g=this.media();l?this.mediaUpdateTimeout=ra.setTimeout(function(){return f.load()},g?g.targetDuration/2*1E3:5E3):this.started?g&&!g.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()};m.start=
function(){var l=this;this.started=!0;"object"===typeof this.src?(this.src.uri||(this.src.uri=ra.location.href),this.src.resolvedUri=this.src.uri,setTimeout(function(){l.setupInitialPlaylist(l.src)},0)):this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},function(f,g){if(l.request){l.request=null;if(f)return l.error={status:g.status,message:"HLS playlist request error at URL: "+l.src+".",responseText:g.responseText,code:2},"HAVE_NOTHING"===l.state&&(l.started=!1),l.trigger("error");
l.src=sf(l.handleManifestRedirects,l.src,g);f=Ll({manifestString:g.responseText,customTagParsers:l.customTagParsers,customTagMappers:l.customTagMappers});l.setupInitialPlaylist(f)}})};m.srcUri=function(){return"string"===typeof this.src?this.src:this.src.uri};m.setupInitialPlaylist=function(l){this.state="HAVE_MASTER";if(l.playlists)this.master=l,Nl(this.master,this.srcUri()),l.playlists.forEach(function(g){g.segments&&g.segments.forEach(function(k){Ol(k,g.resolvedUri)})}),this.trigger("loadedplaylist"),
this.request||this.media(this.master.playlists[0]);else{var f=this.srcUri()||ra.location.href;this.master=vq(l,f);this.haveMetadata({playlistObject:l,url:f,id:this.master.playlists[0].id});this.trigger("loadedmetadata")}};return p}(U.EventTarget),gd=1/30,pc=3*gd,Rl=function(r,p){var m=[],l;if(r&&r.length)for(l=0;l<r.length;l++)p(r.start(l),r.end(l))&&m.push([r.start(l),r.end(l)]);return U.createTimeRanges(m)},qe=function(r,p){return Rl(r,function(m,l){return m-pc<=p&&l+pc>=p})},Lh=function(r,p){return Rl(r,
function(m){return m-gd>=p})},xq=function(r,p){var m=null,l=null,f=0,g=[],k=[];if(!(r&&r.length&&p&&p.length))return U.createTimeRange();for(var u=r.length;u--;)g.push({time:r.start(u),type:"start"}),g.push({time:r.end(u),type:"end"});for(u=p.length;u--;)g.push({time:p.start(u),type:"start"}),g.push({time:p.end(u),type:"end"});g.sort(function(y,A){return y.time-A.time});for(u=0;u<g.length;u++)"start"===g[u].type?(f++,2===f&&(m=g[u].time)):"end"===g[u].type&&(f--,1===f&&(l=g[u].time)),null!==m&&null!==
l&&(k.push([m,l]),l=m=null);return U.createTimeRanges(k)},Sl=function(r){var p=[];if(!r||!r.length)return"";for(var m=0;m<r.length;m++)p.push(r.start(m)+" => "+r.end(m));return p.join(", ")},hd=function(r){for(var p=[],m=0;m<r.length;m++)p.push({start:r.start(m),end:r.end(m)});return p},yq=function(r,p){if(r===p)return!1;if(!r&&p||!p&&r||r.length!==p.length)return!0;for(var m=0;m<r.length;m++)if(r.start(m)!==p.start(m)||r.end(m)!==p.end(m))return!0;return!1},Tl=U.createTimeRange,zq=function(r,p){var m=
0;p-=r.mediaSequence;var l=r.segments[p];if(l){if("undefined"!==typeof l.start)return{result:l.start,precise:!0};if("undefined"!==typeof l.end)return{result:l.end-l.duration,precise:!0}}for(;p--;){l=r.segments[p];if("undefined"!==typeof l.end)return{result:m+l.end,precise:!0};m+=l.duration;if("undefined"!==typeof l.start)return{result:m+l.start,precise:!0}}return{result:m,precise:!1}},Ul=function(r,p,m){"undefined"===typeof p&&(p=r.mediaSequence+r.segments.length);if(p<r.mediaSequence)return 0;var l=
zq(r,p);if(l.precise)return l.result;a:{var f=0;for(var g=p-r.mediaSequence;g<r.segments.length;g++){p=r.segments[g];if("undefined"!==typeof p.start){r=p.start-f;f=!0;break a}f+=p.duration;if("undefined"!==typeof p.end){r=p.end-f;f=!0;break a}}r=-1;f=!1}return f?r:l.result+m},Vl=function(r,p,m){if(!r)return 0;"number"!==typeof m&&(m=0);if("undefined"===typeof p){if(r.totalDuration)return r.totalDuration;if(!r.endList)return ra.Infinity}return Ul(r,p,m)},re=function(r,p,m){var l=0;p>m&&(m=[m,p],p=
m[0],m=m[1]);if(0>p){for(;p<Math.min(0,m);p++)l+=r.targetDuration;p=0}for(;p<m;p++)l+=r.segments[p].duration;return l},Wl=function(r,p){if(!r.segments.length)return 0;var m=r.segments.length,l=r.segments[m-1].duration||r.targetDuration;p="number"===typeof p?p:l+2*r.targetDuration;if(0===p)return m;for(l=0;m--&&!(l+=r.segments[m].duration,l>=p););return Math.max(0,m)},Xl=function(r,p,m,l){if(!r||!r.segments)return null;if(r.endList)return Vl(r);if(null===p)return null;p=p||0;m=m?Wl(r,l):r.segments.length;
return Ul(r,r.mediaSequence+m,p)},Yl=function(r){return r.excludeUntil&&r.excludeUntil>Date.now()},Mh=function(r){return r.excludeUntil&&Infinity===r.excludeUntil},uf=function(r){var p=Yl(r);return!r.disabled&&!p},Zl=function(r,p){return p.attributes&&p.attributes[r]},Nh=function(r,p){if(1===r.playlists.length)return!0;var m=p.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===r.playlists.filter(function(l){return uf(l)?(l.attributes.BANDWIDTH||0)<m:!1}).length},Lb={duration:Vl,seekable:function(r,
p,m){var l=p||0;r=Xl(r,p,!0,m);return null===r?Tl():Tl(l,r)},safeLiveIndex:Wl,getMediaInfoForTime:function(r,p,m,l){var f,g=r.segments.length,k=p-l;if(0>k){if(0<m)for(f=m-1;0<=f;f--){var u=r.segments[f];k+=u.duration+gd;if(0<k)return{mediaIndex:f,startTime:l-re(r,m,f)}}return{mediaIndex:0,startTime:p}}if(0>m){for(f=m;0>f;f++)if(k-=r.targetDuration,0>k)return{mediaIndex:0,startTime:p};m=0}for(f=m;f<g;f++)if(u=r.segments[f],k-=u.duration+gd,0>k)return{mediaIndex:f,startTime:l+re(r,m,f)};return{mediaIndex:g-
1,startTime:p}},isEnabled:uf,isDisabled:function(r){return r.disabled},isBlacklisted:Yl,isIncompatible:Mh,playlistEnd:Xl,isAes:function(r){for(var p=0;p<r.segments.length;p++)if(r.segments[p].key)return!0;return!1},hasAttribute:Zl,estimateSegmentRequestTime:function(r,p,m,l){void 0===l&&(l=0);return Zl("BANDWIDTH",m)?(r*m.attributes.BANDWIDTH-8*l)/p:NaN},isLowestEnabledRendition:Nh},Aq=U.xhr,Bq=U.mergeOptions,Oh=function(r,p,m,l){var f="arraybuffer"===r.responseType?r.response:r.responseText;!p&&
f&&(r.responseTime=Date.now(),r.roundTripTime=r.responseTime-r.requestTime,r.bytesReceived=f.byteLength||f.length,r.bandwidth||(r.bandwidth=Math.floor(r.bytesReceived/r.roundTripTime*8E3)));m.headers&&(r.responseHeaders=m.headers);p&&"ETIMEDOUT"===p.code&&(r.timedout=!0);p||r.aborted||200===m.statusCode||206===m.statusCode||0===m.statusCode||(p=Error("XHR Failed with a response of: "+(r&&(f||r.responseText))));l(p,r)},$l=function(){var r=function f(m,l){m=Bq({timeout:45E3},m);var g=f.beforeRequest||
U.Vhs.xhr.beforeRequest;g&&"function"===typeof g&&(g=g(m))&&(m=g);var k=(!0===U.Vhs.xhr.original?Aq:U.Vhs.xhr)(m,function(y,A){return Oh(k,y,A,l)}),u=k.abort;k.abort=function(){k.aborted=!0;return u.apply(k,arguments)};k.uri=m.uri;k.requestTime=Date.now();return k};r.original=!0;return r},Ph=function(r){var p={};r.byterange&&(r=r.byterange,p.Range="bytes="+r.offset+"-"+(r.offset+r.length-1));return p},Cq=function(r,p){r=r.toString(16);return"00".substring(0,2-r.length)+r+(p%2?" ":"")},Dq=function(r){return 32<=
r&&126>r?String.fromCharCode(r):"."},am=function(r){var p={};Object.keys(r).forEach(function(m){var l=r[m];ArrayBuffer.isView(l)?p[m]={bytes:l.buffer,byteOffset:l.byteOffset,byteLength:l.byteLength}:p[m]=l});return p},vf=function(r){var p=r.byterange||{length:Infinity,offset:0};return[p.length,p.offset,r.resolvedUri].join()},bm=function(r){r=Array.prototype.slice.call(r);for(var p="",m,l,f=0;f<r.length/16;f++)m=r.slice(16*f,16*f+16).map(Cq).join(""),l=r.slice(16*f,16*f+16).map(Dq).join(""),p+=m+" "+
l+"\n";return p},Eq={__proto__:null,createTransferableMessage:am,initSegmentId:vf,segmentKeyId:function(r){return r.resolvedUri},hexDump:bm,tagDump:function(r){return bm(r.bytes)},textRanges:function(r){var p="",m;for(m=0;m<r.length;m++){var l=r;var f=m;l=l.start(f)+"-"+l.end(f);p+=l+" "}return p}},Fq=function(r,p){try{var m=new Date(r)}catch(k){return null}if(!p||!p.segments||0===p.segments.length)return null;r=p.segments[0];if(m<r.dateTimeObject)return null;for(var l=0;l<p.segments.length-1&&!(r=
p.segments[l],m<p.segments[l+1].dateTimeObject);l++);l=p.segments[p.segments.length-1];var f=l.dateTimeObject;if(l.videoTimingInfo){var g=l.videoTimingInfo;g=g.transmuxedPresentationEnd-g.transmuxedPresentationStart-g.transmuxerPrependedSeconds}else g=l.duration+.25*l.duration;g=new Date(f.getTime()+1E3*g);if(m>g)return null;m>f&&(r=l);return{segment:r,estimatedStart:r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationStart:Lb.duration(p,p.mediaSequence+p.segments.indexOf(r)),type:r.videoTimingInfo?
"accurate":"estimate"}},Gq=function(r,p){if(!p||!p.segments||0===p.segments.length)return null;for(var m=0,l,f=0;f<p.segments.length&&!(l=p.segments[f],m=l.videoTimingInfo?l.videoTimingInfo.transmuxedPresentationEnd:m+l.duration,r<=m);f++);p=p.segments[p.segments.length-1];if(p.videoTimingInfo&&p.videoTimingInfo.transmuxedPresentationEnd<r)return null;if(r>m){if(r>m+.25*p.duration)return null;l=p}return{segment:l,estimatedStart:l.videoTimingInfo?l.videoTimingInfo.transmuxedPresentationStart:m-l.duration,
type:l.videoTimingInfo?"accurate":"estimate"}},Hq=function(r,p){try{var m=new Date(r);var l=new Date(p)}catch(f){}r=m.getTime();return(l.getTime()-r)/1E3},Iq=function(r){if(!r.segments||0===r.segments.length)return!1;for(var p=0;p<r.segments.length;p++)if(!r.segments[p].dateTimeObject)return!1;return!0},Jq=function(r){var p=r.playlist,m=r.time;m=void 0===m?void 0:m;r=r.callback;if(!r)throw Error("getProgramTime: callback must be provided");if(!p||void 0===m)return r({message:"getProgramTime: playlist and time must be provided"});
var l=Gq(m,p);if(!l)return r({message:"valid programTime was not found"});if("estimate"===l.type)return r({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:l.estimatedStart});p={mediaSeconds:m};l=l.segment;l.dateTimeObject?(m-=l.videoTimingInfo.transmuxedPresentationStart+l.videoTimingInfo.transmuxerPrependedSeconds,m=new Date(l.dateTimeObject.getTime()+1E3*m)):m=null;m&&(p.programDateTime=m.toISOString());return r(null,p)},Kq=function m(p){var l=
p.programTime,f=p.playlist,g=p.retryCount,k=void 0===g?2:g,u=p.seekTo;g=p.pauseAfterSeek;var y=void 0===g?!0:g,A=p.tech,H=p.callback;if(!H)throw Error("seekToProgramTime: callback must be provided");if("undefined"===typeof l||!f||!u)return H({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!f.endList&&!A.hasStarted_)return H({message:"player must be playing a live stream to start buffering"});if(!Iq(f))return H({message:"programDateTime tags must be provided in the manifest "+
f.resolvedUri});p=Fq(l,f);if(!p)return H({message:l+" was not found in the stream"});g=p.segment;var S=Hq(g.dateTimeObject,l);if("estimate"===p.type){if(0===k)return H({message:l+" is not buffered yet. Try again"});u(p.estimatedStart+S);A.one("seeked",function(){m({programTime:l,playlist:f,retryCount:k-1,seekTo:u,pauseAfterSeek:y,tech:A,callback:H})})}else p=g.start+S,A.one("seeked",function(){return H(null,A.currentTime())}),y&&A.pause(),u(p)},cm=function(p,m){if(4===p.readyState)return m()},Lq=
function(p,m,l){var f=[],g,k=!1,u=function(H,S,W,M){S.abort();k=!0;return l(H,S,W,M)},y=function(H,S){if(!k){if(H)return u(H,S,"",f);var W=S.responseText.substring(f&&f.byteLength||0,S.responseText.length);f=cq(f,tl(W,!0));g=g||oe(f);if(10>f.length||g&&f.length<g+2)return cm(S,function(){return u(H,S,"",f)});W=Fh(f);return"ts"===W&&188>f.length||!W&&376>f.length?cm(S,function(){return u(H,S,"",f)}):u(null,S,W,f)}},A=m({uri:p,beforeSend:function(H){H.overrideMimeType("text/plain; charset=x-user-defined");
H.addEventListener("progress",function(S){S.total;S.loaded;return Oh(H,null,{statusCode:H.status},y)})}},function(H,S){return Oh(A,H,S,y)});return A},dm=U.mergeOptions,em=function(p,m){if(!Pl(p,m)||p.sidx&&m.sidx&&(p.sidx.offset!==m.sidx.offset||p.sidx.length!==m.sidx.length)||!p.sidx&&m.sidx||p.sidx&&!m.sidx||p.segments&&!m.segments||!p.segments&&m.segments)return!1;if(!p.segments&&!m.segments)return!0;for(var l=0;l<p.segments.length;l++){var f=p.segments[l],g=m.segments[l];if(f.uri!==g.uri)return!1;
if(f.byterange||g.byterange)if(f=f.byterange,g=g.byterange,f&&!g||!f&&g||f.offset!==g.offset||f.length!==g.length)return!1}return!0},Qh=function(p){return p.uri+"-"+p.byterange.offset+"-"+(p.byterange.offset+p.byterange.length-1)},Mq=function(p,m,l){for(var f=!0,g=dm(p,{duration:m.duration,minimumUpdatePeriod:m.minimumUpdatePeriod}),k=0;k<m.playlists.length;k++){var u=m.playlists[k];if(u.sidx){var y=Qh(u.sidx);l&&l[y]&&yh(u,l[y].sidx,u.sidx.resolvedUri)}if(u=Kh(g,u,em))g=u,f=!1}tf(m,function(A,H,
S,W){if(A.playlists&&A.playlists.length){var M=A.playlists[0].id;if(A=Kh(g,A.playlists[0],em))g=A,g.mediaGroups[H][S][W].playlists[0]=g.playlists[M],f=!1}});m.minimumUpdatePeriod!==p.minimumUpdatePeriod&&(f=!1);return f?null:g},fm=function(p,m){var l={},f;for(f in p){var g=p[f].sidx;if(g){var k=Qh(g);if(!m[k])break;var u=m[k].sidxInfo;(!u.map&&!g.map||u.map&&g.map&&u.map.byterange.offset===g.map.byterange.offset&&u.map.byterange.length===g.map.byterange.length)&&u.uri===g.uri&&u.byterange.offset===
g.byterange.offset&&u.byterange.length===g.byterange.length&&(l[k]=m[k])}}return l},Nq=function(p,m){var l=fm(p.playlists,m);tf(p,function(f,g,k,u){f.playlists&&f.playlists.length&&(l=dm(l,fm(f.playlists,m)))});return l},Rh=function(p){function m(f,g,k,u){void 0===k&&(k={});var y=p.call(this)||this;y.masterPlaylistLoader_=u||Yb(y);u||(y.isMaster_=!0);u=k;k=u.withCredentials;u=u.handleManifestRedirects;y.vhs_=g;y.withCredentials=void 0===k?!1:k;y.handleManifestRedirects=void 0===u?!1:u;if(!f)throw Error("A non-empty playlist URL or object is required");
y.on("minimumUpdatePeriod",function(){y.refreshXml_()});y.on("mediaupdatetimeout",function(){y.refreshMedia_(y.media().id)});y.state="HAVE_NOTHING";y.loadedPlaylists_={};y.logger_=oc("DashPlaylistLoader");y.isMaster_?(y.masterPlaylistLoader_.srcUrl=f,y.masterPlaylistLoader_.sidxMapping_={}):y.childPlaylist_=f;return y}Bc(m,p);var l=m.prototype;l.requestErrored_=function(f,g,k){if(!this.request)return!0;this.request=null;if(f)return this.error="object"!==typeof f||f instanceof Error?{status:g.status,
message:"DASH request error at URL: "+g.uri,response:g.response,code:2}:f,k&&(this.state=k),this.trigger("error"),!0};l.addSidxSegments_=function(f,g,k){var u=this,y=f.sidx&&Qh(f.sidx);if(f.sidx&&y&&!this.masterPlaylistLoader_.sidxMapping_[y]){var A=sf(this.handleManifestRedirects,f.sidx.resolvedUri),H=this.masterPlaylistLoader_.sidxMapping_;H[y]={sidxInfo:f.sidx};var S=function(W,M){if(!u.requestErrored_(W,M,g)){W=Ca(M.response).subarray(8);M=new DataView(W.buffer,W.byteOffset,W.byteLength);var T=
{version:W[0],flags:new Uint8Array(W.subarray(1,4)),references:[],referenceId:M.getUint32(4),timescale:M.getUint32(8)},R=12;0===T.version?(T.earliestPresentationTime=M.getUint32(R),T.firstOffset=M.getUint32(R+4),R+=8):(T.earliestPresentationTime=M.getUint32(R)*sl+M.getUint32(R+4),T.firstOffset=M.getUint32(R+8)*sl+M.getUint32(R+12),R+=16);R+=2;var oa=M.getUint16(R);for(R+=2;0<oa;R+=12,oa--)T.references.push({referenceType:(W[R]&128)>>>7,referencedSize:M.getUint32(R)&2147483647,subsegmentDuration:M.getUint32(R+
4),startsWithSap:!!(W[R+8]&128),sapType:(W[R+8]&112)>>>4,sapDeltaTime:M.getUint32(R+8)&268435455});H[y].sidx=T;yh(f,T,f.sidx.resolvedUri);return k(!0)}};this.request=Lq(A,this.vhs_.xhr,function(W,M,T,R){if(W)return S(W,M);if(!T||"mp4"!==T)return S({status:M.status,message:"Unsupported "+(T||"unknown")+" container type for sidx segment at URL: "+A,response:"",playlist:f,internal:!0,blacklistDuration:Infinity,code:2},M);var oa=f.sidx.byterange;T=oa.offset;oa=oa.length;if(R.length>=oa+T)return S(W,{response:R.subarray(T,
T+oa),status:M.status,uri:M.uri});u.request=u.vhs_.xhr({uri:A,responseType:"arraybuffer",headers:Ph({byterange:f.sidx.byterange})},S)})}else this.mediaRequest_=ra.setTimeout(function(){return k(!1)},0)};l.dispose=function(){this.trigger("dispose");this.stopRequest();this.loadedPlaylists_={};ra.clearTimeout(this.minimumUpdatePeriodTimeout_);ra.clearTimeout(this.mediaRequest_);ra.clearTimeout(this.mediaUpdateTimeout);this.minimumUpdatePeriodTimeout_=this.mediaRequest_=this.mediaUpdateTimeout=null;this.masterPlaylistLoader_.createMupOnMedia_&&
(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null);this.off()};l.hasPendingRequest=function(){return this.request||this.mediaRequest_};l.stopRequest=function(){if(this.request){var f=this.request;this.request=null;f.onreadystatechange=null;f.abort()}};l.media=function(f){var g=this;if(!f)return this.media_;if("HAVE_NOTHING"===this.state)throw Error("Cannot switch media playlist from "+this.state);var k=this.state;if("string"===
typeof f){if(!this.masterPlaylistLoader_.master.playlists[f])throw Error("Unknown playlist URI: "+f);f=this.masterPlaylistLoader_.master.playlists[f]}var u=!this.media_||f.id!==this.media_.id;u&&this.loadedPlaylists_[f.id]&&this.loadedPlaylists_[f.id].endList?(this.state="HAVE_METADATA",this.media_=f,u&&(this.trigger("mediachanging"),this.trigger("mediachange"))):u&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(f,k,function(y){g.haveMetadata({startingState:k,playlist:f})}))};l.haveMetadata=
function(f){var g=f.startingState;f=f.playlist;this.state="HAVE_METADATA";this.loadedPlaylists_[f.id]=f;this.mediaRequest_=null;this.refreshMedia_(f.id);"HAVE_MASTER"===g?this.trigger("loadedmetadata"):this.trigger("mediachange")};l.pause=function(){this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null);this.stopRequest();ra.clearTimeout(this.mediaUpdateTimeout);ra.clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_);
this.mediaUpdateTimeout=this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=null;"HAVE_NOTHING"===this.state&&(this.started=!1)};l.load=function(f){var g=this;ra.clearTimeout(this.mediaUpdateTimeout);this.mediaUpdateTimeout=null;var k=this.media();f?this.mediaUpdateTimeout=ra.setTimeout(function(){return g.load()},k?k.targetDuration/2*1E3:5E3):this.started?k&&!k.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()};l.start=function(){var f=this;this.started=!0;
this.isMaster_?this.requestMaster_(function(g,k){f.haveMaster_();f.hasPendingRequest()||f.media_||f.media(f.masterPlaylistLoader_.master.playlists[0])}):this.mediaRequest_=ra.setTimeout(function(){return f.haveMaster_()},0)};l.requestMaster_=function(f){var g=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},function(k,u){if(g.requestErrored_(k,u))"HAVE_NOTHING"===g.state&&(g.started=!1);else{var y=u.responseText!==g.masterPlaylistLoader_.masterXml_;
g.masterPlaylistLoader_.masterXml_=u.responseText;g.masterLoaded_=u.responseHeaders&&u.responseHeaders.date?Date.parse(u.responseHeaders.date):Date.now();g.masterPlaylistLoader_.srcUrl=sf(g.handleManifestRedirects,g.masterPlaylistLoader_.srcUrl,u);if(y)g.handleMaster_(),g.syncClientServerClock_(function(){return f(u,y)});else return f(u,y)}})};l.syncClientServerClock_=function(f){var g=this,k=$p(rl(this.masterPlaylistLoader_.masterXml_));if(null===k)return this.masterPlaylistLoader_.clientOffset_=
this.masterLoaded_-Date.now(),f();if("DIRECT"===k.method)return this.masterPlaylistLoader_.clientOffset_=k.value-Date.now(),f();this.request=this.vhs_.xhr({uri:nc(this.masterPlaylistLoader_.srcUrl,k.value),method:k.method,withCredentials:this.withCredentials},function(u,y){if(g.request){if(u)return g.masterPlaylistLoader_.clientOffset_=g.masterLoaded_-Date.now(),f();u="HEAD"===k.method?y.responseHeaders&&y.responseHeaders.date?Date.parse(y.responseHeaders.date):g.masterLoaded_:Date.parse(y.responseText);
g.masterPlaylistLoader_.clientOffset_=u-Date.now();f()}})};l.haveMaster_=function(){this.state="HAVE_MASTER";this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)};l.handleMaster_=function(){this.mediaRequest_=null;var f=this.masterPlaylistLoader_.masterXml_;var g=this.masterPlaylistLoader_.srcUrl;var k={manifestUri:g,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_};void 0===k&&(k={});f=rl(f);var u=k;void 0===
u&&(u={});var y=u;u=y.manifestUri;u=void 0===u?"":u;var A=y.NOW;A=void 0===A?Date.now():A;y=y.clientOffset;var H=void 0===y?0:y;y=ib(f,"Period");if(!y.length)throw Error("INVALID_NUMBER_OF_PERIOD");var S=ib(f,"Location"),W=Gb(f);f=nf([u],ib(f,"BaseURL"));W.sourceDuration=W.mediaPresentationDuration||0;W.NOW=A;W.clientOffset=H;S.length&&(W.locations=S.map(Ah));u=W.locations;f=mf(y.map(Zp(W,f))).map(Up);k=Qp(f,u,k.sidxMapping);Nl(k,g);g=k;(k=this.masterPlaylistLoader_.master)&&(g=Mq(k,g,this.masterPlaylistLoader_.sidxMapping_));
this.masterPlaylistLoader_.master=g?g:k;(f=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0])&&f!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=f);(!k||g&&g.minimumUpdatePeriod!==k.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_();return!!g};l.updateMinimumUpdatePeriodTimeout_=function(){var f=this.masterPlaylistLoader_;f.createMupOnMedia_&&(f.off("loadedmetadata",f.createMupOnMedia_),f.createMupOnMedia_=null);f.minimumUpdatePeriodTimeout_&&
(ra.clearTimeout(f.minimumUpdatePeriodTimeout_),f.minimumUpdatePeriodTimeout_=null);var g=f.master&&f.master.minimumUpdatePeriod;0===g&&(f.media()?g=1E3*f.media().targetDuration:(f.createMupOnMedia_=f.updateMinimumUpdatePeriodTimeout_,f.one("loadedmetadata",f.createMupOnMedia_)));"number"!==typeof g||0>=g?0>g&&this.logger_("found invalid minimumUpdatePeriod of "+g+", not setting a timeout"):this.createMUPTimeout_(g)};l.createMUPTimeout_=function(f){var g=this.masterPlaylistLoader_;g.minimumUpdatePeriodTimeout_=
ra.setTimeout(function(){g.minimumUpdatePeriodTimeout_=null;g.trigger("minimumUpdatePeriod");g.createMUPTimeout_(f)},f)};l.refreshXml_=function(){var f=this;this.requestMaster_(function(g,k){k&&(f.media_&&(f.media_=f.masterPlaylistLoader_.master.playlists[f.media_.id]),f.masterPlaylistLoader_.sidxMapping_=Nq(f.masterPlaylistLoader_.master,f.masterPlaylistLoader_.sidxMapping_),f.addSidxSegments_(f.media(),f.state,function(u){f.refreshMedia_(f.media().id)}))})};l.refreshMedia_=function(f){var g=this;
if(!f)throw Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var k=this.masterPlaylistLoader_.master.playlists,u=!this.media_||this.media_!==k[f];u?this.media_=k[f]:this.trigger("playlistunchanged");this.mediaUpdateTimeout||function A(){g.media().endList||(g.mediaUpdateTimeout=ra.setTimeout(function(){g.trigger("mediaupdatetimeout");A()},Ql(g.media(),!!u)))}();this.trigger("loadedplaylist")};return m}(U.EventTarget),qb={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,
BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},gm=function(p){for(var m=new Uint8Array(new ArrayBuffer(p.length)),l=0;l<p.length;l++)m[l]=p.charCodeAt(l);return m.buffer},hm=function(p){p.on=p.addEventListener;p.off=p.removeEventListener;return p},Oq=function(p){try{return URL.createObjectURL(new Blob([p],
{type:"application/javascript"}))}catch(l){var m=new BlobBuilder;m.append(p);return URL.createObjectURL(m.getBlob())}},im=function(p){return function(){var m=Oq(p),l=hm(new Worker(m));l.objURL=m;var f=l.terminate;l.on=l.addEventListener;l.off=l.removeEventListener;l.terminate=function(){URL.revokeObjectURL(m);return f.call(this)};return l}},jm=function(p){return"var browserWorkerPolyFill = "+hm.toString()+";\nbrowserWorkerPolyFill(self);\n"+p},km=function(p){return p.toString().replace(/^function.+?{/,
"").slice(0,-1)},tr=jm(km(function(){var p=function(){this.init=function(){var I={};this.on=function(O,C){I[O]||(I[O]=[]);I[O]=I[O].concat(C)};this.off=function(O,C){if(!I[O])return!1;C=I[O].indexOf(C);I[O]=I[O].slice();I[O].splice(C,1);return-1<C};this.trigger=function(O){var C,B;if(C=I[O])if(2===arguments.length){var E=C.length;for(B=0;B<E;++B)C[B].call(this,arguments[1])}else{var z=[];for(B=1;B<arguments.length;++B)z.push(arguments[B]);E=C.length;for(B=0;B<E;++B)C[B].apply(this,z)}};this.dispose=
function(){I={}}}};p.prototype.pipe=function(I){this.on("data",function(O){I.push(O)});this.on("done",function(O){I.flush(O)});this.on("partialdone",function(O){I.partialFlush(O)});this.on("endedtimeline",function(O){I.endTimeline(O)});this.on("reset",function(O){I.reset(O)});return I};p.prototype.push=function(I){this.trigger("data",I)};p.prototype.flush=function(I){this.trigger("done",I)};p.prototype.partialFlush=function(I){this.trigger("partialdone",I)};p.prototype.endTimeline=function(I){this.trigger("endedtimeline",
I)};p.prototype.reset=function(I){this.trigger("reset",I)};var m=Math.pow(2,32)-1,l,f,g,k,u,y,A,H,S,W,M,T,R,oa,pa,Ba;(function(){var I;g={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]};if("undefined"!==typeof Uint8Array){for(I in g)g.hasOwnProperty(I)&&(g[I]=
[I.charCodeAt(0),I.charCodeAt(1),I.charCodeAt(2),I.charCodeAt(3)]);k=new Uint8Array([105,115,111,109]);y=new Uint8Array([97,118,99,49]);u=new Uint8Array([0,0,0,1]);A=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]);H=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);S={video:A,audio:H};T=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]);M=new Uint8Array([0,
0,0,0,0,0,0,0]);oa=R=new Uint8Array([0,0,0,0,0,0,0,0]);pa=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]);Ba=R;W=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})();var ea=function(I){var O=[],C=0,B;for(B=1;B<arguments.length;B++)O.push(arguments[B]);for(B=O.length;B--;)C+=O[B].byteLength;var E=new Uint8Array(C+8);(new DataView(E.buffer,E.byteOffset,E.byteLength)).setUint32(0,E.byteLength);E.set(I,4);B=0;for(C=8;B<O.length;B++)E.set(O[B],C),C+=O[B].byteLength;return E};var ka=function(){return ea(g.dinf,ea(g.dref,
T))};var sa=function(I){return ea(g.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,I.audioobjecttype<<3|I.samplingfrequencyindex>>>1,I.samplingfrequencyindex<<7|I.channelcount<<3,6,1,2]))};var Na=function(){return ea(g.ftyp,k,u,k,y)};var Ya=function(I){return ea(g.hdlr,S[I])};var wb=function(I){var O=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,I.duration>>>24&255,I.duration>>>16&255,I.duration>>>8&255,I.duration&255,85,196,0,0]);I.samplerate&&(O[12]=I.samplerate>>>
24&255,O[13]=I.samplerate>>>16&255,O[14]=I.samplerate>>>8&255,O[15]=I.samplerate&255);return ea(g.mdhd,O)};var eb=function(I){return ea(g.mdia,wb(I),Ya(I.type),Sb(I))};var rb=function(I){return ea(g.mfhd,new Uint8Array([0,0,0,0,(I&4278190080)>>24,(I&16711680)>>16,(I&65280)>>8,I&255]))};var Sb=function(I){return ea(g.minf,"video"===I.type?ea(g.vmhd,W):ea(g.smhd,M),ka(),Pq(I))};var qc=function(I){for(var O=I.length,C=[];O--;)C[O]=Qq(I[O]);return ea.apply(null,[g.moov,Sh(4294967295)].concat(C).concat(Jd(I)))};
var Jd=function(I){for(var O=I.length,C=[];O--;)C[O]=Rq(I[O]);return ea.apply(null,[g.mvex].concat(C))};var Sh=function(I){I=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(I&4278190080)>>24,(I&16711680)>>16,(I&65280)>>8,I&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return ea(g.mvhd,I)};var Sq=function(I){I=I.samples||[];var O=new Uint8Array(4+I.length),C;for(C=0;C<
I.length;C++){var B=I[C].flags;O[C+4]=B.dependsOn<<4|B.isDependedOn<<2|B.hasRedundancy}return ea(g.sdtp,O)};var Pq=function(I){return ea(g.stbl,l(I),ea(g.stts,Ba),ea(g.stsc,oa),ea(g.stsz,pa),ea(g.stco,R))};(function(){l=function(C){return ea(g.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===C.type?I(C):O(C))};var I=function(C){var B=C.sps||[],E=C.pps||[],z=[],J=[],K;for(K=0;K<B.length;K++)z.push((B[K].byteLength&65280)>>>8),z.push(B[K].byteLength&255),z=z.concat(Array.prototype.slice.call(B[K]));
for(K=0;K<E.length;K++)J.push((E[K].byteLength&65280)>>>8),J.push(E[K].byteLength&255),J=J.concat(Array.prototype.slice.call(E[K]));B=[g.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(C.width&65280)>>8,C.width&255,(C.height&65280)>>8,C.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),ea(g.avcC,new Uint8Array([1,C.profileIdc,C.profileCompatibility,C.levelIdc,255].concat([B.length],
z,[E.length],J))),ea(g.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))];C.sarRatio&&(E=C.sarRatio[0],C=C.sarRatio[1],B.push(ea(g.pasp,new Uint8Array([(E&4278190080)>>24,(E&16711680)>>16,(E&65280)>>8,E&255,(C&4278190080)>>24,(C&16711680)>>16,(C&65280)>>8,C&255]))));return ea.apply(null,B)};var O=function(C){return ea(g.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(C.channelcount&65280)>>8,C.channelcount&255,(C.samplesize&65280)>>8,C.samplesize&255,0,0,0,0,(C.samplerate&65280)>>
8,C.samplerate&255,0,0]),sa(C))}})();var Tq=function(I){I=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(I.id&4278190080)>>24,(I.id&16711680)>>16,(I.id&65280)>>8,I.id&255,0,0,0,0,(I.duration&4278190080)>>24,(I.duration&16711680)>>16,(I.duration&65280)>>8,I.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(I.width&65280)>>8,I.width&255,0,0,(I.height&65280)>>8,I.height&255,0,0]);return ea(g.tkhd,I)};var Uq=function(I){var O=ea(g.tfhd,new Uint8Array([0,
0,0,58,(I.id&4278190080)>>24,(I.id&16711680)>>16,(I.id&65280)>>8,I.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0]));var C=Math.floor(I.baseMediaDecodeTime/(m+1));var B=Math.floor(I.baseMediaDecodeTime%(m+1));C=ea(g.tfdt,new Uint8Array([1,0,0,0,C>>>24&255,C>>>16&255,C>>>8&255,C&255,B>>>24&255,B>>>16&255,B>>>8&255,B&255]));if("audio"===I.type)return I=f(I,92),ea(g.traf,O,C,I);B=Sq(I);I=f(I,B.length+92);return ea(g.traf,O,C,I,B)};var Qq=function(I){I.duration=I.duration||4294967295;return ea(g.trak,Tq(I),eb(I))};
var Rq=function(I){var O=new Uint8Array([0,0,0,0,(I.id&4278190080)>>24,(I.id&16711680)>>16,(I.id&65280)>>8,I.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);"video"!==I.type&&(O[O.length-1]=0);return ea(g.trex,O)};(function(){var I=function(B,E){var z=0,J=0,K=0,D=0;B.length&&(void 0!==B[0].duration&&(z=1),void 0!==B[0].size&&(J=2),void 0!==B[0].flags&&(K=4),void 0!==B[0].compositionTimeOffset&&(D=8));return[0,0,z|J|K|D,1,(B.length&4278190080)>>>24,(B.length&16711680)>>>16,(B.length&65280)>>>8,B.length&255,
(E&4278190080)>>>24,(E&16711680)>>>16,(E&65280)>>>8,E&255]};var O=function(B,E){var z;B=B.samples||[];E+=20+16*B.length;var J=I(B,E);E=new Uint8Array(J.length+16*B.length);E.set(J);J=J.length;for(z=0;z<B.length;z++){var K=B[z];E[J++]=(K.duration&4278190080)>>>24;E[J++]=(K.duration&16711680)>>>16;E[J++]=(K.duration&65280)>>>8;E[J++]=K.duration&255;E[J++]=(K.size&4278190080)>>>24;E[J++]=(K.size&16711680)>>>16;E[J++]=(K.size&65280)>>>8;E[J++]=K.size&255;E[J++]=K.flags.isLeading<<2|K.flags.dependsOn;
E[J++]=K.flags.isDependedOn<<6|K.flags.hasRedundancy<<4|K.flags.paddingValue<<1|K.flags.isNonSyncSample;E[J++]=K.flags.degradationPriority&61440;E[J++]=K.flags.degradationPriority&15;E[J++]=(K.compositionTimeOffset&4278190080)>>>24;E[J++]=(K.compositionTimeOffset&16711680)>>>16;E[J++]=(K.compositionTimeOffset&65280)>>>8;E[J++]=K.compositionTimeOffset&255}return ea(g.trun,E)};var C=function(B,E){var z;B=B.samples||[];E+=20+8*B.length;var J=I(B,E);E=new Uint8Array(J.length+8*B.length);E.set(J);J=J.length;
for(z=0;z<B.length;z++){var K=B[z];E[J++]=(K.duration&4278190080)>>>24;E[J++]=(K.duration&16711680)>>>16;E[J++]=(K.duration&65280)>>>8;E[J++]=K.duration&255;E[J++]=(K.size&4278190080)>>>24;E[J++]=(K.size&16711680)>>>16;E[J++]=(K.size&65280)>>>8;E[J++]=K.size&255}return ea(g.trun,E)};f=function(B,E){return"audio"===B.type?C(B,E):O(B,E)}})();var ic={ftyp:Na,mdat:function(I){return ea(g.mdat,I)},moof:function(I,O){for(var C=[],B=O.length;B--;)C[B]=Uq(O[B]);return ea.apply(null,[g.moof,rb(I)].concat(C))},
moov:qc,initSegment:function(I){var O=Na();I=qc(I);var C=new Uint8Array(O.byteLength+I.byteLength);C.set(O);C.set(I,O.byteLength);return C}},lm=function(I,O){var C={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};C.dataOffset=O;C.compositionTimeOffset=I.pts-I.dts;C.duration=I.duration;C.size=4*I.length;C.size+=I.byteLength;I.keyFrame&&(C.flags.dependsOn=2,C.flags.isNonSyncSample=0);return C},rc={groupNalsIntoFrames:function(I){var O,C=
[],B=[];B.byteLength=0;B.nalCount=0;B.duration=0;for(O=C.byteLength=0;O<I.length;O++){var E=I[O];"access_unit_delimiter_rbsp"===E.nalUnitType?(C.length&&(C.duration=E.dts-C.dts,B.byteLength+=C.byteLength,B.nalCount+=C.length,B.duration+=C.duration,B.push(C)),C=[E],C.byteLength=E.data.byteLength,C.pts=E.pts,C.dts=E.dts):("slice_layer_without_partitioning_rbsp_idr"===E.nalUnitType&&(C.keyFrame=!0),C.duration=E.dts-C.dts,C.byteLength+=E.data.byteLength,C.push(E))}B.length&&(!C.duration||0>=C.duration)&&
(C.duration=B[B.length-1].duration);B.byteLength+=C.byteLength;B.nalCount+=C.length;B.duration+=C.duration;B.push(C);return B},groupFramesIntoGops:function(I){var O,C=[],B=[];C.byteLength=0;C.nalCount=0;C.duration=0;C.pts=I[0].pts;C.dts=I[0].dts;B.byteLength=0;B.nalCount=0;B.duration=0;B.pts=I[0].pts;B.dts=I[0].dts;for(O=0;O<I.length;O++){var E=I[O];E.keyFrame?(C.length&&(B.push(C),B.byteLength+=C.byteLength,B.nalCount+=C.nalCount,B.duration+=C.duration),C=[E],C.nalCount=E.length,C.byteLength=E.byteLength,
C.pts=E.pts,C.dts=E.dts,C.duration=E.duration):(C.duration+=E.duration,C.nalCount+=E.length,C.byteLength+=E.byteLength,C.push(E))}B.length&&0>=C.duration&&(C.duration=B[B.length-1].duration);B.byteLength+=C.byteLength;B.nalCount+=C.nalCount;B.duration+=C.duration;B.push(C);return B},extendFirstKeyFrame:function(I){if(!I[0][0].keyFrame&&1<I.length){var O=I.shift();I.byteLength-=O.byteLength;I.nalCount-=O.nalCount;I[0][0].dts=O.dts;I[0][0].pts=O.pts;I[0][0].duration+=O.duration}return I},generateSampleTable:function(I,
O){var C,B=O||0,E=[];for(O=0;O<I.length;O++){var z=I[O];for(C=0;C<z.length;C++){var J=z[C];J=lm(J,B);B+=J.size;E.push(J)}}return E},concatenateNalData:function(I){var O,C,B,E=0,z=new Uint8Array(I.byteLength+4*I.nalCount),J=new DataView(z.buffer);for(O=0;O<I.length;O++){var K=I[O];for(C=0;C<K.length;C++){var D=K[C];for(B=0;B<D.length;B++){var N=D[B];J.setUint32(E,N.data.byteLength);E+=4;z.set(N.data,E);E+=N.data.byteLength}}}return z},generateSampleTableForFrame:function(I,O){var C=[];I=lm(I,O||0);
C.push(I);return C},concatenateNalDataForFrame:function(I){var O,C=0,B=new Uint8Array(I.byteLength+4*I.length),E=new DataView(B.buffer);for(O=0;O<I.length;O++){var z=I[O];E.setUint32(C,z.data.byteLength);C+=4;B.set(z.data,C);C+=z.data.byteLength}return B}},Sc=[33,16,5,32,164,27],Th=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],Sa=function(I){for(var O=[];I--;)O.push(0);return O},Vq=function(I){return Object.keys(I).reduce(function(O,C){O[C]=new Uint8Array(I[C].reduce(function(B,E){return B.concat(E)},
[]));return O},{})},Uh;var mm=function(I){return 9E4*I};var nm=function(I,O){return I*O};var Vh=function(I){return I/9E4};var om=function(I,O){return I/O};var Ia={ONE_SECOND_IN_TS:9E4,secondsToVideoTs:mm,secondsToAudioTs:nm,videoTsToSeconds:Vh,audioTsToSeconds:om,audioTsToVideoTs:function(I,O){return mm(om(I,O))},videoTsToAudioTs:function(I,O){return nm(Vh(I),O)},metadataTsToSeconds:function(I,O,C){return Vh(C?I:I-O)}},Tc={prefixWithSilence:function(I,O,C,B){var E,z=E=0;if(O.length){var J=Ia.audioTsToVideoTs(I.baseMediaDecodeTime,
I.samplerate);var K=Math.ceil(Ia.ONE_SECOND_IN_TS/(I.samplerate/1024));C&&B&&(E=J-Math.max(C,B),E=Math.floor(E/K),z=E*K);if(!(1>E||z>Ia.ONE_SECOND_IN_TS/2)){Uh||(C={96E3:[Sc,[227,64],Sa(154),[56]],88200:[Sc,[231],Sa(170),[56]],64E3:[Sc,[248,192],Sa(240),[56]],48E3:[Sc,[255,192],Sa(268),[55,148,128],Sa(54),[112]],44100:[Sc,[255,192],Sa(268),[55,163,128],Sa(84),[112]],32E3:[Sc,[255,192],Sa(268),[55,234],Sa(226),[112]],24E3:[Sc,[255,192],Sa(268),[55,255,128],Sa(268),[111,112],Sa(126),[224]],16E3:[Sc,
[255,192],Sa(268),[55,255,128],Sa(268),[111,255],Sa(269),[223,108],Sa(195),[1,192]],12E3:[Th,Sa(268),[3,127,248],Sa(268),[6,255,240],Sa(268),[13,255,224],Sa(268),[27,253,128],Sa(259),[56]],11025:[Th,Sa(268),[3,127,248],Sa(268),[6,255,240],Sa(268),[13,255,224],Sa(268),[27,255,192],Sa(268),[55,175,128],Sa(108),[112]],8E3:[Th,Sa(268),[3,121,16],Sa(47),[7]]},Uh=Vq(C));C=Uh[I.samplerate];C||(C=O[0].data);for(B=0;B<E;B++)J=O[0],O.splice(0,0,{data:C,dts:J.dts-K,pts:J.pts-K});I.baseMediaDecodeTime-=Math.floor(Ia.videoTsToAudioTs(z,
I.samplerate));return z}}},trimAdtsFramesByEarliestDts:function(I,O,C){if(O.minSegmentDts>=C)return I;O.minSegmentDts=Infinity;return I.filter(function(B){return B.dts>=C?(O.minSegmentDts=Math.min(O.minSegmentDts,B.dts),O.minSegmentPts=O.minSegmentDts,!0):!1})},generateSampleTable:function(I){var O,C=[];for(O=0;O<I.length;O++){var B=I[O];C.push({size:B.data.byteLength,duration:1024})}return C},concatenateFrameData:function(I){var O,C=0;var B=Uint8Array;var E=0;for(O=0;O<I.length;O++){var z=I[O];E+=
z.data.byteLength}z=new B(E);for(B=0;B<I.length;B++)O=I[B],z.set(O.data,C),C+=O.data.byteLength;return z}},Wq=Ia.ONE_SECOND_IN_TS,fb={clearDtsInfo:function(I){delete I.minSegmentDts;delete I.maxSegmentDts;delete I.minSegmentPts;delete I.maxSegmentPts},calculateTrackBaseMediaDecodeTime:function(I,O){var C=I.minSegmentDts;O||(C-=I.timelineStartInfo.dts);O=I.timelineStartInfo.baseMediaDecodeTime;O=Math.max(0,O+C);"audio"===I.type&&(I=I.samplerate/Wq,O=Math.floor(O*I));return O},collectDtsInfo:function(I,
O){"number"===typeof O.pts&&(void 0===I.timelineStartInfo.pts&&(I.timelineStartInfo.pts=O.pts),I.minSegmentPts=void 0===I.minSegmentPts?O.pts:Math.min(I.minSegmentPts,O.pts),I.maxSegmentPts=void 0===I.maxSegmentPts?O.pts:Math.max(I.maxSegmentPts,O.pts));"number"===typeof O.dts&&(void 0===I.timelineStartInfo.dts&&(I.timelineStartInfo.dts=O.dts),I.minSegmentDts=void 0===I.minSegmentDts?O.dts:Math.min(I.minSegmentDts,O.dts),I.maxSegmentDts=void 0===I.maxSegmentDts?O.dts:Math.max(I.maxSegmentDts,O.dts))}},
se={parseSei:function(I){for(var O=0,C={payloadType:-1,payloadSize:0},B=0,E=0;O<I.byteLength&&128!==I[O];){for(;255===I[O];)B+=255,O++;for(B+=I[O++];255===I[O];)E+=255,O++;E+=I[O++];if(!C.payload&&4===B)if("GA94"===String.fromCharCode(I[O+3],I[O+4],I[O+5],I[O+6])){C.payloadType=B;C.payloadSize=E;C.payload=I.subarray(O,O+E);break}else C.payload=void 0;O+=E;E=B=0}return C},parseUserData:function(I){return 181!==I.payload[0]||49!==(I.payload[1]<<8|I.payload[2])||"GA94"!==String.fromCharCode(I.payload[3],
I.payload[4],I.payload[5],I.payload[6])||3!==I.payload[7]?null:I.payload.subarray(8,I.payload.length-1)},parseCaptionPackets:function(I,O){var C=[],B;if(!(O[0]&64))return C;var E=O[0]&31;for(B=0;B<E;B++){var z=3*B;var J={type:O[z+2]&3,pts:I};O[z+2]&4&&(J.ccData=O[z+3]<<8|O[z+4],C.push(J))}return C},discardEmulationPreventionBytes:function(I){for(var O=I.byteLength,C=[],B=1,E;B<O-2;)0===I[B]&&0===I[B+1]&&3===I[B+2]?(C.push(B+2),B+=2):B++;if(0===C.length)return I;O-=C.length;E=new Uint8Array(O);var z=
0;for(B=0;B<O;z++,B++)z===C[0]&&(z++,C.shift()),E[B]=I[z];return E},USER_DATA_REGISTERED_ITU_T_T35:4},Mb=function C(O){O=O||{};C.prototype.init.call(this);this.parse708captions_="boolean"===typeof O.parse708captions?O.parse708captions:!0;this.captionPackets_=[];this.ccStreams_=[new Za(0,0),new Za(0,1),new Za(1,0),new Za(1,1)];this.parse708captions_&&(this.cc708Stream_=new Xa);this.reset();this.ccStreams_.forEach(function(B){B.on("data",this.trigger.bind(this,"data"));B.on("partialdone",this.trigger.bind(this,
"partialdone"));B.on("done",this.trigger.bind(this,"done"))},this);this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};Mb.prototype=new p;Mb.prototype.push=function(O){if("sei_rbsp"===O.nalUnitType){var C=se.parseSei(O.escapedRBSP);C.payload&&C.payloadType===se.USER_DATA_REGISTERED_ITU_T_T35&&(C=se.parseUserData(C))&&(O.dts<this.latestDts_?
this.ignoreNextEqualDts_=!0:O.dts===this.latestDts_&&this.ignoreNextEqualDts_?(this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1)):(C=se.parseCaptionPackets(O.pts,C),this.captionPackets_=this.captionPackets_.concat(C),this.latestDts_!==O.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=O.dts))}};Mb.prototype.flushCCStreams=function(O){this.ccStreams_.forEach(function(C){return"flush"===O?C.flush():C.partialFlush()},this)};Mb.prototype.flushStream=function(O){this.captionPackets_.length&&
(this.captionPackets_.forEach(function(C,B){C.presortIndex=B}),this.captionPackets_.sort(function(C,B){return C.pts===B.pts?C.presortIndex-B.presortIndex:C.pts-B.pts}),this.captionPackets_.forEach(function(C){2>C.type?this.dispatchCea608Packet(C):this.dispatchCea708Packet(C)},this),this.captionPackets_.length=0);this.flushCCStreams(O)};Mb.prototype.flush=function(){return this.flushStream("flush")};Mb.prototype.partialFlush=function(){return this.flushStream("partialFlush")};Mb.prototype.reset=function(){this.latestDts_=
null;this.ignoreNextEqualDts_=!1;this.numSameDts_=0;this.activeCea608Channel_=[null,null];this.ccStreams_.forEach(function(O){O.reset()})};Mb.prototype.dispatchCea608Packet=function(O){this.setsTextOrXDSActive(O)?this.activeCea608Channel_[O.type]=null:this.setsChannel1Active(O)?this.activeCea608Channel_[O.type]=0:this.setsChannel2Active(O)&&(this.activeCea608Channel_[O.type]=1);null!==this.activeCea608Channel_[O.type]&&this.ccStreams_[(O.type<<1)+this.activeCea608Channel_[O.type]].push(O)};Mb.prototype.setsChannel1Active=
function(O){return 4096===(O.ccData&30720)};Mb.prototype.setsChannel2Active=function(O){return 6144===(O.ccData&30720)};Mb.prototype.setsTextOrXDSActive=function(O){return 256===(O.ccData&28928)||4138===(O.ccData&30974)||6186===(O.ccData&30974)};Mb.prototype.dispatchCea708Packet=function(O){this.parse708captions_&&this.cc708Stream_.push(O)};var Xq={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,
4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},Dc=function(O){this.windowNum=O;this.reset()};Dc.prototype.reset=function(){this.clearText();this.pendingNewLine=!1;this.winAttr={};this.penAttr={};this.penLoc={};this.penColor={};this.anchorPoint=this.anchorHorizontal=this.anchorVertical=this.relativePositioning=this.priority=this.columnLock=this.rowLock=this.visible=0;this.rowCount=1;this.virtualRowCount=this.rowCount+1;this.columnCount=
41;this.penStyle=this.windowStyle=0};Dc.prototype.getText=function(){return this.rows.join("\n")};Dc.prototype.clearText=function(){this.rows=[""];this.rowIdx=0};Dc.prototype.newLine=function(O){this.rows.length>=this.virtualRowCount&&"function"===typeof this.beforeRowOverflow&&this.beforeRowOverflow(O);0<this.rows.length&&(this.rows.push(""),this.rowIdx++);for(;this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--};Dc.prototype.isEmpty=function(){return 0===this.rows.length?!0:1===
this.rows.length?""===this.rows[0]:!1};Dc.prototype.addText=function(O){this.rows[this.rowIdx]+=O};Dc.prototype.backspace=function(){if(!this.isEmpty()){var O=this.rows[this.rowIdx];this.rows[this.rowIdx]=O.substr(0,O.length-1)}};var Wh=function(O){this.serviceNum=O;this.text="";this.currentWindow=new Dc(-1);this.windows=[]};Wh.prototype.init=function(O,C){this.startPts=O;for(O=0;8>O;O++)this.windows[O]=new Dc(O),"function"===typeof C&&(this.windows[O].beforeRowOverflow=C)};Wh.prototype.setCurrentWindow=
function(O){this.currentWindow=this.windows[O]};var Xa=function C(){C.prototype.init.call(this);var B=this;this.current708Packet=null;this.services={};this.push=function(E){3===E.type?B.new708Packet():null===B.current708Packet&&B.new708Packet();B.add708Bytes(E)}};Xa.prototype=new p;Xa.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet();this.current708Packet={data:[],ptsVals:[]}};Xa.prototype.add708Bytes=function(C){var B=C.ccData,E=B>>>8;B&=255;this.current708Packet.ptsVals.push(C.pts);
this.current708Packet.data.push(E);this.current708Packet.data.push(B)};Xa.prototype.push708Packet=function(){var C=this.current708Packet,B=C.data,E=0,z=B[E++];C.seq=z>>6;for(C.sizeCode=z&63;E<B.length;E++){z=B[E++];C=z>>5;var J=z&31;7===C&&0<J&&(C=z=B[E++]);this.pushServiceBlock(C,E,J);0<J&&(E+=J-1)}};Xa.prototype.pushServiceBlock=function(C,B,E){var z=B,J=this.current708Packet.data,K=this.services[C];for(K||(K=this.initService(C,z));z<B+E&&z<J.length;z++)C=J[z],32<=C&&127>=C||160<=C&&255>=C?z=this.handleText(z,
K):16===C?z=this.extendedCommands(z,K):128<=C&&135>=C?z=this.setCurrentWindow(z,K):152<=C&&159>=C?z=this.defineWindow(z,K):136===C?z=this.clearWindows(z,K):140===C?z=this.deleteWindows(z,K):137===C?z=this.displayWindows(z,K):138===C?z=this.hideWindows(z,K):139===C?z=this.toggleWindows(z,K):151===C?z=this.setWindowAttributes(z,K):144===C?z=this.setPenAttributes(z,K):145===C?z=this.setPenColor(z,K):146===C?z=this.setPenLocation(z,K):143===C?K=this.reset(z,K):8===C?K.currentWindow.backspace():12===C?
K.currentWindow.clearText():13===C?K.currentWindow.pendingNewLine=!0:14===C?K.currentWindow.clearText():141===C&&z++};Xa.prototype.extendedCommands=function(C,B){var E=this.current708Packet.data[++C];if(32<=E&&127>=E||160<=E&&255>=E)C=this.handleText(C,B,!0);return C};Xa.prototype.getPts=function(C){return this.current708Packet.ptsVals[Math.floor(C/2)]};Xa.prototype.initService=function(C,B){var E=this;this.services[C]=new Wh(C);this.services[C].init(this.getPts(B),function(z){E.flushDisplayed(z,
E.services[C])});return this.services[C]};Xa.prototype.handleText=function(C,B,E){E=(E?4096:0)|this.current708Packet.data[C];var z=Xq[E]||E;E=E&4096&&E===z?"":String.fromCharCode(z);B=B.currentWindow;B.pendingNewLine&&!B.isEmpty()&&B.newLine(this.getPts(C));B.pendingNewLine=!1;B.addText(E);return C};Xa.prototype.setCurrentWindow=function(C,B){B.setCurrentWindow(this.current708Packet.data[C]&7);return C};Xa.prototype.defineWindow=function(C,B){var E=this.current708Packet.data,z=E[C];B.setCurrentWindow(z&
7);B=B.currentWindow;z=E[++C];B.visible=(z&32)>>5;B.rowLock=(z&16)>>4;B.columnLock=(z&8)>>3;B.priority=z&7;z=E[++C];B.relativePositioning=(z&128)>>7;B.anchorVertical=z&127;z=E[++C];B.anchorHorizontal=z;z=E[++C];B.anchorPoint=(z&240)>>4;B.rowCount=z&15;z=E[++C];B.columnCount=z&63;z=E[++C];B.windowStyle=(z&56)>>3;B.penStyle=z&7;B.virtualRowCount=B.rowCount+1;return C};Xa.prototype.setWindowAttributes=function(C,B){var E=this.current708Packet.data,z=B.currentWindow.winAttr;B=E[++C];z.fillOpacity=(B&
192)>>6;z.fillRed=(B&48)>>4;z.fillGreen=(B&12)>>2;z.fillBlue=B&3;B=E[++C];z.borderType=(B&192)>>6;z.borderRed=(B&48)>>4;z.borderGreen=(B&12)>>2;z.borderBlue=B&3;B=E[++C];z.borderType+=(B&128)>>5;z.wordWrap=(B&64)>>6;z.printDirection=(B&48)>>4;z.scrollDirection=(B&12)>>2;z.justify=B&3;B=E[++C];z.effectSpeed=(B&240)>>4;z.effectDirection=(B&12)>>2;z.displayEffect=B&3;return C};Xa.prototype.flushDisplayed=function(C,B){for(var E=[],z=0;8>z;z++)B.windows[z].visible&&!B.windows[z].isEmpty()&&E.push(B.windows[z].getText());
B.endPts=C;B.text=E.join("\n\n");this.pushCaption(B);B.startPts=C};Xa.prototype.pushCaption=function(C){""!==C.text&&(this.trigger("data",{startPts:C.startPts,endPts:C.endPts,text:C.text,stream:"cc708_"+C.serviceNum}),C.text="",C.startPts=C.endPts)};Xa.prototype.displayWindows=function(C,B){var E=this.current708Packet.data[++C],z=this.getPts(C);this.flushDisplayed(z,B);for(z=0;8>z;z++)E&1<<z&&(B.windows[z].visible=1);return C};Xa.prototype.hideWindows=function(C,B){var E=this.current708Packet.data[++C],
z=this.getPts(C);this.flushDisplayed(z,B);for(z=0;8>z;z++)E&1<<z&&(B.windows[z].visible=0);return C};Xa.prototype.toggleWindows=function(C,B){var E=this.current708Packet.data[++C],z=this.getPts(C);this.flushDisplayed(z,B);for(z=0;8>z;z++)E&1<<z&&(B.windows[z].visible^=1);return C};Xa.prototype.clearWindows=function(C,B){var E=this.current708Packet.data[++C],z=this.getPts(C);this.flushDisplayed(z,B);for(z=0;8>z;z++)E&1<<z&&B.windows[z].clearText();return C};Xa.prototype.deleteWindows=function(C,B){var E=
this.current708Packet.data[++C],z=this.getPts(C);this.flushDisplayed(z,B);for(z=0;8>z;z++)E&1<<z&&B.windows[z].reset();return C};Xa.prototype.setPenAttributes=function(C,B){var E=this.current708Packet.data,z=B.currentWindow.penAttr;B=E[++C];z.textTag=(B&240)>>4;z.offset=(B&12)>>2;z.penSize=B&3;B=E[++C];z.italics=(B&128)>>7;z.underline=(B&64)>>6;z.edgeType=(B&56)>>3;z.fontStyle=B&7;return C};Xa.prototype.setPenColor=function(C,B){var E=this.current708Packet.data,z=B.currentWindow.penColor;B=E[++C];
z.fgOpacity=(B&192)>>6;z.fgRed=(B&48)>>4;z.fgGreen=(B&12)>>2;z.fgBlue=B&3;B=E[++C];z.bgOpacity=(B&192)>>6;z.bgRed=(B&48)>>4;z.bgGreen=(B&12)>>2;z.bgBlue=B&3;B=E[++C];z.edgeRed=(B&48)>>4;z.edgeGreen=(B&12)>>2;z.edgeBlue=B&3;return C};Xa.prototype.setPenLocation=function(C,B){var E=this.current708Packet.data,z=B.currentWindow.penLoc;B.currentWindow.pendingNewLine=!0;B=E[++C];z.row=B&15;B=E[++C];z.column=B&63;return C};Xa.prototype.reset=function(C,B){var E=this.getPts(C);this.flushDisplayed(E,B);return this.initService(B.serviceNum,
C)};var Yq={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,
803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},wf=function(C){if(null===C)return"";C=Yq[C]||C;return String.fromCharCode(C)},Zq=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],id=function(){for(var C=[],B=15;B--;)C.push("");return C},Za=function z(B,E){z.prototype.init.call(this);this.field_=
B||0;this.dataChannel_=E||0;this.name_="CC"+((this.field_<<1|this.dataChannel_)+1);this.setConstants();this.reset();this.push=function(J){var K=J.ccData&32639;if(K===this.lastControlCode_)this.lastControlCode_=null;else{4096===(K&61440)?this.lastControlCode_=K:K!==this.PADDING_&&(this.lastControlCode_=null);var D=K>>>8;var N=K&255;K!==this.PADDING_&&(K===this.RESUME_CAPTION_LOADING_?this.mode_="popOn":K===this.END_OF_CAPTION_?(this.mode_="popOn",this.clearFormatting(J.pts),this.flushDisplayed(J.pts),
N=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=N,this.startPts_=J.pts):K===this.ROLL_UP_2_ROWS_?(this.rollUpRows_=2,this.setRollUp(J.pts)):K===this.ROLL_UP_3_ROWS_?(this.rollUpRows_=3,this.setRollUp(J.pts)):K===this.ROLL_UP_4_ROWS_?(this.rollUpRows_=4,this.setRollUp(J.pts)):K===this.CARRIAGE_RETURN_?(this.clearFormatting(J.pts),this.flushDisplayed(J.pts),this.shiftRowsUp_(),this.startPts_=J.pts):K===this.BACKSPACE_?"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,
-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1):K===this.ERASE_DISPLAYED_MEMORY_?(this.flushDisplayed(J.pts),this.displayed_=id()):K===this.ERASE_NON_DISPLAYED_MEMORY_?this.nonDisplayed_=id():K===this.RESUME_DIRECT_CAPTIONING_?("paintOn"!==this.mode_&&(this.flushDisplayed(J.pts),this.displayed_=id()),this.mode_="paintOn",this.startPts_=J.pts):this.isSpecialCharacter(D,N)?(K=wf((D&3)<<8|N),this[this.mode_](J.pts,K),this.column_++):this.isExtCharacter(D,N)?("popOn"===this.mode_?
this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),K=wf((D&3)<<8|N),this[this.mode_](J.pts,K),this.column_++):this.isMidRowCode(D,N)?(this.clearFormatting(J.pts),this[this.mode_](J.pts," "),this.column_++,14===(N&14)&&this.addFormatting(J.pts,["i"]),1===(N&1)&&this.addFormatting(J.pts,["u"])):this.isOffsetControlCode(D,N)?this.column_+=N&3:this.isPAC(D,N)?(D=Zq.indexOf(K&7968),"rollUp"===this.mode_&&(0>D-this.rollUpRows_+
1&&(D=this.rollUpRows_-1),this.setRollUp(J.pts,D)),D!==this.row_&&(this.clearFormatting(J.pts),this.row_=D),N&1&&-1===this.formatting_.indexOf("u")&&this.addFormatting(J.pts,["u"]),16===(K&16)&&(this.column_=4*((K&14)>>1)),this.isColorPAC(N)&&14===(N&14)&&this.addFormatting(J.pts,["i"])):this.isNormalChar(D)&&(0===N&&(N=null),K=wf(D),K+=wf(N),this[this.mode_](J.pts,K),this.column_+=K.length))}}};Za.prototype=new p;Za.prototype.flushDisplayed=function(B){var E=this.displayed_.map(function(z){try{return z.trim()}catch(J){return console.error("Skipping malformed caption."),
""}}).join("\n").replace(/^\n+|\n+$/g,"");E.length&&this.trigger("data",{startPts:this.startPts_,endPts:B,text:E,stream:this.name_})};Za.prototype.reset=function(){this.mode_="popOn";this.startPts_=this.topRow_=0;this.displayed_=id();this.nonDisplayed_=id();this.lastControlCode_=null;this.column_=0;this.row_=14;this.rollUpRows_=2;this.formatting_=[]};Za.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&
(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31);this.PADDING_=0;this.RESUME_CAPTION_LOADING_=this.CONTROL_|32;this.END_OF_CAPTION_=this.CONTROL_|47;this.ROLL_UP_2_ROWS_=this.CONTROL_|37;this.ROLL_UP_3_ROWS_=this.CONTROL_|38;this.ROLL_UP_4_ROWS_=this.CONTROL_|39;this.CARRIAGE_RETURN_=this.CONTROL_|45;this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41;this.BACKSPACE_=this.CONTROL_|33;this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44;this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|
46};Za.prototype.isSpecialCharacter=function(B,E){return B===this.EXT_&&48<=E&&63>=E};Za.prototype.isExtCharacter=function(B,E){return(B===this.EXT_+1||B===this.EXT_+2)&&32<=E&&63>=E};Za.prototype.isMidRowCode=function(B,E){return B===this.EXT_&&32<=E&&47>=E};Za.prototype.isOffsetControlCode=function(B,E){return B===this.OFFSET_&&33<=E&&35>=E};Za.prototype.isPAC=function(B,E){return B>=this.BASE_&&B<this.BASE_+8&&64<=E&&127>=E};Za.prototype.isColorPAC=function(B){return 64<=B&&79>=B||96<=B&&127>=
B};Za.prototype.isNormalChar=function(B){return 32<=B&&127>=B};Za.prototype.setRollUp=function(B,E){"rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(B),this.nonDisplayed_=id(),this.displayed_=id());if(void 0!==E&&E!==this.row_)for(B=0;B<this.rollUpRows_;B++)this.displayed_[E-B]=this.displayed_[this.row_-B],this.displayed_[this.row_-B]="";void 0===E&&(E=this.row_);this.topRow_=E-this.rollUpRows_+1};Za.prototype.addFormatting=function(B,E){this.formatting_=this.formatting_.concat(E);
E=E.reduce(function(z,J){return z+"<"+J+">"},"");this[this.mode_](B,E)};Za.prototype.clearFormatting=function(B){if(this.formatting_.length){var E=this.formatting_.reverse().reduce(function(z,J){return z+"</"+J+">"},"");this.formatting_=[];this[this.mode_](B,E)}};Za.prototype.popOn=function(B,E){this.nonDisplayed_[this.row_]+=E};Za.prototype.rollUp=function(B,E){this.displayed_[this.row_]+=E};Za.prototype.shiftRowsUp_=function(){var B;for(B=0;B<this.topRow_;B++)this.displayed_[B]="";for(B=this.row_+
1;15>B;B++)this.displayed_[B]="";for(B=this.topRow_;B<this.row_;B++)this.displayed_[B]=this.displayed_[B+1];this.displayed_[this.row_]=""};Za.prototype.paintOn=function(B,E){this.displayed_[this.row_]+=E};var $q=Za,ar=Xa,Zb={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},pm=function(B,E){var z=1;for(B>E&&(z=-1);4294967296<Math.abs(E-B);)B+=8589934592*z;return B},qm=function z(E){var J,K;z.prototype.init.call(this);this.type_=E||"shared";this.push=function(D){if("shared"===this.type_||
D.type===this.type_)void 0===K&&(K=D.dts),D.dts=pm(D.dts,K),D.pts=pm(D.pts,K),J=D.dts,this.trigger("data",D)};this.flush=function(){K=J;this.trigger("done")};this.endTimeline=function(){this.flush();this.trigger("endedtimeline")};this.discontinuity=function(){J=K=void 0};this.reset=function(){this.discontinuity();this.trigger("reset")}};qm.prototype=new p;var te=function(E,z,J){for(var K="";z<J;z++)K+="%"+("00"+E[z].toString(16)).slice(-2);return K},xf=function(E){return E[0]<<21|E[1]<<14|E[2]<<7|
E[3]},rm={TXXX:function(E){var z;if(3===E.data[0]){for(z=1;z<E.data.length;z++)if(0===E.data[z]){E.description=decodeURIComponent(te(E.data,1,z));E.value=decodeURIComponent(te(E.data,z+1,E.data.length)).replace(/\0*$/,"");break}E.data=E.value}},WXXX:function(E){var z;if(3===E.data[0])for(z=1;z<E.data.length;z++)if(0===E.data[z]){E.description=decodeURIComponent(te(E.data,1,z));E.url=decodeURIComponent(te(E.data,z+1,E.data.length));break}},PRIV:function(E){var z;for(z=0;z<E.data.length;z++)if(0===
E.data[z]){E.owner=unescape(te(E.data,0,z));break}E.privateData=E.data.subarray(z+1);E.data=E.privateData}};var Xh=function(E){var z=!(!E||!E.debug);E=E&&E.descriptor;var J=0,K=[],D=0,N;Xh.prototype.init.call(this);this.dispatchType=Zb.METADATA_STREAM_TYPE.toString(16);if(E)for(N=0;N<E.length;N++)this.dispatchType+=("00"+E[N].toString(16)).slice(-2);this.push=function(G){var P;if("timed-metadata"===G.type)if(G.dataAlignmentIndicator&&(D=0,K.length=0),0===K.length&&(10>G.data.length||73!==G.data[0]||
68!==G.data[1]||51!==G.data[2]))z&&console.log("Skipping unrecognized metadata packet");else if(K.push(G),D+=G.data.byteLength,1===K.length&&(J=xf(G.data.subarray(6,10)),J+=10),!(D<J)){G={data:new Uint8Array(J),frames:[],pts:K[0].pts,dts:K[0].dts};for(P=0;P<J;)G.data.set(K[0].data.subarray(0,J-P),P),P+=K[0].data.byteLength,D-=K[0].data.byteLength,K.shift();P=10;G.data[5]&64&&(P=P+4+xf(G.data.subarray(10,14)),J-=xf(G.data.subarray(16,20)));do{var L=xf(G.data.subarray(P+4,P+8));if(1>L)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");
var ba=String.fromCharCode(G.data[P],G.data[P+1],G.data[P+2],G.data[P+3]);ba={id:ba,data:G.data.subarray(P+10,P+L+10)};ba.key=ba.id;if(rm[ba.id]&&(rm[ba.id](ba),"com.apple.streaming.transportStreamTimestamp"===ba.owner)){var fa=ba.data,la=(fa[3]&1)<<30|fa[4]<<22|fa[5]<<14|fa[6]<<6|fa[7]>>>2;la*=4;la+=fa[7]&3;ba.timeStamp=la;void 0===G.pts&&void 0===G.dts&&(G.pts=ba.timeStamp,G.dts=ba.timeStamp);this.trigger("timestamp",ba)}G.frames.push(ba);P+=10;P+=L}while(P<J);this.trigger("data",G)}}};Xh.prototype=
new p;var Yh=function(){var E=new Uint8Array(188),z=0;Yh.prototype.init.call(this);this.push=function(J){var K=0,D=188;if(z){var N=new Uint8Array(J.byteLength+z);N.set(E.subarray(0,z));N.set(J,z);z=0}else N=J;for(;D<N.byteLength;)71===N[K]&&71===N[D]?(this.trigger("data",N.subarray(K,D)),K+=188,D+=188):(K++,D++);K<N.byteLength&&(E.set(N.subarray(K),0),z=N.byteLength-K)};this.flush=function(){188===z&&71===E[0]&&(this.trigger("data",E),z=0);this.trigger("done")};this.endTimeline=function(){this.flush();
this.trigger("endedtimeline")};this.reset=function(){z=0;this.trigger("reset")}};Yh.prototype=new p;var yf=function(){yf.prototype.init.call(this);var E=this;this.packetsWaitingForPmt=[];this.programMapTable=void 0;var z=function(D,N){var G=0;N.payloadUnitStartIndicator&&(G+=D[G]+1);"pat"===N.type?J(D.subarray(G),N):K(D.subarray(G),N)};var J=function(D,N){N.section_number=D[7];N.last_section_number=D[8];E.pmtPid=(D[10]&31)<<8|D[11];N.pmtPid=E.pmtPid};var K=function(D,N){var G;if(D[5]&1){E.programMapTable=
{video:null,audio:null,"timed-metadata":{}};var P=3+((D[1]&15)<<8|D[2])-4;for(G=12+((D[10]&15)<<8|D[11]);G<P;){var L=D[G],ba=(D[G+1]&31)<<8|D[G+2];L===Zb.H264_STREAM_TYPE&&null===E.programMapTable.video?E.programMapTable.video=ba:L===Zb.ADTS_STREAM_TYPE&&null===E.programMapTable.audio?E.programMapTable.audio=ba:L===Zb.METADATA_STREAM_TYPE&&(E.programMapTable["timed-metadata"][ba]=L);G+=((D[G+3]&15)<<8|D[G+4])+5}N.programMapTable=E.programMapTable}};this.push=function(D){var N={},G=4;N.payloadUnitStartIndicator=
!!(D[1]&64);N.pid=D[1]&31;N.pid<<=8;N.pid|=D[2];1<(D[3]&48)>>>4&&(G+=D[G]+1);if(0===N.pid)N.type="pat",z(D.subarray(G),N),this.trigger("data",N);else if(N.pid===this.pmtPid)for(N.type="pmt",z(D.subarray(G),N),this.trigger("data",N);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([D,G,N]):this.processPes_(D,G,N)};this.processPes_=function(D,N,G){G.streamType=G.pid===this.programMapTable.video?
Zb.H264_STREAM_TYPE:G.pid===this.programMapTable.audio?Zb.ADTS_STREAM_TYPE:this.programMapTable["timed-metadata"][G.pid];G.type="pes";G.data=D.subarray(N);this.trigger("data",G)}};yf.prototype=new p;yf.STREAM_TYPES={h264:27,adts:15};var Zh=function(){var E=this,z={data:[],size:0},J={data:[],size:0},K={data:[],size:0},D,N=function(G,P,L){var ba=new Uint8Array(G.size),fa={type:P},la,ca=0;if(G.data.length&&!(9>G.size)){fa.trackId=G.data[0].pid;for(la=0;la<G.data.length;la++){var na=G.data[la];ba.set(na.data,
ca);ca+=na.data.byteLength}la=ba[0]<<16|ba[1]<<8|ba[2];fa.data=new Uint8Array;1===la&&(fa.packetLength=6+(ba[4]<<8|ba[5]),fa.dataAlignmentIndicator=0!==(ba[6]&4),la=ba[7],la&192&&(fa.pts=(ba[9]&14)<<27|(ba[10]&255)<<20|(ba[11]&254)<<12|(ba[12]&255)<<5|(ba[13]&254)>>>3,fa.pts*=4,fa.pts+=(ba[13]&6)>>>1,fa.dts=fa.pts,la&64&&(fa.dts=(ba[14]&14)<<27|(ba[15]&255)<<20|(ba[16]&254)<<12|(ba[17]&255)<<5|(ba[18]&254)>>>3,fa.dts*=4,fa.dts+=(ba[18]&6)>>>1)),fa.data=ba.subarray(9+ba[8]));P="video"===P||fa.packetLength<=
G.size;if(L||P)G.size=0,G.data.length=0;P&&E.trigger("data",fa)}};Zh.prototype.init.call(this);this.push=function(G){({pat:function(){},pes:function(){switch(G.streamType){case Zb.H264_STREAM_TYPE:var P=z;var L="video";break;case Zb.ADTS_STREAM_TYPE:P=J;L="audio";break;case Zb.METADATA_STREAM_TYPE:P=K;L="timed-metadata";break;default:return}G.payloadUnitStartIndicator&&N(P,L,!0);P.data.push(G);P.size+=G.data.byteLength},pmt:function(){var P={type:"metadata",tracks:[]};D=G.programMapTable;null!==D.video&&
P.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+D.video,codec:"avc",type:"video"});null!==D.audio&&P.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+D.audio,codec:"adts",type:"audio"});E.trigger("data",P)}})[G.type]()};this.reset=function(){z.size=0;z.data.length=0;J.size=0;J.data.length=0;this.trigger("reset")};this.flushStreams_=function(){N(z,"video");N(J,"audio");N(K,"timed-metadata")};this.flush=function(){this.flushStreams_();this.trigger("done")}};Zh.prototype=new p;
var jb={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:Yh,TransportParseStream:yf,ElementaryStream:Zh,TimestampRolloverStream:qm,CaptionStream:Mb,Cea608Stream:$q,Cea708Stream:ar,MetadataStream:Xh},zf;for(zf in Zb)Zb.hasOwnProperty(zf)&&(jb[zf]=Zb[zf]);var br=Ia.ONE_SECOND_IN_TS,sm=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350];var Kd=function(E){var z,J=0;Kd.prototype.init.call(this);this.push=function(K){var D=0;E||(J=0);if("audio"===K.type){if(z){var N=z;z=new Uint8Array(N.byteLength+
K.data.byteLength);z.set(N);z.set(K.data,N.byteLength)}else z=K.data;for(;D+5<z.length;)if(255!==z[D]||240!==(z[D+1]&246))D++;else{N=2*(~z[D+1]&1);var G=(z[D+3]&3)<<11|z[D+4]<<3|(z[D+5]&224)>>5;var P=1024*((z[D+6]&3)+1);var L=P*br/sm[(z[D+2]&60)>>>2];G=D+G;if(z.byteLength<G)break;this.trigger("data",{pts:K.pts+J*L,dts:K.dts+J*L,sampleCount:P,audioobjecttype:(z[D+2]>>>6&3)+1,channelcount:(z[D+2]&1)<<2|(z[D+3]&192)>>>6,samplerate:sm[(z[D+2]&60)>>>2],samplingfrequencyindex:(z[D+2]&60)>>>2,samplesize:16,
data:z.subarray(D+7+N,G)});J++;if(z.byteLength===G){z=void 0;break}z=z.subarray(G)}}};this.flush=function(){J=0;this.trigger("done")};this.reset=function(){z=void 0;this.trigger("reset")};this.endTimeline=function(){z=void 0;this.trigger("endedtimeline")}};Kd.prototype=new p;var cr=function(E){var z=E.byteLength,J=0,K=0;this.length=function(){return 8*z};this.bitsAvailable=function(){return 8*z+K};this.loadWord=function(){var D=E.byteLength-z,N=new Uint8Array(4),G=Math.min(4,z);if(0===G)throw Error("no bytes available");
N.set(E.subarray(D,D+G));J=(new DataView(N.buffer)).getUint32(0);K=8*G;z-=G};this.skipBits=function(D){if(!(K>D)){D-=K;var N=Math.floor(D/8);D-=8*N;z-=N;this.loadWord()}J<<=D;K-=D};this.readBits=function(D){var N=Math.min(K,D),G=J>>>32-N;K-=N;0<K?J<<=N:0<z&&this.loadWord();N=D-N;return 0<N?G<<N|this.readBits(N):G};this.skipLeadingZeros=function(){var D;for(D=0;D<K;++D)if(0!==(J&2147483648>>>D))return J<<=D,K-=D,D;this.loadWord();return D+this.skipLeadingZeros()};this.skipUnsignedExpGolomb=function(){this.skipBits(1+
this.skipLeadingZeros())};this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.readUnsignedExpGolomb=function(){var D=this.skipLeadingZeros();return this.readBits(D+1)-1};this.readExpGolomb=function(){var D=this.readUnsignedExpGolomb();return 1&D?1+D>>>1:-1*(D>>>1)};this.readBoolean=function(){return 1===this.readBits(1)};this.readUnsignedByte=function(){return this.readBits(8)};this.loadWord()};var $h=function(){var E=0,z,J;$h.prototype.init.call(this);this.push=function(K){if(J){var D=
new Uint8Array(J.byteLength+K.data.byteLength);D.set(J);D.set(K.data,J.byteLength);J=D}else J=K.data;for(K=J.byteLength;E<K-3;E++)if(1===J[E+2]){z=E+5;break}for(;z<K;)switch(J[z]){case 0:if(0!==J[z-1]){z+=2;break}else if(0!==J[z-2]){z++;break}E+3!==z-2&&this.trigger("data",J.subarray(E+3,z-2));do z++;while(1!==J[z]&&z<K);E=z-2;z+=3;break;case 1:if(0!==J[z-1]||0!==J[z-2]){z+=3;break}this.trigger("data",J.subarray(E+3,z-2));E=z-2;z+=3;break;default:z+=3}J=J.subarray(E);z-=E;E=0};this.reset=function(){J=
null;E=0;this.trigger("reset")};this.flush=function(){J&&3<J.byteLength&&this.trigger("data",J.subarray(E+3));J=null;E=0;this.trigger("done")};this.endTimeline=function(){this.flush();this.trigger("endedtimeline")}};$h.prototype=new p;var dr={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0};var Af=function(){var E=new $h,z,J,K;Af.prototype.init.call(this);var D=this;this.push=function(L){"video"===L.type&&(z=L.trackId,J=L.pts,K=L.dts,E.push(L))};E.on("data",function(L){var ba=
{trackId:z,pts:J,dts:K,data:L};switch(L[0]&31){case 5:ba.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:ba.nalUnitType="sei_rbsp";ba.escapedRBSP=G(L.subarray(1));break;case 7:ba.nalUnitType="seq_parameter_set_rbsp";ba.escapedRBSP=G(L.subarray(1));ba.config=P(ba.escapedRBSP);break;case 8:ba.nalUnitType="pic_parameter_set_rbsp";break;case 9:ba.nalUnitType="access_unit_delimiter_rbsp"}D.trigger("data",ba)});E.on("done",function(){D.trigger("done")});E.on("partialdone",function(){D.trigger("partialdone")});
E.on("reset",function(){D.trigger("reset")});E.on("endedtimeline",function(){D.trigger("endedtimeline")});this.flush=function(){E.flush()};this.partialFlush=function(){E.partialFlush()};this.reset=function(){E.reset()};this.endTimeline=function(){E.endTimeline()};var N=function(L,ba){var fa=8,la=8,ca;for(ca=0;ca<L;ca++)0!==la&&(la=ba.readExpGolomb(),la=(fa+la+256)%256),fa=0===la?fa:la};var G=function(L){for(var ba=L.byteLength,fa=[],la=1,ca;la<ba-2;)0===L[la]&&0===L[la+1]&&3===L[la+2]?(fa.push(la+
2),la+=2):la++;if(0===fa.length)return L;ba-=fa.length;ca=new Uint8Array(ba);var na=0;for(la=0;la<ba;na++,la++)na===fa[0]&&(na++,fa.shift()),ca[la]=L[na];return ca};var P=function(L){var ba=0,fa=0,la=0,ca=0,na=1;L=new cr(L);var xa=L.readUnsignedByte();var ta=L.readUnsignedByte();var Ja=L.readUnsignedByte();L.skipUnsignedExpGolomb();if(dr[xa]){var Pa=L.readUnsignedExpGolomb();3===Pa&&L.skipBits(1);L.skipUnsignedExpGolomb();L.skipUnsignedExpGolomb();L.skipBits(1);if(L.readBoolean()){var kb=3!==Pa?8:
12;for(Pa=0;Pa<kb;Pa++)L.readBoolean()&&(6>Pa?N(16,L):N(64,L))}}L.skipUnsignedExpGolomb();Pa=L.readUnsignedExpGolomb();if(0===Pa)L.readUnsignedExpGolomb();else if(1===Pa)for(L.skipBits(1),L.skipExpGolomb(),L.skipExpGolomb(),kb=L.readUnsignedExpGolomb(),Pa=0;Pa<kb;Pa++)L.skipExpGolomb();L.skipUnsignedExpGolomb();L.skipBits(1);Pa=L.readUnsignedExpGolomb();kb=L.readUnsignedExpGolomb();var $b=L.readBits(1);0===$b&&L.skipBits(1);L.skipBits(1);L.readBoolean()&&(ba=L.readUnsignedExpGolomb(),fa=L.readUnsignedExpGolomb(),
la=L.readUnsignedExpGolomb(),ca=L.readUnsignedExpGolomb());if(L.readBoolean()&&L.readBoolean()){var jc=L.readUnsignedByte();switch(jc){case 1:var Qa=[1,1];break;case 2:Qa=[12,11];break;case 3:Qa=[10,11];break;case 4:Qa=[16,11];break;case 5:Qa=[40,33];break;case 6:Qa=[24,11];break;case 7:Qa=[20,11];break;case 8:Qa=[32,11];break;case 9:Qa=[80,33];break;case 10:Qa=[18,11];break;case 11:Qa=[15,11];break;case 12:Qa=[64,33];break;case 13:Qa=[160,99];break;case 14:Qa=[4,3];break;case 15:Qa=[3,2];break;case 16:Qa=
[2,1];break;case 255:Qa=[L.readUnsignedByte()<<8|L.readUnsignedByte(),L.readUnsignedByte()<<8|L.readUnsignedByte()]}Qa&&(na=Qa[0]/Qa[1])}return{profileIdc:xa,levelIdc:Ja,profileCompatibility:ta,width:Math.ceil((16*(Pa+1)-2*ba-2*fa)*na),height:(2-$b)*(kb+1)*16-2*la-2*ca,sarRatio:Qa}}};Af.prototype=new p;var er=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350],tm=function(E,z){var J=E[z+6]<<21|E[z+7]<<14|E[z+8]<<7|E[z+9];E=E[z+5];J=0<=J?J:0;return(E&16)>>4?J+20:J+10},fr=function K(z,
J){if(10>z.length-J||73!==z[J]||68!==z[J+1]||51!==z[J+2])return J;J+=tm(z,J);return K(z,J)},um=function(z){return z[0]<<21|z[1]<<14|z[2]<<7|z[3]},Bf={isLikelyAacData:function(z){var J=fr(z,0);return z.length>=J+2&&255===(z[J]&255)&&240===(z[J+1]&240)&&16===(z[J+1]&22)},parseId3TagSize:tm,parseAdtsSize:function(z,J){return z[J+3]&6144|z[J+4]<<3|(z[J+5]&224)>>5},parseType:function(z,J){return 73===z[J]&&68===z[J+1]&&51===z[J+2]?"timed-metadata":z[J]&1&&240===(z[J+1]&240)?"audio":null},parseSampleRate:function(z){for(var J=
0;J+5<z.length;)if(255!==z[J]||240!==(z[J+1]&246))J++;else return er[(z[J+2]&60)>>>2];return null},parseAacTimestamp:function(z){var J=10;z[5]&64&&(J=J+4+um(z.subarray(10,14)));do{var K=um(z.subarray(J+4,J+8));if(1>K)break;var D=String.fromCharCode(z[J],z[J+1],z[J+2],z[J+3]);if("PRIV"===D){D=z.subarray(J+10,J+K+10);for(var N=0;N<D.byteLength;N++)if(0===D[N]){var G=unescape,P,L=D,ba=N,fa="";for(P=0;P<ba;P++)fa+="%"+("00"+L[P].toString(16)).slice(-2);if("com.apple.streaming.transportStreamTimestamp"===
G(fa))return z=D.subarray(N+1),J=(z[3]&1)<<30|z[4]<<22|z[5]<<14|z[6]<<6|z[7]>>>2,J*=4,J+=z[7]&3;break}}J+=10;J+=K}while(J<z.byteLength);return null}};var Cf=function(){var z=new Uint8Array,J=0;Cf.prototype.init.call(this);this.setTimestamp=function(K){J=K};this.push=function(K){var D=0;if(z.length){var N=z.length;z=new Uint8Array(K.byteLength+N);z.set(z.subarray(0,N));z.set(K,N)}else z=K;for(;3<=z.length-D;)if(73===z[D]&&68===z[D+1]&&51===z[D+2]){if(10>z.length-D)break;K=Bf.parseId3TagSize(z,D);if(D+
K>z.length)break;N={type:"timed-metadata",data:z.subarray(D,D+K)};this.trigger("data",N);D+=K}else if(255===(z[D]&255)&&240===(z[D+1]&240)){if(7>z.length-D)break;K=Bf.parseAdtsSize(z,D);if(D+K>z.length)break;N={type:"audio",data:z.subarray(D,D+K),pts:J,dts:J};this.trigger("data",N);D+=K}else D++;z=0<z.length-D?z.subarray(D):new Uint8Array};this.reset=function(){z=new Uint8Array;this.trigger("reset")};this.endTimeline=function(){z=new Uint8Array;this.trigger("endedtimeline")}};Cf.prototype=new p;var ai=
["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],bi="width height profileIdc levelIdc profileCompatibility sarRatio".split(" "),gr=Bf.isLikelyAacData,hr=Ia.ONE_SECOND_IN_TS,vm=function(z,J){var K;if(z.length!==J.length)return!1;for(K=0;K<z.length;K++)if(z[K]!==J[K])return!1;return!0},wm=function(z,J,K,D,N,G){return{start:{dts:z,pts:z+(K-J)},end:{dts:z+(D-J),pts:z+(N-K)},prependedContentDuration:G,baseMediaDecodeTime:z}};var Df=function(z,J){var K=[],D=0,N=0,G=
0,P=Infinity;J=J||{};Df.prototype.init.call(this);this.push=function(L){fb.collectDtsInfo(z,L);z&&ai.forEach(function(ba){z[ba]=L[ba]});K.push(L)};this.setEarliestDts=function(L){N=L};this.setVideoBaseMediaDecodeTime=function(L){P=L};this.setAudioAppendStart=function(L){G=L};this.flush=function(){if(0!==K.length){var L=Tc.trimAdtsFramesByEarliestDts(K,z,N);z.baseMediaDecodeTime=fb.calculateTrackBaseMediaDecodeTime(z,J.keepOriginalTimestamps);var ba=Tc.prefixWithSilence(z,L,G,P);z.samples=Tc.generateSampleTable(L);
var fa=ic.mdat(Tc.concatenateFrameData(L));K=[];var la=ic.moof(D,[z]);var ca=new Uint8Array(la.byteLength+fa.byteLength);D++;ca.set(la);ca.set(fa,la.byteLength);fb.clearDtsInfo(z);la=Math.ceil(1024*hr/z.samplerate);L.length&&(la*=L.length,this.trigger("segmentTimingInfo",wm(Ia.audioTsToVideoTs(z.baseMediaDecodeTime,z.samplerate),L[0].dts,L[0].pts,L[0].dts+la,L[0].pts+la,ba||0)),this.trigger("timingInfo",{start:L[0].pts,end:L[0].pts+la}));this.trigger("data",{track:z,boxes:ca})}this.trigger("done",
"AudioSegmentStream")};this.reset=function(){fb.clearDtsInfo(z);K=[];this.trigger("reset")}};Df.prototype=new p;var ci=function(z,J){var K=0,D=[],N=[],G,P;J=J||{};ci.prototype.init.call(this);delete z.minPTS;this.gopCache_=[];this.push=function(L){fb.collectDtsInfo(z,L);"seq_parameter_set_rbsp"!==L.nalUnitType||G||(G=L.config,z.sps=[L.data],bi.forEach(function(ba){z[ba]=G[ba]},this));"pic_parameter_set_rbsp"!==L.nalUnitType||P||(P=L.data,z.pps=[L.data]);D.push(L)};this.flush=function(){var L;var ba=
0;for(var fa,la;D.length&&"access_unit_delimiter_rbsp"!==D[0].nalUnitType;)D.shift();if(0!==D.length){var ca=rc.groupNalsIntoFrames(D);ca=rc.groupFramesIntoGops(ca);ca[0][0].keyFrame||((L=this.getGopForFusion_(D[0],z))?(ba=L.duration,ca.unshift(L),ca.byteLength+=L.byteLength,ca.nalCount+=L.nalCount,ca.pts=L.pts,ca.dts=L.dts,ca.duration+=L.duration):ca=rc.extendFirstKeyFrame(ca));if(N.length){L=J.alignGopsAtEnd?this.alignGopsAtEnd_(ca):this.alignGopsAtStart_(ca);if(!L){this.gopCache_.unshift({gop:ca.pop(),
pps:z.pps,sps:z.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);D=[];this.resetStream_();this.trigger("done","VideoSegmentStream");return}fb.clearDtsInfo(z);ca=L}fb.collectDtsInfo(z,ca);z.samples=rc.generateSampleTable(ca);L=ic.mdat(rc.concatenateNalData(ca));z.baseMediaDecodeTime=fb.calculateTrackBaseMediaDecodeTime(z,J.keepOriginalTimestamps);this.trigger("processedGopsInfo",ca.map(function(na){return{pts:na.pts,dts:na.dts,byteLength:na.byteLength}}));fa=ca[0];la=ca[ca.length-1];this.trigger("segmentTimingInfo",
wm(z.baseMediaDecodeTime,fa.dts,fa.pts,la.dts+la.duration,la.pts+la.duration,ba));this.trigger("timingInfo",{start:ca[0].pts,end:ca[ca.length-1].pts+ca[ca.length-1].duration});this.gopCache_.unshift({gop:ca.pop(),pps:z.pps,sps:z.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);D=[];this.trigger("baseMediaDecodeTime",z.baseMediaDecodeTime);this.trigger("timelineStartInfo",z.timelineStartInfo);ba=ic.moof(K,[z]);ca=new Uint8Array(ba.byteLength+L.byteLength);K++;ca.set(ba);ca.set(L,ba.byteLength);
this.trigger("data",{track:z,boxes:ca})}this.resetStream_();this.trigger("done","VideoSegmentStream")};this.reset=function(){this.resetStream_();D=[];this.gopCache_.length=0;N.length=0;this.trigger("reset")};this.resetStream_=function(){fb.clearDtsInfo(z);P=G=void 0};this.getGopForFusion_=function(L){var ba=Infinity,fa;for(fa=0;fa<this.gopCache_.length;fa++){var la=this.gopCache_[fa];var ca=la.gop;if(z.pps&&vm(z.pps[0],la.pps[0])&&z.sps&&vm(z.sps[0],la.sps[0])&&!(ca.dts<z.timelineStartInfo.dts)&&
(ca=L.dts-ca.dts-ca.duration,-1E4<=ca&&45E3>=ca&&(!na||ba>ca))){var na=la;ba=ca}}return na?na.gop:null};this.alignGopsAtStart_=function(L){var ba,fa;var la=L.byteLength;var ca=L.nalCount;var na=L.duration;for(ba=fa=0;ba<N.length&&fa<L.length;){var xa=N[ba];var ta=L[fa];if(xa.pts===ta.pts)break;ta.pts>xa.pts?ba++:(fa++,la-=ta.byteLength,ca-=ta.nalCount,na-=ta.duration)}if(0===fa)return L;if(fa===L.length)return null;L=L.slice(fa);L.byteLength=la;L.duration=na;L.nalCount=ca;L.pts=L[0].pts;L.dts=L[0].dts;
return L};this.alignGopsAtEnd_=function(L){var ba;var fa=N.length-1;var la=L.length-1;var ca=null;for(ba=!1;0<=fa&&0<=la;){var na=N[fa];var xa=L[la];if(na.pts===xa.pts){ba=!0;break}na.pts>xa.pts?fa--:(fa===N.length-1&&(ca=la),la--)}if(!ba&&null===ca)return null;fa=ba?la:ca;if(0===fa)return L;L=L.slice(fa);fa=L.reduce(function(ta,Ja){ta.byteLength+=Ja.byteLength;ta.duration+=Ja.duration;ta.nalCount+=Ja.nalCount;return ta},{byteLength:0,duration:0,nalCount:0});L.byteLength=fa.byteLength;L.duration=
fa.duration;L.nalCount=fa.nalCount;L.pts=L[0].pts;L.dts=L[0].dts;return L};this.alignGopsWith=function(L){N=L}};ci.prototype=new p;var Ld=function(z,J){this.numberOfTracks=0;this.metadataStream=J;z=z||{};this.remuxTracks="undefined"!==typeof z.remux?!!z.remux:!0;this.keepOriginalTimestamps="boolean"===typeof z.keepOriginalTimestamps?z.keepOriginalTimestamps:!1;this.pendingTracks=[];this.videoTrack=null;this.pendingBoxes=[];this.pendingCaptions=[];this.pendingMetadata=[];this.emittedTracks=this.pendingBytes=
0;Ld.prototype.init.call(this);this.push=function(K){if(K.text)return this.pendingCaptions.push(K);if(K.frames)return this.pendingMetadata.push(K);this.pendingTracks.push(K.track);this.pendingBytes+=K.boxes.byteLength;"video"===K.track.type&&(this.videoTrack=K.track,this.pendingBoxes.push(K.boxes));"audio"===K.track.type&&(this.audioTrack=K.track,this.pendingBoxes.unshift(K.boxes))}};Ld.prototype=new p;Ld.prototype.flush=function(z){var J=0,K={captions:[],captionStreams:{},metadata:[],info:{}},D=
0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==z&&"AudioSegmentStream"!==z||this.remuxTracks)return;if(0===this.pendingTracks.length){this.emittedTracks++;this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}this.videoTrack?(D=this.videoTrack.timelineStartInfo.pts,bi.forEach(function(N){K.info[N]=this.videoTrack[N]},this)):this.audioTrack&&(D=this.audioTrack.timelineStartInfo.pts,ai.forEach(function(N){K.info[N]=this.audioTrack[N]},
this));if(this.videoTrack||this.audioTrack){K.type=1===this.pendingTracks.length?this.pendingTracks[0].type:"combined";this.emittedTracks+=this.pendingTracks.length;z=ic.initSegment(this.pendingTracks);K.initSegment=new Uint8Array(z.byteLength);K.initSegment.set(z);K.data=new Uint8Array(this.pendingBytes);for(z=0;z<this.pendingBoxes.length;z++)K.data.set(this.pendingBoxes[z],J),J+=this.pendingBoxes[z].byteLength;for(z=0;z<this.pendingCaptions.length;z++)J=this.pendingCaptions[z],J.startTime=Ia.metadataTsToSeconds(J.startPts,
D,this.keepOriginalTimestamps),J.endTime=Ia.metadataTsToSeconds(J.endPts,D,this.keepOriginalTimestamps),K.captionStreams[J.stream]=!0,K.captions.push(J);for(z=0;z<this.pendingMetadata.length;z++)J=this.pendingMetadata[z],J.cueTime=Ia.metadataTsToSeconds(J.pts,D,this.keepOriginalTimestamps),K.metadata.push(J);K.metadata.dispatchType=this.metadataStream.dispatchType;this.pendingTracks.length=0;this.videoTrack=null;this.pendingBoxes.length=0;this.pendingBytes=this.pendingCaptions.length=0;this.pendingMetadata.length=
0;this.trigger("data",K);for(z=0;z<K.captions.length;z++)J=K.captions[z],this.trigger("caption",J);for(z=0;z<K.metadata.length;z++)J=K.metadata[z],this.trigger("id3Frame",J)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)};Ld.prototype.setRemux=function(z){this.remuxTracks=z};var di=function(z){var J=this,K=!0,D,N;di.prototype.init.call(this);z=z||{};this.baseMediaDecodeTime=z.baseMediaDecodeTime||0;this.transmuxPipeline_={};this.setupAacPipeline=function(){var G=
{};this.transmuxPipeline_=G;G.type="aac";G.metadataStream=new jb.MetadataStream;G.aacStream=new Cf;G.audioTimestampRolloverStream=new jb.TimestampRolloverStream("audio");G.timedMetadataTimestampRolloverStream=new jb.TimestampRolloverStream("timed-metadata");G.adtsStream=new Kd;G.coalesceStream=new Ld(z,G.metadataStream);G.headOfPipeline=G.aacStream;G.aacStream.pipe(G.audioTimestampRolloverStream).pipe(G.adtsStream);G.aacStream.pipe(G.timedMetadataTimestampRolloverStream).pipe(G.metadataStream).pipe(G.coalesceStream);
G.metadataStream.on("timestamp",function(P){G.aacStream.setTimestamp(P.timeStamp)});G.aacStream.on("data",function(P){"timed-metadata"!==P.type&&"audio"!==P.type||G.audioSegmentStream||(N=N||{timelineStartInfo:{baseMediaDecodeTime:J.baseMediaDecodeTime},codec:"adts",type:"audio"},G.coalesceStream.numberOfTracks++,G.audioSegmentStream=new Df(N,z),G.audioSegmentStream.on("timingInfo",J.trigger.bind(J,"audioTimingInfo")),G.adtsStream.pipe(G.audioSegmentStream).pipe(G.coalesceStream),J.trigger("trackinfo",
{hasAudio:!!N,hasVideo:!!D}))});G.coalesceStream.on("data",this.trigger.bind(this,"data"));G.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setupTsPipeline=function(){var G={};this.transmuxPipeline_=G;G.type="ts";G.metadataStream=new jb.MetadataStream;G.packetStream=new jb.TransportPacketStream;G.parseStream=new jb.TransportParseStream;G.elementaryStream=new jb.ElementaryStream;G.timestampRolloverStream=new jb.TimestampRolloverStream;G.adtsStream=new Kd;G.h264Stream=new Af;G.captionStream=
new jb.CaptionStream(z);G.coalesceStream=new Ld(z,G.metadataStream);G.headOfPipeline=G.packetStream;G.packetStream.pipe(G.parseStream).pipe(G.elementaryStream).pipe(G.timestampRolloverStream);G.timestampRolloverStream.pipe(G.h264Stream);G.timestampRolloverStream.pipe(G.adtsStream);G.timestampRolloverStream.pipe(G.metadataStream).pipe(G.coalesceStream);G.h264Stream.pipe(G.captionStream).pipe(G.coalesceStream);G.elementaryStream.on("data",function(P){var L;if("metadata"===P.type){for(L=P.tracks.length;L--;)D||
"video"!==P.tracks[L].type?N||"audio"!==P.tracks[L].type||(N=P.tracks[L],N.timelineStartInfo.baseMediaDecodeTime=J.baseMediaDecodeTime):(D=P.tracks[L],D.timelineStartInfo.baseMediaDecodeTime=J.baseMediaDecodeTime);D&&!G.videoSegmentStream&&(G.coalesceStream.numberOfTracks++,G.videoSegmentStream=new ci(D,z),G.videoSegmentStream.on("timelineStartInfo",function(ba){N&&!z.keepOriginalTimestamps&&(N.timelineStartInfo=ba,G.audioSegmentStream.setEarliestDts(ba.dts-J.baseMediaDecodeTime))}),G.videoSegmentStream.on("processedGopsInfo",
J.trigger.bind(J,"gopInfo")),G.videoSegmentStream.on("segmentTimingInfo",J.trigger.bind(J,"videoSegmentTimingInfo")),G.videoSegmentStream.on("baseMediaDecodeTime",function(ba){N&&G.audioSegmentStream.setVideoBaseMediaDecodeTime(ba)}),G.videoSegmentStream.on("timingInfo",J.trigger.bind(J,"videoTimingInfo")),G.h264Stream.pipe(G.videoSegmentStream).pipe(G.coalesceStream));N&&!G.audioSegmentStream&&(G.coalesceStream.numberOfTracks++,G.audioSegmentStream=new Df(N,z),G.audioSegmentStream.on("timingInfo",
J.trigger.bind(J,"audioTimingInfo")),G.audioSegmentStream.on("segmentTimingInfo",J.trigger.bind(J,"audioSegmentTimingInfo")),G.adtsStream.pipe(G.audioSegmentStream).pipe(G.coalesceStream));J.trigger("trackinfo",{hasAudio:!!N,hasVideo:!!D})}});G.coalesceStream.on("data",this.trigger.bind(this,"data"));G.coalesceStream.on("id3Frame",function(P){P.dispatchType=G.metadataStream.dispatchType;J.trigger("id3Frame",P)});G.coalesceStream.on("caption",this.trigger.bind(this,"caption"));G.coalesceStream.on("done",
this.trigger.bind(this,"done"))};this.setBaseMediaDecodeTime=function(G){var P=this.transmuxPipeline_;z.keepOriginalTimestamps||(this.baseMediaDecodeTime=G);N&&(N.timelineStartInfo.dts=void 0,N.timelineStartInfo.pts=void 0,fb.clearDtsInfo(N),P.audioTimestampRolloverStream&&P.audioTimestampRolloverStream.discontinuity());D&&(P.videoSegmentStream&&(P.videoSegmentStream.gopCache_=[]),D.timelineStartInfo.dts=void 0,D.timelineStartInfo.pts=void 0,fb.clearDtsInfo(D),P.captionStream.reset());P.timestampRolloverStream&&
P.timestampRolloverStream.discontinuity()};this.setAudioAppendStart=function(G){N&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(G)};this.setRemux=function(G){var P=this.transmuxPipeline_;z.remux=G;P&&P.coalesceStream&&P.coalesceStream.setRemux(G)};this.alignGopsWith=function(G){D&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(G)};this.push=function(G){if(K){var P=gr(G);P&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():
P||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline();K=!1}this.transmuxPipeline_.headOfPipeline.push(G)};this.flush=function(){K=!0;this.transmuxPipeline_.headOfPipeline.flush()};this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()};this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()};this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}};di.prototype=
new p;var ir=Ia.ONE_SECOND_IN_TS,ei=function D(J,K){var N=[],G=0,P=0,L=0,ba=Infinity,fa=null,la=null;K=K||{};D.prototype.init.call(this);this.push=function(ca){fb.collectDtsInfo(J,ca);J&&ai.forEach(function(na){J[na]=ca[na]});N.push(ca)};this.setEarliestDts=function(ca){P=ca};this.setVideoBaseMediaDecodeTime=function(ca){ba=ca};this.setAudioAppendStart=function(ca){L=ca};this.processFrames_=function(){if(0!==N.length){var ca=Tc.trimAdtsFramesByEarliestDts(N,J,P);if(0!==ca.length){J.baseMediaDecodeTime=
fb.calculateTrackBaseMediaDecodeTime(J,K.keepOriginalTimestamps);Tc.prefixWithSilence(J,ca,L,ba);J.samples=Tc.generateSampleTable(ca);var na=ic.mdat(Tc.concatenateFrameData(ca));N=[];var xa=ic.moof(G,[J]);G++;J.initSegment=ic.initSegment([J]);var ta=new Uint8Array(xa.byteLength+na.byteLength);ta.set(xa);ta.set(na,xa.byteLength);fb.clearDtsInfo(J);null===fa&&(la=fa=ca[0].pts);la+=1024*ir/J.samplerate*ca.length;this.trigger("timingInfo",{start:fa});this.trigger("data",{track:J,boxes:ta})}}};this.flush=
function(){this.processFrames_();this.trigger("timingInfo",{start:fa,end:la});this.resetTiming_();this.trigger("done","AudioSegmentStream")};this.partialFlush=function(){this.processFrames_();this.trigger("partialdone","AudioSegmentStream")};this.endTimeline=function(){this.flush();this.trigger("endedtimeline","AudioSegmentStream")};this.resetTiming_=function(){fb.clearDtsInfo(J);la=fa=null};this.reset=function(){this.resetTiming_();N=[];this.trigger("reset")}};ei.prototype=new p;var xm=function N(K,
D){var G=0,P=[],L=[],ba,fa,la=null,ca=null,na,xa=!0;D=D||{};N.prototype.init.call(this);this.push=function(ta){fb.collectDtsInfo(K,ta);"undefined"===typeof K.timelineStartInfo.dts&&(K.timelineStartInfo.dts=ta.dts);"seq_parameter_set_rbsp"!==ta.nalUnitType||ba||(ba=ta.config,K.sps=[ta.data],bi.forEach(function(Ja){K[Ja]=ba[Ja]},this));"pic_parameter_set_rbsp"!==ta.nalUnitType||fa||(fa=ta.data,K.pps=[ta.data]);P.push(ta)};this.processNals_=function(ta){for(P=L.concat(P);P.length&&"access_unit_delimiter_rbsp"!==
P[0].nalUnitType;)P.shift();if(0!==P.length){var Ja=rc.groupNalsIntoFrames(P);if(Ja.length){L=Ja[Ja.length-1];ta&&(Ja.pop(),Ja.duration-=L.duration,Ja.nalCount-=L.length,Ja.byteLength-=L.byteLength);if(Ja.length){this.trigger("timelineStartInfo",K.timelineStartInfo);if(xa){na=rc.groupFramesIntoGops(Ja);if(!na[0][0].keyFrame){na=rc.extendFirstKeyFrame(na);if(!na[0][0].keyFrame){P=[].concat.apply([],Ja).concat(L);L=[];return}Ja=[].concat.apply([],na);Ja.duration=na.duration}xa=!1}null===la&&(ca=la=
Ja[0].pts);ca+=Ja.duration;this.trigger("timingInfo",{start:la,end:ca});for(ta=0;ta<Ja.length;ta++){var Pa=Ja[ta];K.samples=rc.generateSampleTableForFrame(Pa);var kb=ic.mdat(rc.concatenateNalDataForFrame(Pa));fb.clearDtsInfo(K);fb.collectDtsInfo(K,Pa);K.baseMediaDecodeTime=fb.calculateTrackBaseMediaDecodeTime(K,D.keepOriginalTimestamps);var $b=ic.moof(G,[K]);G++;K.initSegment=ic.initSegment([K]);var jc=new Uint8Array($b.byteLength+kb.byteLength);jc.set($b);jc.set(kb,$b.byteLength);this.trigger("data",
{track:K,boxes:jc,sequence:G,videoFrameDts:Pa.dts,videoFramePts:Pa.pts})}}P=[]}}};this.resetTimingAndConfig_=function(){fa=ba=void 0;ca=la=null};this.partialFlush=function(){this.processNals_(!0);this.trigger("partialdone","VideoSegmentStream")};this.flush=function(){this.processNals_(!1);this.resetTimingAndConfig_();this.trigger("done","VideoSegmentStream")};this.endTimeline=function(){this.flush();this.trigger("endedtimeline","VideoSegmentStream")};this.reset=function(){this.resetTimingAndConfig_();
L=[];P=[];xa=!0;this.trigger("reset")}};xm.prototype=new p;var jr=Bf.isLikelyAacData,ym=function(K){K.prototype=new p;K.prototype.init.call(K);return K},kr=function(K){var D={type:"ts",tracks:{audio:null,video:null},packet:new jb.TransportPacketStream,parse:new jb.TransportParseStream,elementary:new jb.ElementaryStream,timestampRollover:new jb.TimestampRolloverStream,adts:new Kd,h264:new Af,captionStream:new jb.CaptionStream(K),metadataStream:new jb.MetadataStream};D.headOfPipeline=D.packet;D.packet.pipe(D.parse).pipe(D.elementary).pipe(D.timestampRollover);
D.timestampRollover.pipe(D.h264);D.h264.pipe(D.captionStream);D.timestampRollover.pipe(D.metadataStream);D.timestampRollover.pipe(D.adts);D.elementary.on("data",function(N){if("metadata"===N.type){for(var G=0;G<N.tracks.length;G++)D.tracks[N.tracks[G].type]||(D.tracks[N.tracks[G].type]=N.tracks[G],D.tracks[N.tracks[G].type].timelineStartInfo.baseMediaDecodeTime=K.baseMediaDecodeTime);D.tracks.video&&!D.videoSegmentStream&&(D.videoSegmentStream=new xm(D.tracks.video,K),D.videoSegmentStream.on("timelineStartInfo",
function(P){D.tracks.audio&&!K.keepOriginalTimestamps&&D.audioSegmentStream.setEarliestDts(P.dts-K.baseMediaDecodeTime)}),D.videoSegmentStream.on("timingInfo",D.trigger.bind(D,"videoTimingInfo")),D.videoSegmentStream.on("data",function(P){D.trigger("data",{type:"video",data:P})}),D.videoSegmentStream.on("done",D.trigger.bind(D,"done")),D.videoSegmentStream.on("partialdone",D.trigger.bind(D,"partialdone")),D.videoSegmentStream.on("endedtimeline",D.trigger.bind(D,"endedtimeline")),D.h264.pipe(D.videoSegmentStream));
D.tracks.audio&&!D.audioSegmentStream&&(D.audioSegmentStream=new ei(D.tracks.audio,K),D.audioSegmentStream.on("data",function(P){D.trigger("data",{type:"audio",data:P})}),D.audioSegmentStream.on("done",D.trigger.bind(D,"done")),D.audioSegmentStream.on("partialdone",D.trigger.bind(D,"partialdone")),D.audioSegmentStream.on("endedtimeline",D.trigger.bind(D,"endedtimeline")),D.audioSegmentStream.on("timingInfo",D.trigger.bind(D,"audioTimingInfo")),D.adts.pipe(D.audioSegmentStream));D.trigger("trackinfo",
{hasAudio:!!D.tracks.audio,hasVideo:!!D.tracks.video})}});D.captionStream.on("data",function(N){var G=D.tracks.video?D.tracks.video.timelineStartInfo.pts||0:0;N.startTime=Ia.metadataTsToSeconds(N.startPts,G,K.keepOriginalTimestamps);N.endTime=Ia.metadataTsToSeconds(N.endPts,G,K.keepOriginalTimestamps);D.trigger("caption",N)});D=ym(D);D.metadataStream.on("data",D.trigger.bind(D,"id3Frame"));return D},lr=function(K){var D={type:"aac",tracks:{audio:null},metadataStream:new jb.MetadataStream,aacStream:new Cf,
audioRollover:new jb.TimestampRolloverStream("audio"),timedMetadataRollover:new jb.TimestampRolloverStream("timed-metadata"),adtsStream:new Kd(!0)};D.headOfPipeline=D.aacStream;D.aacStream.pipe(D.audioRollover).pipe(D.adtsStream);D.aacStream.pipe(D.timedMetadataRollover).pipe(D.metadataStream);D.metadataStream.on("timestamp",function(N){D.aacStream.setTimestamp(N.timeStamp)});D.aacStream.on("data",function(N){"timed-metadata"!==N.type&&"audio"!==N.type||D.audioSegmentStream||(D.tracks.audio=D.tracks.audio||
{timelineStartInfo:{baseMediaDecodeTime:K.baseMediaDecodeTime},codec:"adts",type:"audio"},D.audioSegmentStream=new ei(D.tracks.audio,K),D.audioSegmentStream.on("data",function(G){D.trigger("data",{type:"audio",data:G})}),D.audioSegmentStream.on("partialdone",D.trigger.bind(D,"partialdone")),D.audioSegmentStream.on("done",D.trigger.bind(D,"done")),D.audioSegmentStream.on("endedtimeline",D.trigger.bind(D,"endedtimeline")),D.audioSegmentStream.on("timingInfo",D.trigger.bind(D,"audioTimingInfo")),D.adtsStream.pipe(D.audioSegmentStream),
D.trigger("trackinfo",{hasAudio:!!D.tracks.audio,hasVideo:!!D.tracks.video}))});D=ym(D);D.metadataStream.on("data",D.trigger.bind(D,"id3Frame"));return D},zm=function(K,D){K.on("data",D.trigger.bind(D,"data"));K.on("done",D.trigger.bind(D,"done"));K.on("partialdone",D.trigger.bind(D,"partialdone"));K.on("endedtimeline",D.trigger.bind(D,"endedtimeline"));K.on("audioTimingInfo",D.trigger.bind(D,"audioTimingInfo"));K.on("videoTimingInfo",D.trigger.bind(D,"videoTimingInfo"));K.on("trackinfo",D.trigger.bind(D,
"trackinfo"));K.on("id3Frame",function(N){N.dispatchType=K.metadataStream.dispatchType;N.cueTime=Ia.videoTsToSeconds(N.pts);D.trigger("id3Frame",N)});K.on("caption",function(N){D.trigger("caption",N)})},Am=function N(D){var G=null,P=!0;D=D||{};N.prototype.init.call(this);D.baseMediaDecodeTime=D.baseMediaDecodeTime||0;this.push=function(L){if(P){var ba=jr(L);!ba||G&&"aac"===G.type?ba||G&&"ts"===G.type||(G=kr(D),zm(G,this)):(G=lr(D),zm(G,this));P=!1}G.headOfPipeline.push(L)};this.flush=function(){G&&
(P=!0,G.headOfPipeline.flush())};this.partialFlush=function(){G&&G.headOfPipeline.partialFlush()};this.endTimeline=function(){G&&G.headOfPipeline.endTimeline()};this.reset=function(){G&&G.headOfPipeline.reset()};this.setBaseMediaDecodeTime=function(L){D.keepOriginalTimestamps||(D.baseMediaDecodeTime=L);G&&(G.tracks.audio&&(G.tracks.audio.timelineStartInfo.dts=void 0,G.tracks.audio.timelineStartInfo.pts=void 0,fb.clearDtsInfo(G.tracks.audio),G.audioRollover&&G.audioRollover.discontinuity()),G.tracks.video&&
(G.videoSegmentStream&&(G.videoSegmentStream.gopCache_=[]),G.tracks.video.timelineStartInfo.dts=void 0,G.tracks.video.timelineStartInfo.pts=void 0,fb.clearDtsInfo(G.tracks.video)),G.timestampRollover&&G.timestampRollover.discontinuity())};this.setRemux=function(L){D.remux=L;G&&G.coalesceStream&&G.coalesceStream.setRemux(L)};this.setAudioAppendStart=function(L){G&&G.tracks.audio&&G.audioSegmentStream&&G.audioSegmentStream.setAudioAppendStart(L)};this.alignGopsWith=function(L){}};Am.prototype=new p;
var ue=function P(N,G){var L=[],ba;if(!G.length)return null;for(ba=0;ba<N.byteLength;){var fa=(N[ba]<<24|N[ba+1]<<16|N[ba+2]<<8|N[ba+3])>>>0;var la=N.subarray(ba+4,ba+8);var ca=""+String.fromCharCode(la[0]);ca+=String.fromCharCode(la[1]);ca+=String.fromCharCode(la[2]);ca+=String.fromCharCode(la[3]);fa=1<fa?ba+fa:N.byteLength;ca===G[0]&&(1===G.length?L.push(N.subarray(ba+8,fa)):(ba=P(N.subarray(ba+8,fa),G.slice(1)),ba.length&&(L=L.concat(ba))));ba=fa}return L},Bm=function(N){return{isLeading:(N[0]&
12)>>>2,dependsOn:N[0]&3,isDependedOn:(N[1]&192)>>>6,hasRedundancy:(N[1]&48)>>>4,paddingValue:(N[1]&14)>>>1,isNonSyncSample:N[1]&1,degradationPriority:N[2]<<8|N[3]}},mr=function(N){var G={version:N[0],flags:new Uint8Array(N.subarray(1,4)),samples:[]},P=new DataView(N.buffer,N.byteOffset,N.byteLength),L=G.flags[2]&1,ba=G.flags[2]&4,fa=G.flags[1]&1,la=G.flags[1]&2,ca=G.flags[1]&4,na=G.flags[1]&8,xa=P.getUint32(4),ta=8;L&&(G.dataOffset=P.getInt32(ta),ta+=4);ba&&xa&&(L={flags:Bm(N.subarray(ta,ta+4))},
ta+=4,fa&&(L.duration=P.getUint32(ta),ta+=4),la&&(L.size=P.getUint32(ta),ta+=4),na&&(L.compositionTimeOffset=1===G.version?P.getInt32(ta):P.getUint32(ta),ta+=4),G.samples.push(L),xa--);for(;xa--;)L={},fa&&(L.duration=P.getUint32(ta),ta+=4),la&&(L.size=P.getUint32(ta),ta+=4),ca&&(L.flags=Bm(N.subarray(ta,ta+4)),ta+=4),na&&(L.compositionTimeOffset=1===G.version?P.getInt32(ta):P.getUint32(ta),ta+=4),G.samples.push(L);return G},nr=se.discardEmulationPreventionBytes,or=function(N,G,P){var L=G,ba=P.defaultSampleDuration||
0,fa=P.defaultSampleSize||0,la=P.trackId,ca=[];N.forEach(function(na){na=mr(na).samples;na.forEach(function(xa){void 0===xa.duration&&(xa.duration=ba);void 0===xa.size&&(xa.size=fa);xa.trackId=la;xa.dts=L;void 0===xa.compositionTimeOffset&&(xa.compositionTimeOffset=0);xa.pts=L+xa.compositionTimeOffset;L+=xa.duration});ca=ca.concat(na)});return ca},pr=function(N,G){var P=ue(N,["moof","traf"]),L={},ba=[];ue(N,["mdat"]).forEach(function(fa,la){ba.push({mdat:fa,traf:P[la]})});ba.forEach(function(fa){var la=
fa.mdat,ca=fa.traf,na=ue(ca,["tfhd"])[0];fa=new DataView(na.buffer,na.byteOffset,na.byteLength);na={version:na[0],flags:new Uint8Array(na.subarray(1,4)),trackId:fa.getUint32(4)};var xa=na.flags[2]&1,ta=na.flags[2]&2,Ja=na.flags[2]&8,Pa=na.flags[2]&16,kb=na.flags[2]&32,$b=na.flags[0]&65536,jc=na.flags[0]&131072;var Qa=8;xa&&(Qa+=4,na.baseDataOffset=fa.getUint32(12),Qa+=4);ta&&(na.sampleDescriptionIndex=fa.getUint32(Qa),Qa+=4);Ja&&(na.defaultSampleDuration=fa.getUint32(Qa),Qa+=4);Pa&&(na.defaultSampleSize=
fa.getUint32(Qa),Qa+=4);kb&&(na.defaultSampleFlags=fa.getUint32(Qa));$b&&(na.durationIsEmpty=!0);!xa&&jc&&(na.baseDataOffsetIsMoof=!0);fa=na.trackId;xa=ue(ca,["tfdt"]);0<xa.length?(xa=xa[0],ta=xa[0],new Uint8Array(xa.subarray(1,4)),Ja=(xa[4]<<24|xa[5]<<16|xa[6]<<8|xa[7])>>>0,1===ta&&(Ja*=Math.pow(2,32),Ja+=(xa[8]<<24|xa[9]<<16|xa[10]<<8|xa[11])>>>0),xa=Ja):xa=0;ca=ue(ca,["trun"]);if(G===fa&&0<ca.length){ca=or(ca,xa,na);na=new DataView(la.buffer,la.byteOffset,la.byteLength);xa=[];for(ta=0;ta+4<la.length;ta+=
Ja)if(Ja=na.getUint32(ta),ta+=4,!(0>=Ja))switch(la[ta]&31){case 6:Pa=la.subarray(ta+1,ta+1+Ja);a:{kb=ta;for($b=0;$b<ca.length;$b++){jc=ca[$b];if(kb<jc.size){kb=jc;break a}kb-=jc.size}kb=null}Pa={nalUnitType:"sei_rbsp",size:Ja,data:Pa,escapedRBSP:nr(Pa),trackId:fa};if(kb){Pa.pts=kb.pts;Pa.dts=kb.dts;var fi=kb}else if(fi)Pa.pts=fi.pts,Pa.dts=fi.dts;else{console.log("We've encountered a nal unit without data. See mux.js#233.");break}xa.push(Pa)}L[fa]||(L[fa]=[]);L[fa]=L[fa].concat(xa)}});return L},qr=
function(){var N=!1,G,P,L,ba,fa,la;this.isInitialized=function(){return N};this.init=function(ca){G=new Mb;N=!0;la=ca?ca.isPartial:!1;G.on("data",function(na){na.startTime=na.startPts/ba;na.endTime=na.endPts/ba;fa.captions.push(na);fa.captionStreams[na.stream]=!0})};this.isNewInit=function(ca,na){return ca&&0===ca.length||na&&"object"===typeof na&&0===Object.keys(na).length?!1:L!==ca[0]||ba!==na[L]};this.parse=function(ca,na,xa){if(this.isInitialized()){if(!na||!xa)return null;if(this.isNewInit(na,
xa))L=na[0],ba=xa[L];else if(null===L||!ba)return P.push(ca),null}else return null;for(;0<P.length;){var ta=P.shift();this.parse(ta,na,xa)}na=L;xa=ba;ca=null===na?null:{seiNals:pr(ca,na)[na],timescale:xa};if(null===ca||!ca.seiNals)return null;this.pushNals(ca.seiNals);this.flushStream();return fa};this.pushNals=function(ca){if(!this.isInitialized()||!ca||0===ca.length)return null;ca.forEach(function(na){G.push(na)})};this.flushStream=function(){if(!this.isInitialized())return null;la?G.partialFlush():
G.flush()};this.clearParsedCaptions=function(){fa.captions=[];fa.captionStreams={}};this.resetCaptionStream=function(){if(!this.isInitialized())return null;G.reset()};this.clearAllCaptions=function(){this.clearParsedCaptions();this.resetCaptionStream()};this.reset=function(){P=[];ba=L=null;fa?this.clearParsedCaptions():fa={captions:[],captionStreams:{}};this.resetCaptionStream()};this.reset()},gi=function(N){return"AudioSegmentStream"===N?"audio":"VideoSegmentStream"===N?"video":""},rr=function(N,
G){G.on("data",function(P){var L=P.initSegment;P.initSegment={data:L.buffer,byteOffset:L.byteOffset,byteLength:L.byteLength};L=P.data;P.data=L.buffer;N.postMessage({action:"data",segment:P,byteOffset:L.byteOffset,byteLength:L.byteLength},[P.data])});G.on("done",function(P){N.postMessage({action:"done"})});G.on("gopInfo",function(P){N.postMessage({action:"gopInfo",gopInfo:P})});G.on("videoSegmentTimingInfo",function(P){var L={start:{decode:Ia.videoTsToSeconds(P.start.dts),presentation:Ia.videoTsToSeconds(P.start.pts)},
end:{decode:Ia.videoTsToSeconds(P.end.dts),presentation:Ia.videoTsToSeconds(P.end.pts)},baseMediaDecodeTime:Ia.videoTsToSeconds(P.baseMediaDecodeTime)};P.prependedContentDuration&&(L.prependedContentDuration=Ia.videoTsToSeconds(P.prependedContentDuration));N.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:L})});G.on("audioSegmentTimingInfo",function(P){var L={start:{decode:Ia.videoTsToSeconds(P.start.dts),presentation:Ia.videoTsToSeconds(P.start.pts)},end:{decode:Ia.videoTsToSeconds(P.end.dts),
presentation:Ia.videoTsToSeconds(P.end.pts)},baseMediaDecodeTime:Ia.videoTsToSeconds(P.baseMediaDecodeTime)};P.prependedContentDuration&&(L.prependedContentDuration=Ia.videoTsToSeconds(P.prependedContentDuration));N.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:L})});G.on("id3Frame",function(P){N.postMessage({action:"id3Frame",id3Frame:P})});G.on("caption",function(P){N.postMessage({action:"caption",caption:P})});G.on("trackinfo",function(P){N.postMessage({action:"trackinfo",
trackInfo:P})});G.on("audioTimingInfo",function(P){N.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:Ia.videoTsToSeconds(P.start),end:Ia.videoTsToSeconds(P.end)}})});G.on("videoTimingInfo",function(P){N.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:Ia.videoTsToSeconds(P.start),end:Ia.videoTsToSeconds(P.end)}})})},sr=function(N,G){G.on("data",function(P){var L={boxes:{data:P.data.boxes.buffer,byteOffset:P.data.boxes.byteOffset,byteLength:P.data.boxes.byteLength},initSegment:{data:P.data.track.initSegment.buffer,
byteOffset:P.data.track.initSegment.byteOffset,byteLength:P.data.track.initSegment.byteLength},type:P.type,sequence:P.data.sequence};"undefined"!==typeof P.data.videoFrameDts&&(L.videoFrameDtsTime=Ia.videoTsToSeconds(P.data.videoFrameDts));"undefined"!==typeof P.data.videoFramePts&&(L.videoFramePtsTime=Ia.videoTsToSeconds(P.data.videoFramePts));N.postMessage({action:"data",segment:L},[L.boxes.data,L.initSegment.data])});G.on("id3Frame",function(P){N.postMessage({action:"id3Frame",id3Frame:P})});G.on("caption",
function(P){N.postMessage({action:"caption",caption:P})});G.on("done",function(P){N.postMessage({action:"done",type:gi(P)})});G.on("partialdone",function(P){N.postMessage({action:"partialdone",type:gi(P)})});G.on("endedsegment",function(P){N.postMessage({action:"endedSegment",type:gi(P)})});G.on("trackinfo",function(P){N.postMessage({action:"trackinfo",trackInfo:P})});G.on("audioTimingInfo",function(P){if(null===P.start)N.postMessage({action:"audioTimingInfo",audioTimingInfo:P});else{var L={start:Ia.videoTsToSeconds(P.start)};
P.end&&(L.end=Ia.videoTsToSeconds(P.end));N.postMessage({action:"audioTimingInfo",audioTimingInfo:L})}});G.on("videoTimingInfo",function(P){var L={start:Ia.videoTsToSeconds(P.start)};P.end&&(L.end=Ia.videoTsToSeconds(P.end));N.postMessage({action:"videoTimingInfo",videoTimingInfo:L})})},Cm=function(){function N(P,L){this.options=L||{};this.self=P;this.init()}var G=N.prototype;G.init=function(){this.transmuxer&&this.transmuxer.dispose();this.transmuxer=this.options.handlePartialData?new Am(this.options):
new di(this.options);this.options.handlePartialData?sr(this.self,this.transmuxer):rr(this.self,this.transmuxer)};G.pushMp4Captions=function(P){this.captionParser||(this.captionParser=new qr,this.captionParser.init());var L=new Uint8Array(P.data,P.byteOffset,P.byteLength);P=this.captionParser.parse(L,P.trackIds,P.timescales);this.self.postMessage({action:"mp4Captions",captions:P&&P.captions||[],data:L.buffer},[L.buffer])};G.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()};
G.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()};G.push=function(P){P=new Uint8Array(P.data,P.byteOffset,P.byteLength);this.transmuxer.push(P)};G.reset=function(){this.transmuxer.reset()};G.setTimestampOffset=function(P){this.transmuxer.setBaseMediaDecodeTime(Math.round(Ia.secondsToVideoTs(P.timestampOffset||0)))};G.setAudioAppendStart=function(P){this.transmuxer.setAudioAppendStart(Math.ceil(Ia.secondsToVideoTs(P.appendStart)))};G.setRemux=function(P){this.transmuxer.setRemux(P.remux)};
G.flush=function(P){this.transmuxer.flush();self.postMessage({action:"done",type:"transmuxed"})};G.partialFlush=function(P){this.transmuxer.partialFlush();self.postMessage({action:"partialdone",type:"transmuxed"})};G.endTimeline=function(){this.transmuxer.endTimeline();self.postMessage({action:"endedtimeline",type:"transmuxed"})};G.alignGopsWith=function(P){this.transmuxer.alignGopsWith(P.gopsToAlignWith.slice())};return N}();self.onmessage=function(N){if("init"===N.data.action&&N.data.options)this.messageHandlers=
new Cm(self,N.data.options);else if(this.messageHandlers||(this.messageHandlers=new Cm(self)),N.data&&N.data.action&&"init"!==N.data.action&&this.messageHandlers[N.data.action])this.messageHandlers[N.data.action](N.data)}})),ur=im(tr),Em=function(p){var m=p.transmuxer,l=p.bytes,f=p.audioAppendStart,g=p.gopsToAlignWith,k=p.isPartial,u=p.remux,y=p.onData,A=p.onTrackInfo,H=p.onAudioTimingInfo,S=p.onVideoTimingInfo,W=p.onVideoSegmentTimingInfo,M=p.onAudioSegmentTimingInfo,T=p.onId3,R=p.onCaptions,oa=
p.onDone,pa=p.onEndedTimeline,Ba=p.isEndOfTimeline,ea={isPartial:k,buffer:[]},ka=Ba;m.onmessage=function(sa){if(m.currentTransmux===p){if("data"===sa.data.action){var Na=sa.data.segment,Ya=Na.type,wb=Na.initSegment,eb=Na.videoFrameDtsTime,rb=Na.videoFramePtsTime;ea.buffer.push({captions:Na.captions,captionStreams:Na.captionStreams,metadata:Na.metadata});Na=sa.data.segment.boxes||{data:sa.data.segment.data};Ya={type:Ya,data:new Uint8Array(Na.data,Na.data.byteOffset,Na.data.byteLength),initSegment:new Uint8Array(wb.data,
wb.byteOffset,wb.byteLength)};"undefined"!==typeof eb&&(Ya.videoFrameDtsTime=eb);"undefined"!==typeof rb&&(Ya.videoFramePtsTime=rb);y(Ya)}"trackinfo"===sa.data.action&&A(sa.data.trackInfo);"gopInfo"===sa.data.action&&(ea.gopInfo=sa.data.gopInfo);"audioTimingInfo"===sa.data.action&&H(sa.data.audioTimingInfo);"videoTimingInfo"===sa.data.action&&S(sa.data.videoTimingInfo);"videoSegmentTimingInfo"===sa.data.action&&W(sa.data.videoSegmentTimingInfo);"audioSegmentTimingInfo"===sa.data.action&&M(sa.data.audioSegmentTimingInfo);
"id3Frame"===sa.data.action&&T([sa.data.id3Frame],sa.data.id3Frame.dispatchType);"caption"===sa.data.action&&R(sa.data.caption);"endedtimeline"===sa.data.action&&(ka=!1,pa());"transmuxed"!==sa.data.type||ka||(m.onmessage=null,ea.buffer=[],oa(ea),Dm(m))}};f&&m.postMessage({action:"setAudioAppendStart",appendStart:f});Array.isArray(g)&&m.postMessage({action:"alignGopsWith",gopsToAlignWith:g});"undefined"!==typeof u&&m.postMessage({action:"setRemux",remux:u});l.byteLength&&(f=l instanceof ArrayBuffer?
l:l.buffer,m.postMessage({action:"push",data:f,byteOffset:l instanceof ArrayBuffer?0:l.byteOffset,byteLength:l.byteLength},[f]));m.postMessage({action:k?"partialFlush":"flush"});Ba&&m.postMessage({action:"endTimeline"})},Dm=function(p){p.currentTransmux=null;p.transmuxQueue.length&&(p.currentTransmux=p.transmuxQueue.shift(),"function"===typeof p.currentTransmux?p.currentTransmux():Em(p.currentTransmux))},Fm=function(p,m){p.postMessage({action:m});Dm(p)},Gm=function(p,m){m.currentTransmux?m.transmuxQueue.push(Fm.bind(null,
m,p)):(m.currentTransmux=p,Fm(m,p))},Hm=function(p){p.transmuxer.currentTransmux?p.transmuxer.transmuxQueue.push(p):(p.transmuxer.currentTransmux=p,Em(p))},hi={reset:function(p){Gm("reset",p)},endTimeline:function(p){Gm("endTimeline",p)},transmux:Hm,createTransmuxer:function(p){var m=new ur;m.currentTransmux=null;m.transmuxQueue=[];var l=m.terminate;m.terminate=function(){m.currentTransmux=null;m.transmuxQueue.length=0;return l.call(m)};m.postMessage({action:"init",options:p});return m}},vr=function(p,
m){m="number"!==typeof m||isNaN(m)?void 0:9E4*m;p=oq.inspect(p,m);if(!p)return null;m={hasVideo:p.video&&2===p.video.length||!1,hasAudio:p.audio&&2===p.audio.length||!1};m.hasVideo&&(m.videoStart=p.video[0].ptsTime);m.hasAudio&&(m.audioStart=p.audio[0].ptsTime);return m},wr=function(p){var m=0;if(p.bytes){var l=new Uint8Array(p.bytes);p.segments.forEach(function(f){l.set(f,m);m+=f.byteLength})}return l},Im=function(p){p.forEach(function(m){m.abort()})},ii=function(p,m){return m.timedout?{status:m.status,
message:"HLS request timed-out at URL: "+m.uri,code:-101,xhr:m}:m.aborted?{status:m.status,message:"HLS request aborted at URL: "+m.uri,code:-102,xhr:m}:p?{status:m.status,message:"HLS request errored at URL: "+m.uri,code:2,xhr:m}:null},xr=function(p,m){return function(l,f){var g=f.response;if(l=ii(l,f))return m(l,p);if(16!==g.byteLength)return m({status:f.status,message:"Invalid HLS key at URL: "+f.uri,code:2,xhr:f},p);f=new DataView(g);p.key.bytes=new Uint32Array([f.getUint32(0),f.getUint32(4),
f.getUint32(8),f.getUint32(12)]);return m(null,p)}},yr=function(p){var m=p.segment,l=p.finishProcessingFn;return function(f,g){var k=g.response;if(f=ii(f,g))return l(f,m);if(0===k.byteLength)return l({status:g.status,message:"Empty HLS segment content at URL: "+g.uri,code:2,xhr:g},m);m.map.bytes=new Uint8Array(g.response);k=Fh(m.map.bytes);if("mp4"!==k)return l({status:g.status,message:"Found unsupported "+(k||"unknown")+" container for initialization segment at URL: "+g.uri,code:2,internal:!0,xhr:g},
m);Hl.tracks(m.map.bytes).forEach(function(u){m.map.tracks=m.map.tracks||{};m.map.tracks[u.type]||(m.map.tracks[u.type]=u,"number"===typeof u.id&&u.timescale&&(m.map.timescales=m.map.timescales||{},m.map.timescales[u.id]=u.timescale))});return l(null,m)}},zr=function(p){var m=p.segment,l=p.finishProcessingFn,f=p.responseType;return function(g,k){var u=k.response;if(g=ii(g,k))return l(g,m);g="arraybuffer"!==f&&k.responseText?gm(k.responseText.substring(m.lastReachedChar||0)):k.response;if(0===u.byteLength)return l({status:k.status,
message:"Empty HLS segment content at URL: "+k.uri,code:2,xhr:k},m);m.stats={bandwidth:k.bandwidth,bytesReceived:k.bytesReceived||0,roundTripTime:k.roundTripTime||0};m.key?m.encryptedBytes=new Uint8Array(g):m.bytes=new Uint8Array(g);return l(null,m)}},Ar=function(p){var m=p.segment,l=p.bytes,f=p.isPartial,g=p.trackInfoFn,k=p.timingInfoFn,u=p.videoSegmentTimingInfoFn,y=p.audioSegmentTimingInfoFn,A=p.id3Fn,H=p.captionsFn,S=p.isEndOfTimeline,W=p.endedTimelineFn,M=p.dataFn,T=p.doneFn;p=m.map&&m.map.tracks||
{};var R=!(!p.audio||!p.video),oa=k.bind(null,m,"audio","start"),pa=k.bind(null,m,"audio","end"),Ba=k.bind(null,m,"video","start"),ea=k.bind(null,m,"video","end");f||m.lastReachedChar||!(k=vr(l,m.baseStartTime))||(g(m,{hasAudio:k.hasAudio,hasVideo:k.hasVideo,isMuxed:R}),g=null,k.hasAudio&&!R&&oa(k.audioStart),k.hasVideo&&Ba(k.videoStart),Ba=oa=null);Hm({bytes:l,transmuxer:m.transmuxer,audioAppendStart:m.audioAppendStart,gopsToAlignWith:m.gopsToAlignWith,isPartial:f,remux:R,onData:function(ka){ka.type=
"combined"===ka.type?"video":ka.type;M(m,ka)},onTrackInfo:function(ka){g&&(R&&(ka.isMuxed=!0),g(m,ka))},onAudioTimingInfo:function(ka){oa&&"undefined"!==typeof ka.start&&(oa(ka.start),oa=null);pa&&"undefined"!==typeof ka.end&&pa(ka.end)},onVideoTimingInfo:function(ka){Ba&&"undefined"!==typeof ka.start&&(Ba(ka.start),Ba=null);ea&&"undefined"!==typeof ka.end&&ea(ka.end)},onVideoSegmentTimingInfo:function(ka){u(ka)},onAudioSegmentTimingInfo:function(ka){y(ka)},onId3:function(ka,sa){A(m,ka,sa)},onCaptions:function(ka){H(m,
[ka])},isEndOfTimeline:S&&!f,onEndedTimeline:function(){W()},onDone:function(ka){T&&!f&&(ka.type="combined"===ka.type?"video":ka.type,T(null,m,ka))}})},ji=function(p){var m=p.segment,l=p.bytes,f=p.isPartial,g=p.trackInfoFn,k=p.timingInfoFn,u=p.videoSegmentTimingInfoFn,y=p.audioSegmentTimingInfoFn,A=p.id3Fn,H=p.captionsFn,S=p.isEndOfTimeline,W=p.endedTimelineFn,M=p.dataFn,T=p.doneFn;p=new Uint8Array(l);if(0<vl(p,["moof"]).length){m.isFmp4=!0;f=m.map.tracks;var R={isFmp4:!0,hasVideo:!!f.video,hasAudio:!!f.audio};
f.audio&&f.audio.codec&&"enca"!==f.audio.codec&&(R.audioCodec=f.audio.codec);f.video&&f.video.codec&&"encv"!==f.video.codec&&(R.videoCodec=f.video.codec);f.video&&f.audio&&(R.isMuxed=!0);g(m,R);g=Hl.startTime(m.map.timescales,p);R.hasAudio&&!R.isMuxed&&k(m,"audio","start",g);R.hasVideo&&k(m,"video","start",g);var oa=function(pa){M(m,{data:l,type:R.hasAudio&&!R.isMuxed?"audio":"video"});pa&&pa.length&&H(m,pa);T(null,m,{})};f.video&&l.byteLength&&m.transmuxer?(k=l instanceof ArrayBuffer?l:l.buffer,
g=l instanceof ArrayBuffer?0:l.byteOffset,m.transmuxer.addEventListener("message",function ea(Ba){if("mp4Captions"===Ba.data.action){m.transmuxer.removeEventListener("message",ea);var ka=Ba.data.data;m.bytes=l=new Uint8Array(ka,ka.byteOffset||0,ka.byteLength);oa(Ba.data.captions)}}),m.transmuxer.postMessage({action:"pushMp4Captions",timescales:m.map.timescales,trackIds:[f.video.id],data:k,byteOffset:g,byteLength:l.byteLength},[k])):oa()}else m.transmuxer?("undefined"===typeof m.container&&(m.container=
Fh(p)),"ts"!==m.container&&"aac"!==m.container?(g(m,{hasAudio:!1,hasVideo:!1}),T(null,m,{})):Ar({segment:m,bytes:l,isPartial:f,trackInfoFn:g,timingInfoFn:k,videoSegmentTimingInfoFn:u,audioSegmentTimingInfoFn:y,id3Fn:A,captionsFn:H,isEndOfTimeline:S,endedTimelineFn:W,dataFn:M,doneFn:T})):T(null,m,{})},Br=function(p){var m=p.decryptionWorker,l=p.segment,f=p.trackInfoFn,g=p.timingInfoFn,k=p.videoSegmentTimingInfoFn,u=p.audioSegmentTimingInfoFn,y=p.id3Fn,A=p.captionsFn,H=p.isEndOfTimeline,S=p.endedTimelineFn,
W=p.dataFn,M=p.doneFn;m.addEventListener("message",function oa(R){R.data.source===l.requestId&&(m.removeEventListener("message",oa),R=R.data.decrypted,l.bytes=new Uint8Array(R.bytes,R.byteOffset,R.byteLength),ji({segment:l,bytes:l.bytes,isPartial:!1,trackInfoFn:f,timingInfoFn:g,videoSegmentTimingInfoFn:k,audioSegmentTimingInfoFn:u,id3Fn:y,captionsFn:A,isEndOfTimeline:H,endedTimelineFn:S,dataFn:W,doneFn:M}))});p=l.key.bytes.slice?l.key.bytes.slice():new Uint32Array(Array.prototype.slice.call(l.key.bytes));
m.postMessage(am({source:l.requestId,encrypted:l.encryptedBytes,key:p,iv:l.key.iv}),[l.encryptedBytes.buffer,p.buffer])},Cr=function(p){var m=p.activeXhrs,l=p.decryptionWorker,f=p.trackInfoFn,g=p.timingInfoFn,k=p.videoSegmentTimingInfoFn,u=p.audioSegmentTimingInfoFn,y=p.id3Fn,A=p.captionsFn,H=p.isEndOfTimeline,S=p.endedTimelineFn,W=p.dataFn,M=p.doneFn,T=0,R=!1;return function(oa,pa){if(!R){if(oa)return R=!0,Im(m),M(oa,pa);T+=1;if(T===m.length){pa.endOfAllRequests=Date.now();if(pa.encryptedBytes)return Br({decryptionWorker:l,
segment:pa,trackInfoFn:f,timingInfoFn:g,videoSegmentTimingInfoFn:k,audioSegmentTimingInfoFn:u,id3Fn:y,captionsFn:A,isEndOfTimeline:H,endedTimelineFn:S,dataFn:W,doneFn:M});ji({segment:pa,bytes:pa.bytes,isPartial:!1,trackInfoFn:f,timingInfoFn:g,videoSegmentTimingInfoFn:k,audioSegmentTimingInfoFn:u,id3Fn:y,captionsFn:A,isEndOfTimeline:H,endedTimelineFn:S,dataFn:W,doneFn:M})}}}},Dr=function(p){var m=p.loadendState,l=p.abortFn;return function(f){f.target.aborted&&l&&!m.calledAbortFn&&(l(),m.calledAbortFn=
!0)}},Er=function(p){var m=p.segment,l=p.progressFn,f=p.trackInfoFn,g=p.timingInfoFn,k=p.videoSegmentTimingInfoFn,u=p.audioSegmentTimingInfoFn,y=p.id3Fn,A=p.captionsFn,H=p.isEndOfTimeline,S=p.endedTimelineFn,W=p.dataFn,M=p.handlePartialData;return function(T){var R=T.target;if(!R.aborted){if(M&&!m.key&&R.responseText&&8<=R.responseText.length){var oa=gm(R.responseText.substring(m.lastReachedChar||0));!m.lastReachedChar&&0<vl(new Uint8Array(oa),["moof"]).length||(m.lastReachedChar=R.responseText.length,
ji({segment:m,bytes:oa,isPartial:!0,trackInfoFn:f,timingInfoFn:g,videoSegmentTimingInfoFn:k,audioSegmentTimingInfoFn:u,id3Fn:y,captionsFn:A,isEndOfTimeline:H,endedTimelineFn:S,dataFn:W}))}R=U.mergeOptions;oa=m.stats;var pa=T.target;pa=Date.now()-pa.requestTime;pa={bandwidth:Infinity,bytesReceived:0,roundTripTime:pa||0};pa.bytesReceived=T.loaded;pa.bandwidth=Math.floor(pa.bytesReceived/pa.roundTripTime*8E3);m.stats=R.call(U,oa,pa);!m.stats.firstBytesReceivedAt&&m.stats.bytesReceived&&(m.stats.firstBytesReceivedAt=
Date.now());return l(T,m)}}},Fr=function(p){var m=p.xhr,l=p.xhrOptions,f=p.segment,g=p.abortFn,k=p.progressFn,u=p.trackInfoFn,y=p.timingInfoFn,A=p.videoSegmentTimingInfoFn,H=p.audioSegmentTimingInfoFn,S=p.id3Fn,W=p.captionsFn,M=p.isEndOfTimeline,T=p.endedTimelineFn,R=p.dataFn,oa=p.handlePartialData,pa=[];p=Cr({activeXhrs:pa,decryptionWorker:p.decryptionWorker,trackInfoFn:u,timingInfoFn:y,videoSegmentTimingInfoFn:A,audioSegmentTimingInfoFn:H,id3Fn:S,captionsFn:W,isEndOfTimeline:M,endedTimelineFn:T,
dataFn:R,doneFn:p.doneFn});if(f.key&&!f.key.bytes){var Ba=U.mergeOptions(l,{uri:f.key.resolvedUri,responseType:"arraybuffer"}),ea=xr(f,p);Ba=m(Ba,ea);pa.push(Ba)}f.map&&!f.map.bytes&&(Ba=U.mergeOptions(l,{uri:f.map.resolvedUri,responseType:"arraybuffer",headers:Ph(f.map)}),ea=yr({segment:f,finishProcessingFn:p}),Ba=m(Ba,ea),pa.push(Ba));l=U.mergeOptions(l,{uri:f.resolvedUri,responseType:"arraybuffer",headers:Ph(f)});oa&&(l.responseType="text",l.beforeSend=function(sa){sa.overrideMimeType("text/plain; charset=x-user-defined")});
p=zr({segment:f,finishProcessingFn:p,responseType:l.responseType});m=m(l,p);m.addEventListener("progress",Er({segment:f,progressFn:k,trackInfoFn:u,timingInfoFn:y,videoSegmentTimingInfoFn:A,audioSegmentTimingInfoFn:H,id3Fn:S,captionsFn:W,isEndOfTimeline:M,endedTimelineFn:T,dataFn:R,handlePartialData:oa}));pa.push(m);var ka={};pa.forEach(function(sa){sa.addEventListener("loadend",Dr({loadendState:ka,abortFn:g}))});return function(){return Im(pa)}},Gr=oc("CodecUtils"),Jm=function(p,m){m=m.attributes||
{};return p&&p.mediaGroups&&p.mediaGroups.AUDIO&&m.AUDIO&&p.mediaGroups.AUDIO[m.AUDIO]},ki=function(p){var m={};p.forEach(function(l){var f=l.mediaType,g=l.type;l=l.details;m[f]=m[f]||[];m[f].push(Jl(""+g+l))});Object.keys(m).forEach(function(l){1<m[l].length?(Gr("multiple "+l+" codecs found as attributes: "+m[l].join(", ")+". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."),m[l]=null):m[l]=m[l][0]});return m},Km=function(p){var m=0;p.audio&&m++;p.video&&
m++;return m},ve=function(p,m){var l=m.attributes||{};var f=m.attributes||{};f=f.CODECS?Cc(f.CODECS):void 0;f=ki(f||[]);if(Jm(p,m)&&!f.audio){a:if(Jm(p,m)){m=p.mediaGroups.AUDIO[(m.attributes||{}).AUDIO];for(g in m)if(!m[g].uri&&!m[g].playlists){var g=!0;break a}g=!1}else g=!0;g||(p=ki(qq(p,l.AUDIO)||[]),p.audio&&(f.audio=p.audio))}return f},Ef=oc("PlaylistSelector"),Lm=function(p){if(p&&p.playlist){var m=p.playlist;return JSON.stringify({id:m.id,bandwidth:p.bandwidth,width:p.width,height:p.height,
codecs:m.attributes&&m.attributes.CODECS||""})}},Ff=function(p,m){return p?(p=ra.getComputedStyle(p))?p[m]:"":""},we=function(p,m){var l=p.slice();p.sort(function(f,g){var k=m(f,g);return 0===k?l.indexOf(f)-l.indexOf(g):k})},li=function(p,m){if(p.attributes.BANDWIDTH)var l=p.attributes.BANDWIDTH;l=l||ra.Number.MAX_VALUE;if(m.attributes.BANDWIDTH)var f=m.attributes.BANDWIDTH;f=f||ra.Number.MAX_VALUE;return l-f},Mm=function(p,m,l,f,g){if(p){var k={bandwidth:m,width:l,height:f,limitRenditionByPlayerDimensions:g},
u=p.playlists.map(function(M){var T=M.attributes.RESOLUTION&&M.attributes.RESOLUTION.width,R=M.attributes.RESOLUTION&&M.attributes.RESOLUTION.height;var oa=(oa=M.attributes.BANDWIDTH)||ra.Number.MAX_VALUE;return{bandwidth:oa,width:T,height:R,playlist:M}});we(u,function(M,T){return M.bandwidth-T.bandwidth});u=u.filter(function(M){return!Lb.isIncompatible(M.playlist)});p=u.filter(function(M){return Lb.isEnabled(M.playlist)});p.length||(p=u.filter(function(M){return!Lb.isDisabled(M.playlist)}));var y=
p.filter(function(M){return M.bandwidth*qb.BANDWIDTH_VARIANCE<m}),A=y[y.length-1],H=y.filter(function(M){return M.bandwidth===A.bandwidth})[0];if(!1===g){var S=H||p[0]||u[0];if(S&&S.playlist)return u="sortedPlaylistReps",H&&(u="bandwidthBestRep"),p[0]&&(u="enabledPlaylistReps"),Ef("choosing "+Lm(S)+" using "+u+" with options",k),S.playlist;Ef("could not choose a playlist with options",k);return null}y=y.filter(function(M){return M.width&&M.height});we(y,function(M,T){return M.width-T.width});g=y.filter(function(M){return M.width===
l&&M.height===f});A=g[g.length-1];g=g.filter(function(M){return M.bandwidth===A.bandwidth})[0];if(!g){var W=y.filter(function(M){return M.width>l||M.height>f});S=W.filter(function(M){return M.width===W[0].width&&M.height===W[0].height});A=S[S.length-1];S=S.filter(function(M){return M.bandwidth===A.bandwidth})[0]}if((u=S||g||H||p[0]||u[0])&&u.playlist)return y="sortedPlaylistReps",S?y="resolutionPlusOneRep":g?y="resolutionBestRep":H?y="bandwidthBestRep":p[0]&&(y="enabledPlaylistReps"),Ef("choosing "+
Lm(u)+" using "+y+" with options",k),u.playlist;Ef("could not choose a playlist with options",k);return null}},Nm=function(){var p=this.useDevicePixelRatio?ra.devicePixelRatio||1:1;return Mm(this.playlists.master,this.systemBandwidth,parseInt(Ff(this.tech_.el(),"width"),10)*p,parseInt(Ff(this.tech_.el(),"height"),10)*p,this.limitRenditionByPlayerDimensions)},Hr=function(p){var m=p.currentTime,l=p.bandwidth,f=p.duration,g=p.segmentDuration,k=p.timeUntilRebuffer,u=p.currentTimeline,y=p.syncController;
p=p.master.playlists.filter(function(H){return!Lb.isIncompatible(H)});var A=p.filter(Lb.isEnabled);A.length||(A=p.filter(function(H){return!Lb.isDisabled(H)}));p=A.filter(Lb.hasAttribute.bind(null,"BANDWIDTH")).map(function(H){var S=y.getSyncPoint(H,f,u,m)?1:2;S=Lb.estimateSegmentRequestTime(g,l,H)*S-k;return{playlist:H,rebufferingImpact:S}});A=p.filter(function(H){return 0>=H.rebufferingImpact});we(A,function(H,S){return li(S.playlist,H.playlist)});if(A.length)return A[0];we(p,function(H,S){return H.rebufferingImpact-
S.rebufferingImpact});return p[0]||null},Ir=function(p){var m=p.inbandTextTracks,l=p.captionArray,f=p.timestampOffset;if(l){var g=ra.WebKitDataCue||ra.VTTCue;l.forEach(function(k){m[k.stream].addCue(new g(k.startTime+f,k.endTime+f,k.text))})}},Jr=function(p){Object.defineProperties(p.frame,{id:{get:function(){U.log.warn("cue.frame.id is deprecated. Use cue.value.key instead.");return p.value.key}},value:{get:function(){U.log.warn("cue.frame.value is deprecated. Use cue.value.data instead.");return p.value.data}},
privateData:{get:function(){U.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead.");return p.value.data}}})},Kr=function(p){var m=p.metadataArray,l=p.timestampOffset,f=p.videoDuration;if(m){var g=ra.WebKitDataCue||ra.VTTCue,k=p.inbandTextTracks.metadataTrack_;if(k&&(m.forEach(function(H){var S=H.cueTime+l;!("number"!==typeof S||ra.isNaN(S)||0>S)&&Infinity>S&&H.frames.forEach(function(W){var M=new g(S,S,W.value||W.url||W.data||"");M.frame=W;M.value=W;Jr(M);k.addCue(M)})}),k.cues&&
k.cues.length)){p=k.cues;m=[];for(var u=0;u<p.length;u++)p[u]&&m.push(p[u]);var y=m.reduce(function(H,S){var W=H[S.startTime]||[];W.push(S);H[S.startTime]=W;return H},{}),A=Object.keys(y).sort(function(H,S){return Number(H)-Number(S)});A.forEach(function(H,S){var W=Number(A[S+1])||f;y[H].forEach(function(M){M.endTime=W})})}}},xe=function(p,m,l){var f;if(l&&l.cues)for(f=l.cues.length;f--;){var g=l.cues[f];g.startTime>=p&&g.endTime<=m&&l.removeCue(g)}},Lr=function(p){var m=p.cues;if(m)for(var l=0;l<
m.length;l++){for(var f=[],g=0,k=0;k<m.length;k++)m[l].startTime===m[k].startTime&&m[l].endTime===m[k].endTime&&m[l].text===m[k].text&&(g++,1<g&&f.push(m[k]));f.length&&f.forEach(function(u){return p.removeCue(u)})}},Mr=function(p,m,l,f){m=Math.ceil(9E4*(m-f));var g=Math.ceil(9E4*(l-f));l=p.slice();for(f=p.length;f--&&!(p[f].pts<=g););if(-1===f)return l;for(g=f+1;g--&&!(p[g].pts<=m););g=Math.max(g,0);l.splice(g,f-g+1);return l},Nr=function(p,m){if(!p&&!m||!p&&m||p&&!m)return!1;if(p===m)return!0;var l=
Object.keys(p).sort(),f=Object.keys(m).sort();if(l.length!==f.length)return!1;for(var g=0;g<l.length;g++){var k=l[g];if(k!==f[g]||p[k]!==m[k])return!1}return!0},Gf=1/60,Om=function(p){var m=p.segmentTimeline,l=p.currentTimeline,f=p.startOfSegment,g=p.buffered;return p.overrideCheck||m!==l?m<l?f:g.length?g.end(g.length-1):f:null},Pm=function(p){var m=p.timelineChangeController,l=p.segmentTimeline,f=p.loaderType,g=p.audioDisabled;return p.currentTimeline===l?!1:"audio"===f?(p=m.lastTimelineChange({type:"main"}),
!p||p.to!==l):"main"===f&&g?(p=m.pendingTimelineChange({type:"audio"}))&&p.to===l?!1:!0:!1},Qm=function(p){var m=p.segmentDuration;return m?Math.round(m)>p.maxDuration+gd:!1},mi=function(p){function m(f,g){var k=p.call(this)||this;if(!f)throw new TypeError("Initialization settings are required");if("function"!==typeof f.currentTime)throw new TypeError("No currentTime getter specified");if(!f.mediaSource)throw new TypeError("No MediaSource specified");k.bandwidth=f.bandwidth;k.throughput={rate:0,count:0};
k.roundTrip=NaN;k.resetStats_();k.mediaIndex=null;k.hasPlayed_=f.hasPlayed;k.currentTime_=f.currentTime;k.seekable_=f.seekable;k.seeking_=f.seeking;k.duration_=f.duration;k.mediaSource_=f.mediaSource;k.vhs_=f.vhs;k.loaderType_=f.loaderType;k.currentMediaInfo_=void 0;k.startingMediaInfo_=void 0;k.segmentMetadataTrack_=f.segmentMetadataTrack;k.goalBufferLength_=f.goalBufferLength;k.sourceType_=f.sourceType;k.sourceUpdater_=f.sourceUpdater;k.inbandTextTracks_=f.inbandTextTracks;k.state_="INIT";k.handlePartialData_=
f.handlePartialData;k.timelineChangeController_=f.timelineChangeController;k.shouldSaveSegmentTimingInfo_=!0;k.parse708captions_=f.parse708captions;k.checkBufferTimeout_=null;k.error_=void 0;k.currentTimeline_=-1;k.pendingSegment_=null;k.xhrOptions_=null;k.pendingSegments_=[];k.audioDisabled_=!1;k.isPendingTimestampOffset_=!1;k.gopBuffer_=[];k.timeMapping_=0;k.safeAppend_=11<=U.browser.IE_VERSION;k.appendInitSegment_={audio:!0,video:!0};k.playlistOfLastInitSegment_={audio:null,video:null};k.callQueue_=
[];k.loadQueue_=[];k.metadataQueue_={id3:[],caption:[]};k.waitingOnRemove_=!1;k.quotaExceededErrorRetryTimeout_=null;k.activeInitSegmentId_=null;k.initSegments_={};k.cacheEncryptionKeys_=f.cacheEncryptionKeys;k.keyCache_={};k.decrypter_=f.decrypter;k.syncController_=f.syncController;k.syncPoint_={segmentIndex:0,time:0};k.transmuxer_=k.createTransmuxer_();k.triggerSyncInfoUpdate_=function(){return k.trigger("syncinfoupdate")};k.syncController_.on("syncinfoupdate",k.triggerSyncInfoUpdate_);k.mediaSource_.addEventListener("sourceopen",
function(){k.isEndOfStream_()||(k.ended_=!1)});k.fetchAtBuffer_=!1;k.logger_=oc("SegmentLoader["+k.loaderType_+"]");Object.defineProperty(Yb(k),"state",{get:function(){return this.state_},set:function(u){u!==this.state_&&(this.logger_(this.state_+" -> "+u),this.state_=u,this.trigger("statechange"))}});k.sourceUpdater_.on("ready",function(){k.hasEnoughInfoToAppend_()&&k.processCallQueue_()});if("main"===k.loaderType_)k.timelineChangeController_.on("pendingtimelinechange",function(){k.hasEnoughInfoToAppend_()&&
k.processCallQueue_()});if("audio"===k.loaderType_)k.timelineChangeController_.on("timelinechange",function(){k.hasEnoughInfoToLoad_()&&k.processLoadQueue_();k.hasEnoughInfoToAppend_()&&k.processCallQueue_()});return k}Bc(m,p);var l=m.prototype;l.createTransmuxer_=function(){return hi.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,handlePartialData:this.handlePartialData_,parse708captions:this.parse708captions_})};l.resetStats_=function(){this.mediaSecondsLoaded=
this.mediaTransferDuration=this.mediaRequestsErrored=this.mediaRequestsTimedout=this.mediaRequestsAborted=this.mediaRequests=this.mediaBytesTransferred=0};l.dispose=function(){this.trigger("dispose");this.state="DISPOSED";this.pause();this.abort_();this.transmuxer_&&this.transmuxer_.terminate();this.resetStats_();this.checkBufferTimeout_&&ra.clearTimeout(this.checkBufferTimeout_);this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_);
this.off()};l.setAudio=function(f){this.audioDisabled_=!f;f?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())};l.abort=function(){"WAITING"!==this.state?this.pendingSegment_&&(this.pendingSegment_=null):(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_())};l.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests();this.pendingSegment_=null;this.callQueue_=[];this.loadQueue_=[];this.metadataQueue_.id3=
[];this.metadataQueue_.caption=[];this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_);this.waitingOnRemove_=!1;ra.clearTimeout(this.quotaExceededErrorRetryTimeout_);this.quotaExceededErrorRetryTimeout_=null};l.checkForAbort_=function(f){return"APPENDING"!==this.state||this.pendingSegment_?this.pendingSegment_&&this.pendingSegment_.requestId===f?!1:!0:(this.state="READY",!0)};l.error=function(f){"undefined"!==typeof f&&(this.logger_("error occurred:",f),this.error_=f);this.pendingSegment_=
null;return this.error_};l.endOfStream=function(){this.ended_=!0;this.transmuxer_&&hi.reset(this.transmuxer_);this.gopBuffer_.length=0;this.pause();this.trigger("ended")};l.buffered_=function(){if(!this.sourceUpdater_||!this.startingMediaInfo_)return U.createTimeRanges();if("main"===this.loaderType_){var f=this.startingMediaInfo_,g=f.hasAudio,k=f.hasVideo;f=f.isMuxed;if(k&&g&&!this.audioDisabled_&&!f)return this.sourceUpdater_.buffered();if(k)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()};
l.initSegmentForMap=function(f,g){void 0===g&&(g=!1);if(!f)return null;var k=vf(f),u=this.initSegments_[k];g&&!u&&f.bytes&&(this.initSegments_[k]=u={resolvedUri:f.resolvedUri,byterange:f.byterange,bytes:f.bytes,tracks:f.tracks,timescales:f.timescales});return u||f};l.segmentKey=function(f,g){void 0===g&&(g=!1);if(!f)return null;var k=f.resolvedUri,u=this.keyCache_[k];this.cacheEncryptionKeys_&&g&&!u&&f.bytes&&(this.keyCache_[k]=u={resolvedUri:f.resolvedUri,bytes:f.bytes});f={resolvedUri:(u||f).resolvedUri};
u&&(f.bytes=u.bytes);return f};l.couldBeginLoading_=function(){return this.playlist_&&!this.paused()};l.load=function(){this.monitorBuffer_();if(this.playlist_){if("INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}};l.init_=function(){this.state="READY";this.resetEverything();return this.monitorBuffer_()};l.playlist=function(f,g){void 0===g&&(g={});if(f){var k=this.playlist_,u=this.pendingSegment_;
this.playlist_=f;this.xhrOptions_=g;"INIT"===this.state&&(f.syncInfo={mediaSequence:f.mediaSequence,time:0},"main"===this.loaderType_&&this.syncController_.setDateTimeMappingForStart(f));g=null;k&&(k.id?g=k.id:k.uri&&(g=k.uri));this.logger_("playlist update ["+g+" => "+(f.id||f.uri)+"]");this.trigger("syncinfoupdate");if("INIT"===this.state&&this.couldBeginLoading_())return this.init_();k&&k.uri===f.uri?(g=f.mediaSequence-k.mediaSequence,this.logger_("live window shift ["+g+"]"),null!==this.mediaIndex&&
(this.mediaIndex-=g),u&&(u.mediaIndex-=g,0<=u.mediaIndex&&(u.segment=f.segments[u.mediaIndex])),this.syncController_.saveExpiredSegmentInfo(k,f)):((null!==this.mediaIndex||this.handlePartialData_)&&this.resyncLoader(),this.currentMediaInfo_=void 0,this.trigger("playlistupdate"))}};l.pause=function(){this.checkBufferTimeout_&&(ra.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)};l.paused=function(){return null===this.checkBufferTimeout_};l.resetEverything=function(f){this.ended_=
!1;this.appendInitSegment_={audio:!0,video:!0};this.resetLoader();this.remove(0,Infinity,f);this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"})};l.resetLoader=function(){this.fetchAtBuffer_=!1;this.resyncLoader()};l.resyncLoader=function(){this.transmuxer_&&hi.reset(this.transmuxer_);this.syncPoint_=this.mediaIndex=null;this.isPendingTimestampOffset_=!1;this.callQueue_=[];this.loadQueue_=[];this.metadataQueue_.id3=[];this.metadataQueue_.caption=[];this.abort();this.transmuxer_&&
this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})};l.remove=function(f,g,k){void 0===k&&(k=function(){});Infinity===g&&(g=this.duration_());if(this.sourceUpdater_&&this.startingMediaInfo_){var u=1,y=function(){u--;0===u&&k()};this.audioDisabled_||(u++,this.sourceUpdater_.removeAudio(f,g,y));"main"===this.loaderType_&&(this.gopBuffer_=Mr(this.gopBuffer_,f,g,this.timeMapping_),u++,this.sourceUpdater_.removeVideo(f,g,y));for(var A in this.inbandTextTracks_)xe(f,g,this.inbandTextTracks_[A]);
xe(f,g,this.segmentMetadataTrack_);y()}else this.logger_("skipping remove because no source updater or starting media info")};l.monitorBuffer_=function(){this.checkBufferTimeout_&&ra.clearTimeout(this.checkBufferTimeout_);this.checkBufferTimeout_=ra.setTimeout(this.monitorBufferTick_.bind(this),1)};l.monitorBufferTick_=function(){"READY"===this.state&&this.fillBuffer_();this.checkBufferTimeout_&&ra.clearTimeout(this.checkBufferTimeout_);this.checkBufferTimeout_=ra.setTimeout(this.monitorBufferTick_.bind(this),
500)};l.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var f=this.buffered_(),g=this.checkBuffer_(f,this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);g&&(g.timestampOffset=Om({segmentTimeline:g.timeline,currentTimeline:this.currentTimeline_,startOfSegment:g.startOfSegment,buffered:f,overrideCheck:this.isPendingTimestampOffset_}),
this.isPendingTimestampOffset_=!1,"number"===typeof g.timestampOffset&&this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:g.timeline}),this.loadSegment_(g))}};l.isEndOfStream_=function(f,g){void 0===f&&(f=this.mediaIndex);void 0===g&&(g=this.playlist_);if(!g||!this.mediaSource_)return!1;f=f+1===g.segments.length;return g.endList&&"open"===this.mediaSource_.readyState&&f};l.checkBuffer_=function(f,g,k,u,y,A){var H=0;f.length&&(H=f.end(f.length-
1));f=Math.max(0,H-y);if(!g.segments.length||f>=this.goalBufferLength_()||!u&&1<=f)return null;u=!1;if(null===A)H=this.getSyncSegmentCandidate_(g),u=!0;else if(null!==k){var S=(S=g.segments[k])&&S.end?S.end:H;H=k+1}else this.fetchAtBuffer_?(S=Lb.getMediaInfoForTime(g,H,A.segmentIndex,A.time),H=S.mediaIndex,S=S.startTime):(S=Lb.getMediaInfoForTime(g,y,A.segmentIndex,A.time),H=S.mediaIndex,S=S.startTime);if((y=this.generateSegmentInfo_(g,H,S,u))&&(!this.mediaSource_||!this.playlist_||y.mediaIndex!==
this.playlist_.segments.length-1||"ended"!==this.mediaSource_.readyState||this.seeking_()))return this.logger_("checkBuffer_ returning "+y.uri,{segmentInfo:y,playlist:g,currentMediaIndex:k,nextMediaIndex:H,startOfSegment:S,isSyncRequest:u}),y};l.getSyncSegmentCandidate_=function(f){var g=this;if(-1===this.currentTimeline_)return 0;var k=f.segments.map(function(u,y){return{timeline:u.timeline,segmentIndex:y}}).filter(function(u){return u.timeline===g.currentTimeline_});return k.length?k[Math.min(k.length-
1,1)].segmentIndex:Math.max(f.segments.length-1,0)};l.generateSegmentInfo_=function(f,g,k,u){if(0>g||g>=f.segments.length)return null;var y=f.segments[g],A=this.sourceUpdater_.audioBuffered(),H=this.sourceUpdater_.videoBuffered(),S,W;A.length&&(S=A.end(A.length-1)-this.sourceUpdater_.audioTimestampOffset());if(H.length)if(A=this.gopBuffer_,H=this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),"undefined"!==typeof H&&null!==H&&A.length){H=Math.ceil(9E4*(H-this.timeMapping_+3));for(W=0;W<
A.length&&!(A[W].pts>H);W++);W=A.slice(W)}else W=[];return{requestId:"segment-loader-"+Math.random(),uri:y.resolvedUri,mediaIndex:g,isSyncRequest:u,startOfSegment:k,playlist:f,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:y.timeline,duration:y.duration,segment:y,byteLength:0,transmuxer:this.transmuxer_,audioAppendStart:S,gopsToAlignWith:W}};l.earlyAbortWhenNeeded_=function(f){if(!this.vhs_.tech_.paused()&&this.xhrOptions_.timeout&&this.playlist_.attributes.BANDWIDTH&&!(1E3>Date.now()-
(f.firstBytesReceivedAt||Date.now()))){var g=this.currentTime_(),k=f.bandwidth,u=this.pendingSegment_.duration;f=Lb.estimateSegmentRequestTime(u,k,this.playlist_,f.bytesReceived);var y=this.buffered_(),A=this.vhs_.tech_.playbackRate();void 0===A&&(A=1);y=((y.length?y.end(y.length-1):0)-g)/A-1;f<=y||!(g=Hr({master:this.vhs_.playlists.master,currentTime:g,bandwidth:k,duration:this.duration_(),segmentDuration:u,timeUntilRebuffer:y,currentTimeline:this.currentTimeline_,syncController:this.syncController_}))||
(k=f-y-g.rebufferingImpact,u=.5,y<=gd&&(u=1),!g.playlist||g.playlist.uri===this.playlist_.uri||k<u||(this.bandwidth=g.playlist.attributes.BANDWIDTH*qb.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort")))}};l.handleAbort_=function(){this.mediaRequestsAborted+=1};l.handleProgress_=function(f,g){this.earlyAbortWhenNeeded_(g.stats);this.checkForAbort_(g.requestId)||this.trigger("progress")};l.handleTrackInfo_=function(f,g){this.earlyAbortWhenNeeded_(f.stats);this.checkForAbort_(f.requestId)||this.checkForIllegalMediaSwitch(g)||
(g=g||{},Nr(this.currentMediaInfo_,g)||(this.appendInitSegment_={audio:!0,video:!0},this.currentMediaInfo_=this.startingMediaInfo_=g,this.logger_("trackinfo update",g),this.trigger("trackinfo")),this.checkForAbort_(f.requestId)||(this.pendingSegment_.trackInfo=g,this.hasEnoughInfoToAppend_()&&this.processCallQueue_()))};l.handleTimingInfo_=function(f,g,k,u){this.earlyAbortWhenNeeded_(f.stats);if(!this.checkForAbort_(f.requestId)){f=this.pendingSegment_;var y=g+"TimingInfo";f[y]=f[y]||{};f[y][k]=u;
this.logger_("timinginfo: "+g+" - "+k+" - "+u);this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}};l.handleCaptions_=function(f,g){var k=this;this.earlyAbortWhenNeeded_(f.stats);if(!this.checkForAbort_(f.requestId))if(0===g.length)this.logger_("SegmentLoader received no captions from a caption event");else if(this.pendingSegment_.hasAppendedData_){var u=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),y={};
g.forEach(function(A){y[A.stream]=y[A.stream]||{startTime:Infinity,captions:[],endTime:0};var H=y[A.stream];H.startTime=Math.min(H.startTime,A.startTime+u);H.endTime=Math.max(H.endTime,A.endTime+u);H.captions.push(A)});Object.keys(y).forEach(function(A){var H=y[A],S=H.startTime,W=H.endTime;H=H.captions;var M=k.inbandTextTracks_;k.logger_("adding cues from "+S+" -> "+W+" for "+A);var T=k.vhs_.tech_;if(!M[A]){T.trigger({type:"usage",name:"vhs-608"});T.trigger({type:"usage",name:"hls-608"});var R=T.textTracks().getTrackById(A);
M[A]=R?R:T.addRemoteTextTrack({kind:"captions",id:A,label:A},!1).track}xe(S,W,M[A]);Ir({captionArray:H,inbandTextTracks:M,timestampOffset:u})});this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}else this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,f,g))};l.handleId3_=function(f,g,k){this.earlyAbortWhenNeeded_(f.stats);if(!this.checkForAbort_(f.requestId))if(this.pendingSegment_.hasAppendedData_){f=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():
this.sourceUpdater_.videoTimestampOffset();var u=this.inbandTextTracks_;u.metadataTrack_||(u.metadataTrack_=this.vhs_.tech_.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,u.metadataTrack_.inBandMetadataTrackDispatchType=k);Kr({inbandTextTracks:this.inbandTextTracks_,metadataArray:g,timestampOffset:f,videoDuration:this.duration_()})}else this.metadataQueue_.id3.push(this.handleId3_.bind(this,f,g,k))};l.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach(function(f){return f()});
this.metadataQueue_.caption.forEach(function(f){return f()});this.metadataQueue_.id3=[];this.metadataQueue_.caption=[]};l.processCallQueue_=function(){var f=this.callQueue_;this.callQueue_=[];f.forEach(function(g){return g()})};l.processLoadQueue_=function(){var f=this.loadQueue_;this.loadQueue_=[];f.forEach(function(g){return g()})};l.hasEnoughInfoToLoad_=function(){if("audio"!==this.loaderType_)return!0;var f=this.pendingSegment_;return f?this.currentMediaInfo_?Pm({timelineChangeController:this.timelineChangeController_,
currentTimeline:this.currentTimeline_,segmentTimeline:f.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_})?!1:!0:!0:!1};l.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;var f=this.pendingSegment_;if(!f||!f.trackInfo)return!1;if(!this.handlePartialData_){var g=this.currentMediaInfo_,k=g.isMuxed;if(g.hasVideo&&!f.videoTimingInfo||g.hasAudio&&!this.audioDisabled_&&!k&&!f.audioTimingInfo)return!1}return Pm({timelineChangeController:this.timelineChangeController_,
currentTimeline:this.currentTimeline_,segmentTimeline:f.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_})?!1:!0};l.handleData_=function(f,g){this.earlyAbortWhenNeeded_(f.stats);if(!this.checkForAbort_(f.requestId))if(this.callQueue_.length||!this.hasEnoughInfoToAppend_())this.callQueue_.push(this.handleData_.bind(this,f,g));else{var k=this.pendingSegment_;this.setTimeMapping_(k.timeline);this.updateMediaSecondsLoaded_(k.segment);if("closed"!==this.mediaSource_.readyState){f.map&&
(f.map=this.initSegmentForMap(f.map,!0),k.segment.map=f.map);f.key&&this.segmentKey(f.key,!0);k.isFmp4=f.isFmp4;k.timingInfo=k.timingInfo||{};if(k.isFmp4)this.trigger("fmp4"),k.timingInfo.start=k[g.type+"TimingInfo"].start;else{f="main"===this.loaderType_&&this.currentMediaInfo_.hasVideo;var u;f&&(u=this.handlePartialData_?g.videoFramePtsTime:k.videoTimingInfo.start);k.timingInfo.start=this.trueSegmentStart_({currentStart:k.timingInfo.start,playlist:k.playlist,mediaIndex:k.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),
useVideoTimingInfo:f,firstVideoFrameTimeForData:u,videoTimingInfo:k.videoTimingInfo,audioTimingInfo:k.audioTimingInfo})}this.updateAppendInitSegmentStatus(k,g.type);this.updateSourceBufferTimestampOffset_(k);k.hasAppendedData_=!0;this.processMetadataQueue_();this.appendData_(k,g)}}};l.updateAppendInitSegmentStatus=function(f,g){"main"!==this.loaderType_||"number"!==typeof f.timestampOffset||f.changedTimestampOffset||(this.appendInitSegment_={audio:!0,video:!0});this.playlistOfLastInitSegment_[g]!==
f.playlist&&(this.appendInitSegment_[g]=!0)};l.getInitSegmentAndUpdateState_=function(f){var g=f.type,k=f.initSegment,u=f.map;f=f.playlist;if(u){var y=vf(u);if(this.activeInitSegmentId_===y)return null;k=this.initSegmentForMap(u,!0).bytes;this.activeInitSegmentId_=y}return k&&this.appendInitSegment_[g]?(this.playlistOfLastInitSegment_[g]=f,this.appendInitSegment_[g]=u?!0:!1,this.activeInitSegmentId_=null,k):null};l.handleQuotaExceededError_=function(f,g){var k=this;g=f.segmentInfo;var u=f.type;f=
f.bytes;var y=this.sourceUpdater_.audioBuffered(),A=this.sourceUpdater_.videoBuffered();1<y.length&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+hd(y).join(", "));1<A.length&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+hd(A).join(", "));var H=y.length?y.start(0):0,S=y.length?y.end(y.length-1):0,W=A.length?A.start(0):0,M=A.length?A.end(A.length-1):0;if(1>=S-H&&1>=M-W)this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: "+
(f.byteLength+", audio buffer: ")+(hd(y).join(", ")+", video buffer: ")+(hd(A).join(", ")+", ")),this.error({message:"Quota exceeded error with append of a single segment of content",blacklistDuration:Infinity}),this.trigger("error");else{this.waitingOnRemove_=!0;this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:g,type:u,bytes:f}));var T=this.currentTime_()-1;this.logger_("On QUOTA_EXCEEDED_ERR, removing video from 0 to "+T);this.sourceUpdater_.removeVideo(0,T,function(){k.logger_("On QUOTA_EXCEEDED_ERR, removing audio from 0 to "+
T);k.sourceUpdater_.removeAudio(0,T,function(){k.logger_("On QUOTA_EXCEEDED_ERR, retrying append in 1s");k.waitingOnRemove_=!1;k.quotaExceededErrorRetryTimeout_=ra.setTimeout(function(){k.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue");k.quotaExceededErrorRetryTimeout_=null;k.processCallQueue_()},1E3)})})}};l.handleAppendError_=function(f,g){var k=f.segmentInfo,u=f.type;f=f.bytes;g&&(22===g.code?this.handleQuotaExceededError_({segmentInfo:k,type:u,bytes:f}):(this.logger_("Received non QUOTA_EXCEEDED_ERR on append",
g),this.error(u+" append of "+f.length+"b failed for segment #"+(k.mediaIndex+" in playlist "+k.playlist.id)),this.trigger("appenderror")))};l.appendToSourceBuffer_=function(f){var g=f.segmentInfo,k=f.type,u=f.initSegment,y=f.data;f=f.bytes;f||(f=[y],y=y.byteLength,u&&(f.unshift(u),y+=u.byteLength),f=wr({bytes:y,segments:f}));this.sourceUpdater_.appendBuffer({segmentInfo:g,type:k,bytes:f},this.handleAppendError_.bind(this,{segmentInfo:g,type:k,bytes:f}))};l.handleSegmentTimingInfo_=function(f,g,k){this.pendingSegment_&&
g===this.pendingSegment_.requestId&&(g=this.pendingSegment_.segment,f+="TimingInfo",g[f]||(g[f]={}),g[f].transmuxerPrependedSeconds=k.prependedContentDuration||0,g[f].transmuxedPresentationStart=k.start.presentation,g[f].transmuxedDecodeStart=k.start.decode,g[f].transmuxedPresentationEnd=k.end.presentation,g[f].transmuxedDecodeEnd=k.end.decode,g[f].baseMediaDecodeTime=k.baseMediaDecodeTime)};l.appendData_=function(f,g){var k=g.type,u=g.data;!u||!u.byteLength||"audio"===k&&this.audioDisabled_||(g=
this.getInitSegmentAndUpdateState_({type:k,initSegment:g.initSegment,playlist:f.playlist,map:f.isFmp4?f.segment.map:null}),this.appendToSourceBuffer_({segmentInfo:f,type:k,initSegment:g,data:u}))};l.loadSegment_=function(f){var g=this;this.state="WAITING";this.pendingSegment_=f;this.trimBackBuffer_(f);"number"===typeof f.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"});this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(f):this.loadQueue_.push(function(){var k=
g.buffered_();"number"===typeof f.timestampOffset&&(f.timestampOffset=Om({segmentTimeline:f.timeline,currentTimeline:g.currentTimeline_,startOfSegment:f.startOfSegment,buffered:k,overrideCheck:!0}));delete f.audioAppendStart;k=g.sourceUpdater_.audioBuffered();k.length&&(f.audioAppendStart=k.end(k.length-1)-g.sourceUpdater_.audioTimestampOffset());g.updateTransmuxerAndRequestSegment_(f)})};l.updateTransmuxerAndRequestSegment_=function(f){var g=this;this.shouldUpdateTransmuxerTimestampOffset_(f.timestampOffset)&&
(this.gopBuffer_.length=0,f.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:f.timestampOffset}));var k=this.createSimplifiedSegmentObj_(f),u=this.isEndOfStream_(f.mediaIndex,f.playlist),y=null!==this.mediaIndex,A=f.timeline!==this.currentTimeline_&&0<f.timeline;u=u||y&&A;f.abortRequests=Fr({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:k,handlePartialData:this.handlePartialData_,
abortFn:this.handleAbort_.bind(this),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",f.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",f.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:u,endedTimelineFn:function(){g.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),
dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this)})};l.trimBackBuffer_=function(f){f=this.seekable_();var g=this.currentTime_(),k=this.playlist_.targetDuration||10,u=g-qb.BACK_BUFFER_LENGTH;f.length&&(u=Math.max(u,f.start(0)));f=Math.min(g-k,u);0<f&&this.remove(0,f)};l.createSimplifiedSegmentObj_=function(f){var g=f.segment,k={resolvedUri:g.resolvedUri,byterange:g.byterange,requestId:f.requestId,transmuxer:f.transmuxer,audioAppendStart:f.audioAppendStart,gopsToAlignWith:f.gopsToAlignWith},
u=f.playlist.segments[f.mediaIndex-1];u&&u.timeline===g.timeline&&(u.videoTimingInfo?k.baseStartTime=u.videoTimingInfo.transmuxedDecodeEnd:u.audioTimingInfo&&(k.baseStartTime=u.audioTimingInfo.transmuxedDecodeEnd));g.key&&(f=g.key.iv||new Uint32Array([0,0,0,f.mediaIndex+f.playlist.mediaSequence]),k.key=this.segmentKey(g.key),k.key.iv=f);g.map&&(k.map=this.initSegmentForMap(g.map));return k};l.saveTransferStats_=function(f){this.mediaRequests+=1;f&&(this.mediaBytesTransferred+=f.bytesReceived,this.mediaTransferDuration+=
f.roundTripTime)};l.saveBandwidthRelatedStats_=function(f,g){this.pendingSegment_.byteLength=g.bytesReceived;f<Gf?this.logger_("Ignoring segment's bandwidth because its duration of "+f+(" is less than the min to record "+Gf)):(this.bandwidth=g.bandwidth,this.roundTrip=g.roundTripTime)};l.handleTimeout_=function(){this.mediaRequestsTimedout+=1;this.bandwidth=1;this.roundTrip=NaN;this.trigger("bandwidthupdate")};l.segmentRequestFinished_=function(f,g,k){if(this.callQueue_.length)this.callQueue_.push(this.segmentRequestFinished_.bind(this,
f,g,k));else if(this.saveTransferStats_(g.stats),this.pendingSegment_&&g.requestId===this.pendingSegment_.requestId)if(f)this.pendingSegment_=null,this.state="READY",-102!==f.code&&(this.pause(),-101===f.code?this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(f),this.trigger("error")));else{f=this.pendingSegment_;this.saveBandwidthRelatedStats_(f.duration,g.stats);f.endOfAllRequests=g.endOfAllRequests;if(k.gopInfo){g=this.gopBuffer_;k=k.gopInfo;if(k.length)if(this.safeAppend_)g=k.slice();
else{var u=k[0].pts,y=0;for(y;y<g.length&&!(g[y].pts>=u);y++);g=g.slice(0,y).concat(k)}this.gopBuffer_=g}this.state="APPENDING";this.trigger("appending");this.waitForAppendsToComplete_(f)}};l.setTimeMapping_=function(f){f=this.syncController_.mappingForTimeline(f);null!==f&&(this.timeMapping_=f)};l.updateMediaSecondsLoaded_=function(f){this.mediaSecondsLoaded="number"===typeof f.start&&"number"===typeof f.end?this.mediaSecondsLoaded+(f.end-f.start):this.mediaSecondsLoaded+f.duration};l.shouldUpdateTransmuxerTimestampOffset_=
function(f){return null===f?!1:"main"===this.loaderType_&&f!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&f!==this.sourceUpdater_.audioTimestampOffset()?!0:!1};l.trueSegmentStart_=function(f){var g=f.currentStart,k=f.mediaIndex,u=f.firstVideoFrameTimeForData,y=f.currentVideoTimestampOffset,A=f.audioTimingInfo;if("undefined"!==typeof g)return g;if(!f.useVideoTimingInfo)return A.start;g=f.playlist.segments[k-1];return 0!==k&&g&&"undefined"!==typeof g.start&&g.end===u+y?f.videoTimingInfo.start:
u};l.waitForAppendsToComplete_=function(f){if(this.currentMediaInfo_){var g=this.currentMediaInfo_,k=g.hasAudio,u=g.hasVideo;g=g.isMuxed;u="main"===this.loaderType_&&u;k=!this.audioDisabled_&&k&&!g;f.waitingOnAppends=0;f.hasAppendedData_?(u&&f.waitingOnAppends++,k&&f.waitingOnAppends++,u&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,f)),k&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,f))):(f.timingInfo||"number"!==typeof f.timestampOffset||(this.isPendingTimestampOffset_=
!0),f.timingInfo={start:0},f.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(f),this.processMetadataQueue_()),this.checkAppendsDone_(f))}else this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:Infinity}),this.trigger("error")};l.checkAppendsDone_=function(f){this.checkForAbort_(f.requestId)||(f.waitingOnAppends--,0===f.waitingOnAppends&&this.handleAppendsDone_())};l.checkForIllegalMediaSwitch=function(f){var g=
this.currentMediaInfo_;return(f="main"===this.loaderType_&&g&&f?f.hasAudio||f.hasVideo?g.hasVideo&&!f.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!g.hasVideo&&f.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":
null:"Neither audio nor video found in segment.":null)?(this.error({message:f,blacklistDuration:Infinity}),this.trigger("error"),!0):!1};l.updateSourceBufferTimestampOffset_=function(f){if(null!==f.timestampOffset&&"number"===typeof f.timingInfo.start&&!f.changedTimestampOffset&&"main"===this.loaderType_){var g=!1;f.timestampOffset-=f.timingInfo.start;f.changedTimestampOffset=!0;f.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(f.timestampOffset),
g=!0);f.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(f.timestampOffset),g=!0);g&&this.trigger("timestampoffset")}};l.updateTimingInfoEnd_=function(f){f.timingInfo=f.timingInfo||{};var g="main"===this.loaderType_&&this.currentMediaInfo_.hasVideo&&f.videoTimingInfo?f.videoTimingInfo:f.audioTimingInfo;g&&(f.timingInfo.end="number"===typeof g.end?g.end:g.start+f.duration)};l.handleAppendsDone_=function(){this.pendingSegment_&&this.trigger("appendsdone");
if(this.pendingSegment_){var f=this.pendingSegment_;this.updateTimingInfoEnd_(f);this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:f,shouldSaveTimelineMapping:"main"===this.loaderType_});var g=this.logger_;var k=f.segment;var u=f.playlist,y=u.mediaSequence,A=u.segments;k=["appending ["+f.mediaIndex+"] of ["+y+", "+(y+(void 0===A?[]:A).length)+"] from playlist ["+u.id+"]","["+k.start+" => "+k.end+"] in timeline ["+f.timeline+"]"].join(" ");g.call(this,k);"hls"!==
this.sourceType_?g=null:(g=f.audioTimingInfo,k=f.videoTimingInfo,(u=Math.max(g&&"number"===typeof g.start&&"number"===typeof g.end?g.end-g.start:0,k&&"number"===typeof k.start&&"number"===typeof k.end?k.end-k.start:0))?(y=f.playlist.targetDuration,g=Qm({segmentDuration:u,maxDuration:2*y}),k=Qm({segmentDuration:u,maxDuration:y}),u="Segment with index "+f.mediaIndex+" from playlist "+(f.playlist.id+" has a duration of ")+(u+" when the reported duration is ")+(f.duration+" and the target duration is ")+
(y+". For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1"),g=g||k?{severity:g?"warn":"info",message:u}:null):g=null);g&&("warn"===g.severity?U.log.warn(g.message):this.logger_(g.message));this.recordThroughput_(f);this.pendingSegment_=null;this.state="READY";f.isSyncRequest?this.trigger("syncinfoupdate"):
(this.addSegmentMetadataCue_(f),this.fetchAtBuffer_=!0,this.currentTimeline_!==f.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:f.timeline}),"main"!==this.loaderType_||this.audioDisabled_||this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:f.timeline})),this.currentTimeline_=f.timeline,this.trigger("syncinfoupdate"),g=f.segment,g.end&&this.currentTime_()-g.end>3*f.playlist.targetDuration?
this.resetEverything():(null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=f.mediaIndex,this.isEndOfStream_(f.mediaIndex,f.playlist)&&this.endOfStream(),this.trigger("appended"),this.paused()||this.monitorBuffer_()))}else this.state="READY",this.paused()||this.monitorBuffer_()};l.recordThroughput_=function(f){if(f.duration<Gf)this.logger_("Ignoring segment's throughput because its duration of "+f.duration+(" is less than the min to record "+Gf));else{var g=
this.throughput.rate,k=Date.now()-f.endOfAllRequests+1;this.throughput.rate+=(Math.floor(f.byteLength/k*8E3)-g)/++this.throughput.count}};l.addSegmentMetadataCue_=function(f){if(this.segmentMetadataTrack_){var g=f.segment,k=g.start,u=g.end;if("number"===typeof k&&isFinite(k)&&"number"===typeof u&&isFinite(u)){xe(k,u,this.segmentMetadataTrack_);var y=ra.WebKitDataCue||ra.VTTCue;f={custom:g.custom,dateTimeObject:g.dateTimeObject,dateTimeString:g.dateTimeString,bandwidth:f.playlist.attributes.BANDWIDTH,
resolution:f.playlist.attributes.RESOLUTION,codecs:f.playlist.attributes.CODECS,byteLength:f.byteLength,uri:f.uri,timeline:f.timeline,playlist:f.playlist.id,start:k,end:u};g=JSON.stringify(f);k=new y(k,u,g);k.value=f;this.segmentMetadataTrack_.addCue(k)}}};return m}(U.EventTarget),Rm=function(p){return"string"!==typeof p?p:p.replace(/./,function(m){return m.toUpperCase()})},Or=["video","audio"],ni=function(p,m){var l=m[p+"Buffer"];return l&&l.updating||m.queuePending[p]},oi=function f(m,l){if(0!==
l.queue.length){var g=0,k=l.queue[g];if("mediaSource"===k.type)l.updating()||"closed"===l.mediaSource.readyState||(l.queue.shift(),k.action(l),k.doneFn&&k.doneFn(),f("audio",l),f("video",l));else if("mediaSource"!==m&&l.ready()&&"closed"!==l.mediaSource.readyState&&!ni(m,l)){if(k.type!==m){a:{g=l.queue;for(k=0;k<g.length;k++){var u=g[k];if("mediaSource"===u.type){g=null;break a}if(u.type===m){g=k;break a}}g=null}if(null===g)return;k=l.queue[g]}l.queue.splice(g,1);l.queuePending[m]=k;k.action(m,l);
k.doneFn||(l.queuePending[m]=null,f(m,l))}}},Sm=function(m,l){var f=l[m+"Buffer"],g=Rm(m);f&&(f.removeEventListener("updateend",l["on"+g+"UpdateEnd_"]),f.removeEventListener("error",l["on"+g+"Error_"]),l.codecs[m]=null,l[m+"Buffer"]=null)},sc=function(m,l){return m&&l&&-1!==Array.prototype.indexOf.call(m.sourceBuffers,l)},Tb={appendBuffer:function(m,l,f){return function(g,k){var u=k[g+"Buffer"];if(sc(k.mediaSource,u)){k.logger_("Appending segment "+l.mediaIndex+"'s "+m.length+" bytes to "+g+"Buffer");
try{u.appendBuffer(m)}catch(y){k.logger_("Error with code "+y.code+" "+(22===y.code?"(QUOTA_EXCEEDED_ERR) ":"")+("when appending segment "+l.mediaIndex+" to "+g+"Buffer")),k.queuePending[g]=null,f(y)}}}},remove:function(m,l){return function(f,g){var k=g[f+"Buffer"];sc(g.mediaSource,k)&&(g.logger_("Removing "+m+" to "+l+" from "+f+"Buffer"),k.remove(m,l))}},timestampOffset:function(m){return function(l,f){var g=f[l+"Buffer"];sc(f.mediaSource,g)&&(f.logger_("Setting "+l+"timestampOffset to "+m),g.timestampOffset=
m)}},callback:function(m){return function(l,f){m()}},endOfStream:function(m){return function(l){if("open"===l.mediaSource.readyState){l.logger_("Calling mediaSource endOfStream("+(m||"")+")");try{l.mediaSource.endOfStream(m)}catch(f){U.log.warn("Failed to call media source endOfStream",f)}}}},duration:function(m){return function(l){l.logger_("Setting mediaSource duration to "+m);try{l.mediaSource.duration=m}catch(f){U.log.warn("Failed to set media source duration",f)}}},abort:function(){return function(m,
l){if("open"===l.mediaSource.readyState){var f=l[m+"Buffer"];if(sc(l.mediaSource,f)){l.logger_("calling abort on "+m+"Buffer");try{f.abort()}catch(g){U.log.warn("Failed to abort on "+m+"Buffer",g)}}}}},addSourceBuffer:function(m,l){return function(f){var g=Rm(m),k=Hh(l);f.logger_("Adding "+m+"Buffer with codec "+l+" to mediaSource");k=f.mediaSource.addSourceBuffer(k);k.addEventListener("updateend",f["on"+g+"UpdateEnd_"]);k.addEventListener("error",f["on"+g+"Error_"]);f.codecs[m]=l;f[m+"Buffer"]=k}},
removeSourceBuffer:function(m){return function(l){var f=l[m+"Buffer"];Sm(m,l);if(sc(l.mediaSource,f)){l.logger_("Removing "+m+"Buffer with codec "+l.codecs[m]+" from mediaSource");try{l.mediaSource.removeSourceBuffer(f)}catch(g){U.log.warn("Failed to removeSourceBuffer "+m+"Buffer",g)}}}},changeType:function(m){return function(l,f){var g=f[l+"Buffer"],k=Hh(m);sc(f.mediaSource,g)&&f.codecs[l]!==m&&(f.logger_("changing "+l+"Buffer codec from "+f.codecs[l]+" to "+m),g.changeType(k),f.codecs[l]=m)}}},
Ub=function(m){var l=m.type,f=m.sourceUpdater;f.queue.push({type:l,action:m.action,doneFn:m.doneFn,name:m.name});oi(l,f)},Tm=function(m,l){return function(f){l.queuePending[m]&&(f=l.queuePending[m].doneFn,l.queuePending[m]=null,f&&f(l[m+"Error_"]));oi(m,l)}},Um=function(m){function l(g){var k=m.call(this)||this;k.mediaSource=g;k.sourceopenListener_=function(){return oi("mediaSource",Yb(k))};k.mediaSource.addEventListener("sourceopen",k.sourceopenListener_);k.logger_=oc("SourceUpdater");k.audioTimestampOffset_=
0;k.videoTimestampOffset_=0;k.queue=[];k.queuePending={audio:null,video:null};k.delayedAudioAppendQueue_=[];k.videoAppendQueued_=!1;k.codecs={};k.onVideoUpdateEnd_=Tm("video",Yb(k));k.onAudioUpdateEnd_=Tm("audio",Yb(k));k.onVideoError_=function(u){k.videoError_=u};k.onAudioError_=function(u){k.audioError_=u};k.createdSourceBuffers_=!1;k.initializedEme_=!1;k.triggeredReady_=!1;return k}Bc(l,m);var f=l.prototype;f.initializedEme=function(){this.initializedEme_=!0;this.triggerReady()};f.hasCreatedSourceBuffers=
function(){return this.createdSourceBuffers_};f.hasInitializedAnyEme=function(){return this.initializedEme_};f.ready=function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()};f.createSourceBuffers=function(g){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(g),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())};f.triggerReady=function(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))};f.addSourceBuffer=
function(g,k){Ub({type:"mediaSource",sourceUpdater:this,action:Tb.addSourceBuffer(g,k),name:"addSourceBuffer"})};f.abort=function(g){Ub({type:g,sourceUpdater:this,action:Tb.abort(g),name:"abort"})};f.removeSourceBuffer=function(g){this.canRemoveSourceBuffer()?Ub({type:"mediaSource",sourceUpdater:this,action:Tb.removeSourceBuffer(g),name:"removeSourceBuffer"}):U.log.error("removeSourceBuffer is not supported!")};f.canRemoveSourceBuffer=function(){return!U.browser.IE_VERSION&&!U.browser.IS_FIREFOX&&
ra.MediaSource&&ra.MediaSource.prototype&&"function"===typeof ra.MediaSource.prototype.removeSourceBuffer};l.canChangeType=function(){return ra.SourceBuffer&&ra.SourceBuffer.prototype&&"function"===typeof ra.SourceBuffer.prototype.changeType};f.canChangeType=function(){return this.constructor.canChangeType()};f.changeType=function(g,k){this.canChangeType()?Ub({type:g,sourceUpdater:this,action:Tb.changeType(k),name:"changeType"}):U.log.error("changeType is not supported!")};f.addOrChangeSourceBuffers=
function(g){var k=this;if(!g||"object"!==typeof g||0===Object.keys(g).length)throw Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(g).forEach(function(u){var y=g[u];if(!k.hasCreatedSourceBuffers())return k.addSourceBuffer(u,y);k.canChangeType()&&k.changeType(u,y)})};f.appendBuffer=function(g,k){var u=this,y=g.segmentInfo,A=g.type,H=g.bytes;this.processedAppend_=!0;"audio"===A&&this.videoBuffer&&!this.videoAppendQueued_?(this.delayedAudioAppendQueue_.push([g,k]),this.logger_("delayed audio append of "+
H.length+" until video append")):(Ub({type:A,sourceUpdater:this,action:Tb.appendBuffer(H,y||{mediaIndex:-1},k),doneFn:k,name:"appendBuffer"}),"video"===A&&(this.videoAppendQueued_=!0,this.delayedAudioAppendQueue_.length&&(g=this.delayedAudioAppendQueue_.slice(),this.logger_("queuing delayed audio "+g.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,g.forEach(function(S){u.appendBuffer.apply(u,S)}))))};f.audioBuffered=function(){return sc(this.mediaSource,this.audioBuffer)?this.audioBuffer.buffered?
this.audioBuffer.buffered:U.createTimeRange():U.createTimeRange()};f.videoBuffered=function(){return sc(this.mediaSource,this.videoBuffer)?this.videoBuffer.buffered?this.videoBuffer.buffered:U.createTimeRange():U.createTimeRange()};f.buffered=function(){var g=sc(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,k=sc(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return k&&!g?this.audioBuffered():g&&!k?this.videoBuffered():xq(this.audioBuffered(),this.videoBuffered())};f.setDuration=
function(g,k){void 0===k&&(k=Oc);Ub({type:"mediaSource",sourceUpdater:this,action:Tb.duration(g),name:"duration",doneFn:k})};f.endOfStream=function(g,k){void 0===g&&(g=null);void 0===k&&(k=Oc);"string"!==typeof g&&(g=void 0);Ub({type:"mediaSource",sourceUpdater:this,action:Tb.endOfStream(g),name:"endOfStream",doneFn:k})};f.removeAudio=function(g,k,u){void 0===u&&(u=Oc);this.audioBuffered().length&&0!==this.audioBuffered().end(0)?Ub({type:"audio",sourceUpdater:this,action:Tb.remove(g,k),doneFn:u,name:"remove"}):
u()};f.removeVideo=function(g,k,u){void 0===u&&(u=Oc);this.videoBuffered().length&&0!==this.videoBuffered().end(0)?Ub({type:"video",sourceUpdater:this,action:Tb.remove(g,k),doneFn:u,name:"remove"}):u()};f.updating=function(){return ni("audio",this)||ni("video",this)?!0:!1};f.audioTimestampOffset=function(g){"undefined"!==typeof g&&this.audioBuffer&&this.audioTimestampOffset_!==g&&(Ub({type:"audio",sourceUpdater:this,action:Tb.timestampOffset(g),name:"timestampOffset"}),this.audioTimestampOffset_=
g);return this.audioTimestampOffset_};f.videoTimestampOffset=function(g){"undefined"!==typeof g&&this.videoBuffer&&this.videoTimestampOffset!==g&&(Ub({type:"video",sourceUpdater:this,action:Tb.timestampOffset(g),name:"timestampOffset"}),this.videoTimestampOffset_=g);return this.videoTimestampOffset_};f.audioQueueCallback=function(g){this.audioBuffer&&Ub({type:"audio",sourceUpdater:this,action:Tb.callback(g),name:"callback"})};f.videoQueueCallback=function(g){this.videoBuffer&&Ub({type:"video",sourceUpdater:this,
action:Tb.callback(g),name:"callback"})};f.dispose=function(){var g=this;this.trigger("dispose");Or.forEach(function(k){g.abort(k);if(g.canRemoveSourceBuffer())g.removeSourceBuffer(k);else g[k+"QueueCallback"](function(){return Sm(k,g)})});this.videoAppendQueued_=!1;this.delayedAudioAppendQueue_.length=0;this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_);this.off()};return l}(U.EventTarget),Vm=new Uint8Array(["\n","\n"].map(function(m){return m.charCodeAt(0)})),
Pr=function(m){function l(g,k){void 0===k&&(k={});k=m.call(this,g,k)||this;k.handlePartialData_=!1;k.mediaSource_=null;k.subtitlesTrack_=null;k.loaderType_="subtitle";k.featuresNativeTextTracks_=g.featuresNativeTextTracks;k.shouldSaveSegmentTimingInfo_=!1;return k}Bc(l,m);var f=l.prototype;f.createTransmuxer_=function(){return null};f.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return U.createTimeRanges();var g=this.subtitlesTrack_.cues;
return U.createTimeRanges([[g[0].startTime,g[g.length-1].startTime]])};f.initSegmentForMap=function(g,k){void 0===k&&(k=!1);if(!g)return null;var u=vf(g),y=this.initSegments_[u];k&&!y&&g.bytes&&(k=new Uint8Array(Vm.byteLength+g.bytes.byteLength),k.set(g.bytes),k.set(Vm,g.bytes.byteLength),this.initSegments_[u]=y={resolvedUri:g.resolvedUri,byterange:g.byterange,bytes:k});return y||g};f.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()};f.init_=function(){this.state=
"READY";this.resetEverything();return this.monitorBuffer_()};f.track=function(g){if("undefined"===typeof g)return this.subtitlesTrack_;this.subtitlesTrack_=g;"INIT"===this.state&&this.couldBeginLoading_()&&this.init_();return this.subtitlesTrack_};f.remove=function(g,k){xe(g,k,this.subtitlesTrack_)};f.fillBuffer_=function(){var g=this;this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var k=this.checkBuffer_(this.buffered_(),
this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(k=this.skipEmptySegments_(k))null===this.syncController_.timestampOffsetForTimeline(k.timeline)?(this.syncController_.one("timestampoffset",function(){g.state="READY";g.paused()||g.monitorBuffer_()}),this.state="WAITING_ON_TIMELINE"):this.loadSegment_(k)};f.skipEmptySegments_=function(g){for(;g&&g.segment.empty;)g=this.generateSegmentInfo_(g.playlist,g.mediaIndex+1,g.startOfSegment+g.duration,g.isSyncRequest);
return g};f.stopForError=function(g){this.error(g);this.state="READY";this.pause();this.trigger("error")};f.segmentRequestFinished_=function(g,k,u){var y=this;if(this.subtitlesTrack_)if(this.saveTransferStats_(k.stats),this.pendingSegment_)if(g)-101===g.code&&this.handleTimeout_(),-102===g.code?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(g);else{var A=this.pendingSegment_;this.saveBandwidthRelatedStats_(A.duration,k.stats);this.state="APPENDING";this.trigger("appending");
var H=A.segment;H.map&&(H.map.bytes=k.map.bytes);A.bytes=k.bytes;if("function"!==typeof ra.WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var S=function(){y.subtitlesTrack_.tech_.off("vttjsloaded",W);y.stopForError({message:"Error loading vtt.js"})};var W=function(){y.subtitlesTrack_.tech_.off("vttjserror",S);y.segmentRequestFinished_(g,k,u)};this.state="WAITING_ON_VTTJS";this.subtitlesTrack_.tech_.one("vttjsloaded",W);this.subtitlesTrack_.tech_.one("vttjserror",S)}else{H.requested=!0;
try{this.parseVTTCues_(A)}catch(M){this.stopForError({message:M.message});return}this.updateTimeMapping_(A,this.syncController_.timelines[A.timeline],this.playlist_);A.timingInfo=A.cues.length?{start:A.cues[0].startTime,end:A.cues[A.cues.length-1].endTime}:{start:A.startOfSegment,end:A.startOfSegment+A.duration};A.isSyncRequest?(this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY"):(A.byteLength=A.bytes.byteLength,this.mediaSecondsLoaded+=H.duration,A.cues.forEach(function(M){y.subtitlesTrack_.addCue(y.featuresNativeTextTracks_?
new ra.VTTCue(M.startTime,M.endTime,M.text):M)}),Lr(this.subtitlesTrack_),this.handleAppendsDone_())}}else this.state="READY",this.mediaRequestsAborted+=1;else this.state="READY"};f.handleData_=function(){};f.updateTimingInfoEnd_=function(){};f.parseVTTCues_=function(g){var k=!1;if("function"===typeof ra.TextDecoder)var u=new ra.TextDecoder("utf8");else u=ra.WebVTT.StringDecoder(),k=!0;u=new ra.WebVTT.Parser(ra,ra.vttjs,u);g.cues=[];g.timestampmap={MPEGTS:0,LOCAL:0};u.oncue=g.cues.push.bind(g.cues);
u.ontimestampmap=function(A){g.timestampmap=A};u.onparsingerror=function(A){U.log.warn("Error encountered when parsing cues: "+A.message)};if(g.segment.map){var y=g.segment.map.bytes;k&&(y=decodeURIComponent(escape(String.fromCharCode.apply(null,y))));u.parse(y)}y=g.bytes;k&&(y=decodeURIComponent(escape(String.fromCharCode.apply(null,y))));u.parse(y);u.flush()};f.updateTimeMapping_=function(g,k,u){var y=g.segment;if(k)if(g.cues.length){var A=g.timestampmap,H=A.MPEGTS/9E4-A.LOCAL+k.mapping;g.cues.forEach(function(S){S.startTime+=
H;S.endTime+=H});u.syncInfo||(u.syncInfo={mediaSequence:u.mediaSequence+g.mediaIndex,time:Math.min(g.cues[0].startTime,g.cues[g.cues.length-1].startTime-y.duration)})}else y.empty=!0};return l}(mi),Wm=[{name:"VOD",run:function(m,l,f,g,k){return Infinity!==f?{time:0,segmentIndex:0}:null}},{name:"ProgramDateTime",run:function(m,l,f,g,k){if(!Object.keys(m.timelineToDatetimeMappings).length)return null;l=l.segments||[];g=f=null;k=k||0;for(var u=0;u<l.length;u++){var y=l[u],A=m.timelineToDatetimeMappings[y.timeline];
if(A&&y.dateTimeObject){y=y.dateTimeObject.getTime()/1E3+A;A=Math.abs(k-y);if(null!==g&&(0===A||g<A))break;g=A;f={time:y,segmentIndex:u}}}return f}},{name:"Segment",run:function(m,l,f,g,k){m=l.segments||[];f=l=null;k=k||0;for(var u=0;u<m.length;u++){var y=m[u];if(y.timeline===g&&"undefined"!==typeof y.start){var A=Math.abs(k-y.start);if(null!==f&&f<A)break;if(!l||null===f||f>=A)f=A,l={time:y.start,segmentIndex:u}}}return l}},{name:"Discontinuity",run:function(m,l,f,g,k){f=null;k=k||0;if(l.discontinuityStarts&&
l.discontinuityStarts.length){g=null;for(var u=0;u<l.discontinuityStarts.length;u++){var y=l.discontinuityStarts[u],A=m.discontinuities[l.discontinuitySequence+u+1];if(A){var H=Math.abs(k-A.time);if(null!==g&&g<H)break;if(!f||null===g||g>=H)g=H,f={time:A.time,segmentIndex:y}}}}return f}},{name:"Playlist",run:function(m,l,f,g,k){return l.syncInfo?{time:l.syncInfo.time,segmentIndex:l.syncInfo.mediaSequence-l.mediaSequence}:null}}],Qr=function(m){function l(g){g=m.call(this)||this;g.timelines=[];g.discontinuities=
[];g.timelineToDatetimeMappings={};g.logger_=oc("SyncController");return g}Bc(l,m);var f=l.prototype;f.getSyncPoint=function(g,k,u,y){g=this.runStrategies_(g,k,u,y);return g.length?this.selectSyncPoint_(g,{key:"time",value:y}):null};f.getExpiredTime=function(g,k){if(!g||!g.segments)return null;k=this.runStrategies_(g,k,g.discontinuitySequence,0);if(!k.length)return null;k=this.selectSyncPoint_(k,{key:"segmentIndex",value:0});0<k.segmentIndex&&(k.time*=-1);return Math.abs(k.time+re(g,k.segmentIndex,
0))};f.runStrategies_=function(g,k,u,y){for(var A=[],H=0;H<Wm.length;H++){var S=Wm[H],W=S.run(this,g,k,u,y);W&&(W.strategy=S.name,A.push({strategy:S.name,syncPoint:W}))}return A};f.selectSyncPoint_=function(g,k){for(var u=g[0].syncPoint,y=Math.abs(g[0].syncPoint[k.key]-k.value),A=g[0].strategy,H=1;H<g.length;H++){var S=Math.abs(g[H].syncPoint[k.key]-k.value);S<y&&(y=S,u=g[H].syncPoint,A=g[H].strategy)}this.logger_("syncPoint for ["+k.key+": "+k.value+"] chosen with strategy ["+(A+"]: [time:"+u.time+
", segmentIndex:")+(u.segmentIndex+"]"));return u};f.saveExpiredSegmentInfo=function(g,k){for(var u=k.mediaSequence-g.mediaSequence-1;0<=u;u--){var y=g.segments[u];if(y&&"undefined"!==typeof y.start){k.syncInfo={mediaSequence:g.mediaSequence+u,time:y.start};this.logger_("playlist refresh sync: [time:"+k.syncInfo.time+", mediaSequence: "+(k.syncInfo.mediaSequence+"]"));this.trigger("syncinfoupdate");break}}};f.setDateTimeMappingForStart=function(g){this.timelineToDatetimeMappings={};if(g.segments&&
g.segments.length&&g.segments[0].dateTimeObject){g=g.segments[0];var k=g.dateTimeObject.getTime()/1E3;this.timelineToDatetimeMappings[g.timeline]=-k}};f.saveSegmentTimingInfo=function(g){var k=g.segmentInfo;g=g.shouldSaveTimelineMapping;var u=this.calculateSegmentTimeMapping_(k,k.timingInfo,g),y=k.segment;u&&(this.saveDiscontinuitySyncInfo_(k),k.playlist.syncInfo||(k.playlist.syncInfo={mediaSequence:k.playlist.mediaSequence+k.mediaIndex,time:y.start}));k=y.dateTimeObject;y.discontinuity&&g&&k&&(this.timelineToDatetimeMappings[y.timeline]=
-(k.getTime()/1E3))};f.timestampOffsetForTimeline=function(g){return"undefined"===typeof this.timelines[g]?null:this.timelines[g].time};f.mappingForTimeline=function(g){return"undefined"===typeof this.timelines[g]?null:this.timelines[g].mapping};f.calculateSegmentTimeMapping_=function(g,k,u){var y=g.segment,A=this.timelines[g.timeline];if("number"===typeof g.timestampOffset)A={time:g.startOfSegment,mapping:g.startOfSegment-k.start},u&&(this.timelines[g.timeline]=A,this.trigger("timestampoffset"),
this.logger_("time mapping for timeline "+g.timeline+": [time: "+(A.time+"] [mapping: "+A.mapping+"]"))),y.start=g.startOfSegment,y.end=k.end+A.mapping;else if(A)y.start=k.start+A.mapping,y.end=k.end+A.mapping;else return!1;return!0};f.saveDiscontinuitySyncInfo_=function(g){var k=g.playlist,u=g.segment;if(u.discontinuity)this.discontinuities[u.timeline]={time:u.start,accuracy:0};else if(k.discontinuityStarts&&k.discontinuityStarts.length)for(var y=0;y<k.discontinuityStarts.length;y++){var A=k.discontinuityStarts[y],
H=k.discontinuitySequence+y+1,S=A-g.mediaIndex,W=Math.abs(S);if(!this.discontinuities[H]||this.discontinuities[H].accuracy>W)A=0>S?u.start-re(k,g.mediaIndex,A):u.end+re(k,g.mediaIndex+1,A),this.discontinuities[H]={time:A,accuracy:W}}};f.dispose=function(){this.trigger("dispose");this.off()};return l}(U.EventTarget),Rr=function(m){function l(){var g=m.call(this)||this;g.pendingTimelineChanges_={};g.lastTimelineChanges_={};return g}Bc(l,m);var f=l.prototype;f.clearPendingTimelineChange=function(g){this.pendingTimelineChanges_[g]=
null;this.trigger("pendingtimelinechange")};f.pendingTimelineChange=function(g){var k=g.type,u=g.from;g=g.to;"number"===typeof u&&"number"===typeof g&&(this.pendingTimelineChanges_[k]={type:k,from:u,to:g},this.trigger("pendingtimelinechange"));return this.pendingTimelineChanges_[k]};f.lastTimelineChange=function(g){var k=g.type,u=g.from;g=g.to;"number"===typeof u&&"number"===typeof g&&(this.lastTimelineChanges_[k]={type:k,from:u,to:g},delete this.pendingTimelineChanges_[k],this.trigger("timelinechange"));
return this.lastTimelineChanges_[k]};f.dispose=function(){this.trigger("dispose");this.pendingTimelineChanges_={};this.lastTimelineChanges_={};this.off()};return l}(U.EventTarget),Sr=jm(km(function(){function m(W,M){for(var T=0;T<M.length;T++){var R=M[T];R.enumerable=R.enumerable||!1;R.configurable=!0;"value"in R&&(R.writable=!0);Object.defineProperty(W,R.key,R)}}var l=function(W,M,T){M&&m(W.prototype,M);T&&m(W,T);return W},f=function(W,M){W.prototype=Object.create(M.prototype);W.prototype.constructor=
W;W.__proto__=M},g=function(){function W(){this.listeners={}}var M=W.prototype;M.on=function(T,R){this.listeners[T]||(this.listeners[T]=[]);this.listeners[T].push(R)};M.off=function(T,R){if(!this.listeners[T])return!1;R=this.listeners[T].indexOf(R);this.listeners[T]=this.listeners[T].slice(0);this.listeners[T].splice(R,1);return-1<R};M.trigger=function(T){var R=this.listeners[T];if(R)if(2===arguments.length)for(var oa=R.length,pa=0;pa<oa;++pa)R[pa].call(this,arguments[1]);else{oa=Array.prototype.slice.call(arguments,
1);pa=R.length;for(var Ba=0;Ba<pa;++Ba)R[Ba].apply(this,oa)}};M.dispose=function(){this.listeners={}};M.pipe=function(T){this.on("data",function(R){T.push(R)})};return W}(),k=null,u=function(){function W(M){if(!k){var T=[[[],[],[],[],[]],[[],[],[],[],[]]],R=T[0],oa=T[1],pa=R[4],Ba=oa[4],ea,ka,sa,Na=[],Ya=[],wb;for(ea=0;256>ea;ea++)Ya[(Na[ea]=ea<<1^283*(ea>>7))^ea]=ea;for(ka=sa=0;!pa[ka];ka^=wb||1,sa=Ya[sa]||1){var eb=sa^sa<<1^sa<<2^sa<<3^sa<<4;eb=eb>>8^eb&255^99;pa[ka]=eb;Ba[eb]=ka;var rb=Na[ea=Na[wb=
Na[ka]]];var Sb=16843009*rb^65537*ea^257*wb^16843008*ka;rb=257*Na[eb]^16843008*eb;for(ea=0;4>ea;ea++)R[ea][ka]=rb=rb<<24^rb>>>8,oa[ea][eb]=Sb=Sb<<24^Sb>>>8}for(ea=0;5>ea;ea++)R[ea]=R[ea].slice(0),oa[ea]=oa[ea].slice(0);k=T}this._tables=[[k[0][0].slice(),k[0][1].slice(),k[0][2].slice(),k[0][3].slice(),k[0][4].slice()],[k[1][0].slice(),k[1][1].slice(),k[1][2].slice(),k[1][3].slice(),k[1][4].slice()]];T=this._tables[0][4];R=this._tables[1];pa=M.length;Ba=1;if(4!==pa&&6!==pa&&8!==pa)throw Error("Invalid aes key size");
ka=M.slice(0);sa=[];this._key=[ka,sa];for(M=pa;M<4*pa+28;M++){oa=ka[M-1];if(0===M%pa||8===pa&&4===M%pa)oa=T[oa>>>24]<<24^T[oa>>16&255]<<16^T[oa>>8&255]<<8^T[oa&255],0===M%pa&&(oa=oa<<8^oa>>>24^Ba<<24,Ba=Ba<<1^283*(Ba>>7));ka[M]=ka[M-pa]^oa}for(pa=0;M;pa++,M--)oa=ka[pa&3?M:M-4],sa[pa]=4>=M||4>pa?oa:R[0][T[oa>>>24]]^R[1][T[oa>>16&255]]^R[2][T[oa>>8&255]]^R[3][T[oa&255]]}W.prototype.decrypt=function(M,T,R,oa,pa,Ba){var ea=this._key[1];M^=ea[0];oa^=ea[1];R^=ea[2];T^=ea[3];var ka=ea.length/4-2,sa,Na=4;
var Ya=this._tables[1];var wb=Ya[0],eb=Ya[1],rb=Ya[2],Sb=Ya[3],qc=Ya[4];for(sa=0;sa<ka;sa++){Ya=wb[M>>>24]^eb[oa>>16&255]^rb[R>>8&255]^Sb[T&255]^ea[Na];var Jd=wb[oa>>>24]^eb[R>>16&255]^rb[T>>8&255]^Sb[M&255]^ea[Na+1];var Sh=wb[R>>>24]^eb[T>>16&255]^rb[M>>8&255]^Sb[oa&255]^ea[Na+2];T=wb[T>>>24]^eb[M>>16&255]^rb[oa>>8&255]^Sb[R&255]^ea[Na+3];Na+=4;M=Ya;oa=Jd;R=Sh}for(sa=0;4>sa;sa++)pa[(3&-sa)+Ba]=qc[M>>>24]<<24^qc[oa>>16&255]<<16^qc[R>>8&255]<<8^qc[T&255]^ea[Na++],Ya=M,M=oa,oa=R,R=T,T=Ya};return W}(),
y=function(W){function M(){var R=W.call(this,g)||this;R.jobs=[];R.delay=1;R.timeout_=null;return R}f(M,W);var T=M.prototype;T.processJob_=function(){this.jobs.shift()();this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null};T.push=function(R){this.jobs.push(R);this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))};return M}(g),A=function(W){return W<<24|(W&65280)<<8|(W&16711680)>>8|W>>>24},H=function(){function W(M,T,R,oa){var pa=W.STEP,
Ba=new Int32Array(M.buffer),ea=new Uint8Array(M.byteLength);M=0;this.asyncStream_=new y;this.asyncStream_.push(this.decryptChunk_(Ba.subarray(M,M+pa),T,R,ea));for(M=pa;M<Ba.length;M+=pa)R=new Uint32Array([A(Ba[M-4]),A(Ba[M-3]),A(Ba[M-2]),A(Ba[M-1])]),this.asyncStream_.push(this.decryptChunk_(Ba.subarray(M,M+pa),T,R,ea));this.asyncStream_.push(function(){oa(null,ea.subarray(0,ea.byteLength-ea[ea.byteLength-1]))})}W.prototype.decryptChunk_=function(M,T,R,oa){return function(){var pa=new Int32Array(M.buffer,
M.byteOffset,M.byteLength>>2),Ba=new u(Array.prototype.slice.call(T)),ea=new Uint8Array(M.byteLength),ka=new Int32Array(ea.buffer),sa;var Na=R[0];var Ya=R[1];var wb=R[2];var eb=R[3];for(sa=0;sa<pa.length;sa+=4){var rb=A(pa[sa]);var Sb=A(pa[sa+1]);var qc=A(pa[sa+2]);var Jd=A(pa[sa+3]);Ba.decrypt(rb,Sb,qc,Jd,ka,sa);ka[sa]=A(ka[sa]^Na);ka[sa+1]=A(ka[sa+1]^Ya);ka[sa+2]=A(ka[sa+2]^wb);ka[sa+3]=A(ka[sa+3]^eb);Na=rb;Ya=Sb;wb=qc;eb=Jd}oa.set(ea,M.byteOffset)}};l(W,null,[{key:"STEP",get:function(){return 32E3}}]);
return W}(),S=function(W){var M={};Object.keys(W).forEach(function(T){var R=W[T];ArrayBuffer.isView(R)?M[T]={bytes:R.buffer,byteOffset:R.byteOffset,byteLength:R.byteLength}:M[T]=R});return M};self.onmessage=function(W){var M=W.data;W=new Uint8Array(M.encrypted.bytes,M.encrypted.byteOffset,M.encrypted.byteLength);var T=new Uint32Array(M.key.bytes,M.key.byteOffset,M.key.byteLength/4),R=new Uint32Array(M.iv.bytes,M.iv.byteOffset,M.iv.byteLength/4);new H(W,T,R,function(oa,pa){self.postMessage(S({source:M.source,
decrypted:pa}),[pa.buffer])})}})),Tr=im(Sr),Ur=function(m){var l=m["default"]?"main":"alternative";m.characteristics&&0<=m.characteristics.indexOf("public.accessibility.describes-video")&&(l="main-desc");return l},Hf=function(m,l){m.abort();m.pause();l&&l.activePlaylistLoader&&(l.activePlaylistLoader.pause(),l.activePlaylistLoader=null)},Vr=function(m,l){return function(){var f=l.segmentLoaders,g=f[m],k=f.main;f=l.mediaTypes[m];var u=f.activeTrack();u=f.activeGroup(u);var y=f.activePlaylistLoader;
Hf(g,f);u&&(u.playlistLoader?(g.resyncLoader(),g=u.playlistLoader,f.activePlaylistLoader=g,g.load()):y&&k.resetEverything())}},Wr=function(m,l){return function(){var f=l.segmentLoaders[m];f.abort();f.pause()}},Xr=function(m,l){return function(){var f=l.segmentLoaders,g=f[m],k=f.main;f=l.mediaTypes[m];var u=f.activeTrack(),y=f.activeGroup(u),A=f.activePlaylistLoader;Hf(g,f);if(y){if("AUDIO"===m){if(!y.playlistLoader){k.setAudio(!0);k.resetEverything();return}g.setAudio(!0);k.setAudio(!1)}A===y.playlistLoader?
(g=y.playlistLoader,f.activePlaylistLoader=g,g.load()):(g.track&&g.track(u),g.resetEverything(),g=y.playlistLoader,f.activePlaylistLoader=g,g.load())}}},If={AUDIO:function(m,l){return function(){var f=l.mediaTypes[m],g=l.blacklistCurrentPlaylist;Hf(l.segmentLoaders[m],f);var k=f.activeTrack(),u=f.activeGroup();u=(u.filter(function(A){return A["default"]})[0]||u[0]).id;u=f.tracks[u];if(k===u)g({message:"Problem encountered loading the default audio track."});else{U.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");
for(var y in f.tracks)f.tracks[y].enabled=f.tracks[y]===u;f.onTrackChanged()}}},SUBTITLES:function(m,l){return function(){var f=l.segmentLoaders[m],g=l.mediaTypes[m];U.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");Hf(f,g);if(f=g.activeTrack())f.mode="disabled";g.onTrackChanged()}}},Xm={AUDIO:function(m,l,f){if(l){var g=f.tech,k=f.requestOptions,u=f.segmentLoaders[m];l.on("loadedmetadata",function(){var y=l.media();u.playlist(y,k);(!g.paused()||y.endList&&"none"!==
g.preload())&&u.load()});l.on("loadedplaylist",function(){u.playlist(l.media(),k);g.paused()||u.load()});l.on("error",If[m](m,f))}},SUBTITLES:function(m,l,f){var g=f.tech,k=f.requestOptions,u=f.segmentLoaders[m],y=f.mediaTypes[m];l.on("loadedmetadata",function(){var A=l.media();u.playlist(A,k);u.track(y.activeTrack());(!g.paused()||A.endList&&"none"!==g.preload())&&u.load()});l.on("loadedplaylist",function(){u.playlist(l.media(),k);g.paused()||u.load()});l.on("error",If[m](m,f))}},Yr={AUDIO:function(m,
l){var f=l.vhs,g=l.sourceType,k=l.segmentLoaders[m],u=l.requestOptions,y=l.master,A=y.mediaGroups,H=y.playlists;y=l.mediaTypes[m];var S=y.groups,W=y.tracks,M=l.masterPlaylistLoader;A[m]&&0!==Object.keys(A[m]).length||(A[m]={main:{"default":{"default":!0}}});y=function(R){S[R]||(S[R]=[]);var oa=H.filter(function(ea){return ea.attributes[m]===R}),pa=function(ea){var ka=A[m][R][ea];!oa.filter(function(Na){return Na.resolvedUri!==ka.resolvedUri}).length&&oa.length&&delete ka.resolvedUri;var sa=void 0;
sa="vhs-json"===g&&ka.playlists?new Id(ka.playlists[0],f,u):ka.resolvedUri?new Id(ka.resolvedUri,f,u):ka.playlists&&"dash"===g?new Rh(ka.playlists[0],f,u,M):null;ka=U.mergeOptions({id:ea,playlistLoader:sa},ka);Xm[m](m,ka.playlistLoader,l);S[R].push(ka);"undefined"===typeof W[ea]&&(sa=new U.AudioTrack({id:ea,kind:Ur(ka),enabled:!1,language:ka.language,"default":ka["default"],label:ea}),W[ea]=sa)},Ba;for(Ba in A[m][R])pa(Ba)};for(var T in A[m])y(T);k.on("error",If[m](m,l))},SUBTITLES:function(m,l){var f=
l.tech,g=l.vhs,k=l.sourceType,u=l.segmentLoaders[m],y=l.requestOptions,A=l.master.mediaGroups,H=l.mediaTypes[m],S=H.groups;H=H.tracks;var W=l.masterPlaylistLoader,M;for(M in A[m]){S[M]||(S[M]=[]);for(var T in A[m][M])if(!A[m][M][T].forced){var R=A[m][M][T],oa=void 0;if("hls"===k)oa=new Id(R.resolvedUri,g,y);else if("dash"===k){if(!R.playlists.filter(function(pa){return Infinity!==pa.excludeUntil}).length)return;oa=new Rh(R.playlists[0],g,y,W)}else"vhs-json"===k&&(oa=new Id(R.playlists?R.playlists[0]:
R.resolvedUri,g,y));R=U.mergeOptions({id:T,playlistLoader:oa},R);Xm[m](m,R.playlistLoader,l);S[M].push(R);"undefined"===typeof H[T]&&(R=f.addRemoteTextTrack({id:T,kind:"subtitles","default":R["default"]&&R.autoselect,language:R.language,label:T},!1).track,H[T]=R)}}u.on("error",If[m](m,l))},"CLOSED-CAPTIONS":function(m,l){var f=l.tech,g=l.master.mediaGroups,k=l.mediaTypes[m];l=k.groups;k=k.tracks;for(var u in g[m]){l[u]||(l[u]=[]);for(var y in g[m][u]){var A=g[m][u][y];A.instreamId.match(/CC\d/)&&
(l[u].push(U.mergeOptions({id:y},A)),"undefined"===typeof k[y]&&(A=f.addRemoteTextTrack({id:A.instreamId,kind:"captions","default":A["default"]&&A.autoselect,language:A.language,label:y},!1).track,k[y]=A))}}}},Zr=function(m,l){return function(f){var g=l.mediaTypes[m].groups,k=l.masterPlaylistLoader.media();if(!k)return null;var u=null;k.attributes[m]&&(u=g[k.attributes[m]]);u=u||g.main;return"undefined"===typeof f?u:null===f?null:u.filter(function(y){return y.id===f.id})[0]||null}},$r={AUDIO:function(m,
l){return function(){var f=l.mediaTypes[m].tracks,g;for(g in f)if(f[g].enabled)return f[g];return null}},SUBTITLES:function(m,l){return function(){var f=l.mediaTypes[m].tracks,g;for(g in f)if("showing"===f[g].mode||"hidden"===f[g].mode)return f[g];return null}}},as=function(m){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(H){Yr[H](H,m)});var l=m.mediaTypes,f=m.masterPlaylistLoader,g=m.tech,k=m.vhs;["AUDIO","SUBTITLES"].forEach(function(H){l[H].activeGroup=Zr(H,m);l[H].activeTrack=$r[H](H,
m);l[H].onGroupChanged=Vr(H,m);l[H].onGroupChanging=Wr(H,m);l[H].onTrackChanged=Xr(H,m)});var u=l.AUDIO.activeGroup();u&&(u=(u.filter(function(H){return H["default"]})[0]||u[0]).id,l.AUDIO.tracks[u].enabled=!0,l.AUDIO.onTrackChanged());f.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(H){return l[H].onGroupChanged()})});f.on("mediachanging",function(){["AUDIO","SUBTITLES"].forEach(function(H){return l[H].onGroupChanging()})});var y=function(){l.AUDIO.onTrackChanged();g.trigger({type:"usage",
name:"vhs-audio-change"});g.trigger({type:"usage",name:"hls-audio-change"})};g.audioTracks().addEventListener("change",y);g.remoteTextTracks().addEventListener("change",l.SUBTITLES.onTrackChanged);k.on("dispose",function(){g.audioTracks().removeEventListener("change",y);g.remoteTextTracks().removeEventListener("change",l.SUBTITLES.onTrackChanged)});g.clearTracks("audio");for(var A in l.AUDIO.tracks)g.audioTracks().addTrack(l.AUDIO.tracks[A])},bs=function(){var m={};["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(l){m[l]=
{groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Oc,activeTrack:Oc,onGroupChanged:Oc,onTrackChanged:Oc}});return m},jd,cs="mediaRequests mediaRequestsAborted mediaRequestsTimedout mediaRequestsErrored mediaTransferDuration mediaBytesTransferred".split(" "),ds=function(m){return this.audioSegmentLoader_[m]+this.mainSegmentLoader_[m]},es=function(m){var l=m.currentPlaylist,f=m.nextPlaylist,g=m.forwardBuffer,k=m.bufferLowWaterLine,u=m.bufferHighWaterLine,y=m.duration,A=m.experimentalBufferBasedABR;
m=m.log;if(!f)return U.log.warn("We received no playlist to switch to. Please check your stream."),!1;var H="allowing switch "+(l&&l.id||"null")+" -> "+f.id;if(!l||!l.endList)return m(H+" as current playlist "+(l?"is live":"is not set")),!0;if(f.id===l.id)return!1;var S=A?qb.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:qb.MAX_BUFFER_LOW_WATER_LINE;if(y<S)return m(H+" as duration < max low water line ("+y+" < "+S+")"),!0;f=f.attributes.BANDWIDTH;l=l.attributes.BANDWIDTH;if(f<l&&(!A||g<u))return k=H+" as next bandwidth < current bandwidth ("+
f+" < "+l+")",A&&(k+=" and forwardBuffer < bufferHighWaterLine ("+g+" < "+u+")"),m(k),!0;if((!A||f>l)&&g>=k)return g=H+" as forwardBuffer >= bufferLowWaterLine ("+g+" >= "+k+")",A&&(g+=" and next bandwidth > current bandwidth ("+f+" > "+l+")"),m(g),!0;m("not "+H+" as no switching criteria met");return!1},fs=function(m){function l(g){var k=m.call(this)||this;var u=g.src,y=g.handleManifestRedirects,A=g.withCredentials,H=g.tech,S=g.bandwidth,W=g.externVhs,M=g.useCueTags,T=g.blacklistDuration,R=g.enableLowInitialPlaylist,
oa=g.sourceType,pa=g.cacheEncryptionKeys,Ba=g.handlePartialData,ea=g.experimentalBufferBasedABR;if(!u)throw Error("A non-empty playlist URL or JSON manifest string is required");jd=W;k.experimentalBufferBasedABR=!!ea;k.withCredentials=A;k.tech_=H;k.vhs_=H.vhs;k.sourceType_=oa;k.useCueTags_=M;k.blacklistDuration=T;k.enableLowInitialPlaylist=R;k.useCueTags_&&(k.cueTagsTrack_=k.tech_.addTextTrack("metadata","ad-cues"),k.cueTagsTrack_.inBandMetadataTrackDispatchType="");k.requestOptions_={withCredentials:A,
handleManifestRedirects:y,timeout:null};k.on("error",k.pauseLoading);k.mediaTypes_=bs();k.mediaSource=new ra.MediaSource;k.handleDurationChange_=k.handleDurationChange_.bind(Yb(k));k.handleSourceOpen_=k.handleSourceOpen_.bind(Yb(k));k.handleSourceEnded_=k.handleSourceEnded_.bind(Yb(k));k.mediaSource.addEventListener("durationchange",k.handleDurationChange_);k.mediaSource.addEventListener("sourceopen",k.handleSourceOpen_);k.mediaSource.addEventListener("sourceended",k.handleSourceEnded_);k.seekable_=
U.createTimeRanges();k.hasPlayed_=!1;k.syncController_=new Qr(g);k.segmentMetadataTrack_=H.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track;k.decrypter_=new Tr;k.sourceUpdater_=new Um(k.mediaSource);k.inbandTextTracks_={};k.timelineChangeController_=new Rr;y={vhs:k.vhs_,parse708captions:g.parse708captions,mediaSource:k.mediaSource,currentTime:k.tech_.currentTime.bind(k.tech_),seekable:function(){return k.seekable()},seeking:function(){return k.tech_.seeking()},duration:function(){return k.duration()},
hasPlayed:function(){return k.hasPlayed_},goalBufferLength:function(){return k.goalBufferLength()},bandwidth:S,syncController:k.syncController_,decrypter:k.decrypter_,sourceType:k.sourceType_,inbandTextTracks:k.inbandTextTracks_,cacheEncryptionKeys:pa,handlePartialData:Ba,sourceUpdater:k.sourceUpdater_,timelineChangeController:k.timelineChangeController_};k.masterPlaylistLoader_="dash"===k.sourceType_?new Rh(u,k.vhs_,k.requestOptions_):new Id(u,k.vhs_,k.requestOptions_);k.setupMasterPlaylistLoaderListeners_();
k.mainSegmentLoader_=new mi(U.mergeOptions(y,{segmentMetadataTrack:k.segmentMetadataTrack_,loaderType:"main"}),g);k.audioSegmentLoader_=new mi(U.mergeOptions(y,{loaderType:"audio"}),g);k.subtitleSegmentLoader_=new Pr(U.mergeOptions(y,{loaderType:"vtt",featuresNativeTextTracks:k.tech_.featuresNativeTextTracks}),g);k.setupSegmentLoaderListeners_();k.experimentalBufferBasedABR&&(k.masterPlaylistLoader_.one("loadedplaylist",function(){return k.startABRTimer_()}),k.tech_.on("pause",function(){return k.stopABRTimer_()}),
k.tech_.on("play",function(){return k.startABRTimer_()}));cs.forEach(function(ka){k[ka+"_"]=ds.bind(Yb(k),ka)});k.logger_=oc("MPC");k.triggeredFmp4Usage=!1;"none"===k.tech_.preload()?(k.loadOnPlay_=function(){k.loadOnPlay_=null;k.masterPlaylistLoader_.load()},k.tech_.one("play",k.loadOnPlay_)):k.masterPlaylistLoader_.load();return k}Bc(l,m);var f=l.prototype;f.checkABR_=function(){var g=this.selectPlaylist();this.shouldSwitchToMedia_(g)&&this.masterPlaylistLoader_.media(g)};f.startABRTimer_=function(){var g=
this;this.stopABRTimer_();this.abrTimer_=ra.setInterval(function(){return g.checkABR_()},250)};f.stopABRTimer_=function(){this.tech_.scrubbing&&this.tech_.scrubbing()||(ra.clearInterval(this.abrTimer_),this.abrTimer_=null)};f.setupMasterPlaylistLoaderListeners_=function(){var g=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var k=g.masterPlaylistLoader_.media(),u=1500*k.targetDuration;Nh(g.masterPlaylistLoader_.master,g.masterPlaylistLoader_.media())?g.requestOptions_.timeout=0:g.requestOptions_.timeout=
u;k.endList&&"none"!==g.tech_.preload()&&(g.mainSegmentLoader_.playlist(k,g.requestOptions_),g.mainSegmentLoader_.load());as({sourceType:g.sourceType_,segmentLoaders:{AUDIO:g.audioSegmentLoader_,SUBTITLES:g.subtitleSegmentLoader_,main:g.mainSegmentLoader_},tech:g.tech_,requestOptions:g.requestOptions_,masterPlaylistLoader:g.masterPlaylistLoader_,vhs:g.vhs_,master:g.master(),mediaTypes:g.mediaTypes_,blacklistCurrentPlaylist:g.blacklistCurrentPlaylist.bind(g)});g.triggerPresenceUsage_(g.master(),k);
g.setupFirstPlay();if(!g.mediaTypes_.AUDIO.activePlaylistLoader||g.mediaTypes_.AUDIO.activePlaylistLoader.media())g.trigger("selectedinitialmedia");else g.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){g.trigger("selectedinitialmedia")})});this.masterPlaylistLoader_.on("loadedplaylist",function(){g.loadOnPlay_&&g.tech_.off("play",g.loadOnPlay_);var k=g.masterPlaylistLoader_.media();if(!k){g.excludeUnsupportedVariants_();var u;g.enableLowInitialPlaylist&&(u=g.selectInitialPlaylist());
u||(u=g.selectPlaylist());if(!u||!g.shouldSwitchToMedia_(u))return;g.initialMedia_=u;g.masterPlaylistLoader_.media(g.initialMedia_);if("vhs-json"!==g.sourceType_||!g.initialMedia_.segments)return;k=g.initialMedia_}g.handleUpdatedMediaPlaylist(k)});this.masterPlaylistLoader_.on("error",function(){g.blacklistCurrentPlaylist(g.masterPlaylistLoader_.error)});this.masterPlaylistLoader_.on("mediachanging",function(){g.mainSegmentLoader_.abort();g.mainSegmentLoader_.pause()});this.masterPlaylistLoader_.on("mediachange",
function(){var k=g.masterPlaylistLoader_.media(),u=1500*k.targetDuration;Nh(g.masterPlaylistLoader_.master,g.masterPlaylistLoader_.media())?g.requestOptions_.timeout=0:g.requestOptions_.timeout=u;g.mainSegmentLoader_.playlist(k,g.requestOptions_);g.mainSegmentLoader_.load();g.tech_.trigger({type:"mediachange",bubbles:!0})});this.masterPlaylistLoader_.on("playlistunchanged",function(){var k=g.masterPlaylistLoader_.media();"playlist-unchanged"!==k.lastExcludeReason_&&g.stuckAtPlaylistEnd_(k)&&(g.blacklistCurrentPlaylist({message:"Playlist no longer updating.",
reason:"playlist-unchanged"}),g.tech_.trigger("playliststuck"))});this.masterPlaylistLoader_.on("renditiondisabled",function(){g.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"});g.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})});this.masterPlaylistLoader_.on("renditionenabled",function(){g.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"});g.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})};f.handleUpdatedMediaPlaylist=function(g){this.useCueTags_&&this.updateAdCues_(g);
this.mainSegmentLoader_.playlist(g,this.requestOptions_);this.updateDuration(!g.endList);this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())};f.triggerPresenceUsage_=function(g,k){g=g.mediaGroups||{};var u=!0,y=Object.keys(g.AUDIO),A;for(A in g.AUDIO)for(var H in g.AUDIO[A])g.AUDIO[A][H].uri||(u=!1);u&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"}));Object.keys(g.SUBTITLES).length&&
(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"}));jd.Playlist.isAes(k)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"}));y.length&&1<Object.keys(g.AUDIO[y[0]]).length&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"}));this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",
name:"hls-playlist-cue-tags"}))};f.shouldSwitchToMedia_=function(g){var k=this.masterPlaylistLoader_.media(),u=this.tech_.buffered();u=u.length?u.end(u.length-1)-this.tech_.currentTime():0;var y=this.bufferLowWaterLine(),A=this.bufferHighWaterLine();return es({currentPlaylist:k,nextPlaylist:g,forwardBuffer:u,bufferLowWaterLine:y,bufferHighWaterLine:A,duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})};f.setupSegmentLoaderListeners_=function(){var g=
this;this.experimentalBufferBasedABR||(this.mainSegmentLoader_.on("bandwidthupdate",function(){var u=g.selectPlaylist();g.shouldSwitchToMedia_(u)&&g.masterPlaylistLoader_.media(u);g.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("progress",function(){g.trigger("progress")}));this.mainSegmentLoader_.on("error",function(){g.blacklistCurrentPlaylist(g.mainSegmentLoader_.error())});this.mainSegmentLoader_.on("appenderror",function(){g.error=g.mainSegmentLoader_.error_;g.trigger("error")});
this.mainSegmentLoader_.on("syncinfoupdate",function(){g.onSyncInfoUpdate_()});this.mainSegmentLoader_.on("timestampoffset",function(){g.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"});g.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})});this.audioSegmentLoader_.on("syncinfoupdate",function(){g.onSyncInfoUpdate_()});this.audioSegmentLoader_.on("appenderror",function(){g.error=g.audioSegmentLoader_.error_;g.trigger("error")});this.mainSegmentLoader_.on("ended",function(){g.logger_("main segment loader ended");
g.onEndOfStream()});this.mainSegmentLoader_.on("earlyabort",function(u){g.experimentalBufferBasedABR||(g.delegateLoaders_("all",["abort"]),g.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120))});var k=function(){if(!g.sourceUpdater_.hasCreatedSourceBuffers())return g.tryToCreateSourceBuffers_();var u=g.getCodecsOrExclude_();u&&g.sourceUpdater_.addOrChangeSourceBuffers(u)};this.mainSegmentLoader_.on("trackinfo",
k);this.audioSegmentLoader_.on("trackinfo",k);this.mainSegmentLoader_.on("fmp4",function(){g.triggeredFmp4Usage||(g.tech_.trigger({type:"usage",name:"vhs-fmp4"}),g.tech_.trigger({type:"usage",name:"hls-fmp4"}),g.triggeredFmp4Usage=!0)});this.audioSegmentLoader_.on("fmp4",function(){g.triggeredFmp4Usage||(g.tech_.trigger({type:"usage",name:"vhs-fmp4"}),g.tech_.trigger({type:"usage",name:"hls-fmp4"}),g.triggeredFmp4Usage=!0)});this.audioSegmentLoader_.on("ended",function(){g.logger_("audioSegmentLoader ended");
g.onEndOfStream()})};f.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)};f.load=function(){this.mainSegmentLoader_.load();this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load();this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()};f.smoothQualityChange_=function(g){void 0===g&&(g=this.selectPlaylist());g!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(g),
this.mainSegmentLoader_.resetLoader())};f.fastQualityChange_=function(g){var k=this;void 0===g&&(g=this.selectPlaylist());g===this.masterPlaylistLoader_.media()?this.logger_("skipping fastQualityChange because new media is same as old"):(this.masterPlaylistLoader_.media(g),this.mainSegmentLoader_.resetEverything(function(){U.browser.IE_VERSION||U.browser.IS_EDGE?k.tech_.setCurrentTime(k.tech_.currentTime()+.04):k.tech_.setCurrentTime(k.tech_.currentTime())}))};f.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&
this.tech_.setCurrentTime(0);this.hasPlayed_&&this.load();var g=this.tech_.seekable();if(Infinity===this.tech_.duration()&&this.tech_.currentTime()<g.start(0))return this.tech_.setCurrentTime(g.end(g.length-1))}};f.setupFirstPlay=function(){var g=this,k=this.masterPlaylistLoader_.media();if(!k||this.tech_.paused()||this.hasPlayed_)return!1;if(!k.endList){var u=this.seekable();if(!u.length)return!1;if(U.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",function(){g.trigger("firstplay");
g.tech_.setCurrentTime(u.end(0));g.hasPlayed_=!0}),!1;this.trigger("firstplay");this.tech_.setCurrentTime(u.end(0))}this.hasPlayed_=!0;this.load();return!0};f.handleSourceOpen_=function(){this.tryToCreateSourceBuffers_();if(this.tech_.autoplay()){var g=this.tech_.play();"undefined"!==typeof g&&"function"===typeof g.then&&g.then(null,function(k){})}this.trigger("sourceopen")};f.handleSourceEnded_=function(){if(this.inbandTextTracks_.metadataTrack_){var g=this.inbandTextTracks_.metadataTrack_.cues;
if(g&&g.length){var k=this.duration();g[g.length-1].endTime=isNaN(k)||Infinity===Math.abs(k)?Number.MAX_VALUE:k}}};f.handleDurationChange_=function(){this.tech_.trigger("durationchange")};f.onEndOfStream=function(){var g=this.mainSegmentLoader_.ended_;this.mediaTypes_.AUDIO.activePlaylistLoader&&(g=!this.mainSegmentLoader_.currentMediaInfo_||this.mainSegmentLoader_.currentMediaInfo_.hasVideo?g&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_);g&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())};
f.stuckAtPlaylistEnd_=function(g){if(!this.seekable().length)return!1;var k=this.syncController_.getExpiredTime(g,this.duration());if(null===k)return!1;g=jd.Playlist.playlistEnd(g,k);k=this.tech_.currentTime();var u=this.tech_.buffered();if(!u.length)return g-k<=pc;u=u.end(u.length-1);return u-k<=pc&&g-u<=pc};f.blacklistCurrentPlaylist=function(g,k){void 0===g&&(g={});var u=g.playlist||this.masterPlaylistLoader_.media();k=k||g.blacklistDuration||this.blacklistDuration;if(u){var y=this.masterPlaylistLoader_.master.playlists,
A=y.filter(uf);A=1===A.length&&A[0]===u;if(1===y.length&&Infinity!==k)return U.log.warn("Problem encountered with playlist "+u.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(A);if(A){var H=!1;y.forEach(function(S){if(S!==u){var W=S.excludeUntil;"undefined"!==typeof W&&Infinity!==W&&(H=!0,delete S.excludeUntil)}});H&&(U.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),
this.tech_.trigger("retryplaylist"))}u.excludeUntil=Date.now()+1E3*k;g.reason&&(u.lastExcludeReason_=g.reason);this.tech_.trigger("blacklistplaylist");this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"});this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});if(k=this.selectPlaylist())return(g.internal?this.logger_:U.log.warn)((g.internal?"Internal problem":"Problem")+" encountered with playlist "+u.id+"."+((g.message?" "+g.message:"")+" Switching to playlist "+k.id+".")),
k.attributes.AUDIO!==u.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),k.attributes.SUBTITLES!==u.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]),g=k.targetDuration/2*1E3||5E3,g="number"===typeof k.lastRequest&&Date.now()-k.lastRequest<=g,this.masterPlaylistLoader_.media(k,A||g);this.error="Playback cannot continue. No available working or supported playlists.";this.trigger("error")}else this.error=g,"open"!==
this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network")};f.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"]);this.stopABRTimer_()};f.delegateLoaders_=function(g,k){var u=this,y=[],A="all"===g;(A||"main"===g)&&y.push(this.masterPlaylistLoader_);var H=[];(A||"audio"===g)&&H.push("AUDIO");if(A||"subtitle"===g)H.push("CLOSED-CAPTIONS"),H.push("SUBTITLES");H.forEach(function(S){(S=u.mediaTypes_[S]&&u.mediaTypes_[S].activePlaylistLoader)&&y.push(S)});
["main","audio","subtitle"].forEach(function(S){var W=u[S+"SegmentLoader_"];!W||g!==S&&"all"!==g||y.push(W)});y.forEach(function(S){return k.forEach(function(W){if("function"===typeof S[W])S[W]()})})};f.setCurrentTime=function(g){var k=qe(this.tech_.buffered(),g);if(!this.masterPlaylistLoader_||!this.masterPlaylistLoader_.media()||!this.masterPlaylistLoader_.media().segments)return 0;if(k&&k.length)return g;this.mainSegmentLoader_.resetEverything();this.mainSegmentLoader_.abort();this.mediaTypes_.AUDIO.activePlaylistLoader&&
(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort());this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort());this.load()};f.duration=function(){if(!this.masterPlaylistLoader_)return 0;var g=this.masterPlaylistLoader_.media();return g?g.endList?this.mediaSource?this.mediaSource.duration:jd.Playlist.duration(g):Infinity:0};f.seekable=function(){return this.seekable_};f.onSyncInfoUpdate_=function(){if(this.masterPlaylistLoader_){var g=
this.masterPlaylistLoader_.media();if(g){var k=this.syncController_.getExpiredTime(g,this.duration());if(null!==k){var u=this.masterPlaylistLoader_.master.suggestedPresentationDelay,y=jd.Playlist.seekable(g,k,u);if(0!==y.length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){g=this.mediaTypes_.AUDIO.activePlaylistLoader.media();k=this.syncController_.getExpiredTime(g,this.duration());if(null===k)return;var A=jd.Playlist.seekable(g,k,u);if(0===A.length)return}if(this.seekable_&&this.seekable_.length){var H=
this.seekable_.end(0);var S=this.seekable_.start(0)}A?A.start(0)>y.end(0)||y.start(0)>A.end(0)?this.seekable_=y:this.seekable_=U.createTimeRanges([[A.start(0)>y.start(0)?A.start(0):y.start(0),A.end(0)<y.end(0)?A.end(0):y.end(0)]]):this.seekable_=y;this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===H&&this.seekable_.start(0)===S||(this.logger_("seekable updated ["+Sl(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}};f.updateDuration=function(g){this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",
this.updateDuration_),this.updateDuration_=null);if("open"!==this.mediaSource.readyState)this.updateDuration_=this.updateDuration.bind(this,g),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);else if(g)g=this.seekable(),g.length&&(isNaN(this.mediaSource.duration)||this.mediaSource.duration<g.end(g.length-1))&&this.sourceUpdater_.setDuration(g.end(g.length-1));else{g=this.tech_.buffered();var k=jd.Playlist.duration(this.masterPlaylistLoader_.media());0<g.length&&(k=Math.max(k,g.end(g.length-
1)));this.mediaSource.duration!==k&&this.sourceUpdater_.setDuration(k)}};f.dispose=function(){var g=this;this.trigger("dispose");this.decrypter_.terminate();this.masterPlaylistLoader_.dispose();this.mainSegmentLoader_.dispose();this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);["AUDIO","SUBTITLES"].forEach(function(k){k=g.mediaTypes_[k].groups;for(var u in k)k[u].forEach(function(y){y.playlistLoader&&y.playlistLoader.dispose()})});this.audioSegmentLoader_.dispose();this.subtitleSegmentLoader_.dispose();
this.sourceUpdater_.dispose();this.timelineChangeController_.dispose();this.stopABRTimer_();this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_);this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_);this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_);this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_);this.off()};f.master=function(){return this.masterPlaylistLoader_.master};f.media=function(){return this.masterPlaylistLoader_.media()||
this.initialMedia_};f.areMediaTypesKnown_=function(){var g=!!this.mediaTypes_.AUDIO.activePlaylistLoader;return!this.mainSegmentLoader_.currentMediaInfo_||g&&!this.audioSegmentLoader_.currentMediaInfo_?!1:!0};f.getCodecsOrExclude_=function(){var g=this,k={main:this.mainSegmentLoader_.currentMediaInfo_||{},audio:this.audioSegmentLoader_.currentMediaInfo_||{}};k.video=k.main;var u=ve(this.master(),this.media()),y={},A=!!this.mediaTypes_.AUDIO.activePlaylistLoader;k.main.hasVideo&&(y.video=u.video||
k.main.videoCodec||"avc1.4d400d");k.main.isMuxed&&(y.video+=","+(u.audio||k.main.audioCodec||"mp4a.40.2"));if(k.main.hasAudio&&!k.main.isMuxed||k.audio.hasAudio||A)y.audio=u.audio||k.main.audioCodec||k.audio.audioCodec||"mp4a.40.2",k.audio.isFmp4=k.main.hasAudio&&!k.main.isMuxed?k.main.isFmp4:k.audio.isFmp4;if(y.audio||y.video){var H={},S;["video","audio"].forEach(function(T){var R;if(R=y.hasOwnProperty(T))R=y[T],R=!(k[T].isFmp4?rf(R):Ih(R));R&&(R=k[T].isFmp4?"browser":"muxer",H[R]=H[R]||[],H[R].push(y[T]),
"audio"===T&&(S=R))});if(A&&S&&this.media().attributes.AUDIO){var W=this.media().attributes.AUDIO;this.master().playlists.forEach(function(T){(T.attributes&&T.attributes.AUDIO)===W&&T!==g.media()&&(T.excludeUntil=Infinity)});this.logger_("excluding audio group "+W+" as "+S+' does not support codec(s): "'+y.audio+'"')}if(Object.keys(H).length)u=Object.keys(H).reduce(function(T,R){T&&(T+=", ");return T+=R+' does not support codec(s): "'+H[R].join(",")+'"'},"")+".",this.blacklistCurrentPlaylist({playlist:this.media(),
internal:!0,message:u,blacklistDuration:Infinity});else{if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var M=[];["video","audio"].forEach(function(T){var R=(Cc(g.sourceUpdater_.codecs[T]||"")[0]||{}).type,oa=(Cc(y[T]||"")[0]||{}).type;R&&oa&&R.toLowerCase()!==oa.toLowerCase()&&M.push('"'+g.sourceUpdater_.codecs[T]+'" -> "'+y[T]+'"')});if(M.length){this.blacklistCurrentPlaylist({playlist:this.media(),message:"Codec switching not supported: "+M.join(", ")+".",
blacklistDuration:Infinity,internal:!0});return}}return y}}else this.blacklistCurrentPlaylist({playlist:this.media(),message:"Could not determine codecs for playlist.",blacklistDuration:Infinity})};f.tryToCreateSourceBuffers_=function(){if("open"===this.mediaSource.readyState&&!this.sourceUpdater_.hasCreatedSourceBuffers()&&this.areMediaTypesKnown_()){var g=this.getCodecsOrExclude_();g&&(this.sourceUpdater_.createSourceBuffers(g),g=[g.video,g.audio].filter(Boolean).join(","),this.excludeIncompatibleVariants_(g))}};
f.excludeUnsupportedVariants_=function(){var g=this,k=this.master().playlists,u=[];Object.keys(k).forEach(function(y){y=k[y];if(-1===u.indexOf(y.id)){u.push(y.id);var A=ve(g.master,y),H=[];!A.audio||Ih(A.audio)||rf(A.audio)||H.push("audio codec "+A.audio);!A.video||Ih(A.video)||rf(A.video)||H.push("video codec "+A.video);A.text&&"stpp.ttml.im1t"===A.text&&H.push("text codec "+A.text);H.length&&(y.excludeUntil=Infinity,g.logger_("excluding "+y.id+" for unsupported: "+H.join(", ")))}})};f.excludeIncompatibleVariants_=
function(g){var k=this,u=[],y=this.master().playlists;g=ki(Cc(g));var A=Km(g),H=g.video&&Cc(g.video)[0]||null,S=g.audio&&Cc(g.audio)[0]||null;Object.keys(y).forEach(function(W){W=y[W];if(-1===u.indexOf(W.id)&&Infinity!==W.excludeUntil){u.push(W.id);var M=[],T=ve(k.masterPlaylistLoader_.master,W),R=Km(T);if(T.audio||T.video)R!==A&&M.push('codec count "'+R+'" !== "'+A+'"'),k.sourceUpdater_.canChangeType()||(R=T.video&&Cc(T.video)[0]||null,T=T.audio&&Cc(T.audio)[0]||null,R&&H&&R.type.toLowerCase()!==
H.type.toLowerCase()&&M.push('video codec "'+R.type+'" !== "'+H.type+'"'),T&&S&&T.type.toLowerCase()!==S.type.toLowerCase()&&M.push('audio codec "'+T.type+'" !== "'+S.type+'"')),M.length&&(W.excludeUntil=Infinity,k.logger_("blacklisting "+W.id+": "+M.join(" && ")))}})};f.updateAdCues_=function(g){var k=0,u=this.seekable();u.length&&(k=u.start(0));u=this.cueTagsTrack_;void 0===k&&(k=0);if(g.segments)for(var y,A=0;A<g.segments.length;A++){var H=g.segments[A];if(!y)b:{y=k+H.duration/2;for(var S=u.cues,
W=0;W<S.length;W++){var M=S[W];if(y>=M.adStartTime&&y<=M.adEndTime){y=M;break b}}y=null}if(y){if("cueIn"in H){y.endTime=k;y.adEndTime=k;k+=H.duration;y=null;continue}if(k<y.endTime){k+=H.duration;continue}y.endTime+=H.duration}else"cueOut"in H&&(y=new ra.VTTCue(k,k+H.duration,H.cueOut),y.adStartTime=k,y.adEndTime=k+parseFloat(H.cueOut),u.addCue(y)),"cueOutCont"in H&&(y=H.cueOutCont.split("/").map(parseFloat),S=y[0],W=y[1],y=new ra.VTTCue(k,k+H.duration,""),y.adStartTime=k-S,y.adEndTime=y.adStartTime+
W,u.addCue(y));k+=H.duration}};f.goalBufferLength=function(){var g=this.tech_.currentTime(),k=qb.GOAL_BUFFER_LENGTH;return Math.min(k+g*qb.GOAL_BUFFER_LENGTH_RATE,Math.max(k,qb.MAX_GOAL_BUFFER_LENGTH))};f.bufferLowWaterLine=function(){var g=this.tech_.currentTime(),k=qb.BUFFER_LOW_WATER_LINE,u=Math.max(k,qb.MAX_BUFFER_LOW_WATER_LINE),y=Math.max(k,qb.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(k+g*qb.BUFFER_LOW_WATER_LINE_RATE,this.experimentalBufferBasedABR?y:u)};f.bufferHighWaterLine=
function(){return qb.BUFFER_HIGH_WATER_LINE};return l}(U.EventTarget),gs=function(m,l,f){return function(g){var k=m.master.playlists[l],u=Mh(k),y=uf(k);if("undefined"===typeof g)return y;g?delete k.disabled:k.disabled=!0;g===y||u||(f(),g?m.trigger("renditionenabled"):m.trigger("renditiondisabled"));return g}},hs=function(m,l,f){var g=m.masterPlaylistController_,k=g[(m.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(g);if(l.attributes.RESOLUTION){var u=l.attributes.RESOLUTION;
this.width=u.width;this.height=u.height}this.bandwidth=l.attributes.BANDWIDTH;this.codecs=ve(g.master(),l);this.playlist=l;this.id=f;this.enabled=gs(m.playlists,l.id,k)},is=function(m){var l=m.playlists;m.representations=function(){return l&&l.master&&l.master.playlists?l.master.playlists.filter(function(f){return!Mh(f)}).map(function(f,g){return new hs(m,f,f.id)}):[]}},Ym=["seeking","seeked","pause","playing","error"],js=function(){function m(f){var g=this;this.masterPlaylistController_=f.masterPlaylistController;
this.tech_=f.tech;this.seekable=f.seekable;this.allowSeeksWithinUnsafeLiveWindow=f.allowSeeksWithinUnsafeLiveWindow;this.liveRangeSafeTimeDelta=f.liveRangeSafeTimeDelta;this.media=f.media;this.consecutiveUpdates=0;this.checkCurrentTimeTimeout_=this.timer_=this.lastRecordedTime=null;this.logger_=oc("PlaybackWatcher");this.logger_("initialize");var k=function(){return g.monitorCurrentTime_()},u=function(){return g.monitorCurrentTime_()},y=function(){return g.techWaiting_()},A=function(){return g.cancelTimer_()},
H=function(){return g.fixesBadSeeks_()},S=this.masterPlaylistController_,W=["main","subtitle","audio"],M={};W.forEach(function(T){M[T]={reset:function(){return g.resetSegmentDownloads_(T)},updateend:function(){return g.checkSegmentDownloads_(T)}};S[T+"SegmentLoader_"].on("appendsdone",M[T].updateend);S[T+"SegmentLoader_"].on("playlistupdate",M[T].reset);g.tech_.on(["seeked","seeking"],M[T].reset)});this.tech_.on("seekablechanged",H);this.tech_.on("waiting",y);this.tech_.on(Ym,A);this.tech_.on("canplay",
u);this.tech_.one("play",k);this.dispose=function(){g.logger_("dispose");g.tech_.off("seekablechanged",H);g.tech_.off("waiting",y);g.tech_.off(Ym,A);g.tech_.off("canplay",u);g.tech_.off("play",k);W.forEach(function(T){S[T+"SegmentLoader_"].off("appendsdone",M[T].updateend);S[T+"SegmentLoader_"].off("playlistupdate",M[T].reset);g.tech_.off(["seeked","seeking"],M[T].reset)});g.checkCurrentTimeTimeout_&&ra.clearTimeout(g.checkCurrentTimeTimeout_);g.cancelTimer_()}}var l=m.prototype;l.monitorCurrentTime_=
function(){this.checkCurrentTime_();this.checkCurrentTimeTimeout_&&ra.clearTimeout(this.checkCurrentTimeTimeout_);this.checkCurrentTimeTimeout_=ra.setTimeout(this.monitorCurrentTime_.bind(this),250)};l.resetSegmentDownloads_=function(f){var g=this.masterPlaylistController_[f+"SegmentLoader_"];0<this[f+"StalledDownloads_"]&&this.logger_("resetting possible stalled download count for "+f+" loader");this[f+"StalledDownloads_"]=0;this[f+"Buffered_"]=g.buffered_()};l.checkSegmentDownloads_=function(f){var g=
this.masterPlaylistController_,k=g[f+"SegmentLoader_"],u=k.buffered_(),y=yq(this[f+"Buffered_"],u);this[f+"Buffered_"]=u;y?this.resetSegmentDownloads_(f):(this[f+"StalledDownloads_"]++,this.logger_("found #"+this[f+"StalledDownloads_"]+" "+f+" appends that did not increase buffer (possible stalled download)",{playlistId:k.playlist_&&k.playlist_.id,buffered:hd(u)}),10>this[f+"StalledDownloads_"]||(this.logger_(f+" loader stalled download exclusion"),this.resetSegmentDownloads_(f),this.tech_.trigger({type:"usage",
name:"vhs-"+f+"-download-exclusion"}),"subtitle"!==f&&g.blacklistCurrentPlaylist({message:"Excessive "+f+" segment downloading detected."},Infinity)))};l.checkCurrentTime_=function(){if(this.tech_.seeking()&&this.fixesBadSeeks_())this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime();else if(!this.tech_.paused()&&!this.tech_.seeking()){var f=this.tech_.currentTime(),g=this.tech_.buffered();if(this.lastRecordedTime===f&&(!g.length||f+pc>=g.end(g.length-1)))return this.techWaiting_();
5<=this.consecutiveUpdates&&f===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):f===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=f)}};l.cancelTimer_=function(){this.consecutiveUpdates=0;this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_));this.timer_=null};l.fixesBadSeeks_=function(){if(!this.tech_.seeking())return!1;var f=this.seekable(),g=this.tech_.currentTime(),k;this.afterSeekableWindow_(f,g,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&
(k=f.end(f.length-1));this.beforeSeekableWindow_(f,g)&&(k=f.start(0),k+=k===f.end(0)?0:pc);if("undefined"!==typeof k)return this.logger_("Trying to seek outside of seekable at time "+g+" with seekable range "+(Sl(f)+". Seeking to ")+(k+".")),this.tech_.setCurrentTime(k),!0;f=this.tech_.buffered();k=this.media().targetDuration;return(!f.length||f.end(0)-f.start(0)<2*k||g>f.start(0)?0:f.start(0)-g<k)?(k=f.start(0)+pc,this.logger_("Buffered region starts ("+f.start(0)+")  just beyond seek point ("+(g+
"). Seeking to "+k+".")),this.tech_.setCurrentTime(k),!0):!1};l.waiting_=function(){if(!this.techWaiting_()){var f=this.tech_.currentTime(),g=this.tech_.buffered();g=qe(g,f);g.length&&f+3<=g.end(0)&&(this.cancelTimer_(),this.tech_.setCurrentTime(f),this.logger_("Stopped at "+f+" while inside a buffered region ["+(g.start(0)+" -> "+g.end(0)+"]. Attempting to resume playback by seeking to the current time.")),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),this.tech_.trigger({type:"usage",
name:"hls-unknown-waiting"}))}};l.techWaiting_=function(){var f=this.seekable(),g=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_()||this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(f,g))return f=f.end(f.length-1),this.logger_("Fell out of live window at time "+g+". Seeking to live point (seekable end) "+f),this.cancelTimer_(),this.tech_.setCurrentTime(f),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",
name:"hls-live-resync"}),!0;f=this.tech_.vhs.masterPlaylistController_.sourceUpdater_;var k=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:f.audioBuffered(),videoBuffered:f.videoBuffered(),currentTime:g}))return this.cancelTimer_(),this.tech_.setCurrentTime(g),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;f=Lh(k,g);return 0<f.length?(k=f.start(0)-g,this.logger_("Stopped at "+g+", setting timer for "+k+", seeking to "+
f.start(0)),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),1E3*k,g),!0):!1};l.afterSeekableWindow_=function(f,g,k,u){void 0===u&&(u=!1);if(!f.length)return!1;var y=f.end(f.length-1)+pc;!k.endList&&u&&(y=f.end(f.length-1)+3*k.targetDuration);return g>y?!0:!1};l.beforeSeekableWindow_=function(f,g){return f.length&&0<f.start(0)&&g<f.start(0)-this.liveRangeSafeTimeDelta?!0:!1};l.videoUnderflow_=function(f){var g=f.videoBuffered,k=f.audioBuffered;f=f.currentTime;if(g){var u;if(g.length&&
k.length){var y=qe(g,f-3);g=qe(g,f);k=qe(k,f);k.length&&!g.length&&y.length&&(u={start:y.end(0),end:k.end(0)})}else Lh(g,f).length||(u=this.gapFromVideoUnderflow_(g,f));return u?(this.logger_("Encountered a gap in video from "+u.start+" to "+u.end+". Seeking to current time "+f),!0):!1}};l.skipTheGap_=function(f){var g=this.tech_.buffered(),k=this.tech_.currentTime();g=Lh(g,k);this.cancelTimer_();0!==g.length&&k===f&&(this.logger_("skipTheGap_:","currentTime:",k,"scheduled currentTime:",f,"nextRange start:",
g.start(0)),this.tech_.setCurrentTime(g.start(0)+gd),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))};l.gapFromVideoUnderflow_=function(f,g){if(2>f.length)f=U.createTimeRanges();else{for(var k=[],u=1;u<f.length;u++){var y=f.end(u-1),A=f.start(u);k.push([y,A])}f=U.createTimeRanges(k)}for(k=0;k<f.length;k++)if(u=f.start(k),y=f.end(k),4>g-u&&2<g-u)return{start:u,end:y};return null};return m}(),ks={errorInterval:30,getSource:function(m){var l=
this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource();return m(l)}},ls=function g(l,f){var k=0,u=0,y=U.mergeOptions(ks,f);l.ready(function(){l.trigger({type:"usage",name:"vhs-error-reload-initialized"});l.trigger({type:"usage",name:"hls-error-reload-initialized"})});var A=function(){u&&l.currentTime(u)},H=function(M){null!==M&&void 0!==M&&(u=Infinity!==l.duration()&&l.currentTime()||0,l.one("loadedmetadata",A),l.src(M),l.trigger({type:"usage",name:"vhs-error-reload"}),l.trigger({type:"usage",
name:"hls-error-reload"}),l.play())},S=function(){if(Date.now()-k<1E3*y.errorInterval)l.trigger({type:"usage",name:"vhs-error-reload-canceled"}),l.trigger({type:"usage",name:"hls-error-reload-canceled"});else{if(y.getSource&&"function"===typeof y.getSource)return k=Date.now(),y.getSource.call(l,H);U.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}},W=function T(){l.off("loadedmetadata",A);l.off("error",S);l.off("dispose",T)};l.on("error",S);l.on("dispose",W);l.reloadSourceOnError=
function(T){W();g(l,T)}},Zm=function(l){ls(this,l)},xb={PlaylistLoader:Id,Playlist:Lb,utils:Eq,STANDARD_PLAYLIST_SELECTOR:Nm,INITIAL_PLAYLIST_SELECTOR:function(){var l=this,f=this.playlists.master.playlists.filter(Lb.isEnabled);we(f,function(g,k){return li(g,k)});return f.filter(function(g){return!!ve(l.playlists.master,g).video})[0]||null},lastBandwidthSelector:Nm,movingAverageBandwidthSelector:function(l){var f=-1;if(0>l||1<l)throw Error("Moving average bandwidth decay must be between 0 and 1.");
return function(){var g=this.useDevicePixelRatio?ra.devicePixelRatio||1:1;0>f&&(f=this.systemBandwidth);f=l*this.systemBandwidth+(1-l)*f;return Mm(this.playlists.master,f,parseInt(Ff(this.tech_.el(),"width"),10)*g,parseInt(Ff(this.tech_.el(),"height"),10)*g,this.limitRenditionByPlayerDimensions)}},comparePlaylistBandwidth:li,comparePlaylistResolution:function(l,f){if(l.attributes.RESOLUTION&&l.attributes.RESOLUTION.width)var g=l.attributes.RESOLUTION.width;g=g||ra.Number.MAX_VALUE;if(f.attributes.RESOLUTION&&
f.attributes.RESOLUTION.width)var k=f.attributes.RESOLUTION.width;k=k||ra.Number.MAX_VALUE;return g===k&&l.attributes.BANDWIDTH&&f.attributes.BANDWIDTH?l.attributes.BANDWIDTH-f.attributes.BANDWIDTH:g-k},xhr:$l()};Object.keys(qb).forEach(function(l){Object.defineProperty(xb,l,{get:function(){U.log.warn("using Vhs."+l+" is UNSAFE be sure you know what you are doing");return qb[l]},set:function(f){U.log.warn("using Vhs."+l+" is UNSAFE be sure you know what you are doing");"number"!==typeof f||0>f?U.log.warn("value of Vhs."+
l+" must be greater than or equal to 0"):qb[l]=f}})});var $m=function(l,f){f=f.media();for(var g=-1,k=0;k<l.length;k++)if(l[k].id===f.id){g=k;break}l.selectedIndex_=g;l.trigger({selectedIndex:g,type:"change"})},ms=function(l,f){f.representations().forEach(function(g){l.addQualityLevel(g)});$m(l,f.playlists)};xb.canPlaySource=function(){return U.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var ns=function(l,f,g){if(!l)return l;var k=f&&f.attributes&&f.attributes.CODECS,
u=g&&g.attributes&&g.attributes.CODECS;!u&&k&&1<k.split(",").length&&k.split(",").forEach(function(S){S=S.trim();if(Kl(S))u=S;else{var W=S;void 0===W&&(W="");Rc.video.test(W.trim().toLowerCase())&&(k=S)}});g=k?'video/mp4;codecs="'+k+'"':null;var y=u?'audio/mp4;codecs="'+u+'"':null,A={},H;for(H in l)A[H]={audioContentType:y,videoContentType:g},f.contentProtection&&f.contentProtection[H]&&f.contentProtection[H].pssh&&(A[H].pssh=f.contentProtection[H].pssh),"string"===typeof l[H]&&(A[H].url=l[H]);return U.mergeOptions(l,
A)},os=function(l,f){return l.reduce(function(g,k){if(!k.contentProtection)return g;var u=f.reduce(function(y,A){var H=k.contentProtection[A];H&&H.pssh&&(y[A]={pssh:H.pssh});return y},{});Object.keys(u).length&&g.push(u);return g},[])},ps=function(l){var f=l.player,g=l.sourceKeySystems,k=l.audioMedia;l=l.mainPlaylists;if(!f.eme.initializeMediaKeys)return Promise.resolve();k=k?l.concat([k]):l;var u=[],y=[];os(k,Object.keys(g)).forEach(function(A){y.push(new Promise(function(H,S){f.tech_.one("keysessioncreated",
H)}));u.push(new Promise(function(H,S){f.eme.initializeMediaKeys({keySystems:A},function(W){W?S(W):H()})}))});return Promise.race([Promise.all(u),Promise.race(y)])},qs=function(l){var f=l.player;l=ns(l.sourceKeySystems,l.media,l.audioMedia);return l?(f.currentSource().keySystems=l)&&!f.eme?(U.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1):!0:!1},an=function(){if(!ra.localStorage)return null;var l=ra.localStorage.getItem("videojs-vhs");if(!l)return null;try{return JSON.parse(l)}catch(f){return null}},
rs=function(l){return 0===l.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(l.substring(l.indexOf(",")+1)):l};xb.supportsNativeHls=function(){if(!hc||!hc.createElement)return!1;var l=hc.createElement("video");return U.getTech("Html5").isSupported()?"application/vnd.apple.mpegurl audio/mpegurl audio/x-mpegurl application/x-mpegurl video/x-mpegurl video/mpegurl application/mpegurl".split(" ").some(function(f){return/maybe|probably/i.test(l.canPlayType(f))}):!1}();var ss=hc&&
hc.createElement&&U.getTech("Html5").isSupported()?/maybe|probably/i.test(hc.createElement("video").canPlayType("application/dash+xml")):!1;xb.supportsNativeDash=ss;xb.supportsTypeNatively=function(l){return"hls"===l?xb.supportsNativeHls:"dash"===l?xb.supportsNativeDash:!1};xb.isSupported=function(){return U.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var pi=function(l){function f(k,u,y){var A=l.call(this,u,U.mergeOptions(y.hls,y.vhs))||this;y.hls&&Object.keys(y.hls).length&&
U.log.warn("Using hls options is deprecated. Use vhs instead.");A.logger_=oc("VhsHandler");u.options_&&u.options_.playerId&&(y=U(u.options_.playerId),y.hasOwnProperty("hls")||Object.defineProperty(y,"hls",{get:function(){U.log.warn("player.hls is deprecated. Use player.tech().vhs instead.");u.trigger({type:"usage",name:"hls-player-access"});return Yb(A)},configurable:!0}),y.hasOwnProperty("vhs")||Object.defineProperty(y,"vhs",{get:function(){U.log.warn("player.vhs is deprecated. Use player.tech().vhs instead.");
u.trigger({type:"usage",name:"vhs-player-access"});return Yb(A)},configurable:!0}),y.hasOwnProperty("dash")||Object.defineProperty(y,"dash",{get:function(){U.log.warn("player.dash is deprecated. Use player.tech().vhs instead.");return Yb(A)},configurable:!0}),A.player_=y);A.tech_=u;A.source_=k;A.stats={};A.ignoreNextSeekingEvent_=!1;A.setOptions_();if(A.options_.overrideNative&&u.overrideNativeAudioTracks&&u.overrideNativeVideoTracks)u.overrideNativeAudioTracks(!0),u.overrideNativeVideoTracks(!0);
else if(A.options_.overrideNative&&(u.featuresNativeVideoTracks||u.featuresNativeAudioTracks))throw Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");A.on(hc,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(H){(H=hc.fullscreenElement||hc.webkitFullscreenElement||hc.mozFullScreenElement||hc.msFullscreenElement)&&H.contains(A.tech_.el())&&A.masterPlaylistController_.smoothQualityChange_()});A.on(A.tech_,"seeking",function(){this.ignoreNextSeekingEvent_?
this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())});A.on(A.tech_,"error",function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()});A.on(A.tech_,"play",A.play);return A}Bc(f,l);var g=f.prototype;g.setOptions_=function(){var k=this;this.options_.withCredentials=this.options_.withCredentials||!1;this.options_.handleManifestRedirects=!1===this.options_.handleManifestRedirects?!1:!0;this.options_.limitRenditionByPlayerDimensions=
!1===this.options_.limitRenditionByPlayerDimensions?!1:!0;this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1;this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1;this.options_.useBandwidthFromLocalStorage="undefined"!==typeof this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1;this.options_.customTagParsers=this.options_.customTagParsers||[];this.options_.customTagMappers=this.options_.customTagMappers||
[];this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1;this.options_.handlePartialData=this.options_.handlePartialData||!1;"number"!==typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300);if("number"!==typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var u=an();u&&u.bandwidth&&(this.options_.bandwidth=u.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"}));
u&&u.throughput&&(this.options_.throughput=u.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!==typeof this.options_.bandwidth&&(this.options_.bandwidth=qb.INITIAL_BANDWIDTH);this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===qb.INITIAL_BANDWIDTH;"withCredentials useDevicePixelRatio limitRenditionByPlayerDimensions bandwidth smoothQualityChange customTagParsers customTagMappers handleManifestRedirects cacheEncryptionKeys handlePartialData playlistSelector initialPlaylistSelector experimentalBufferBasedABR liveRangeSafeTimeDelta".split(" ").forEach(function(y){"undefined"!==
typeof k.source_[y]&&(k.options_[y]=k.source_[y])});this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions;this.useDevicePixelRatio=this.options_.useDevicePixelRatio};g.src=function(k,u){var y=this;k&&(this.setOptions_(),this.options_.src=rs(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=xb,this.options_.sourceType=el(u),this.options_.seekTo=function(A){y.tech_.setCurrentTime(A)},this.masterPlaylistController_=new fs(this.options_),k=U.mergeOptions({liveRangeSafeTimeDelta:pc},
this.options_,{seekable:function(){return y.seekable()},media:function(){return y.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_}),this.playbackWatcher_=new js(k),this.masterPlaylistController_.on("error",function(){var A=U.players[y.tech_.options_.playerId],H=y.masterPlaylistController_.error;"object"!==typeof H||H.code?"string"===typeof H&&(H={message:H,code:3}):H.code=3;A.error(H)}),k=this.options_.experimentalBufferBasedABR?xb.movingAverageBandwidthSelector(.55):
xb.STANDARD_PLAYLIST_SELECTOR,this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):k.bind(this),this.masterPlaylistController_.selectInitialPlaylist=xb.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(A){this.masterPlaylistController_.selectPlaylist=
A.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(A){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=A;this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(A){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=A;this.masterPlaylistController_.mainSegmentLoader_.throughput=
{rate:0,count:0}}},systemBandwidth:{get:function(){return Math.floor(1/(1/(this.bandwidth||1)+(0<this.throughput?1/this.throughput:0)))},set:function(){U.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return y.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return y.masterPlaylistController_.mediaRequests_()||
0},enumerable:!0},mediaRequestsAborted:{get:function(){return y.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return y.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return y.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return y.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return y.masterPlaylistController_.mediaBytesTransferred_()||
0},enumerable:!0},mediaSecondsLoaded:{get:function(){return y.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},buffered:{get:function(){return hd(y.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return y.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return y.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return y.tech_.name_},enumerable:!0},duration:{get:function(){return y.tech_.duration()},enumerable:!0},master:{get:function(){return y.playlists.master},
enumerable:!0},playerDimensions:{get:function(){return y.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return hd(y.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return y.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){if(y.options_.useBandwidthFromLocalStorage){var A=
{bandwidth:y.bandwidth,throughput:Math.round(y.throughput)};if(ra.localStorage){var H=an();H=H?U.mergeOptions(H,A):A;try{ra.localStorage.setItem("videojs-vhs",JSON.stringify(H))}catch(S){}}}}),this.masterPlaylistController_.on("selectedinitialmedia",function(){is(y)}),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",function(){y.setupEme_()}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,
"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=ra.URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_)))};g.setupEme_=function(){var k=this,u=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,y=qs({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:u&&u.media()});11!==U.browser.IE_VERSION&&y?(this.logger_("waiting for EME key session creation"),
ps({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:u&&u.media(),mainPlaylists:this.playlists.master.playlists}).then(function(){k.logger_("created EME key session");k.masterPlaylistController_.sourceUpdater_.initializedEme()})["catch"](function(A){k.logger_("error while creating EME key session",A);k.player_.error({message:"Failed to initialize media keys for EME",code:3})})):this.masterPlaylistController_.sourceUpdater_.initializedEme()};g.setupQualityLevels_=function(){var k=
this,u=U.players[this.tech_.options_.playerId];u&&u.qualityLevels&&!this.qualityLevels_&&(this.qualityLevels_=u.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){ms(k.qualityLevels_,k)}),this.playlists.on("mediachange",function(){$m(k.qualityLevels_,k.playlists)}))};f.version=function(){return{"@videojs/http-streaming":"2.6.4","mux.js":"5.10.0","mpd-parser":"0.15.4","m3u8-parser":"4.5.2","aes-decrypter":"3.1.2"}};g.version=function(){return this.constructor.version()};
g.canChangeType=function(){return Um.canChangeType()};g.play=function(){this.masterPlaylistController_.play()};g.setCurrentTime=function(k){this.masterPlaylistController_.setCurrentTime(k)};g.duration=function(){return this.masterPlaylistController_.duration()};g.seekable=function(){return this.masterPlaylistController_.seekable()};g.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose();this.masterPlaylistController_&&this.masterPlaylistController_.dispose();this.qualityLevels_&&
this.qualityLevels_.dispose();this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls);this.tech_&&this.tech_.vhs&&delete this.tech_.vhs;this.tech_&&delete this.tech_.hls;this.mediaSourceUrl_&&ra.URL.revokeObjectURL&&(ra.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null);l.prototype.dispose.call(this)};g.convertToProgramTime=function(k,u){return Jq({playlist:this.masterPlaylistController_.media(),time:k,callback:u})};g.seekToProgramTime=function(k,
u,y,A){void 0===y&&(y=!0);void 0===A&&(A=2);return Kq({programTime:k,playlist:this.masterPlaylistController_.media(),retryCount:A,pauseAfterSeek:y,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:u})};return f}(U.getComponent("Component")),Jf={name:"videojs-http-streaming",VERSION:"2.6.4",canHandleSource:function(l,f){void 0===f&&(f={});f=U.mergeOptions(U.options,f);return Jf.canPlayType(l.type,f)},handleSource:function(l,f,g){void 0===g&&(g={});g=U.mergeOptions(U.options,g);f.vhs=new pi(l,
f,g);U.hasOwnProperty("hls")||Object.defineProperty(f,"hls",{get:function(){U.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead.");return f.vhs},configurable:!0});f.vhs.xhr=$l();f.vhs.src(l.src,l.type);return f.vhs},canPlayType:function(l,f){void 0===f&&(f={});f=U.mergeOptions(U.options,f).vhs.overrideNative;f=void 0===f?!U.browser.IS_ANY_SAFARI:f;l=el(l);return!l||xb.supportsTypeNatively(l)&&!f?"":"maybe"}};rf("avc1.4d400d,mp4a.40.2")&&U.getTech("Html5").registerSourceHandler(Jf,
0);U.VhsHandler=pi;Object.defineProperty(U,"HlsHandler",{get:function(){U.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead.");return pi},configurable:!0});U.VhsSourceHandler=Jf;Object.defineProperty(U,"HlsSourceHandler",{get:function(){U.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead.");return Jf},configurable:!0});U.Vhs=xb;Object.defineProperty(U,"Hls",{get:function(){U.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead.");
return xb},configurable:!0});U.use||(U.registerComponent("Hls",xb),U.registerComponent("Vhs",xb));U.options.vhs=U.options.vhs||{};U.options.hls=U.options.hls||{};U.registerPlugin?U.registerPlugin("reloadSourceOnError",Zm):U.plugin("reloadSourceOnError",Zm);x.exports=U})),us=function(){return function(x){var F=this;this.config=x;this.log=function(w){F.videoEvent&&(F.videoEvent("setEntity",{video:ab.__assign(ab.__assign({},F.basePayload),w)}),F.videoEvent("log",{schemaId:F.schemaId},{ent:"all"}))};
this.schemaId=x.schemaId;this.basePayload={player:"Brila",parentElementId:x.parentElementId};window.csa&&(this.videoEvent=window.csa("Events",{producerId:x.producerId,lob:window.ue_lob?window.ue_lob:""}))}}(),bn=function(x){var F=x.emit,w=x.durationMs,X=x.contentIdInfoMap,Y=null,ia="",Q=function(){if(null!==Y){window.clearTimeout(Y);Y=null;var ha=null===X||void 0===X?void 0:X.get(ia);if(ha){var ya=Date.now();X.set(ia,{complete:ha.complete,timeWatchedMs:ya-ha.lastPlayedTimestamp,lastPlayedTimestamp:ya});
ia=""}}},aa=function(ha,ya){0>=ha?Q():Y=window.setTimeout(function(){Y=null;F();null===X||void 0===X?void 0:X.set(ya,{complete:!0,timeWatchedMs:w,lastPlayedTimestamp:-1})},ha)};return{stop:function(){Q()},start:function(ha){ia=ha;void 0===X.get(ha)&&X.set(ha,{complete:!1,timeWatchedMs:0,lastPlayedTimestamp:Date.now()});ha=null===X||void 0===X?void 0:X.get(ha);void 0===ha||ha.complete||null!==Y||aa(w-ha.timeWatchedMs,ia)}}},vs=function(){function x(F){var w=this,X,Y;this.config=F;this.alPlayerAUIEventEmitted=
this.sessionStartEmitted=this.ptffEmitted=this.playbackStartEmitted=!1;this.ptffStartTimestamp=0;this.isSegmentStarted=!1;this.prevSegmentStopTime=this.segmentStartTime=0;this.isRebuffering=this.closedCaptionsEnabled=!1;this.pauseTime=this.lastUpdatedTime=this.currentTime=this.totalDuration=this.prevPlayHeadTime=this.rebufferDuration=this.rebufferCount=this.rebufferStartTime=0;this.isPaused=this.isPausedWhileSeeking=!1;this.seekingTime=0;this.isEnded=this.thirdQuartileReached=this.midpointReached=
this.firstQuartileReached=this.hasSeekedAwaitingPlayback=!1;this.hbWatchTotalDuration=this.hbSystemStartTime=this.hbWatchSegmentStartTime=0;this.ospAttributionReported=!1;this.timeSinceLastMinWatched=this.minWatchedStartTime=this.lastMinWatchedTime=this.loggingInterval=this.initialLoggingDelay=this.secondsFromLastEvent=this.lastLoggedEventInterval=0;this.minWatchedOffset=1E3*Math.floor(60*Math.random());this.isMinWatchStarted=!1;this.timeSinceLastWatchTime=this.watchTimeStartTime=this.lastWatchTime=
0;this.watchTimeOffset=1E3*Math.floor(2*Math.random());this.widgetInViewportReported=this.isWatchTimeStarted=!1;this.emitTwoSecondsView=this.isMetricEmissionActive=!0;this.initialize=function(){w.hbWatchInterval=null;w.playheadInterval=null;w.rebufferDetectionInterval=null;w.playerInstance.on(za[za.loadstart],w.loadStartHandler);w.playerInstance.on(za[za.playing],w.playingHandler);w.playerInstance.on(za[za.pause],w.pauseHandler);w.playerInstance.on(za[za.timeupdate],w.timeupdateHandler);w.playerInstance.on(za[za.rebuffering],
w.rebufferingHandler);w.playerInstance.on(za[za.seeking],w.seekingHandler);w.playerInstance.on(za[za.seeked],w.seekedHandler);w.playerInstance.on(za[za.error],w.errorHandler);w.playerInstance.on(za[za.ended],w.endedHandler);w.playerInstance.on(za[za.requestmute],w.muteHandler);w.playerInstance.on(za[za.requestunmute],w.unmuteHandler);w.playerInstance.on(za[za.requestpause],w.pauseRequestHandler);w.playerInstance.on(za[za.requestplay],w.playRequestHandler);w.playerInstance.on(za[za.invokeplay],w.invokePlayHandler);
w.addPageNavigationHandler();w.addScrubberClickHandler()};this.addScrubberClickHandler=function(){var Q=sb["default"].cardRoot.querySelector(".vjs-progress-holder.vjs-slider.vjs-slider-horizontal");Q&&Q.addEventListener("click",function(aa){aa.target===aa.currentTarget&&w.recordScrubberClickEvent()})};this.addPageNavigationHandler=function(){V["default"].capabilities.ios&&V["default"].capabilities.isSafari?window.onpagehide=w.publishBeforeDispose:window.onbeforeunload=w.publishBeforeDispose};this.publishBeforeDispose=
function(){w.isEnded||(w.segmentStop(!1),w.publishEndOfSessionMetrics())};this.updateContentId=function(Q){w.isEnded||(w.segmentStop(!1),w.publishEndOfSessionMetrics());w.contentId=Q};this.updateRankingStrategy=function(Q){w.rankingStrategy=Q};this.updateAciContentId=function(Q){w.aciContentId=Q};this.updatePlacementContext=function(Q){w.playerPlacementSuffix=Q};this.updateOspData=function(Q){var aa;(aa=V["default"].objectIsEmpty(Q))||(aa=ld(Q)||ld(Q.vendorTrackingId)||ld(Q.videoReferenceId)||ld(Q.productAsin));
aa?((V["default"].objectIsEmpty(Q)||V["default"].objectIsEmpty(Q.vendorTrackingId)&&V["default"].objectIsEmpty(Q.videoReferenceId)&&V["default"].objectIsEmpty(Q.productAsin))&&w.emitOspMetrics("vse:osp:tag:invalid:record"),w.ospAttributionReported=!0):(w.ospTrackingId=Q.vendorTrackingId,w.ospReferenceId=Q.videoReferenceId,w.ospProductAsin=Q.productAsin,w.ospAttributionReported=!1)};this.updateTextTrackMetrics=function(){var Q=w.playerInstance.videoJS.remoteTextTracks();if(Q)for(var aa=function(ya){var Da=
Q[ya];Da.on("modechange",function(){var Ha="showing"===Da.mode;Ha!==w.closedCaptionsEnabled&&(Ha?(w.closedCaptionsEnabled=!0,Ha=w.buildCsmPlayerEvent("primary.closedCaptionsOn","",1),Z.isClosedCaptionsEnabled=!0,!0!==w.enableTextTracksByDefault&&(w.logCSAEvent("CAPTIONS_ON"),Ra(Ha)),w.enableTextTracksByDefault=!1):(w.closedCaptionsEnabled=!1,Ha=w.buildCsmPlayerEvent("primary.closedCaptionsOff","",1),Z.isClosedCaptionsEnabled=!1,w.logCSAEvent("CAPTIONS_OFF"),Ra(Ha)))})},ha=0;ha<Q.length;++ha)aa(ha)};
this.buildOspAttributionTag=function(){var Q="/gp/mobile/tag/ref="+w.ospReftag,aa="tag="+w.ospTrackingId,ha="creativeASIN="+w.ospProductAsin,ya="linkCode="+w.linkCode,Da="ascsubtag="+w.ospReferenceId,Ha="";ld(w.aciContentId)||(Ha="&asc_item-id="+w.aciContentId);return Q+"?"+aa+"&"+ya+"&"+ha+"&"+Da+Ha};this.reportOspAttribution=function(Q,aa){void 0===Q&&(Q=0);void 0===aa&&(aa="");if(!0===w.enableClickBasedAttribution)return w.ospAttributionReported=!0;if(3<=Q)aa&&aa.includes(w.ospReferenceId)&&(w.ospAttributionReported=
!0),w.emitOspMetrics("vse:osp:tag:emitted:error");else if(0<Q||30<=w.hbWatchTotalDuration||30<w.playerInstance.getMediaDuration()&&w.hbWatchTotalDuration>=w.playerInstance.getMediaDuration()-1&&w.isEnded){var ha=aa||w.buildOspAttributionTag();V["default"].get(ha,{success:function(){ha&&ha.includes(w.ospReferenceId)&&(w.ospAttributionReported=!0);w.emitOspMetrics("vse:osp:tag:emitted:success");Ra(w.buildCsmPlayerEvent("tagEmitted",w.ospTrackingId,1))},error:function(){w.reportOspAttribution(++Q,ha)}})}};
this.reportVideoViewingMetric=function(){var Q=Math.round(1E3*w.hbWatchTotalDuration),aa=w.buildCsmPlayerEvent("primary.viewedDuration","",Q);Ra(aa);w.emitTwoSecondsView&&w.playerPlacementBase.toLowerCase()&&2E3<=Q&&(Q="vse:csm:brilametrics:"+w.playerPlacementBase.toLowerCase()+":twoSecondsView",Ec.count(Q,1),w.emitTwoSecondsView=!1)};this.heartbeatWatchIntervalHandler=function(){var Q=w.playerInstance.getCurrentTime();w.hbWatchTotalDuration+=Q-w.hbWatchSegmentStartTime;w.ospAttributionReported||
w.reportOspAttribution();w.reportVideoViewingMetric();w.hbWatchSegmentStartTime=Q;w.hbSystemStartTime=V["default"].now()};this.heartbeatWatchStop=function(Q){var aa=w.playerInstance.getCurrentTime()-w.hbWatchSegmentStartTime;w.hbWatchTotalDuration+=aa;clearInterval(w.hbWatchInterval);w.hbWatchInterval=null;if(Q&&(Q=Math.round(1E3*aa),aa=V["default"].now()-w.hbSystemStartTime,2200<Q||-200>Q||Q<aa-200||Q>aa+200))return;w.ospAttributionReported||w.reportOspAttribution()};this.waitForPlaybackToBegin=
function(Q){if(null===w.playheadInterval){var aa=w.playerInstance.getCurrentTime();w.playheadInterval=V["default"].interval(function(){try{w.playerInstance.getCurrentTime()>aa+.05&&(clearInterval(w.playheadInterval),w.playheadInterval=null,Q())}catch(ha){clearInterval(w.playheadInterval),w.playheadInterval=null}},10)}};this.setupRebufferDetection=function(){null===w.rebufferDetectionInterval&&(w.prevPlayHeadTime=w.playerInstance.getCurrentTime(),clearInterval(w.rebufferDetectionInterval),w.rebufferDetectionInterval=
V["default"].interval(w.rebufferDetectionIntervalHandler,250))};this.rebufferDetectionIntervalHandler=function(){var Q=w.playerInstance.getCurrentTime();Q===w.prevPlayHeadTime&&0!==w.prevPlayHeadTime&&w.playerInstance.videoJS.trigger(za[za.rebuffering]);w.prevPlayHeadTime=Q};this.playingHandler=function(){if(w.videoPlayLatency){var Q=Date.now()-w.videoPlayLatency;ab.__assign({isMuted:w.playerInstance.isMuted(),eventType:"videoPlay",int_payload:Q},w.playerInstance.getActiveAsset());w.videoPlayLatency=
null}Q=V["default"].now();w.logCSAEvent("PLAYING");w.addCSAEventHandler();if(w.isRebuffering){var aa=Q-w.rebufferStartTime;w.rebufferDuration+=aa;w.isRebuffering=!1;aa=w.buildCsmPlayerEvent("primary.rebufferInstance","",aa);Ra(aa)}w.segmentStart();w.hasSeekedAwaitingPlayback=!1;w.stopMinWatched();w.startMinWatchedInterval();w.stopWatchTime();w.startWatchTimeInterval();w.startPlayInViewPort(w.contentId);w.playbackStartEmitted||(aa=w.buildCsmPlayerEvent("primary.startCount","",1),Ra(aa),aa=w.buildCsmClickstreamEvent("DISCOVERY",
"IVEVideoView"),Nf(aa,vi),w.playbackStartEmitted=!0);w.ptffEmitted||(aa=w.buildCsmPlayerEvent("playToFirstFrameDuration","",Q-w.ptffStartTimestamp),Ra(aa),w.ptffEmitted=!0);w.reportWidgetInViewportWithDelay();w.alPlayerAUIEventEmitted||"vse-insitu-video"!==w.config.videoPlayerClass||(V["default"].trigger("amazonLiveEvent:playerFunctional"),w.alPlayerAUIEventEmitted=!0);w.isEnded=!1};this.pauseHandler=function(){w.isPaused=!0;w.pauseTime=w.playerInstance.getCurrentTime();w.isPausedWhileSeeking=w.playerInstance.isSeeking();
w.segmentStop(!0);w.stopMinWatched();w.stopWatchTime();w.stopPlayInViewPort();w.clearWidgetInViewportTimeoutId()};this.loadStartHandler=function(){w.videoPlayLatency=Date.now()};this.invokePlayHandler=function(){if(!w.sessionStartEmitted&&!w.ptffEmitted){w.ptffStartTimestamp=V["default"].now();var Q=w.buildCsmPlayerEvent("titleSessionStart","",1);Ra(Q);Q=w.buildCsmPlayerEvent("titleSessionStartInstant",w.ptffStartTimestamp.toString(),0);Ra(Q);w.sessionStartEmitted=!0}};this.pauseRequestHandler=function(){var Q=
w.buildCsmPlayerEvent("primary.pause","",1);Ra(Q);w.logCSAEvent("STOPPED");w.removeCSAEventHandler()};this.playRequestHandler=function(){if(w.isPaused){w.isPaused=!1;var Q=w.buildCsmPlayerEvent("primary.resume","",1);Ra(Q)}};this.timeupdateHandler=function(){w.lastUpdatedTime=w.currentTime;w.currentTime=w.playerInstance.getCurrentTime();var Q=w.playerInstance.getMediaDuration();if(0!==Q){if(w.currentTime>.75*Q&&!w.thirdQuartileReached){var aa=w.buildCsmPlayerEvent("primary.thirdQuartileCount","",
1);Ra(aa);w.thirdQuartileReached=!0}w.currentTime>.5*Q&&!w.midpointReached&&(aa=w.buildCsmPlayerEvent("primary.midpointCount","",1),Ra(aa),w.midpointReached=!0);w.currentTime>.25*Q&&!w.firstQuartileReached&&(aa=w.buildCsmPlayerEvent("primary.firstQuartileCount","",1),Ra(aa),w.firstQuartileReached=!0)}};this.endedHandler=function(){w.isEnded=!0;w.stopMinWatched();w.stopWatchTime();w.stopPlayInViewPort();w.ospAttributionReported||w.reportOspAttribution();var Q=w.buildCsmPlayerEvent("primary.complete",
"",1);Ra(Q);w.logCSAEvent("ENDED");w.publishEndOfSessionMetrics()};this.rebufferingHandler=function(){w.segmentStop(!1);w.rebufferStartTime=V["default"].now();w.isRebuffering=!0;w.rebufferCount+=1};this.seekingHandler=function(){w.seekingTime=w.playerInstance.getCurrentTime();clearInterval(w.playheadInterval);w.playheadInterval=null;clearInterval(w.rebufferDetectionInterval);w.rebufferDetectionInterval=null;w.isPausedWhileSeeking&&(w.totalDuration-=w.pauseTime-w.lastUpdatedTime,w.isPausedWhileSeeking=
!1)};this.seekedHandler=function(){w.hasSeekedAwaitingPlayback||(w.hasSeekedAwaitingPlayback=!0)};this.errorHandler=function(){var Q=w.playerInstance.videoJS.error().code;w.stopMinWatched();w.stopWatchTime();w.stopPlayInViewPort();if(1===Q||2===Q)var aa="primary.loadError";else 3===Q||5===Q?(aa="primary.interpretError",Q=w.buildCsmPlayerEvent(3===Q?"primary.interpretDecodeError":"primary.interpretEncryptedError","",1),Ra(Q)):aa=4===Q?"primary.videoUnsupportedError":"primary.undefinedError";aa=w.buildCsmPlayerEvent(aa,
"",1);Ra(aa)};this.segmentStart=function(){w.isSegmentStarted=!0;w.segmentStartTime=w.playerInstance.getCurrentTime();null===w.hbWatchInterval&&(w.hbWatchSegmentStartTime=w.playerInstance.getCurrentTime(),w.hbSystemStartTime=Date.now(),w.hbWatchInterval=V["default"].interval(w.heartbeatWatchIntervalHandler,2E3));w.waitForPlaybackToBegin(w.setupRebufferDetection)};this.segmentStop=function(Q){w.isSegmentStarted&&(w.isSegmentStarted=!1,clearInterval(w.playheadInterval),w.playheadInterval=null,clearInterval(w.rebufferDetectionInterval),
w.rebufferDetectionInterval=null,null!==w.hbWatchInterval&&w.heartbeatWatchStop(Q),Q=w.playerInstance.getCurrentTime(),void 0!==w.segmentStartTime&&Q!==w.prevSegmentStopTime&&(w.totalDuration+=Q-w.segmentStartTime,w.prevSegmentStopTime=Q))};this.muteHandler=function(){var Q=w.buildCsmPlayerEvent("primary.mute","",1);Ra(Q);w.logCSAEvent("MUTED");ab.__assign({eventType:"mute",eventTriggerType:"userClick",isMuted:w.playerInstance.isMuted()},w.playerInstance.getActiveAsset())};this.unmuteHandler=function(){var Q=
w.buildCsmPlayerEvent("primary.unmute","",1);Ra(Q);w.logCSAEvent("UNMUTED");ab.__assign({eventType:"unmute",eventTriggerType:"userClick",isMuted:w.playerInstance.isMuted()},w.playerInstance.getActiveAsset())};this.publishEndOfSessionMetrics=function(){if(!(0>=w.totalDuration)){var Q=V["default"].now().toString(),aa=Math.round(1E3*w.totalDuration),ha=Math.round(1E3*w.playerInstance.getMediaDuration()),ya=Math.round(w.rebufferDuration),Da=(100*w.totalDuration/w.playerInstance.getMediaDuration()).toFixed(2);
ha=w.buildCsmPlayerEvent("primary.mediaDuration","",ha);Ra(ha);ha=w.buildCsmPlayerEvent("primary.viewedDuration","",aa);Ra(ha);ha=w.buildCsmPlayerEvent("primary.viewedPercentage",Da,0);Ra(ha);ha=w.buildCsmPlayerEvent("titleSessionEndInstant",Q,0);Ra(ha);ha=w.buildCsmPlayerEvent("primary.rebufferDuration","",ya);Ra(ha);ha=w.buildCsmPlayerEvent("primary.rebufferCount","",w.rebufferCount);Ra(ha);ha=w.buildCsmPlayerEvent("primary.rebufferOccurred","",0<w.rebufferCount?1:0);Ra(ha);w.playbackStartEmitted=
!1;w.sessionStartEmitted=!1;w.ptffEmitted=!1;w.isSegmentStarted=!1;w.segmentStartTime=0;w.prevSegmentStopTime=0;w.playheadInterval=null;w.rebufferDetectionInterval=null;w.isRebuffering=!1;w.rebufferStartTime=0;w.rebufferCount=0;w.rebufferDuration=0;w.prevPlayHeadTime=0;w.totalDuration=0;w.currentTime=0;w.lastUpdatedTime=0;w.pauseTime=0;w.isPausedWhileSeeking=!1;w.seekingTime=0;w.hasSeekedAwaitingPlayback=!1;w.firstQuartileReached=!1;w.midpointReached=!1;w.thirdQuartileReached=!1;w.hbWatchSegmentStartTime=
0;w.hbWatchInterval=null;w.hbSystemStartTime=0;w.hbWatchTotalDuration=0;w.emitTwoSecondsView=!0;w.titleSessionId=w.generateTitleSessionId()}};this.getTitleSessionId=function(){return w.titleSessionId};this.generateTitleSessionId=function(){return(1E19*Math.random()).toString()};this.emitOspMetrics=function(Q){var aa=V["default"].objectIsEmpty(w.ospTrackingId)?"InvalidVendorTrackingId":w.ospTrackingId;Q=w.buildCsmPlayerEvent(Q,aa,1);aa=w.linkCode;void 0===aa&&(aa="vgw");if(!ld(Q.eventName)){var ha=
Q.eventName;Ec.count(ha,1);Ec.count(ha+":"+aa,1);Ra(Q);Q.eventName=ha+":"+aa;Ra(Q)}};this.buildCsmPlayerEvent=function(Q,aa,ha){var ya,Da,Ha;Q=Z.buildCsmPayload({titleSessionId:w.titleSessionId,eventName:Q,stringPayload:aa,intPayload:ha,videoAsin:w.contentId,rankingStrategy:null!==(Ha=null===(Da=null===(ya=w.config.playerInstance)||void 0===ya?void 0:ya.getActiveAsset())||void 0===Da?void 0:Da.rankingStrategy)&&void 0!==Ha?Ha:"",refMarkers:w.config.refTag,scrubberPosition:w.playerInstance.getCurrentTime(),
pageUrl:null!==window.location.href?window.location.href.substring(0,500):"",customerId:Z.customerId});Q.placementContext=w.playerPlacementBase+"."+w.playerPlacementSuffix;return Q};this.buildCsmClickstreamEvent=function(Q,aa){return{actionType:Q,eventOwner:w.config.nexusConfig.producerId,eventType:aa,productId:w.ospProductAsin}};this.addCSAEventHandler=function(){w.lastLoggedEventInterval=V["default"].interval(function(){w.secondsFromLastEvent++},1E3);w.initialLoggingDelay=V["default"].delay(function(){w.logCSAEvent("PLAYING");
w.loggingInterval=V["default"].interval(function(){w.logCSAEvent("NONE")},3E4)},2E3)};this.removeCSAEventHandler=function(){clearInterval(w.lastLoggedEventInterval);clearInterval(w.loggingInterval);clearTimeout(w.initialLoggingDelay);w.secondsFromLastEvent=0;w.loggingInterval=0;w.initialLoggingDelay=0};this.resetCSAEventHandler=function(){w.removeCSAEventHandler();w.addCSAEventHandler()};this.updateCSAEventHandler=function(Q){switch(Q){case "MODE_CHANGED":case "MUTED":case "UNMUTED":case "CAPTIONS_OFF":case "CAPTIONS_ON":w.resetCSAEventHandler();
break;case "ENDED":case "STOPPED":w.removeCSAEventHandler()}};this.playerInstance=F.playerInstance;this.setupCSAMetrics();ui={schemaId:F.nexusConfig.playerSchemaId,producerId:F.nexusConfig.producerId,requiredNumOfFields:13};vi={schemaId:F.nexusConfig.clickstreamSchemaId,producerId:F.nexusConfig.producerId,requiredNumOfFields:9};Ci("Player");this.titleSessionId=this.generateTitleSessionId();var ia=Z.metricsPlacement.split(".");ia.pop();this.playerPlacementBase=ia.join(".");this.playerPlacementSuffix=
null!==(X=F.metricsSuffix)&&void 0!==X?X:"ingress";this.ospReftag=F.refTag;this.enableClickBasedAttribution=F.enableClickBasedAttribution;this.linkCode=F.linkCode;this.enableTextTracksByDefault=F.enableTextTracksByDefault;this.emitWatchTimeMetric=null!==(Y=F.emitWatchTimeMetric)&&void 0!==Y?Y:!1;this.playInViewPortMetrics={video2sPlayInViewPort:bn({emit:this.emit2SecViewMetric.bind(this),durationMs:2E3,contentIdInfoMap:new Map}),video30sPlayInViewPort:bn({emit:this.emit30SecViewMetric.bind(this),
durationMs:3E4,contentIdInfoMap:new Map})};this.playerInstance.getActiveAsset()?(this.contentId=this.playerInstance.getActiveAsset().contentId,this.rankingStrategy=this.playerInstance.getActiveAsset().rankingStrategy,this.aciContentId=this.playerInstance.getActiveAsset().aciContentId,F={vendorTrackingId:this.playerInstance.getActiveAsset().vendorTrackingId,videoReferenceId:this.playerInstance.getActiveAsset().videoReferenceId,productAsin:this.playerInstance.getActiveAsset().productAsin},this.updateOspData(F)):
this.ospProductAsin=this.ospReferenceId=this.ospTrackingId=this.aciContentId=this.contentId=""}x.prototype.calcTimeSinceLastMinWatched=function(){return this.lastMinWatchedTime||this.minWatchedStartTime?Date.now()-(this.lastMinWatchedTime||this.minWatchedStartTime):0};x.prototype.getTimeToNextMinWatched=function(F){void 0===F&&(F=!1);return this.lastMinWatchedTime?6E4-this.calcTimeSinceLastMinWatched():F?this.minWatchedOffset-=this.timeSinceLastMinWatched:this.minWatchedOffset-this.calcTimeSinceLastMinWatched()};
x.prototype.startMinWatchedInterval=function(){var F=this;this.isMetricEmissionActive&&!this.isMinWatchStarted&&(this.minWatchedStartTime=Date.now(),this.minWatchTimeoutId=window.setTimeout(function(){F.minWatchTimeoutId=0;F.emitMinWatched();F.minWatchedIntervalId=window.setInterval(function(){F.emitMinWatched()},6E4)},this.getTimeToNextMinWatched(!0)),this.isMinWatchStarted=!0)};x.prototype.stopMinWatched=function(){this.clearMinWatchedInterval();this.clearMinWatchedTimeout();this.minWatchedStartTime&&
(this.timeSinceLastMinWatched=this.calcTimeSinceLastMinWatched());this.minWatchedStartTime=0;this.isMinWatchStarted=!1};x.prototype.emitMinWatched=function(){this.lastMinWatchedTime=Date.now();this.playerInstance.getActiveAsset();this.playerInstance.isMuted()};x.prototype.calcTimeSinceLastWatchTime=function(){var F=this.lastWatchTime||this.watchTimeStartTime;return F?Date.now()-F:0};x.prototype.getTimeToNextWatchTime=function(F){void 0===F&&(F=!1);return this.lastWatchTime?2E3-this.calcTimeSinceLastWatchTime():
F?this.watchTimeOffset-=this.timeSinceLastWatchTime:this.watchTimeOffset-this.calcTimeSinceLastWatchTime()};x.prototype.startWatchTimeInterval=function(){var F=this;this.isMetricEmissionActive&&this.emitWatchTimeMetric&&!this.isWatchTimeStarted&&(this.watchTimeStartTime=Date.now(),this.watchTimeTimeoutId=window.setTimeout(function(){F.watchTimeTimeoutId=0;F.emitWatchTime();F.watchTimeIntervalId=window.setInterval(function(){F.emitWatchTime()},2E3)},this.getTimeToNextWatchTime(!0)),this.isWatchTimeStarted=
!0)};x.prototype.stopWatchTime=function(){this.clearWatchTimeInterval();this.clearWatchTimeTimeout();this.watchTimeStartTime&&(this.timeSinceLastWatchTime=this.calcTimeSinceLastWatchTime());this.watchTimeStartTime=0;this.isWatchTimeStarted=!1};x.prototype.emitWatchTime=function(){this.emitWatchTimeMetric&&(this.lastWatchTime=Date.now(),this.playerInstance.getActiveAsset(),this.playerInstance.isMuted())};x.prototype.clearWatchTimeInterval=function(){this.watchTimeIntervalId&&window.clearInterval(this.watchTimeIntervalId)};
x.prototype.clearWatchTimeTimeout=function(){this.watchTimeTimeoutId&&window.clearTimeout(this.watchTimeTimeoutId)};x.prototype.emit2SecViewMetric=function(){var F=this.playerInstance.getActiveAsset(),w=this.playerInstance.isMuted();ab.__assign({isMuted:w},F)};x.prototype.emit30SecViewMetric=function(){var F=this.playerInstance.getActiveAsset(),w=this.playerInstance.isMuted();ab.__assign({isMuted:w},F)};x.prototype.setMetricEmissionActive=function(F){this.isMetricEmissionActive=F};x.prototype.startPlayInViewPort=
function(F){this.isMetricEmissionActive&&(this.playInViewPortMetrics.video2sPlayInViewPort.start(F),this.playInViewPortMetrics.video30sPlayInViewPort.start(F))};x.prototype.clearWidgetInViewportTimeoutId=function(){this.widgetInViewportTimeoutId&&(window.clearTimeout(this.widgetInViewportTimeoutId),this.widgetInViewportTimeoutId=null)};x.prototype.stopPlayInViewPort=function(){this.playInViewPortMetrics.video2sPlayInViewPort.stop();this.playInViewPortMetrics.video30sPlayInViewPort.stop()};x.prototype.reportWidgetInViewportWithDelay=
function(){var F=this;!this.isMetricEmissionActive||this.widgetInViewportReported||this.widgetInViewportTimeoutId||(this.widgetInViewportTimeoutId=window.setTimeout(function(){ab.__assign({isMuted:F.playerInstance.isMuted(),eventType:"widgetInViewport"},F.playerInstance.getActiveAsset());F.widgetInViewportReported=!0},1E3))};x.prototype.clearMinWatchedInterval=function(){this.minWatchedIntervalId&&window.clearInterval(this.minWatchedIntervalId)};x.prototype.clearMinWatchedTimeout=function(){this.minWatchTimeoutId&&
window.clearTimeout(this.minWatchTimeoutId)};x.prototype.recordScrubberClickEvent=function(){var F=this.buildCsmPlayerEvent("primary.scrubberClick","",1);Ra(F)};x.prototype.getCSAConfig=function(){return{parentElementId:V["default"].$("."+Z.cardId).closest("[data-csa-c-id]").data("csa-c-id"),schemaId:"csa.VideoInteractions.2",producerId:"vsemetrics_csa_instrumentation"}};x.prototype.setupCSAMetrics=function(){var F=this;this.csa=new us(this.getCSAConfig());V["default"].on(Z.cardId+"PLAYER_METRIC_EMITTED",
function(w,X){F.logCSAEvent(w)})};x.prototype.logCSAEvent=function(F){if(""!==this.aciContentId){var w={contentId:this.aciContentId,viewDuration:this.secondsFromLastEvent.toString(),playerMode:Z.isIvxOpen?"IMMERSIVE_VIEW":"INLINE",isAutoPlayed:Z.isIvxOpen?"false":"true",isCaptionOn:this.closedCaptionsEnabled.toString(),isAudioOn:(!this.playerInstance.isMuted()).toString(),videoRequestId:this.titleSessionId.toString(),eventName:F};this.csa.log(w)}this.secondsFromLastEvent=0;this.updateCSAEventHandler(F)};
return x}(),ws=function(){return function(x){var F=this;this.updateTextTrack=function(w){w.forEach(function(X){F.videoJS.addRemoteTextTrack({src:X.url,kind:"subtitles",srclang:X.locale,label:"English (Automated)",default:!1},!1)})};this.removeCurrentTextTracks=function(){var w,X=F.videoJS.remoteTextTracks();if(X)try{for(var Y=ab.__values(X),ia=Y.next();!ia.done;ia=Y.next())F.videoJS.removeRemoteTextTrack(ia.value)}catch(aa){var Q={error:aa}}finally{try{ia&&!ia.done&&(w=Y.return)&&w.call(Y)}finally{if(Q)throw Q.error;
}}};this.enableCurrentTextTrack=function(w){void 0===w&&(w="en");F.changeTextTrackMode(w,"showing")};this.disableCurrentTextTrack=function(w){void 0===w&&(w="en");F.changeTextTrackMode(w,"disabled")};this.getTextTrackMode=function(w){var X,Y=F.videoJS.remoteTextTracks();if(Y)try{for(var ia=ab.__values(Y),Q=ia.next();!Q.done;Q=ia.next()){var aa=Q.value;if(F.isTextTrackEligible(aa,w))return aa.mode}}catch(ya){var ha={error:ya}}finally{try{Q&&!Q.done&&(X=ia.return)&&X.call(ia)}finally{if(ha)throw ha.error;
}}return"disabled"};this.changeTextTrackMode=function(w,X){var Y,ia=F.videoJS.remoteTextTracks();if(ia)try{for(var Q=ab.__values(ia),aa=Q.next();!aa.done;aa=Q.next()){var ha=aa.value;F.isTextTrackEligible(ha,w)&&(ha.mode=X)}}catch(Da){var ya={error:Da}}finally{try{aa&&!aa.done&&(Y=Q.return)&&Y.call(Q)}finally{if(ya)throw ya.error;}}};this.isTextTrackEligible=function(w,X){return"subtitles"===w.kind||"captions"===w.kind};this.videoJS=x}}(),xs=function(x,F){var w=x.canvas.width,X=x.canvas.height,Y=
F.videoWidth,ia=F.videoHeight;x.canvas.width=w;x.canvas.height=X;w+=0;var Q=w*ia/Y;x.filter="blur(30px)";x.drawImage(F,0,0,Y,ia,-0,(X-Q)/2,w,Q)},ys=function(x){document.querySelectorAll('[class*="mumContainer"]').forEach(function(F){F instanceof HTMLElement&&(F.style.bottom=x+"px")})},zs=function(x){document.querySelectorAll('[class*="videoTitleOverlay"][class*="vseHasProfile"]').forEach(function(F){F instanceof HTMLElement&&(F.style.position="absolute",F.style.bottom=x+"px")})},cn=function(x,F){null===
x||null===F||F.paused||(xs(x,F),window.requestAnimationFrame(function(){cn(x,F)}))},As=function(){function x(F){var w=this,X;this.customerMuted=!1;this.setActiveAsset=function(ma){w.activeAsset=ma;w.altTextElement&&(ma=(w.clickToExpandText?w.clickToExpandText:"Click to play video")+", "+w.encodeForHtml(ma.altText||ma.title||""),w.altTextElement.setAttribute("aria-label",ma))};this.setVideoStyles=function(ma){if("C"!==w.pfoWeblabTreatment&&w.verticalVideoBlurEnabled){ma=ma.orientation;var ua=w.cardId&&
document.querySelectorAll('[id*="'+w.cardId+'"].vjs-tech')[0];ua&&("VERTICAL"===ma?(ua.style.height=1.2*w.containerHeight+"px",ua.style.objectFit="contain"):(ua.style.height=w.containerHeight+"px",ua.style.minHeight=w.containerHeight+"px",ua.style.objectFit="cover"))}};this.getActiveAsset=function(){return w.activeAsset};this.hasActiveAsset=function(){return!!w.activeAsset};this.on=function(ma,ua){w.videoJS.on(ma,ua)};this.off=function(ma,ua){w.videoJS.off(ma,ua)};this.fluid=function(ma){w.videoJS.fluid(ma)};
this.fill=function(ma){w.videoJS.fill(ma)};this.aspectRatio=function(ma){w.videoJS.aspectRatio(ma)};this.resume=function(){w.videoJS.play();w.togglePlayPauseButton()};this.isPaused=function(){return w.videoJS.paused()};this.isEnded=function(){return w.videoJS.ended()};this.isPlaying=function(){return!w.isPaused()};this.isSeeking=function(){return w.videoJS.seeking()};this.pause=function(ma){w.videoJS.pause(ma);w.togglePlayPauseButton()};this.setCurrentTime=function(ma){w.videoJS.trigger(za[za.invokeplay]);
w.videoJS.currentTime(ma)};this.getCurrentTime=function(){return w.videoJS.currentTime()};this.getMediaDuration=function(){return isNaN(w.videoJS.duration())?0:w.videoJS.duration()};this.mute=function(){w.videoJS.muted(!0)};this.unMute=function(){w.customerMuted||w.videoJS.muted(!1)};this.isMuted=function(){return w.videoJS.muted()};this.seek=function(ma){w.videoJS.currentTime(ma)};this.showPoster=function(ma){w.videoJS.poster(ma.imageUrl);w.wrapper.querySelector(".vjs-poster").style.display="inline-block"};
this.hidePoster=function(){w.videoJS.poster("");w.wrapper.querySelector(".vjs-poster").style.display="none"};this.updateSrc=function(ma){w.videoJS.src({src:ma.videoUrl,type:ma.videoMimeType})};this.play=function(){w.videoJS.trigger(za[za.invokeplay]);var ma=w.videoJS.play();void 0!==ma&&ma.then(function(ua){bb("insituPlayerStartedAutoplay");w.togglePlayPauseButton()}).catch(function(ua){-1===ua.toString().indexOf("AbortError")&&(bc("Cannot autoplay video on Brila Player. Exception details: "+ua,"WARN"),
bb("insituPlayerFailedAutoplay"))})};this.initializePlayerClickMetrics=function(){w.initializePlayPauseMetrics();w.initializeMuteUnmuteMetrics()};this.initializePlayPauseMetrics=function(){var ma,ua,Aa;null===(Aa=null===(ua=null===(ma=w.videoJS.player())||void 0===ma?void 0:ma.controlBar)||void 0===ua?void 0:ua.playToggle)||void 0===Aa?void 0:Aa.on("click",function(){w.triggerVideoJSPlayPauseEvents()})};this.triggerVideoJSPlayPauseEvents=function(){w.togglePlayPauseButton();w.isPlaying()?w.videoJS.trigger(za[za.requestplay]):
w.videoJS.trigger(za[za.requestpause])};this.initializeMuteUnmuteMetrics=function(){var ma,ua,Aa;null===(Aa=null===(ua=null===(ma=w.videoJS.player())||void 0===ma?void 0:ma.controlBar)||void 0===ua?void 0:ua.muteToggle)||void 0===Aa?void 0:Aa.on("click",function(){w.triggerVideoJSMuteUnmuteEvents()})};this.makeVideoControlsTabAccessible=function(ma){w.videoJS.player().on("canplay",function(){V["default"].$(ma).attr("tabindex",0)})};this.triggerVideoJSMuteUnmuteEvents=function(){w.isMuted()?w.videoJS.trigger(za[za.requestmute]):
w.videoJS.trigger(za[za.requestunmute])};this.prepareForPlaying=function(ma){w.setInitialData(ma)};this.requestFullscreen=function(){w.videoJS.requestFullscreen()};this.exitFullscreen=function(){w.videoJS.exitFullscreen()};this.isFullscreen=function(){return w.videoJS.isFullscreen()};this.setPreload=function(ma){w.videoJS.tech_.el_.preload=ma};this.destroy=function(){w.metricsModule&&w.metricsModule.publishBeforeDispose();w.videoJS.dispose()};this.updatePlacementContext=function(ma){w.metricsModule.updatePlacementContext(ma)};
this.getTitleSessionId=function(){return w.metricsModule.getTitleSessionId()};this.error=function(){return w.videoJS.error()};this.setInitialData=function(ma){w.metricsModule&&(w.metricsModule.updateContentId(ma.contentId),w.metricsModule.updateRankingStrategy(ma.rankingStrategy),w.metricsModule.updateAciContentId(ma.aciContentId),w.metricsModule.updateOspData({vendorTrackingId:ma.vendorTrackingId?ma.vendorTrackingId:"",videoReferenceId:ma.videoReferenceId?ma.videoReferenceId:"",productAsin:ma.productAsin?
ma.productAsin:""}));w.config.enableAutoPlay&&w.videoJS.autoplay(!ma.isLivestreamEnded);w.setActiveAsset(ma);w.updateSrc(ma);if(w.config.showClosedCaptions){var ua=w.textTrackHelper.getTextTrackMode("en");w.textTrackHelper.removeCurrentTextTracks();w.textTrackHelper.updateTextTrack(ma.closedCaptions);w.metricsModule&&w.metricsModule.updateTextTrackMetrics();"showing"===ua&&w.textTrackHelper.enableCurrentTextTrack()}};this.togglePlayPauseButton=function(){w.customPlayButton&&w.customPlayButton.classList.toggle("aok-hidden",
w.isPlaying())};this.encodeForHtml=function(ma){var ua={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return ma.replace(/[&<>"']/g,function(Aa){return ua[Aa]||Aa})};try{this.config=F;this.verticalVideoBlurEnabled=F.verticalVideoBlurEnabled;this.pfoWeblabTreatment=F.pfoWeblabTreatment;this.cardId=F.cardId;this.wrapper=sb["default"].cardRoot.getElementsByClassName(F.parentCssClass)[0];var Y=this.wrapper.getElementsByClassName(F.videoPlayerClass)[0],ia=F.cardId+"-"+F.parentCssClass+"-element";
this.altTextElement=this.createAltTextElement(F.cardId);Y.id=ia;Y.className="video-js brila-vjs";Y.setAttribute("playsinline","true");Y.setAttribute("disablepictureinpicture","true");this.config.enableControls&&Y.setAttribute("controls","true");this.config.enableAutoPlay&&(Y.setAttribute("autoplay","true"),Y.setAttribute("muted","true"));this.config.enablePreload||Y.setAttribute("preload","none");var Q={techOrder:["html5"],html5:{vhs:{overrideNative:!V["default"].capabilities.isSafari},nativeAudioTracks:!1,
nativeVideoTracks:!1,nativeTextTracks:!1}};F.controls&&(Q.controlBar={children:F.controls});this.videoJS=ts(ia,Q);Y&&this.verticalVideoBlurEnabled&&this.addCanvasToVideo(this.cardId,this.pfoWeblabTreatment);var aa=this.config.playerModeConfig;aa&&("boolean"===typeof aa.fillMode&&this.fill(aa.fillMode),"boolean"===typeof aa.fluidMode&&this.fluid(aa.fluidMode));if(this.customPlayButton=sb["default"].cardRoot.querySelector(".ive-custom-play-button")){var ha=function(ma){w.videoJS.trigger(za[za.click],
ma);w.isMuted()&&w.unMute()};this.customPlayButton.addEventListener("click",function(ma){ha(ma)});this.customPlayButton.addEventListener("keydown",function(ma){"Enter"!==ma.key&&" "!==ma.key||ha(ma)})}var ya=this.wrapper.querySelector(".vjs-play-control");ya&&ya.addEventListener("click",function(){w.isMuted()&&w.unMute()});var Da=this.wrapper.querySelector(".vjs-mute-control");Da&&Da.addEventListener("click",function(){w.customerMuted=!w.customerMuted});this.textTrackHelper=new ws(this.videoJS);var Ha=
this.wrapper.querySelector("#"+ia);Ha.insertBefore(this.altTextElement,Ha.firstChild);var Ua={playerInstance:this,nexusConfig:{producerId:"vsemetrics_playercards",playerSchemaId:"vse.VSECardsPlayerEvents.9",clickstreamSchemaId:"clickstream.CustomerEvent.4"},refTag:null!==(X=F.refTag)&&void 0!==X?X:"vse_insitu_player",enableClickBasedAttribution:F.enableClickBasedAttribution,linkCode:F.linkCode,metricsSuffix:F.metricsSuffix,enableTextTracksByDefault:F.enableTextTracksByDefault,emitWatchTimeMetric:F.emitWatchTimeMetric,
videoPlayerClass:F.videoPlayerClass};this.metricsModule=new vs(Ua);this.metricsModule.initialize()}catch(ma){bc("fatal exception has occurred while creating player. Exception details: "+ma,"FATAL")}}x.prototype.addCanvasToVideo=function(F,w){if(F=F&&document.querySelectorAll('[id*="'+F+'"].vjs-tech')[0]){var X=document.createElement("canvas");X.classList.add(F.className,"custom-canvas");X.setAttribute("style","filter: blur(30px)");F.parentNode&&F.parentNode.insertBefore(X,F);if("C"!=w){X.classList.remove(F.className);
var Y=document.querySelectorAll('[data-elementid="vse-cards-insitu-thumbnail-overlay"]');if(0===Y.length)return;this.containerHeight=Y[0].offsetWidth/1.77;w="T1"===w?162:138;Y=this.containerHeight+w;ys(w);zs(w);X.style.width="100%";X.style.height=Y+"px"}this.attachPlayEventListener(F,X)}};x.prototype.createAltTextElement=function(F){var w=this,X=document.createElement("div");X.id="altText-"+F;X.className="iveAltTextCont";X.setAttribute("tabindex","0");X.setAttribute("role","description");X.onclick=
function(){w.videoJS.paused()?w.play():w.pause()};X.onkeydown=function(Y){if("Enter"===Y.key||" "===Y.key)Y.preventDefault(),w.videoJS.paused()?w.play():w.pause()};return X};x.prototype.getLocalizedString=function(F){return this.videoJS.localize(F)};x.prototype.attachPlayEventListener=function(F,w){F.addEventListener("play",function(){cn(w.getContext("2d"),F)},!1)};return x}(),Bs=function(x,F,w,X){void 0===F&&(F="");void 0===w&&(w="vse_cards");void 0===X&&(X=!1);var Y=V["default"].capabilities.mobile;
return{overrideMetricsPlacement:F,widgetMetricsSuffix:w,carouselItemClassName:X?x.vsePlc:x.carouselElement,widgetMetricsHandler:function(ia,Q){var aa=V["default"].throttle(function(){ia()},500,{leading:!1});V["default"].on(V["default"].constants.BROWSER_EVENTS.RESIZE,function(){ia()});V["default"].$("."+Z.cardId+" .a-carousel-goto-prevpage").click(function(){Q("left");aa()});V["default"].$("."+Z.cardId+" .a-carousel-goto-nextpage").click(function(){Q("right");aa()});Y&&(V["default"].off("a:carousel:vse-cards-vw-dp:change:pageNumber"),
V["default"].on("a:carousel:vse-cards-vw-dp:change:pageNumber",aa))}}},Uc,dn,en,fn,Kf={},Oa,Lf,Md=!1,gn=null,Vc=!1,kd,Mf=!1,Es=function(x,F){return ab.__awaiter(void 0,void 0,void 0,function(){var w,X,Y,ia,Q,aa,ha,ya,Da,Ha,Ua,ma,ua,Aa;return ab.__generator(this,function(tb){w=V["default"].capabilities.mobile;Ec.count(F+":rendered",1);if((X=sb["default"].cardRoot.getElementsByClassName(x.vseWidgetPageState))&&X[0]&&X[0].dataset)Uc=X[0].dataset,Ai(Uc,w?"mobile":"desktop","ive_vftp_hero_cx"),Vc=Md="true"===
Uc.clickToPlay,wi("vse.VSECardsEvents.9","vsemetrics_widgetcards");else return bb("pageStateNotFound"),[2];dn=sb["default"].cardRoot.querySelector(".video-items-metadata");fn=JSON.parse(dn.getAttribute("data-video-items"));en=Ki(fn,Uc);Y=en.map(function(Ga){return Ae(Ga,null,Uc)});Y.forEach(function(Ga){return Kf[Ga.contentId]=Ga});1==Y.length&&(Z.isSingleVideoPresent=!0);ia={showClosedCaptions:!0,enablePreload:!1,enableAutoPlay:!Vc,enableControls:!1,controls:["playToggle","progressControl","remainingTimeDisplay",
"subsCapsButton","muteToggle"],videoPlayerClass:x.heroPlayer,playerModeConfig:{fillMode:!0},parentCssClass:x.heroPlayerWrapper,styleInput:x,cardId:Uc.cardId,enableClickBasedAttribution:"true"===Uc.enableClickBasedAttribution,linkCode:"vfp",refTag:"vse-cards-ingress_hero",metricsSuffix:"ive_vftp_hero_cx",enableTextTracksByDefault:!0,verticalVideoBlurEnabled:!1};Oa=new As(ia);Q=function(Ga){Oa.prepareForPlaying(Ga);Oa.makeVideoControlsTabAccessible("."+x.vseVideoWidgetContainer+" .vjs-subs-caps-button .vjs-menu-item");
Z.isClosedCaptionsEnabled&&Oa.textTrackHelper.enableCurrentTextTrack();Vc||Oa.play();Cs(x);Lf=Ga;Z.playerInstance=Oa};aa=function(Ga){V["default"].$("."+ia.cardId+" #vse-placeholder-related-videos").delegate(".a-carousel-card a","click",function(Fa){var Va=V["default"].$(Fa.currentTarget).closest("li").index(".vse-video-card");Va=Ga[Va];Va.contentId===Lf.contentId?Fa.preventDefault():(Vc&&(Vc=!1),Q(Va),Oa.isMuted()&&Oa.unMute(),hn(Va,x))})};ha=function(){var Ga=Oa.getActiveAsset();if(Ga=ya(Ga))Q(Ga),
hn(Ga,x),V["default"].trigger("vse:ns:partialcomponents:"+Z.clientPrefix+":relatedvideos:rotate",Ga)};ya=function(Ga){var Fa=Object.keys(Kf),Va=Fa.findIndex(function(tc){return Kf[tc].contentId===Ga.contentId});return-1!==Va&&Va+1<Fa.length?Kf[Fa[Va+1]]:null};Da=function(){kd=V["default"].$("."+ia.cardId+" .vse-hero-widget");var Ga=Pf(kd.find("video"));if(Vc&&V["default"].onScreen(kd)&&!Oa.hasActiveAsset()){Oa.setPreload("auto");var Fa;if(Fa=Y[0]){if(Fa=Fa.duration){Fa=Fa.split(":");var Va=0;3===
Fa.length?Va=3600*+Fa[0]+60*+Fa[1]+ +Fa[2]:2===Fa.length&&(Va=60*+Fa[0]+ +Fa[1]);Fa=Va}else Fa=0;Fa=15>=Fa?.05:30>=Fa?.1:.5}else Fa=.05;Oa.seek(Fa)}!Mf&&Ga?(Oa.hasActiveAsset()?"true"!==Uc.clickToPlay&&Ua():(Q(Y[0]),Oa.initializePlayerClickMetrics(),Ds(x)),Mf=!0):Mf&&!Ga&&(Oa.mute(),Ha(),Mf=!1)};Ha=function(){Oa&&Oa.isPlaying()&&Oa.pause()};Ua=function(){Oa&&Oa.isPaused()&&!Md&&Oa.resume()};yn(function(Ga){Ga?(null===kd||void 0===kd?0:kd.length)&&Pf(kd.find("video"))&&Ua():Ha()});ma=function(){Md=
!0};ua=function(){Md=!1};Aa=function(Ga){Ga=Ga.target;1!==Ga.className.indexOf("vjs-icon-placeholder")&&1!==V["default"].$(Ga).closest(".vjs-control-bar").length&&(Oa.isPlaying()?(Oa.pause(),Md=!0):(Oa.resume(),Oa.isMuted()&&Oa.unMute(),Md=!1,Vc&&(Vc=!1)),Oa.triggerVideoJSPlayPauseEvents())};V["default"].on(V["default"].constants.BROWSER_EVENTS.SCROLL,Da);Oa.on(za[za.ended],ha);Oa.on(za[za.requestpause],ma);Oa.on(za[za.requestplay],ua);Oa.on(za[za.click],Aa);aa(Y);return[2,Oa]})})},hn=function(x,
F){var w,X=sb["default"].cardRoot.querySelector("."+F.vseHeroThumbnailProfile);if(X){var Y=X.querySelector("img");Y&&(Y.src=x.profileImageUrl);if(Y=X.querySelector("."+F.vseProfileName))Y.innerText=x.vendorName;if(Y=X.querySelector("."+F.vseProfileDescriptor))Y.innerText=x.title;if(Y=X.querySelector("."+F.vseProfileAvatar))Y.href=x.profileLink,"Seller"===x.creatorType||"Vendor"===x.creatorType?Y.classList.add("aok-hidden"):Y.classList.remove("aok-hidden");if(Y=X.querySelector("."+F.vseProfileNameLink))Y.href=
x.profileLink,"Seller"!==x.creatorType&&"Vendor"!==x.creatorType||Y.removeAttribute("href");if(Y=X.querySelector("."+F.vseDisclosureLink))Y.href=x.disclosureLink||"",Y.title=x.disclosureLabel||"",x.disclosureLink?Y.classList.remove("aok-hidden"):Y.classList.add("aok-hidden");if(Y=X.querySelector("."+F.vseFullReviewLink))x.referenceUrl?(Y.href=x.referenceUrl,Y.classList.remove("aok-hidden")):Y.classList.add("aok-hidden");if(F=X.querySelector("."+F.vseProfileDescriptorPrefix))null===(w=F.classList)||
void 0===w?void 0:w.toggle("aok-hidden","AOD60"!==x.vendorCode)}},Ds=function(x){(x=sb["default"].cardRoot.querySelector("."+x.vseProfileAvatar))&&x.addEventListener("click",function(){var F=Z.buildCsmPayload({eventName:Z.clientPrefix+":profileClick",intPayload:1,videoAsin:Lf.contentId,stringPayload:Lf.index.toString(),titleSessionId:Rf()});ac(F)})},Cs=function(x){clearTimeout(gn);V["default"].$("."+x.heroPlayerWrapper).addClass("ppvr-vsbl");gn=setTimeout(function(){Z.isHeroPopoverVisible||V["default"].$("."+
x.heroPlayerWrapper).removeClass("ppvr-vsbl")},3E3)},Fs=function(x,F,w){void 0===w&&(w=!1);return ab.__awaiter(void 0,void 0,void 0,function(){var X,Y,ia,Q,aa,ha,ya,Da,Ha,Ua,ma,ua,Aa;return ab.__generator(this,function(tb){switch(tb.label){case 0:Ec.count(F+":rendered",1);w&&(X=[".vse-segment-title-G1",".vse-segment-title-RVS_G1",".vse-segment-title-RVS_G2",".vse-segment-title-RVS_G1_T1",".vse-segment-title-RVS_G2_T1"],X.forEach(function(Ga){V["default"].$(".vse-video-widget-dp-container ."+x.vseVideoDataItem).find(""+
Ga).first().addClass(x.vseFirstItem)}));Y=V["default"].capabilities.mobile;if((ia=sb["default"].cardRoot.getElementsByClassName(x.vseWidgetPageState||x.vseVwdpWidgetPageState))&&ia[0]&&ia[0].dataset)if(Q=ia[0].dataset,aa=Q.thumbnailPreviewTreatment,ha=sb["default"].cardRoot.getElementsByClassName("vse-video-thumbnail-preview"),"T1"===aa)for(ya=function(Ga){var Fa=ha[Ga];Ga=function(){Fa.playbackRate=2};1<=Fa.readyState?Ga():Fa.addEventListener("loadedmetadata",Ga)},Da=0;Da<ha.length;Da++)ya(Da);else{if("T2"===
aa)for(Ha=function(Ga){var Fa=ha[Ga];Fa.addEventListener("timeupdate",function(){3<=Fa.currentTime&&(Fa.pause(),Fa.currentTime=0)})},Da=0;Da<ha.length;Da++)Ha(Da)}else return bb("pageStateNotFound"),[2];Ua="true"===Q.desktopIngressCxUpdated;ua="ive_vftp";return Ua?[4,Es(x,F)]:[3,2];case 1:ma=tb.sent(),ua="ive_vftp_hero_cx",tb.label=2;case 2:return Aa=Bs(x,w?"IVE_VFTP":"",ua,Ua),[4,Hn(Y,x,null,Aa,!0,!0,!1,ma)];case 3:return tb.sent(),[2]}})})},Gs={vsePlc:"_dnNlL_vsePlc_MSGp5",withPui:"_dnNlL_withPui_2xp5j",
vseRP:"_dnNlL_vseRP_nLfJL",heroPlayerWrapper:"_dnNlL_heroPlayerWrapper_3NfkM",clickToPlay:"_dnNlL_clickToPlay_3z8kl",vseHeroThumbnailProfile:"_dnNlL_vseHeroThumbnailProfile_UThmB",vsePlcR:"_dnNlL_vsePlcR_30suw",vsePlcL:"_dnNlL_vsePlcL_1PgKI",vseRV:"_dnNlL_vseRV_2ei5g",skeletalPFO:"_dnNlL_skeletalPFO_1All6",skeletalVideo:"_dnNlL_skeletalVideo_1BfuK",skeCard:"_dnNlL_skeCard_2uwXM",skeVideoCard:"_dnNlL_skeVideoCard_ljya2",skeImg:"_dnNlL_skeImg_lDBMN",skeVideoImg:"_dnNlL_skeVideoImg_26S_H",skeProduct:"_dnNlL_skeProduct_SSJKm",
skeTextGroup:"_dnNlL_skeTextGroup_1PuEZ",skeVideoTextGroup:"_dnNlL_skeVideoTextGroup_wJYsE",skeTitle:"_dnNlL_skeTitle_1Uu9U",skeVideoTitle:"_dnNlL_skeVideoTitle_3zFEJ",skeVendor:"_dnNlL_skeVendor_2__Ic",skeVideoVendor:"_dnNlL_skeVideoVendor_77OL4",skeDescription:"_dnNlL_skeDescription_1nfDH",skeVideoDescription:"_dnNlL_skeVideoDescription_1OaI9",loadingShimmer:"_dnNlL_loadingShimmer_dg65G",vseFlex:"_dnNlL_vseFlex_DKOUj",heroPlayer:"_dnNlL_heroPlayer_18YHJ",vsePlcPC:"_dnNlL_vsePlcPC_1jYt1",videoTitleOverlay:"_dnNlL_videoTitleOverlay_36k_O",
vseHasProfile:"_dnNlL_vseHasProfile_28XGY",titleWithCreator:"_dnNlL_titleWithCreator_13D5L",videoTitle:"_dnNlL_videoTitle_3MA5S",vseVideoCreatorContainer:"_dnNlL_vseVideoCreatorContainer_38PNg",videoCreator:"_dnNlL_videoCreator_3g0KQ",vseProfileAvatar:"_dnNlL_vseProfileAvatar_2hzhG",vseProfileContent:"_dnNlL_vseProfileContent_1meBt",vseProfileName:"_dnNlL_vseProfileName_1rA1_",vseProfileDescriptorWrapper:"_dnNlL_vseProfileDescriptorWrapper_2CMkw",vseFullReviewLink:"_dnNlL_vseFullReviewLink_2IHb9",
vseProfileNameLink:"_dnNlL_vseProfileNameLink_n6oG8",vseProfileDescriptorPrefix:"_dnNlL_vseProfileDescriptorPrefix_1-G8U",vseProfileDescriptor:"_dnNlL_vseProfileDescriptor_1C5j5",vseProfileNameDisclosure:"_dnNlL_vseProfileNameDisclosure_17gGd",vseVideoDisclosure:"_dnNlL_vseVideoDisclosure_1KRaJ",vseDisclosureLink:"_dnNlL_vseDisclosureLink_3n6SK",vseHeroWidgetHeaderBlock:"_dnNlL_vseHeroWidgetHeaderBlock_25gLA",reducePadding:"_dnNlL_reducePadding_I4zHC",vseHeroWidgetHeader:"_dnNlL_vseHeroWidgetHeader_3fFur",
iveHeroRowGrid:"_dnNlL_iveHeroRowGrid_1Sgt3",vseMobileVideoWidget:"_dnNlL_vseMobileVideoWidget_17sDD",carouselElement:"_dnNlL_carouselElement_AVBU9",vseLazyLoadSpinner:"_dnNlL_vseLazyLoadSpinner_2XtFC",vseVideoDuration:"_dnNlL_vseVideoDuration_vDK4S",vseVideoTitleBlock:"_dnNlL_vseVideoTitleBlock_Qp7Od",vseVideoTitle:"_dnNlL_vseVideoTitle_sPgV5",vseVideoTitleText:"_dnNlL_vseVideoTitleText_1lJWI",vseVideoCreatorName:"_dnNlL_vseVideoCreatorName_3M1B_",vseVideoSegmentHeader:"_dnNlL_vseVideoSegmentHeader_14ouc",
vseFirstItem:"_dnNlL_vseFirstItem_3h4BK",vseVideoWidgetHeaderBlock:"_dnNlL_vseVideoWidgetHeaderBlock_2t4B0",vseVideoWidgetHeader:"_dnNlL_vseVideoWidgetHeader_30B2I",vseWidgetPageState:"_dnNlL_vseWidgetPageState_2eblq",vseVideoWidgetContainer:"_dnNlL_vseVideoWidgetContainer_3HDIT",vseIngressCarousel:"_dnNlL_vseIngressCarousel_2Knkb",vseCarouselItem:"_dnNlL_vseCarouselItem_3IvFU",vseVideoImageWrapper:"_dnNlL_vseVideoImageWrapper_3Sk54",vseThumbnailPreviewImg:"_dnNlL_vseThumbnailPreviewImg_3dlho",vseCarouselItemHovering:"_dnNlL_vseCarouselItemHovering_3nydI",
vseHoverSection:"_dnNlL_vseHoverSection_1n4YC",vseCardsVideoThumbnail:"_dnNlL_vseCardsVideoThumbnail_3xlzJ",vseWidgetLbVideoBlock:"_dnNlL_vseWidgetLbVideoBlock_VfqBF",vseWidgetLbVideoBlockWrapper:"_dnNlL_vseWidgetLbVideoBlockWrapper_v6yOr",vseWidgetLbAbsolute:"_dnNlL_vseWidgetLbAbsolute_bgBq7",vseWidgetLbSpinner:"_dnNlL_vseWidgetLbSpinner_yjdTV",vseVerticalLightbox:"_dnNlL_vseVerticalLightbox_12YT2",vseRemoveAbsolute:"_dnNlL_vseRemoveAbsolute_2xmeK",vseUploadButton:"_dnNlL_vseUploadButton_5QCM8",
vseUploadButtonIcon:"_dnNlL_vseUploadButtonIcon_2-eZR",vseVideoDataItem:"_dnNlL_vseVideoDataItem_2A7tm",thumbnailPreviewWrap:"_dnNlL_thumbnailPreviewWrap_2sqTc",vseSearchVideosInput:"_dnNlL_vseSearchVideosInput_2CfoS",videoPreviewWrapper:"_dnNlL_videoPreviewWrapper_vvNVU",clearSearchInput:"_dnNlL_clearSearchInput_3ZK67",sponsoredVideoLabel:"_dnNlL_sponsoredVideoLabel_23SsR",thumbnailUpdates:"_dnNlL_thumbnailUpdates_3sx2a",vseDesktopCarousel:"_dnNlL_vseDesktopCarousel_1UwLK",vseVideoTitleBlockOverlay:"_dnNlL_vseVideoTitleBlockOverlay_ZyhF4",
vseThumbnailSecondaryImg:"_dnNlL_vseThumbnailSecondaryImg_2eoNE",vseVideoTitleWithCreator:"_dnNlL_vseVideoTitleWithCreator_1Meqf",vseProfilePlaceholder:"_dnNlL_vseProfilePlaceholder_34FkJ",vseVideoThumbnailProfile:"_dnNlL_vseVideoThumbnailProfile_1TFKR",iveThemeContainer:"_dnNlL_iveThemeContainer_3_QXu",iveThemeRightFlower:"_dnNlL_iveThemeRightFlower_1-jMa",iveThemeRightFlowerImage:"_dnNlL_iveThemeRightFlowerImage_14PHD",rotate:"_dnNlL_rotate_2sP4k",fadeIn:"_dnNlL_fadeIn_1YZjv",iveThemeLeftFlower:"_dnNlL_iveThemeLeftFlower_iJE9B",
iveThemeLeftFlowerImage:"_dnNlL_iveThemeLeftFlowerImage_G6_zc",vseVwdpWidgetPageState:"_dnNlL_vseVwdpWidgetPageState_283lp",vseSbVideoDataItem:"_dnNlL_vseSbVideoDataItem_1TmVd"};qi._operationNames=[];qi.card=function(){return ab.__awaiter(void 0,void 0,void 0,function(){return ab.__generator(this,function(x){switch(x.label){case 0:return[4,Fs(Gs,"vse-vw-dp-card",!0)];case 1:return x.sent(),[2]}})})}});
