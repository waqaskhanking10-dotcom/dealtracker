(function(f){var m=window.AmazonUIPageJS||window.P,t=m._namespace||m.attributeErrors,A=t?t("InContextDetailPageAssets@container","InContextDetailPageAssets"):m;A.guardFatal?A.guardFatal(f)(A,window):A.execute(function(){f(A,window)})})(function(f,m,t){function A(b,a,c){a in b?Object.defineProperty(b,a,{value:c,enumerable:!0,configurable:!0,writable:!0}):b[a]=c;return b}function v(b,a){if(!(b instanceof a))throw new TypeError("Cannot call a class as a function");}var J=function(){return function(b,
a){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b)){var c=[],e=!0,d=!1,q=t;try{for(var f=b[Symbol.iterator](),p;!(e=(p=f.next()).done)&&(c.push(p.value),!a||c.length!==a);e=!0);}catch(k){d=!0,q=k}finally{try{if(!e&&f["return"])f["return"]()}finally{if(d)throw q;}}return c}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}(),L="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"===typeof Symbol&&
b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},x=function(){function b(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(a,c,e){c&&b(a.prototype,c);e&&b(a,e);return a}}();f.when("A","icdp-constants","icdp-common-utils","icdp-controller-factory","icdp-state-updater","icdp-state-getter","icdp-client-data","icdp-prefetch","icdp-unsupported-wdgs","icdp-url-builder").register("icdp",
function(b,a,c,e,d,q,f,p,k,u){var h=a.stateModelAttrConstants,n=h.LIST,r=h.CLIENT_ID,l=h.SELECTED_ASIN_DATA,B=a.metrics.ICDP_CONTAINER_LOAD_INIT;h=a.fatalMetrics;var y=h.ICDP_INIT_FAIL,w=h.ICDP_LOAD_FAIL;a=a.errorMessages;var D=a.ICDP_INIT_FAILED_MESSAGE,G=a.ICDP_LOAD_FAILED_MESSAGE,H=a.ICDP_LIST_UNAVAILABLE_MESSAGE,C=a.ICDP_STATE_UNAVAILABLE_MESSAGE,z={};return function(){function a(b){v(this,a);try{this.icdpController=null;z=b.viewCallbacks?b.viewCallbacks:{};if(b&&b.state)d.updateState(b.state);
else throw c.logger({},w,C),Error(C);this.successCallback=b.callbacks&&b.callbacks.success?b.callbacks.success:function(){};this.failureCallback=b.callbacks&&b.callbacks.failure?b.callbacks.failure:function(){};this.icdpControllerFactory=new e;this.successCallback()}catch(g){c.logger(g,y,D),!this.failureCallback&&b.callbacks&&b.callbacks.failureCallback?b.callbacks.failureCallback(g):this.failureCallback(g)}}x(a,[{key:"loadICDP",value:function(a){var e=[];try{c.logCounter(B);var h=Date.now(),p={};
a.clientData&&"object"===L(a.clientData)&&!Array.isArray(a.clientData)&&(p=a.clientData);p.icdpClickTime=h;f.setClientData(p);z=a.viewCallbacks?a.viewCallbacks:{};if(a&&a.state)d.updateState(a.state);else throw c.logger({},w,C),Error(C);e=q.getStateAttribute(n);if(!e||0===e.length)throw c.logger({},w,H),Error(H);var E=q.getStateAttribute(l);if(E&&E.wdg&&k.isUnsupportedWdg(E.wdg)){var I="icdp:"+q.getStateAttribute(r)+":"+E.wdg+":ineligible";c.logCounter(I);var F=u.buildDPUrl(E.getAsin(),E.getClientUrlParams(),
null,E.isFullySelected);m.location.href=F}else this.icdpController=this.icdpControllerFactory.getICDPController(e,z),this.icdpController.setupClientToContainerBridge(q.getStateAttribute(r)),this.icdpController.loadContainer(),b.trigger("icdp-container-opening",{asinData:q.getStateAttribute(l)})}catch(K){c.logger(K,w,G),this.failureCallback(K)}}},{key:"prefetchICDP",value:function(a){p.prefetchICDP(a)}},{key:"removePrefetchedIFrames",value:function(a){d.removePrefetchedIFrames(a)}},{key:"removeAllPrefetchedIFrames",
value:function(){d.removeAllPrefetchedIFrames()}}]);return a}()});f.when("A").register("icdp-base-to-page-interface",function(b){return{updateInterfaces:function(a){}}});f.when("A").register("icdp-base-to-container-interface-provider",function(b){return{removeLoader:function(){}}});f.when("A").register("icdp-noclient-to-container-interface-provider",function(b){return{}});f.when("A").register("icdp-noclient-to-page-interface",function(b){return{updateInterfaces:function(a){}}});f.when("A").register("icdp-host-to-container-interface-provider-registry",
function(b){var a={buyAgain:"icdp-buyAgain-to-container-interface-provider",noClient:"icdp-noclient-to-container-interface-provider"};return function(b){return a[b]||a.noClient}});f.when("A").register("icdp-container-to-page-interaction-interface-registry",function(b){var a={buyAgain:"icdp-buyAgain-to-page-interface",noClient:"icdp-noclient-to-page-interface"};return function(b){return a[b]||a.noClient}});f.when("A","icdp-host-to-container-interface-provider-registry","icdp-container-to-page-interaction-interface",
"icdp-client-data").register("icdp-setup-container-to-page-bridge",function(b,a,c,e){var d=b.$;return{setupClientToContainerBridge:function(b){var q=a(b);f.now("container-bridge-registered").execute(function(a){a||(f.declare("container-bridge-registered",!0),f.when("A",q,"icdp-base-to-container-interface-provider").register("icdp-container-to-page-bridge",function(a,q,h){return{framePageReady:function(a,e,d){c.updateInterfaces({iframeA:e,iframeP:a,callbacks:d,clientId:b})},containerCallbacks:d.extend(q,
h),clientId:b,getClientData:e.getClientData}}))})}}});f.when("A","mash").register("icdp-mash",function(b,a){b.on("icdp-mash-cart-did-update",function(b){a.cart.didUpdate(b)});b.on("icdp-mash-show-alert",function(b){a.showAlert(b)});b.on("icdp-mash-show-login-dialog",function(b){a.showLoginDialog(b)});b.on("icdp-amazon-cordova-notification-vibrate",function(a){amazon.cordova.notification.vibrate(a.duration)})});f.when("A","icdp-page-events-schema-validators").register("icdp-page-events-registry",function(b,
a){return{"icdp-redirect-to-dp":{validateSchema:a.validateRedirectToDp},"icdp-change-asin":{validateSchema:a.validateChangeAsin},"icdp-content-height-change":{validateSchema:a.validateContentHeightChange},"idcp-content-load":{validateSchema:a.validateContentLoad},"icdp-mash-cart-did-update":{validateSchema:a.validateMashCartDidUpdate},"icdp-mash-show-alert":{validateSchema:a.validateMashShowAlert},"icdp-mash-show-login-dialog":{validateSchema:a.validateMashShowLoginDialog},"icdp-amazon-cordova-notification-vibrate":{validateSchema:a.validateAmazonCordovaNotificationVibration},
"icdp-update-fdp-state":{validateSchema:a.validateUpdateFdpState},"ax:atc":{validateSchema:a.cartQsAtc},"ax:qs:update":{validateSchema:a.cartQsUpdate},"quantity-selector-widget:sync-stepper-quantity":{validateSchema:a.almQsSync},"ICDP:Promotions:Redeem:Success":{validateSchema:a.promotionsSync},"icdp-close-sheet":{validateSchema:a.validateCloseSheet},"icdp-close-sheet-and-changeover":{validateSchema:a.validateCloseSheetAndChangeover},"icdp-close-sheet-and-redirect":{validateSchema:a.validateCloseSheetAndRedirect},
"icdp-close-sheet-and-execute-cta-handler":{validateSchema:a.validateCloseSheetAndExecuteCTAHandler}}});f.when("A","icdp-container-to-page-interaction-interface-registry","icdp-page-events-registry","icdp-common-utils","icdp-constants").register("icdp-container-to-page-interaction-interface",function(b,a,c,e,d){var q=d.fatalMetrics.ICDP_PAGE_EVENT_VALIDATION_FAILED,l=d.errorMessages.ICDP_PAGE_EVENT_VALIDATION_FAILED_MESSAGE;return{updateInterfaces:function(d){(function(a,b){d.iframeA.off(a);d.iframeA.on(a,
b)})("icdp-page-notify-container",function(a){var d=a&&a.eventName;d&&(c[d]?c[d].validateSchema(a.arguments)?b.trigger(a.eventName,a.arguments):e.logger({},q,l+d):b.trigger(a.eventName,a.arguments))});var k={callbacks:d.callbacks},p=a(d.clientId);f.when(p).execute(function(a){a.updateInterfaces(k)});f.when("icdp-base-to-page-interface").execute(function(a){a.updateInterfaces(k)})}}});f.when("A").register("icdp-page-events-schema-validators",function(b){return{validateRedirectToDp:function(a){return!0},
validateChangeAsin:function(a){return!(!a||!a.asin)},validateContentHeightChange:function(a){return!(!a||!a.height)},validateContentLoad:function(a){return!(a&&0!==Object.keys(a).length)},validateMashCartDidUpdate:function(a){return!0},validateMashShowAlert:function(a){return!0},validateMashShowLoginDialog:function(a){return!0},validateAmazonCordovaNotificationVibration:function(a){return!(!a||!a.duration)},validateUpdateFdpState:function(a){return!(a&&0!==Object.keys(a).length)},cartQsAtc:function(a){return!!(a&&
a.quantity&&a.itemId&&a.asin&&a.$faceoutContainer)},cartQsUpdate:function(a){return!!(a&&null!=a.quantity&&a.itemId&&a.asin&&a.$faceoutContainer)},almQsSync:function(a){return!!(a&&a.asin&&a.selectedQuantity&&a.storeId)},promotionsSync:function(a){return!!(a&&a.asin&&a.promotionId)},validateCloseSheet:function(a){return!0},validateCloseSheetAndChangeover:function(a){return!(!a||!a.changeOverText||"string"!==typeof a.changeOverText)},validateCloseSheetAndRedirect:function(a){return!(!a||!a.url||"string"!==
typeof a.url)},validateCloseSheetAndExecuteCTAHandler:function(a){return!!(a&&a.event&&a.inputPayload)}}});f.when("A").register("icdp-hostpage-view",function(b){return function(){function a(b){v(this,a);this.viewInterface=b;this.callbacks=this.callbackRegistry()}x(a,[{key:"bindViewCallbacks",value:function(a){var b=this;Object.keys(a).forEach(function(c){b.callbacks[c]=a[c]})}},{key:"callbackRegistry",value:function(){return{beforeSheetShow:function(){},afterSheetShow:function(){},beforeSheetHide:function(){},
afterSheetHide:function(){},updateCartValue:function(){}}}}]);return a}()});f.when("A","a-carousel-framework").register("icdp-carousel-manager",function(b,a){return function e(){v(this,e)}});f.when("A").register("icdp-carousel-view",function(b){return function c(){v(this,c)}});f.when("A","a-sheet","a-sheet-util","icdp-constants","icdp-iframe-view","icdp-skeleton-view","icdp-state-getter","icdp-state-updater","icdp-container-utils","icdp-common-utils","icdp-client-data","icdp-custom-aui-sheet-apis",
"icdp-browse-nested-bottomsheet","icdp-metrics-utils").register("icdp-sheet-view",function(b,a,c,e,d,q,l,p,k,u,h,n,r,F){c=e.containerSelectors;var B=c.CONTAINER_NAME,y=c.CONTAINER_WRAPPER,w=c.CONTAINER_CLOSE_SELECTOR,D=c.AUI_BOTTOM_SHEET_CLOSE_SELECTOR,G=e.icdpLayoutSelectors.ICDP_PPD,H=e.icdpLayoutStyles.ICDP_PADDING_TOP,C=e.metrics.ICDP_CONTAINER_LOAD_COMPLETE;c=e.stateModelAttrConstants;var z=c.CLIENT_ID,M=c.PREFETCHED_IFRAME,I=e.events.ICDP_HEIGHT_CHANGE_EVENT,g=void 0,t=b.$;return function(){function c(a){v(this,
c);this.viewInterface=a;this.afterHideCallback=this.contentHeight=this.skeleton=this.iframe=this.sheet=null;g=this;this.subscribeToEvents()}x(c,[{key:"resetSheetVariables",value:function(){this.contentHeight=null;h.setClientData(null);g.afterHideCallback=null;g.sheet.$container.css({height:"",maxHeight:""})}},{key:"getSheetParams",value:function(){return{name:B,inlineContent:this.getInlineContentTemplate()}}},{key:"getInlineContentTemplate",value:function(){return'\x3cdiv id\x3d"icdp-container" class\x3d"icdp-container"\x3e\n                        \x3cdiv class\x3d"icdp-container-head"\x3e\n                            '+
(r.enabled?r.getBackButtonTemplate():"")+'\n                            \x3cbutton class\x3d"icdp-close" aria-label\x3d"Product quick view. Close"\n                                data-csa-c-type\x3d"uxElement" data-csa-c-element-type\x3d"navigational" data-csa-c-action\x3d"icdp-close-button-click" \x3e\n                                \x3ci class\x3d"a-icon a-icon-close icdp-close-icon" role\x3d"presentation"\x3e\x3c/i\x3e\n                            \x3c/button\x3e\n                        \x3c/div\x3e\n                        \x3cdiv class\x3d"icdp-container-body"\x3e\n                        \x3c/div\x3e\n                    \x3c/div\x3e'}},
{key:"createAUISheetInstance",value:function(){this.sheet||(this.sheet=a.create(this.getSheetParams()))}},{key:"showSheet",value:function(){this.sheet._height=k.getIcdpContainerStartingHeight();r.enabled?r.showStep(this):a.showSheet(this.sheet)}},{key:"updateSheetCSS",value:function(a){a?(this.sheet.$container.addClass(y),this.sheet.$contentContainer.addClass(y)):(this.sheet.$container.removeClass(y),this.sheet.$contentContainer.removeClass(y))}},{key:"changeHeight",value:function(a,b){g.sheet.$container.css("height",
u.getMinimumValue(a,b))}},{key:"changeHeightConstraints",value:function(a){g.sheet.$container.css("maxHeight",a)}},{key:"updateSheetHeight",value:function(){var a=k.getIcdpContainerMaxHeight(),c=k.getIcdpContainerStartingHeight();b.delay(function(){g.changeHeightConstraints(a);g.changeHeight(c,a)},0)}},{key:"loadIFrame",value:function(){this.iframe=l.getPrefetchedIframe(l.getURL());this.iframe||(this.iframe=new d(l.getURL(),!1));this.skeleton=new q;var a=this.sheet.$container.find(".icdp-container-body");
a&&(a.css("overflow-y","hidden"),a.append(this.skeleton.getSkeleton(),this.iframe.getIFrame()))}},{key:"logUsedPrefetch",value:function(a){var b=l.getStateAttribute(z);t.ajax({type:"POST",url:"/util/secondary/log-prefetch-impression",data:{subPageType:b,relatedRequestId:a},dataType:"text",cache:!1,success:function(a,b,c){a=c.getResponseHeader("x-amz-rid");m.ue&&m.ues&&m.ues("id2",a)}})}},{key:"unloadIFrame",value:function(){this.iframe&&this.iframe.unload();this.skeleton&&this.skeleton.unload();delete l.getStateAttribute(M)[l.getURL()]}},
{key:"addStylesToICDPLayout",value:function(){var a=this.iframe.$element[0]?this.iframe.$element[0].contentDocument:null;a&&(t(a).find(G).css("padding-top",H),a=t(a).find(G).parent().parent(),0<a.length&&a.append(t(document.createElement("div")).attr({style:"height:32px; width:100%; position:fixed !important; top:0; left:0; background-color:#FFFFFF"})))}},{key:"toggleCrossButtonHandler",value:function(a){var b=this.sheet.$container.find(w);a&&b.length?b.bind("click touch",g.hideSheet.bind(g)):b.unbind("click touch",
g.hideSheet.bind(g))}},{key:"toggleSheetCloseButtonFocusHandler",value:function(a){var b=this.sheet.$container.find(w);a&&b.length?b.bind("focus",g.setFocusToCloseButton.bind(g)):b.unbind("focus",g.setFocusToCloseButton.bind(g))}},{key:"setFocusToCloseButton",value:function(){var a=this.sheet.$contentContainer.find(".icdp-close");a.length&&!a.first().is(":focus")&&a.first().focus()}},{key:"hideSheet",value:function(){g.sheet&&g.sheet.$sheetOuterContainer.find(D).click()}},{key:"resizeBottomSheet",
value:function(a,c){var d=I+":"+g.getSheetParams().name;if(g.sheet._animating){if(!b.isListening(d))b.on(d,function(){n.changeHeight(g.sheet,{height:g.contentHeight||k.getIcdpContainerStartingHeight(),maxHeight:k.getIcdpContainerMaxHeight(),duration:.3});b.off(d)})}else b.isListening(d)&&b.off(d),n.changeHeight(g.sheet,{duration:.3,height:a,maxHeight:c})}},{key:"safetyResizeBottomSheet",value:function(){g.resizeBottomSheet(g.contentHeight||k.getIcdpContainerStartingHeight(),k.getIcdpContainerMaxHeight())}},
{key:"addSheetInstrumentation",value:function(){var a=g.sheet.$container[0];a.getAttribute("data-csa-c-id")||(a.setAttribute("data-csa-c-type","slot"),a.setAttribute("data-csa-c-content-id","icdp-web-container-content"),a.setAttribute("data-csa-c-slot-id","icdp-web-container-slot"),a.setAttribute("data-csa-c-component","bottomsheet"),m.csa("Content",{element:a}))}},{key:"subscribeToEvents",value:function(){this.subscribeToAUISheetCallbacks();this.subscribeToChangeHeightEvent();this.subscribeToICDPContentLoadEvent();
this.subscribeToOrientationChangeEvent();this.subscribeToICDPHideSheetEvents()}},{key:"removeSkeleton",value:function(){g.skeleton&&g.skeleton.unload();var a=this.sheet.$container.find(".icdp-container-body");a&&a.css("overflow-y","visible")}},{key:"subscribeToICDPHideSheetEvents",value:function(){b.on("icdp-close-sheet",function(){g.sheet.hide()});b.on("icdp-close-sheet-and-changeover",function(a){if(a){var c=null,d=null;a.changeOverText?(a=a.changeOverText,d="changeover-"+Date.now(),c=b.$('\x3cdiv role\x3d"status" class\x3d"a-changeover" id\x3d"'+
d+'" tabindex\x3d"-1"\x3e\x3cdiv class\x3d"a-changeover-inner"\x3e\x3cstrong class\x3d"a-size-medium"\x3e'+a+"\x3c/strong\x3e\x3c/div\x3e\x3c/div\x3e")):a.changeOverHtml&&(c=b.$(a.changeOverHtml),c.attr("tabindex")||c.attr("tabindex","-1"),d=c.attr("id"));c&&(g.afterHideCallback=function(){var a=document.querySelector('[data-clicked-icdp-ingress\x3d"true"]');b.$("body").append(c);if(a){if(d){var e=document.getElementById(d);e&&e.focus()}else c[0].focus();b.delay(function(){a.getAttribute("tabindex");
var c=a.hasAttribute("tabindex");c||a.setAttribute("tabindex","-1");a.focus({preventScroll:!0});b.delay(function(){c||a.removeAttribute("tabindex")},100)},1E3)}b.delay(function(){c.remove()},5E3)})}g.sheet.hide()});b.on("icdp-close-sheet-and-redirect",function(a){g.sheet.hide();a&&a.url&&"string"===typeof a.url&&(g.afterHideCallback=function(){var c=0;u.isAndroidAmazonApp()&&(c=350);b.delay(function(){m.location.href=a.url},c)})});b.on("icdp-close-sheet-and-execute-cta-handler",function(a){a&&a.event&&
a.inputPayload&&(g.afterHideCallback=function(){f.now("cta-handler").execute(function(b){b&&"function"===typeof b.handleCTAClick&&b.handleCTAClick(a.event,a.inputPayload)})});g.sheet.hide()})}},{key:"executeAfterHideCallback",value:function(){g.afterHideCallback&&"function"===typeof g.afterHideCallback&&g.afterHideCallback();b.delay(function(){var a=document.querySelector('[data-clicked-icdp-ingress\x3d"true"]');a&&a.removeAttribute("data-clicked-icdp-ingress")},3E3)}},{key:"subscribeToICDPContentLoadEvent",
value:function(){b.on("icdp-remove-skeleton",function(a){g.removeSkeleton()});b.on("icdp-content-load",function(a){g.addStylesToICDPLayout();g.removeSkeleton();g.iframe.isPrefetched?(u.logCounter(l.getStateAttribute(z)+":prefetchIFrameLoaded"),a=g.iframe.getXAmzRid(),F.logPrefetchImpression(a),g.logUsedPrefetch(a)):u.logCounter(l.getStateAttribute(z)+":IFrameLoaded")})}},{key:"subscribeToChangeHeightEvent",value:function(){b.on("icdp-content-height-change",function(a){var b=k.getIcdpContainerMaxHeight(),
c=Math.min(g.contentHeight||k.getIcdpContainerStartingHeight(),b),d=Math.min(a.height,b);(d>c||Math.abs(c-d)>=k.getIcdpContainerResizeThreshold())&&g.resizeBottomSheet(a.height,b);g.contentHeight=a.height});b.on("resize",function(){var a=k.getIcdpContainerMaxHeight(),b=g.contentHeight||k.getIcdpContainerStartingHeight();g.resizeBottomSheet(b,a)})}},{key:"subscribeToOrientationChangeEvent",value:function(){t(m).bind("orientationchange",function(a){b.delay(function(){var a=k.getIcdpContainerMaxHeight();
g.changeHeightConstraints(a);g.changeHeight(g.contentHeight,a)},150)})}},{key:"onBeforeShow",value:function(){g.updateSheetCSS(!0);g.toggleCrossButtonHandler(!0);g.loadIFrame();g.addSheetInstrumentation();g.viewInterface.beforeSheetShowCallback();g.updateSheetHeight()}},{key:"onAfterHide",value:function(){g.updateSheetCSS();g.toggleCrossButtonHandler();g.unloadIFrame();g.viewInterface.afterSheetHideCallback();g.executeAfterHideCallback();g.resetSheetVariables();g.toggleSheetCloseButtonFocusHandler()}},
{key:"subscribeToAUISheetCallbacks",value:function(){r.enabled&&r.subscribeToAUISheetCallbacks(this);b.on("a:sheet:beforeShow:"+this.getSheetParams().name,g.onBeforeShow);b.on("a:sheet:afterHide:"+this.getSheetParams().name,g.onAfterHide);b.on("a:sheet:afterShow:"+this.getSheetParams().name,function(a){g.toggleSheetCloseButtonFocusHandler(!0);u.logCounter(C);g.safetyResizeBottomSheet();b.trigger(I+":"+g.getSheetParams().name)});b.on("a:sheet:beforeHide:"+this.getSheetParams().name,function(a){})}}]);
return c}()});f.when("A","a-sheet-util","prv:a-sheet-constants","icdp-constants").register("icdp-custom-aui-sheet-apis",function(b,a,c,e){var d=e.events.ICDP_HEIGHT_CHANGE_EVENT;return{changeHeight:function(e,l){2===e._version&&e._fullScreen&&(e._fullScreen=!1,e._active&&e.$container.removeClass("a-sheet-full-screen"));var q=!1!==l.persist,k=1E3*parseFloat(l.duration),u=l.height,h=Math.min(Math.max(u,0),l.maxHeight),n=e.$container;if(e._animating||!b.isFiniteNumber(h))return f.log("Failed to change bottom sheet height: "+
(e._animating?"bottom sheet is animating":"height is not finite"),"WARN","changeHeight"),!1;q&&(e._height=u);if(!e._active||h===n.height())return a.triggerEvent(c.events.changeHeight,e),!0;b.isFiniteNumber(k)||(k=e._duration);var r=function(){e._animating=!1;b.trigger(d+":"+e._name);a.triggerEvent(c.events.changeHeight,e)};0<k&&(e._animating=!0,e._autoHeight&&n.css("height",n.height()+"px"));e.updatePosition();b.animationFrameDelay(function(){b.animate(n,{height:h+"px",maxHeight:l.maxHeight},k,"ease-out",
r)});return!0}}});f.when("A","icdp-constants","icdp-state-model","icdp-asin-model","icdp-url-builder","icdp-common-utils").register("icdp-state-manager",function(b,a,c,e,d,f){b=a.stateModelAttrConstants;var q=b.LIST,p=b.CLIENT_ID,k=b.EXPERIENCE,u=b.SWIPE_DIRECTION,h=b.SELECTED_INDEX,n=b.TREATMENT,r=b.SELECTED_ASIN_DATA,F=b.IS_FDP,m=b.PREFETCHED_IFRAME,y=a.urlConstants.IS_FULLY_SELECTED,w=null,D=function(){function a(b){v(this,a);this.state=new c;this.updateState(b)}x(a,[{key:"getStateAttribute",value:function(a){switch(a){case q:a=
this.state.getList();break;case p:a=this.state.getClientId();break;case k:a=this.state.getExperience();break;case h:a=this.state.getSelectedIndex();break;case u:a=this.state.getSwipeDirection();break;case n:a=this.state.getTreatment();break;case r:a=this.state.getSelectedAsin();break;case F:a=this.state.getIsFdp();break;case m:a=this.state.getPrefetchedIFrames();break;default:a={}}return a}},{key:"getURL",value:function(){var a=this.getStateAttribute(r),b=a.getIcdpUrl();b||(b=d.buildIcdpUrl(a.getAsin(),
this.state.getExperience(),this.state.getClientId(),this.state.getTreatment(),a.getClientUrlParams()),a.icdpUrl=b);return b}},{key:"getPrefetchedIframe",value:function(a){return this.state.getPrefetchedIFrames()[a]}},{key:"updateState",value:function(a){var b=this;try{Object.keys(a).forEach(function(c){switch(c){case q:b.updateList(a[c]);break;case p:b.updateClientId(a[c]);break;case k:b.updateExperience(a[c]);break;case h:b.updateSelectedIndex(a[c]);break;case u:b.updateSwipeDirection(a[c]);break;
case n:b.updateTreatment(a[c]);break;case r:b.updateSelectedAsinData(a[c]);break;case F:b.updateIsFdp(a[c]);break;case m:b.updatePrefetchedIFrames(a[c])}})}catch(z){}}},{key:"removeAllPrefetchedIFrames",value:function(){this.state.prefetchedIFrames={}}},{key:"removePrefetchedIFrames",value:function(a){var b=this;Array.isArray(a)&&a.forEach(function(a){a.asin&&(a=d.buildIcdpUrl(a.asin,b.getStateAttribute(k),b.getStateAttribute(p),b.getStateAttribute(n),a.urlParameters),delete b.getStateAttribute(m)[a])})}},
{key:"updateIsFdp",value:function(a){this.state.isFdp=a}},{key:"updatePrefetchedIFrames",value:function(a){var b=this.getStateAttribute(m),c=Object.keys(a);c.forEach(function(e){b[c]=a[c]});this.state.prefetchedIFrames=b}},{key:"updateSelectedAsinData",value:function(a){var b=this.getStateAttribute(r);a&&a.twisterAsin&&(b.twisterAsin=a.twisterAsin);a&&a.hasOwnProperty(y)&&(b.isFullySelected=!!a.isFullySelected)}},{key:"updateClientId",value:function(a){this.state.clientId=a}},{key:"updateExperience",
value:function(a){this.state.experience=a}},{key:"updateList",value:function(a){var b=this;try{(function(){var c=[];a.forEach(function(a){var b=new e;b.asin=a.asin;b.clientUrlParams=a.urlParameters;b.wdg=a.wdg;a.sponsoredLoggingUrl&&(b.sponsoredLoggingUrl=a.sponsoredLoggingUrl);a.fallbackRedirectUrl&&(b.fallbackRedirectUrl=a.fallbackRedirectUrl);c.push(b)});b.state.list=c})()}catch(z){}}},{key:"updateSelectedIndex",value:function(a){this.state.selectedIndex=a}},{key:"updateSwipeDirection",value:function(a){try{this.state.swipeDirection=
a}catch(C){}}},{key:"updateTreatment",value:function(a){try{this.state.treatment=a}catch(C){}}}]);return a}();return function(a){w||(w=new D(a));return w}});f.when("A","icdp-state-manager").register("icdp-state-getter",function(b,a){b=a();return{getStateAttribute:b.getStateAttribute.bind(b),getURL:b.getURL.bind(b),getPrefetchedIframe:b.getPrefetchedIframe.bind(b)}});f.when("A","icdp-state-manager").register("icdp-state-updater",function(b,a){b=a();return{updateState:b.updateState.bind(b),removeAllPrefetchedIFrames:b.removeAllPrefetchedIFrames.bind(b),
removePrefetchedIFrames:b.removePrefetchedIFrames.bind(b)}});f.when("A").register("icdp-state-model",function(b){return function(){function a(b){v(this,a);this.clientId="icdpClient";this.experience="inspiration";this.treatment="";this.selectedIndex=0;this.list=[];this.swipeDirection="";this.isFdp=!1;this.prefetchedIFrames={}}x(a,[{key:"getClientId",value:function(){return this.clientId}},{key:"getExperience",value:function(){return this.experience}},{key:"getTreatment",value:function(){return this.treatment}},
{key:"getSelectedIndex",value:function(){return this.selectedIndex}},{key:"getList",value:function(){return this.list}},{key:"getSwipeDirection",value:function(){return this.swipeDirection}},{key:"getSelectedAsin",value:function(){var a=this.getSelectedIndex();return this.getList()[a]}},{key:"getIsFdp",value:function(){return this.isFdp}},{key:"getPrefetchedIFrames",value:function(){return this.prefetchedIFrames}}]);return a}()});f.when("A","icdp-constants").register("icdp-asin-model",function(b,
a){var c=a.urlConstants.CLIENT_REF_MARKER;return function(){function a(){v(this,a);this.twisterAsin=this.icdpUrl=this.clientUrlParams=this.asin="";this.isFullySelected=!1;this.wdg=this.fallbackRedirectUrl=this.sponsoredLoggingUrl=""}x(a,[{key:"getAsin",value:function(){return this.asin}},{key:"getClientUrlParams",value:function(){return this.clientUrlParams}},{key:"getIcdpUrl",value:function(){return this.icdpUrl}},{key:"getTwisterAsin",value:function(){return this.twisterAsin}},{key:"isFullySelectedState",
value:function(){return this.isFullySelected}},{key:"getClientRefMarker",value:function(){var a="";this.clientUrlParams&&(a=this.clientUrlParams[c]);return a}},{key:"getSponsoredLoggingUrl",value:function(){return this.sponsoredLoggingUrl}},{key:"getFallbackRedirectUrl",value:function(){return this.fallbackRedirectUrl}},{key:"getWdg",value:function(){return this.wdg}}]);return a}()});f.when("A").register("icdp-client-data",function(b){var a=void 0;return{getClientData:function(){return a},setClientData:function(b){a=
b}}});f.when("A","icdp-constants","icdp-state-getter","icdp-common-utils","icdp-url-builder","icdp-btf-manager").register("icdp-iframe-view",function(b,a,c,e,d,f){var q=a.containerSelectors.ICDP_IFRAME_ID;a=a.stateModelAttrConstants;var p=a.CLIENT_ID,k=a.PREFETCHED_IFRAME;return function(){function a(b,c){v(this,a);this.url=b;this.$element=this.getContentTemplate();this.headers={};this.isPrefetched=c&&this.isIFrameSrcdocSupported();this.init(b)}x(a,[{key:"getIFrame",value:function(){return this.$element[0]}},
{key:"unload",value:function(){this.$element.remove()}},{key:"getContentTemplate",value:function(){var a=b.$(document.createElement("iframe"));a.attr({id:q,height:"100%",allowTransparency:!1,style:"visibility:visible; opacity:1; background-color:#FFFFFF; display: block;",sandbox:"allow-scripts allow-modals allow-forms allow-same-origin allow-top-navigation-by-user-activation allow-popups allow-top-navigation",title:"Product quick view.","data-csa-c-type":"widget","data-csa-c-content-id":"icdp-web-container-iframe-content",
"data-csa-c-slot-id":"icdp-web-container-iframe-slot"});return a}},{key:"init",value:function(a){var d=this;this.isPrefetched?(this.trackRequest(a,function(e){d.headers=e.headers;d.getIFrame().srcdoc=e.content;d.getIFrame().onload=function(){b.trigger("icdp-remove-skeleton");if(f.btfEligible(c.getStateAttribute(p))){var e=d.getIFrame().contentDocument||d.getIFrame().contentWindow.document,h=null!==d.getXAmzRid()?d.getXAmzRid():"";f.lazyLoadBTF(a,h,e,c.getStateAttribute(p))}}}),e.logCounter("icdp:"+
c.getStateAttribute(p)+":iframe:content-rendered-through:srcdoc")):(this.getIFrame().src=a,this.getIFrame().onload=function(){b.trigger("icdp-remove-skeleton")},e.logCounter("icdp:"+c.getStateAttribute(p)+":iframe:content-rendered-through:src"))}},{key:"trackRequest",value:function(a,b){var h=new XMLHttpRequest,n=d.addPrefetchParamToURL(a);f.btfEligible(c.getStateAttribute(p))&&(n=d.addATFOnlyParamToURL(n));h.open("GET",n,!0);h.onreadystatechange=function(){if(h.readyState===XMLHttpRequest.DONE){var d=
{headers:h.getAllResponseHeaders(),content:h.responseText,status:h.status};200!==h.status&&(delete c.getStateAttribute(k)[a],e.logger({},"icdp_prefetch_url_request_failed","Url request failed with status code: "+h.status));b(d)}};h.send()}},{key:"getResponseHeaders",value:function(){return this.headers}},{key:"getXAmzRid",value:function(){var a=this.getResponseHeaders();if("string"!==typeof a)return null;var b=null;a.trim().split("\n").forEach(function(a){a=a.split(": ");var c=J(a,2);a=c[0];c=c[1];
a&&c&&(a=a.trim().toLowerCase(),c=c.trim(),"x-amz-rid"===a&&(b=c))});return b||null}},{key:"setHeight",value:function(a){this.$element.css("height",a)}},{key:"isIFrameSrcdocSupported",value:function(){return"srcdoc"in this.getIFrame()}}]);return a}()});f.when("A").register("icdp-page-view",function(b){var a=void 0;return function(){function c(b){v(this,c);this.viewInterface=b;a=this;this.subscribeToEvents()}x(c,[{key:"subscribeToIcdpChangeAsinEvent",value:function(){b.on("icdp-change-asin",function(b){a.viewInterface.updateState({selectedASINData:{twisterAsin:b.asin,
isFullySelected:b.isFullySelected}})})}},{key:"subscribeToUpdateFdpStateEvent",value:function(){b.on("icdp-update-fdp-state",function(b){a.viewInterface.updateState({isFdp:!0})})}},{key:"subscribeToEvents",value:function(){this.subscribeToIcdpChangeAsinEvent();this.subscribeToUpdateFdpStateEvent()}}]);return c}()});f.when("A","icdp-constants").register("icdp-skeleton-view",function(b,a){var c=a.containerSelectors.ICDP_SKELETON_ID;return function(){function a(){v(this,a);this.$element=this.getContentTemplate()}
x(a,[{key:"getSkeleton",value:function(){return this.$element}},{key:"unload",value:function(){this.$element&&(this.$element.remove(),this.$element=null)}},{key:"getContentTemplate",value:function(){var a=b.$(document.createElement("div"));a.attr({id:c});a.append(this.getTitle(),this.getImage(),this.getTwister(),this.getOfferDetails(),this.getActionBar());return a}},{key:"getTitle",value:function(){return"\x3cdiv class\x3d'a-section a-spacing-none a-padding-base'\x3e\n                        \x3cdiv class\x3d'icdp-skeleton-text-extra-large a-spacing-mini'\x3e\x3c/div\x3e\n                        \x3cdiv class\x3d'icdp-skeleton-text-extra-large a-spacing-mini'\x3e\x3c/div\x3e\n                        \x3cdiv class\x3d'icdp-skeleton-text-small'\x3e\x3c/div\x3e\n                    \x3c/div\x3e"}},
{key:"getImage",value:function(){return"\x3cdiv class\x3d'a-section'\x3e\n                        \x3cdiv class\x3d'icdp-skeleton-image-block a-spacing-base'\x3e\x3c/div\x3e\n                        \x3cdiv class\x3d'icdp-skeleton-image-swatches aok-align-center-horizontally'\x3e\x3c/div\x3e\n                    \x3c/div\x3e"}},{key:"getTwister",value:function(){return"\x3chr class\x3d'a-spacing-mini'\x3e\n                    \x3cdiv class\x3d'a-section a-spacing-none a-padding-base'\x3e\n                        \x3cdiv class\x3d'icdp-skeleton-text-base a-spacing-mini'\x3e\x3c/div\x3e\n                    \x3c/div\x3e\n                    \x3chr class\x3d'a-spacing-none'\x3e"}},
{key:"getOfferDetails",value:function(){return"\x3cdiv class\x3d'a-section a-spacing-none a-padding-base'\x3e\n                        \x3cdiv class\x3d\"icdp-skeleton-text-tall-mini a-spacing-mini\"\x3e\x3c/div\x3e\n                        \x3cdiv class\x3d\"icdp-skeleton-text-tall-small a-spacing-mini\"\x3e\x3c/div\x3e\n                        \x3cdiv class\x3d\"icdp-skeleton-text-small\"\x3e\x3c/div\x3e\n                    \x3c/div\x3e\n                    \x3cdiv class\x3d'a-section a-spacing-none a-padding-base'\x3e\n                        \x3cdiv class\x3d'icdp-skeleton-text-micro'\x3e\x3c/div\x3e\n                    \x3c/div\x3e\n                    \x3cdiv class\x3d'a-section a-spacing-none a-padding-base'\x3e\n                        \x3cdiv class\x3d'icdp-skeleton-text-extra-large a-spacing-mini'\x3e\x3c/div\x3e\n                        \x3cdiv class\x3d'icdp-skeleton-text-extra-large'\x3e\x3c/div\x3e\n                    \x3c/div\x3e\n                    \x3cdiv class\x3d'a-section a-spacing-none a-padding-base'\x3e\n                        \x3cdiv class\x3d'icdp-skeleton-text-medium a-spacing-mini'\x3e\x3c/div\x3e\n                        \x3cdiv class\x3d'icdp-skeleton-text-large'\x3e\x3c/div\x3e\n                    \x3c/div\x3e"}},
{key:"getActionBar",value:function(){return"\x3cdiv class\x3d'a-row a-padding-base icdp-skeleton-action-bar'\x3e\n                        \x3cdiv class\x3d'a-column a-spacing-base icdp-skeleton-button'\x3e\x3c/div\x3e\n                        \x3cdiv class\x3d\"a-column a-spacing-base icdp-skeleton-button a-span-last\"\x3e\x3c/div\x3e\n                    \x3c/div\x3e"}}]);return a}()});f.when("A","icdp-constants").register("icdp-skeleton-view-btf",function(b,a){var c=a.containerSelectors.ICDP_BTF_SKELETON_ID;
return function(){function a(){v(this,a);this.$element=this.getContentTemplate()}x(a,[{key:"getSkeleton",value:function(){return this.$element}},{key:"unload",value:function(){this.$element&&(this.$element.remove(),this.$element=null)}},{key:"getContentTemplate",value:function(){var a=b.$(document.createElement("div"));a.attr({id:c,"aria-busy":"true",role:"status"});a.append(this.getSponsoredProducts(),this.getBtfStyles());return a}},{key:"getSponsoredProducts",value:function(){return"\x3cdiv class\x3d'icdp-skeleton-sponsored-products'\x3e\n                         \x3cdiv class\x3d'icdp-skeleton-title'\x3e\x3c/div\x3e\n                         \x3cdiv class\x3d'icdp-skeleton-product-grid'\x3e\n                             \x3cdiv class\x3d'icdp-skeleton-product-item'\x3e\n                                 \x3cdiv class\x3d'icdp-skeleton-product-image'\x3e\x3c/div\x3e\n                                 \x3cdiv class\x3d'icdp-skeleton-product-title'\x3e\x3c/div\x3e\n                                 \x3cdiv class\x3d'icdp-skeleton-product-reviews'\x3e\x3c/div\x3e\n                                 \x3cdiv class\x3d'icdp-skeleton-product-price-container'\x3e\n                                     \x3cdiv class\x3d'icdp-skeleton-product-discount'\x3e\x3c/div\x3e\n                                     \x3cdiv class\x3d'icdp-skeleton-product-price'\x3e\x3c/div\x3e\n                                 \x3c/div\x3e\n                                 \x3cdiv class\x3d'icdp-skeleton-product-list-price'\x3e\x3c/div\x3e\n                                 \x3cdiv class\x3d'icdp-skeleton-product-delivery'\x3e\x3c/div\x3e\n                             \x3c/div\x3e\n                             \x3cdiv class\x3d'icdp-skeleton-product-item'\x3e\n                                 \x3cdiv class\x3d'icdp-skeleton-product-image'\x3e\x3c/div\x3e\n                                 \x3cdiv class\x3d'icdp-skeleton-product-title'\x3e\x3c/div\x3e\n                                 \x3cdiv class\x3d'icdp-skeleton-product-reviews'\x3e\x3c/div\x3e\n                                 \x3cdiv class\x3d'icdp-skeleton-product-price-container'\x3e\n                                     \x3cdiv class\x3d'icdp-skeleton-product-discount'\x3e\x3c/div\x3e\n                                     \x3cdiv class\x3d'icdp-skeleton-product-price'\x3e\x3c/div\x3e\n                                 \x3c/div\x3e\n                                 \x3cdiv class\x3d'icdp-skeleton-product-list-price'\x3e\x3c/div\x3e\n                                 \x3cdiv class\x3d'icdp-skeleton-product-delivery'\x3e\x3c/div\x3e\n                             \x3c/div\x3e\n                         \x3c/div\x3e\n                     \x3c/div\x3e"}},
{key:"getBtfStyles",value:function(){var a=b.$(document.createElement("style"));a.attr({type:"text/css"});a.text("@keyframes icdp-skeleton-gradient {\n                   0% {\n                     background-color: #E3E6E6;\n                   }\n                   100% {\n                     background-color: #C8CCCC;\n                   }\n                 }\n\n                 #icdp-btf-skeleton {\n                   cursor: progress;\n                   height: auto;\n                   width: 100%;\n                   border-width: 0;\n                   overflow-y: hidden;\n                 }\n\n                 #icdp-btf-skeleton \x3e :first-child {\n                   padding-top: 0 !important;\n                 }\n\n                 .icdp-skeleton-sponsored-products .icdp-skeleton-title {\n                   background-color: #E3E6E6;\n                   animation: 2s cubic-bezier(0.4, 0, 0.2, 1) 500ms infinite alternate both icdp-skeleton-gradient;\n                   height: 18px;\n                   border-radius: 8px;\n                   width: 90%;\n                   margin-bottom: 12px;\n                 }\n\n                 .icdp-skeleton-product-grid {\n                   display: flex;\n                   gap: 16px;\n                   overflow-x: hidden;\n                   padding: 0;\n                 }\n\n                 .icdp-skeleton-product-item {\n                   width: calc(50% - 8px);\n                   background: white;\n                   border-radius: 8px;\n                   padding: 12px;\n                   flex-shrink: 0;\n                   box-sizing: border-box;\n                 }\n\n                 .icdp-skeleton-product-image {\n                   width: 100px;\n                   height: 150px;\n                   border-radius: 4px;\n                   margin: 0 auto 12px auto;\n                   background-color: #E3E6E6;\n                   animation: 2s cubic-bezier(0.4, 0, 0.2, 1) 500ms infinite alternate both icdp-skeleton-gradient;\n                 }\n\n                 .icdp-skeleton-product-title {\n                   background-color: #E3E6E6;\n                   animation: 2s cubic-bezier(0.4, 0, 0.2, 1) 500ms infinite alternate both icdp-skeleton-gradient;\n                   height: 16px;\n                   border-radius: 4px;\n                   width: 100%;\n                   margin-bottom: 8px;\n                 }\n\n                 .icdp-skeleton-product-reviews {\n                   background-color: #E3E6E6;\n                   animation: 2s cubic-bezier(0.4, 0, 0.2, 1) 500ms infinite alternate both icdp-skeleton-gradient;\n                   height: 14px;\n                   border-radius: 4px;\n                   width: 60%;\n                   margin-bottom: 8px;\n                 }\n\n                 .icdp-skeleton-product-price-container {\n                   display: flex;\n                   align-items: center;\n                   gap: 6px;\n                   margin-bottom: 4px;\n                 }\n\n                 .icdp-skeleton-product-discount {\n                   background-color: #E3E6E6;\n                   animation: 2s cubic-bezier(0.4, 0, 0.2, 1) 500ms infinite alternate both icdp-skeleton-gradient;\n                   height: 14px;\n                   border-radius: 4px;\n                   width: 30px;\n                 }\n\n                 .icdp-skeleton-product-price {\n                   background-color: #E3E6E6;\n                   animation: 2s cubic-bezier(0.4, 0, 0.2, 1) 500ms infinite alternate both icdp-skeleton-gradient;\n                   height: 18px;\n                   border-radius: 4px;\n                   width: 60px;\n                 }\n\n                 .icdp-skeleton-product-list-price {\n                   background-color: #E3E6E6;\n                   animation: 2s cubic-bezier(0.4, 0, 0.2, 1) 500ms infinite alternate both icdp-skeleton-gradient;\n                   height: 12px;\n                   border-radius: 4px;\n                   width: 50px;\n                   margin-bottom: 8px;\n                 }\n\n                 .icdp-skeleton-product-delivery {\n                   background-color: #E3E6E6;\n                   animation: 2s cubic-bezier(0.4, 0, 0.2, 1) 500ms infinite alternate both icdp-skeleton-gradient;\n                   height: 14px;\n                   border-radius: 4px;\n                   width: 90%;\n                   margin-bottom: 0;\n                 }");
return a}}]);return a}()});f.when("A","icdp-metrics-utils","icdp-retryable-request-utils").register("icdp-sponsored-click-handler",function(b,a,c){function e(b){b?c.retryableGet(b,{success:function(){a.logCounter(a.CATEGORIES.SPONSORED,"click:success")},error:function(b){a.logCounter(a.CATEGORIES.SPONSORED,"click:error")}},{retries:2,retryCounter:function(){a.logCounter(a.CATEGORIES.SPONSORED,"click:retry")}}):a.logCounter(a.CATEGORIES.SPONSORED,"click:missing_url")}b.on("icdp-container-opening",
function(a){a&&a.asinData&&a.asinData.sponsoredLoggingUrl&&e(a.asinData.sponsoredLoggingUrl)})});f.when("A").register("icdp-multi-asin-view-controller",function(b){var a=void 0,c=function(){function a(b){v(this,a)}x(a,[{key:"loadContainer",value:function(a){}}]);return a}();return function(b){a||(a=new c(b));return a}});f.when("A","single-asin-view-interface-factory","icdp-sheet-view","icdp-hostpage-view","icdp-state-updater","icdp-setup-container-to-page-bridge","icdp-page-view").register("icdp-single-asin-view-controller",
function(b,a,c,e,d,f,l){var q=void 0,k=function(){function b(f){v(this,b);a.init(this);this.stateUpdater=d;this.icdpSheet=new c(a.getSheetInterface());this.hostPage=new e(a.getHostPageInterface());this.hostPage.bindViewCallbacks(f);this.icdpSheet.createAUISheetInstance();this.icdpPageView=new l(a.getIcdpPageInterface())}x(b,[{key:"loadContainer",value:function(){this.icdpSheet.showSheet()}},{key:"setupClientToContainerBridge",value:function(a){f.setupClientToContainerBridge(a)}}]);return b}();return function(a){q||
(q=new k(a));return q}});f.when("A","icdp-single-asin-view-controller","icdp-multi-asin-view-controller").register("icdp-controller-factory",function(b,a,c){return function(){function b(a){v(this,b);this.icdpController=null}x(b,[{key:"getICDPController",value:function(b,e){1<b.length?this.icdpController=c(e):1===b.length&&(this.icdpController=a(e));return this.icdpController}}]);return b}()});f.when("A","icdp-sheet-interface","icdp-hostpage-interface","icdp-page-interface").register("single-asin-view-interface-factory",
function(b,a,c,e){var d=null;return{init:function(a){d=a},getSheetInterface:function(){return a(d)},getHostPageInterface:function(){return c(d)},getIcdpPageInterface:function(){return e(d)}}});f.when("A").register("multi-asin-view-interface-factory",function(b){return{init:function(a){}}});f.when("A").register("icdp-hostpage-interface",function(b){return function(a){return{}}});f.when("A").register("icdp-sheet-interface",function(b){return function(a){return{beforeSheetShowCallback:function(){a.hostPage.callbacks.beforeSheetShow()},
afterSheetHideCallback:function(){a.hostPage.callbacks.afterSheetHide()},updateState:function(b){a.stateUpdater.updateState(b)}}}});f.when("A").register("icdp-page-interface",function(b){return function(a){return{updateState:function(b){a.stateUpdater.updateState(b)}}}});f.when("A","icdp-constants").register("icdp-common-utils",function(b,a){var c=a.FATAL,e=a.ATTRIBUTION,d=a.configs,q=d.LANDSCAPE,l=d.PORTRAIT;d=a.devices;var p=d.M_WEB,k=d.M_APP,u=a.stateModelAttrConstants.CLIENTS_WITH_CHROME;return{logger:function(a,
b,d){m.ue&&b&&m.ue.count(b,1);f.log(d+" : "+(a&&a.message?a.message:""),c,e)},logCounter:function(a,b){m.ue&&m.ue.count&&(b=b||(m.ue.count(a)||0)+1,m.ue.count(a,b))},getViewPortHeight:function(){return m.visualViewport?m.visualViewport.height:m.innerHeight},isAmazonApp:function(){return b.capabilities&&b.capabilities.isAmazonApp},isAndroidAmazonApp:function(){return b.capabilities&&b.capabilities.android&&this.isAmazonApp()},getDeviceOrientation:function(){if(m.matchMedia("(orientation: portrait)").matches)return l;
if(m.matchMedia("(orientation: landscape)").matches)return q},getDeviceType:function(){return this.isAmazonApp()?k:p},getMinimumValue:function(a,b){return Math.min(a,b)||a||b},isChromePresent:function(a){return u.includes(a)}}});f.when("A").register("icdp-config",function(b){b={mApp:{portrait:{startingContainerHeightInPx:450},landscape:{withChrome:{startingContainerHeightInPx:225},withoutChrome:{startingContainerHeightInPx:250}}},mWeb:{portrait:{startingContainerHeightInPx:450},landscape:{startingContainerHeightInPx:250}}};
var a={mApp:{portrait:{resizeThresholdInPx:70}},mWeb:{portrait:{resizeThresholdInPx:70}}};return{C:{mApp:{portrait:{withChrome:{offsetTopInPx:44,homepage:{offsetTopInPx:200}},withoutChrome:{offsetTopInPx:100}},landscape:{withChrome:{offsetTopInPx:44,homepage:{offsetTopInPx:100}},withoutChrome:{offsetTopInPx:80}},resizeThreshold:0},mWeb:{offsetTopInPx:80,resizeThreshold:0}},T1:b,T2:b,T3:a,T4:a}});f.when("A","icdp-config","icdp-constants","icdp-state-getter","icdp-common-utils").register("icdp-config-parser",
function(b,a,c,e,d){function f(b,c,f,h){var n=a[f];if(!n)return null;f=n[d.getDeviceType()];if(!f)return n[b];c=f[c];h=h?m:B;if(h=c&&c[h]?c[h]:null){n=e.getStateAttribute(k);if(h[n]&&h[n][b])return h[n][b];if(h[b])return h[b]}return c&&c[b]?c[b]:f[b]}function l(a){var b=e.getStateAttribute(p),c=d.getDeviceOrientation(),h=d.isChromePresent(e.getStateAttribute(k));(b=f(a,c,b,h))||(b=f(a,c,u,h));return b}b=c.stateModelAttrConstants;var p=b.TREATMENT,k=b.CLIENT_ID,u=c.treatments.WEBLAB_TREATMENT_C;c=
c.configs;var h=c.OFFSET_TOP_PX,n=c.STARTING_CONTAINER_HEIGHT_PX,r=c.RESIZE_THRESHOLD,m=c.WITH_CHROME,B=c.WITHOUT_CHROME;return{getStartingContainerHeight:function(){return l(n)},getOffsetTop:function(){return l(h)},getContainerResizeThreshold:function(){return l(r)}}});f.when("A").register("icdp-constants",function(b){return{FATAL:"fatal",ERROR:"error",ATTRIBUTION:"InContextDetailPage",stateModelAttrConstants:{CLIENT_ID:"clientId",PREFETCHED_IFRAME:"prefetchedIFrame",LIST:"list",CALLBACKS:"callbacks",
SUCCESS_CALLBACK_KEY:"success",SUCCESS_CALLBACK:"successCallback",FAILURE_CALLBACK_KEY:"failure",FAILURE_CALLBACK:"failureCallback",SELECTED_INDEX:"selectedIndex",SWIPE_DIRECTION:"swipeDirection",EXPERIENCE:"experience",TREATMENT:"treatment",SELECTED_ASIN_DATA:"selectedASINData",CLIENTS_WITH_CHROME:["buyAgain","homepage"],CLIENTS_WITHOUT_CHROME:["sbi"],IS_FDP:"isFdp"},containerSelectors:{CONTAINER_NAME:"icdp-container-name",CONTAINER_WRAPPER:"icdp-container-wrapper",IFRAME:"iframe",DISMISS_ICDP_ACTION:"dismiss-icdp-sheet",
CONTAINER_CLOSE_SELECTOR:".icdp-close",ICDP_IFRAME_ID:"icdp-iFrame",ICDP_SKELETON_ID:"icdp-skeleton",ICDP_BTF_SKELETON_ID:"icdp-btf-skeleton",AUI_BOTTOM_SHEET_CLOSE_SELECTOR:"button.a-sheet-close"},icdpLayoutStyles:{ICDP_PADDING_TOP:"32px"},icdpLayoutSelectors:{ICDP_PPD:"#icdp-ppd",DPX_PAINTER_BTF_DIV_ID:"#WrapperDivToHideBTF"},metrics:{ICDP_CONTAINER_LOAD_INIT:"icdp_container_load_init",ICDP_CONTAINER_LOAD_COMPLETE:"icdp_container_load_complete",ICDP_BACK_BUTTON_CLICKED:"icdp_back_button_clicked",
ICDP_EGRESS_CLICKED:"icdp_egress_clicked"},fatalMetrics:{ICDP_INIT_FAIL:"icdp_initialisation_failed",ICDP_LOAD_FAIL:"icdp_container_loading_failed",ICDP_LIST_UNAVAILABLE:"icdp_asin_list_unavailable",ICDP_INVALID_SELECTED_ASIN:"icdp_invalid_selected_asin",ICDP_PAGE_EVENT_VALIDATION_FAILED:"icdp_page_event_schema_validation_failed"},errorMessages:{ICDP_INIT_FAILED_MESSAGE:"ICDP initialisation failed.",ICDP_LOAD_FAILED_MESSAGE:"ICDP Container loading failed.",ICDP_LIST_UNAVAILABLE_MESSAGE:"ICDP ASIN list is unavailable.",
ICDP_STATE_UNAVAILABLE_MESSAGE:"ICDP State is unavailable",ICDP_INVALID_SELECTED_ASIN_MESSAGE:"ICDP Selected ASIN is invalid",ICDP_PAGE_EVENT_VALIDATION_FAILED_MESSAGE:"ICDP Page event schema validation failed: "},urlConstants:{ICDP_URL_PATH:"/icdp",ICDP_REQUEST_KEY:"icdpRequest",ICDP_CLIENT_ID_KEY:"icdpClientId",ICDP_EXP_KEY:"icdpExp",DP_URL_PATH:"/dp",REF_MARKER_KEY:"ref_",ICDP_STRING:"icdp",REF_MARKER_DELIMITER:"_",REF_MARKER_INGRESS:"ingress",PAGE_EXPERIENCES_KEY:"pageExperiences",DEVICE_TYPES_KEY:"deviceTypes",
DP_EGRESS_POINTS_KEY:"dpEgressPoints",CLIENT_REF_MARKER:"clientRefMarker",TWISTER_FULLY_SELECTION_KEY:"psc",URL_PARAM_VALUE_ONE:"1",IS_FULLY_SELECTED:"isFullySelected",SBO:"sbo",PREFETCH_URL_PARAM:"isPrefetch\x3dY",ICDP_REQUEST_TYPE:"icdpRequestType",ICDP_ATF_ONLY:"atfOnly",ICDP_BTF_ONLY:"btfOnly"},treatments:{WEBLAB_TREATMENT_C:"C",WEBLAB_TREATMENT_T1:"T1",WEBLAB_TREATMENT_T2:"T2"},configs:{LANDSCAPE:"landscape",PORTRAIT:"portrait",OFFSET_TOP_PX:"offsetTopInPx",RESIZE_THRESHOLD:"resizeThresholdInPx",
STARTING_CONTAINER_HEIGHT_PX:"startingContainerHeightInPx",WITH_CHROME:"withChrome",WITHOUT_CHROME:"withoutChrome"},devices:{M_APP:"mApp",M_WEB:"mWeb"},events:{ICDP_HEIGHT_CHANGE_EVENT:"icdp-height-change-event"},clientIds:{SEARCH_CLIENT_ID:"search",BUY_AGAIN_CLIENT_ID:"buyAgain"}}});f.when("A","icdp-constants","icdp-ref-marker-builder").register("icdp-url-builder",function(b,a,c){function e(a,c){function e(a,b){return d.push(a+"\x3d"+b)}var d=[];return{buildUrl:function(){if(!d||0===d.length)return a+
"/"+c;var b=d.join("\x26");return a+"/"+c+"?"+b},setClientUrlParams:function(a){a&&Object.entries(a).forEach(function(b){var c=J(b,2);b=c[0];c=c[1];b&&c&&"string"===typeof b&&"string"===typeof a[b]&&e(b,c)});return this},setIcdpExp:function(a){a&&e(p,a);return this},setIcdpClientId:function(a){a&&e(l,a);return this},setIcdpRequest:function(a){a&&e(f,a);return this},setRefMarker:function(a){a&&e(u,a);return this},setFullySelectedStateParam:function(a){a&&e(h,n);return this},setSboParam:function(){var a=
b.$;(a=a("#icdp-iFrame").contents().find(".icdp-mod-swatch-button.a-button-selected").find("input.a-button-input").data("stereotype"))&&e(r,encodeURIComponent(a));return this}}}a=a.urlConstants;var d=a.ICDP_URL_PATH,f=a.ICDP_REQUEST_KEY,l=a.ICDP_CLIENT_ID_KEY,p=a.ICDP_EXP_KEY,k=a.DP_URL_PATH,u=a.REF_MARKER_KEY,h=a.TWISTER_FULLY_SELECTION_KEY,n=a.URL_PARAM_VALUE_ONE,r=a.SBO,m=a.REF_MARKER_INGRESS,B=a.PREFETCH_URL_PARAM,y=a.CLIENT_REF_MARKER,w=a.ICDP_REQUEST_TYPE,D=a.ICDP_ATF_ONLY,t=a.ICDP_BTF_ONLY;
return{buildIcdpUrl:function(a,b,f,h,n){var g="";n&&(g=n[y]);g&&(g=g.slice(0,36));g=c(f).prependComponent(g).appendComponent(m).build();return e(d,a).setIcdpClientId(f).setIcdpRequest(b).setIcdpExp(h).setRefMarker(g).setClientUrlParams(n).buildUrl()},buildDPUrl:function(a,b,c,d){return e(k,a).setRefMarker(c).setClientUrlParams(b).setFullySelectedStateParam(d).setSboParam().buildUrl()},addPrefetchParamToURL:function(a){return-1===a.indexOf("?")?a+"?"+B:a+"\x26"+B},addATFOnlyParamToURL:function(a){var b=
w+"\x3d"+D;return-1===a.indexOf("?")?a+"?"+b:a+"\x26"+b},addBTFOnlyParamToURL:function(a){var b=w+"\x3d"+t;return-1===a.indexOf("?")?a+"?"+b:a+"\x26"+b}}});f.when("A").execute(function(b){f.when("MShopChrome","3p-promise").execute(function(a,c){(function(){return new c(function(c,d){a.getBottomBarsHeight({successCallback:function(a){b.trigger("icdp-chrome-height-util",{chromeHeight:a})},failCallback:function(a){b.trigger("icdp-chrome-height-util",{chromeHeight:null})}})})})()})});f.when("A","icdp-common-utils",
"icdp-config-parser","icdp-constants").register("icdp-container-utils",function(b,a,c,e){function d(){var b=a.getViewPortHeight(),e=c.getOffsetTop()||44;return b-e}return{getIcdpContainerMaxHeight:d,getIcdpContainerStartingHeight:function(){return c.getStartingContainerHeight()||d()},getIcdpContainerResizeThreshold:function(){return c.getContainerResizeThreshold()||0}}});f.when("A").register("icdp-ref-marker-abbreviations",function(b){var a={pageExperiences:{inspire:"ins",sbi:"sbi",buyAgain:"ba",
browse:"br",search:"search",buyAgainMeTab:"bame",listsMeTab:"wlme",dlx:"dlx",pd_intp:"pd_intp",frequentlyReturnedAlternatives:"fra"},deviceTypes:{mWeb:"mweb",mApp:"msp"},dpEgressPoints:{seeAllDetails:"sd",seeAllDetailsFallbackCX:"sdfcx",mediaBlock:"mb",title:"title",review:"review",twister:"twister"}};return function(b,e){return b&&e&&a[b]&&a[b][e]?a[b][e]:""}});f.when("A","icdp-constants","icdp-common-utils","icdp-ref-marker-abbreviations").register("icdp-ref-marker-builder",function(b,a,c,e){b=
a.urlConstants;var d=b.REF_MARKER_DELIMITER,f=b.ICDP_STRING,l=b.DEVICE_TYPES_KEY,p=b.PAGE_EXPERIENCES_KEY;return function(a){function b(a){a&&(h=h?h+d+a:a);return this}var h=f;b(e(p,a));b(function(){var a=c.getDeviceType();return e(l,a)}());return{build:function(){return h},appendComponent:b,prependComponent:function(a){a&&(h=h?a+d+h:a);return this}}}});f.when("A","icdp-common-utils","icdp-state-getter","icdp-constants").register("icdp-metrics-utils",function(b,a,c,e){function d(b){if(m.ue&&ue.event){var e=
a.getDeviceType(),d=c.getStateAttribute(l);ue.event({requestId:b,type:"mWeb"===e?"InContextDetailAW":"InContextDetailWebView",subType:d,session:ue.sid||"",marketplaceId:ue.mid||"",isGlanceView:!0},"dpoffers_icdp","ueds_input.GlanceView.1",{ent:"all"})}}function f(b){if(m.csa){var d=csa("UEData");if(d){var f=c.getStateAttribute(l),h=a.getDeviceType(),n=c.getStateAttribute(e.stateModelAttrConstants.SELECTED_ASIN_DATA);n=n&&n.getAsin?n.getAsin():"";var p=Date.now();b={eventName:"ld",version:m.ue&&ue.v||
"",id:b,sessionId:m.ue&&ue.sid||"",obfuscatedMarketplaceId:m.ue&&ue.mid||"",latency:{t:p},csmtags:m.ue&&ue.tag&&ue.tag()||[],viz:["visible:1"],pty:"mWeb"===h?"InContextDetailAW":"InContextDetailWebView",spty:f,pti:n,lob:"1"};d("log",b)}}}var l=e.stateModelAttrConstants.CLIENT_ID;return{CATEGORIES:{SPONSORED:"sp"},logCounter:function(b,e,d){var f=c.getStateAttribute(l),n=a.getDeviceType(),k=c.getPrefetchedIframe(c.getURL());a.logCounter("icdp:"+f+":"+n+":"+(k?"prefetch":"organic")+":"+b+":"+e,d)},
logPrefetchImpression:function(a){d(a);f(a)},logGlanceNexusImpression:d,logPpdsImpression:f}});f.when("A").register("icdp-retryable-request-utils",function(b){function a(a,e,d){function c(d,f){var k=b.extend({},r,{error:function(a){0<d&&n(a)?(h&&h(),b.delay(function(){c(d-1,2*f)},f)):r.error&&r.error(a)}}),l=e.slice();l.push(k);a.apply(b,l)}var f=3<arguments.length&&arguments[3]!==t?arguments[3]:{},p=f.retries;p=p===t?3:p;var k=f.backoff;k=k===t?500:k;var m=f.retryCounter,h=m===t?null:m;f=f.shouldRetry;
var n=f===t?function(a){return a&&(500<=a.status||0===a.status||a.networkError)}:f,r=b.extend({},d);c(p,k)}return{retryableGet:function(c,e){return a(b.get,[c],e,2<arguments.length&&arguments[2]!==t?arguments[2]:{})},retryablePost:function(c,e,d){return a(b.post,[c,e],d,3<arguments.length&&arguments[3]!==t?arguments[3]:{})}}});f.when("A").register("icdp-unsupported-wdgs",function(){var b="electronic_gift_card_display_on_website gift_card_display_on_website reload_gc_balance_display_on_website acd_gift_card_display_on_website installation_services_display_on_website music_display_on_website video_display_on_website dvd_display_on_website audible_display_on_website book_display_on_website ebooks_display_on_website digitaltextfeeds_display_on_website magazine_display_on_website audible_periodical_display_on_website tempo_game_display_on_website skill_application_display_on_website adglp_skill_isp_app_display_on_website protected_collection_display_on_website audible_membership_display_on_website audible_gift_display_on_website points_stored_value_display_on_website collections_display_on_website ebook_bundle_display_on_website download_movie_display_on_website download_tv_season_display_on_website download_tv_episode_display_on_website download_tv_series_display_on_website amzn_video_vod_display_on_website amzn_video_live_event_display_on_website financial_product_display_on_website swa_physical_display_on_website swa_display_on_website prime_display_on_website kindle_unlimited_display_on_website wireless_device_display_on_website associated_products_display_on_website mobile_application_display_on_website cloud_drive_display_on_website luxury_display_on_website automotive_vehicle_display_on_website digital_music_track_display_on_website digital_music_album_display_on_website digital_musicplaylist_display_on_website digital_music_artist_display_on_website digital_music_subs_display_on_website adglp_sonic_display_on_website digital_health_svcs_display_on_website digital_health_pgms_display_on_website rx_medicine_pharmacy_display_on_website amazon_prints_small_display_on_website".split(" ");
return{isUnsupportedWdg:function(a){return a&&-1!==b.indexOf(a)},UNSUPPORTED_WDGS:b}});f.when("A","icdp-constants","icdp-url-builder","icdp-state-getter","icdp-ref-marker-builder","icdp-ref-marker-abbreviations","icdp-common-utils").register("icdp-dp-redirector",function(b,a,c,e,d,f,l){function p(a){var b=e.getStateAttribute(h),n=b.getTwisterAsin()||b.getAsin();var k=b.getClientRefMarker();var l=e.getStateAttribute(m),p=f(q,a);k=d(l).appendComponent(p).appendComponent(k).build();b=c.buildDPUrl(n,
b.getClientUrlParams(),k,b.isFullySelectedState());v[a]&&(b+=v[a]);return b}var k=a.stateModelAttrConstants,m=k.CLIENT_ID,h=k.SELECTED_ASIN_DATA,n=k.IS_FDP,q=a.urlConstants.DP_EGRESS_POINTS_KEY,t=a.metrics.ICDP_EGRESS_CLICKED,v={review:"#aw-udpv3-customer-reviews_feature_div"};b.on("icdp-redirect-to-dp",function(a){if(!e.getStateAttribute(n)){var c=l.getDeviceType(),d=e.getStateAttribute(m);l.logCounter("icdp:"+d+":"+c+":"+(a.dpEgressPoint||"unknown")+":"+t);b.trigger("icdp-close-sheet-and-redirect",
{url:p(a.dpEgressPoint)})}})});f.when("A","icdp-constants","icdp-state-getter").register("icdp-storefront-redirector",function(b,a,c){function e(a){m.history.back();b.delay(function(){m.location.href=a},0)}var d=a.stateModelAttrConstants.IS_FDP;b.on("icdp-redirect-to-alm-storefront",function(a){c.getStateAttribute(d)||e(a.storefrontUrl)})});f.when("A","icdp-sheet-view","icdp-url-builder","icdp-constants","icdp-iframe-view","icdp-state-updater","icdp-state-getter").register("icdp-prefetch",function(b,
a,c,e,d,f,l){var p=e.stateModelAttrConstants.PREFETCHED_IFRAME;b=e.stateModelAttrConstants;var k=b.EXPERIENCE,m=b.CLIENT_ID,h=b.TREATMENT;return{prefetchICDP:function(a){Array.isArray(a)&&a.forEach(function(a){if(a.asin){a=c.buildIcdpUrl(a.asin,l.getStateAttribute(k),l.getStateAttribute(m),l.getStateAttribute(h),a.urlParameters);var b=new d(a,!0);f.updateState(A({},p,A({},a,b)))}})}}});f.when("A","icdp-constants","icdp-url-builder","icdp-common-utils","icdp-skeleton-view-btf").register("icdp-btf-manager",
function(b,a,c,e,d){function f(a,b){var c=document.createElement("div");c.id="btf-skeleton-container";c.innerHTML=b.getSkeleton()[0].outerHTML;c.style.marginBottom="100px";(b=a.querySelector(m))?b.appendChild(c):a.body.appendChild(c);return c}var l=a.clientIds.SEARCH_CLIENT_ID,m=a.icdpLayoutSelectors.DPX_PAINTER_BTF_DIV_ID,k=b.$;return{btfEligible:function(a){return a===l},lazyLoadBTF:function(a,b,n,l){var h=n.querySelector(m);h&&function(){var p=new d,q=f(n,p);p=c.addBTFOnlyParamToURL(a);k.get(p,
{relatedRequestId:b}).done(function(a){q&&q.parentNode&&q.parentNode.removeChild(q);(a=(new DOMParser).parseFromString(a,"text/html").querySelector(m))?(h.innerHTML=a.innerHTML,h.querySelectorAll("script").forEach(function(a){var b=n.createElement("script");a.src?b.src=a.src:b.textContent=a.textContent;h.appendChild(b);e.logCounter("icdp:"+l+":btf-loaded")}),h.style.marginBottom="32px"):e.logCounter("icdp:"+l+":fetch_btf_container_not_exist")}).fail(function(a,b,c){e.logCounter("icdp:"+l+":fetch_btf_request_failed");
q&&q.parentNode&&q.parentNode.removeChild(q)})}()}}})});
/* ******** */
(function(b){var c=window.AmazonUIPageJS||window.P,d=c._namespace||c.attributeErrors,a=d?d("InContextDetailPageAssets@buyAgain","InContextDetailPageAssets"):c;a.guardFatal?a.guardFatal(b)(a,window):a.execute(function(){b(a,window)})})(function(b,c,d){b.when("A").register("icdp-buyAgain-to-container-interface-provider",function(a){return{updateCartValueOnBAFaceOut:function(){}}});b.when("A").register("icdp-buyAgain-to-page-interface",function(a){return{updateInterfaces:function(a){}}})});
/* ******** */
(function(e){var c=window.AmazonUIPageJS||window.P,d=c._namespace||c.attributeErrors,b=d?d("InContextDetailPageAssets@browse","InContextDetailPageAssets"):c;b.guardFatal?b.guardFatal(e)(b,window):b.execute(function(){e(b,window)})})(function(e,c,d){e.when("A","a-sheet").register("icdp-browse-nested-bottomsheet",function(b,e){var c=function(a,b){a.sheet.$container.find(".a-sheet-heading-container").toggleClass("aok-hidden",b)},d=function(a,b){var c=a.sheet.$container.find(".a-sheet-heading-container").find(".a-sheet-back");
a=a.sheet.$container.find(".icdp-back-button");b&&c.length&&a.length?(a.removeClass("aok-hidden"),a.bind("click touch",function(){return c.click()})):a.length&&(a.unbind("click touch"),a.addClass("aok-hidden"))};return{get enabled(){return 0<b.$(".octopus-page-style").length},getBackButtonTemplate:function(){return'\x3cbutton\n              class\x3d"a-sheet-back icdp-back-button aok-hidden"\n              aria-label\x3d"Product quick view. Back"\x3e\n            \x3c/button\x3e'},showStep:function(a){e.showStep(a.sheet)},
subscribeToAUISheetCallbacks:function(a){b.on("a:sheet:beforeShowStep:"+a.getSheetParams().name,function(){c(a,!0);d(a,!0);a.onBeforeShow()});b.on("a:sheet:afterHide:"+a.getSheetParams().name,function(){c(a,!1);d(a,!1)});b.on("a:sheet:afterBack:"+a.getSheetParams().name,function(){c(a,!1);d(a,!1);a.onAfterHide()})}}})});
/* ******** */
(function(c){var h=window.AmazonUIPageJS||window.P,g=h._namespace||h.attributeErrors,a=g?g("DetailPageNostosAssets",""):h;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,h,g){c.when("nostos-device-utils").register("nostos-metrics",function(a){var b=h.ue,d="object"===typeof b&&b.count,e="NostosBadge:"+a.getDeviceType()+":";return{recordClick:function(a){if("object"!==typeof a)throw"Opts is not an object";g!==a.counter&&(a=a.counter)&&d&&b.count(e+a,1)},addCSMTag:function(a){b&&
b.tag&&b.tag(a)}}});"use strict";c.when("ready").register("nostos-device-utils",function(){return{getDeviceType:function(){return"Desktop"}}});"use strict";c.when("A","nostos-metrics","ready").register("nostos-substitute",function(a,b){var d=!1;a.on("a:expander:hrr_substitutes:toggle:expand",function(){b.recordClick({counter:"Substitute:Expanded"});d||(b.recordClick({counter:"Substitute:ExpandedOnce"}),d=!0)});a.on("a:expander:hrr_substitutes:toggle:collapse",function(){b.recordClick({counter:"Substitute:Collapsed"})})});
c.declare("nostos-buybox-config",{selectors:{buyboxTabSet:"#offerDisplayGroupTabSet",buyboxAccordionRows:"#buyBoxAccordion",nostosBadges:"buyingOptionNostosBadge_feature_div"},tabs:{tab_desktop_buybox_group_1:"#tab_heading_desktop_buybox_group_1",tab_desktop_buybox_group_2:"#tab_heading_desktop_buybox_group_2",tab_mobile_buybox_group_1:"#tab_heading_mobile_buybox_group_1",tab_mobile_buybox_group_2:"#tab_heading_mobile_buybox_group_2",tab_mobileapp_buybox_group_1:"#tab_heading_mobileapp_buybox_group_1",
tab_mobileapp_buybox_group_2:"#tab_heading_mobileapp_buybox_group_2"},accordionRowsToNostos:{newAccordionRow:["NEW_1_nostos_badge","NEW_1_nostos_bolder_badge"],SecondNewAccordionRow:["NEW_2_nostos_badge","NEW_2_nostos_bolder_badge"],pwBuyBoxAccordionRow:["PRIME_WARDROBE_1_nostos_badge"],usedAccordionRow:["USED_1_nostos_badge"],snsAccordionRow:["SNS_1_nostos_badge"],snsAccordionRowMovedUp:["SNS_1_nostos_badge"],snsAccordionRowMiddle:["SNS_1_nostos_badge"],snsAccordionRowMobileMiddle:["SNS_1_nostos_badge"],
snsAccordionRowMobileAppMiddle:["SNS_1_nostos_badge"],dealsAccordionRow:["LIGHTNING_DEAL_1_nostos_badge"],renewedTier1AccordionRow:["RENEWED_TIER_1_1_nostos_badge"],mobile_renewedTier1AccordionRow:["RENEWED_TIER_1_1_nostos_badge"],mobileApp_renewedTier1AccordionRow:["RENEWED_TIER_1_1_nostos_badge"],renewedTier2AccordionRow:["RENEWED_TIER_2_1_nostos_badge"],mobile_renewedTier2AccordionRow:["RENEWED_TIER_2_1_nostos_badge"],mobileApp_renewedTier2AccordionRow:["RENEWED_TIER_2_1_nostos_badge"],renewedTier3AccordionRow:["RENEWED_TIER_3_1_nostos_badge"],
mobile_renewedTier3AccordionRow:["RENEWED_TIER_3_1_nostos_badge"],mobileApp_renewedTier3AccordionRow:["RENEWED_TIER_3_1_nostos_badge"],renewedTier4AccordionRow:["RENEWED_TIER_4_1_nostos_badge"],mobile_renewedTier4AccordionRow:["RENEWED_TIER_4_1_nostos_badge"],mobileApp_renewedTier4AccordionRow:["RENEWED_TIER_4_1_nostos_badge"]},nostosToAccordionRows:{NEW_1_nostos_badge:["newAccordionRow_0","newAccordionRow_1","newAccordionRow_2","newAccordionRow_3"],NEW_1_nostos_bolder_badge:["newAccordionRow_0",
"newAccordionRow_1","newAccordionRow_2","newAccordionRow_3"],NEW_2_nostos_badge:["newAccordionRow_1","newAccordionRow_2","newAccordionRow_3","newAccordionRow_4"],NEW_2_nostos_bolder_badge:["newAccordionRow_1","newAccordionRow_2","newAccordionRow_3","newAccordionRow_4"],PRIME_WARDROBE_1_nostos_badge:["pwBuyBoxAccordionRow"],USED_1_nostos_badge:["usedAccordionRow"],SNS_1_nostos_badge:["snsAccordionRow","snsAccordionRowMovedUp","snsAccordionRowMiddle","snsAccordionRowMobileMiddle","snsAccordionRowMobileAppMiddle"],
LIGHTNING_DEAL_1_nostos_badge:["dealsAccordionRow"],RENEWED_TIER_1_1_nostos_badge:["renewedTier1AccordionRow","mobile_renewedTier1AccordionRow","mobileApp_renewedTier1AccordionRow"],RENEWED_TIER_2_1_nostos_badge:["renewedTier2AccordionRow","mobile_renewedTier2AccordionRow","mobileApp_renewedTier2AccordionRow"],RENEWED_TIER_3_1_nostos_badge:["renewedTier3AccordionRow","mobile_renewedTier3AccordionRow","mobileApp_renewedTier3AccordionRow"],RENEWED_TIER_4_1_nostos_badge:["renewedTier4AccordionRow","mobile_renewedTier4AccordionRow",
"mobileApp_renewedTier4AccordionRow"]},nostosToSingleOffer:{NEW_1_nostos_badge:["qualifiedBuybox_globalMatchbox_3","qualifiedBuybox_globalMatchbox_2","qualifiedBuybox_globalMatchbox_1","qualifiedBuybox"],NEW_1_nostos_bolder_badge:["qualifiedBuybox_globalMatchbox_3","qualifiedBuybox_globalMatchbox_2","qualifiedBuybox_globalMatchbox_1","qualifiedBuybox"],USED_1_nostos_badge:["used_buybox_desktop","used_buybox_mobile","used_buybox_mobileApp"],PICKUP_1_nostos_badge:["pickupOfferDisplay_Desktop","pickupOfferDisplay_Mobile",
"pickupOfferDisplay_MobileApp"],LIGHTNING_DEAL_1_nostos_badge:["deals_singleOfferDisplay_Desktop","deals_singleOfferDisplay_Mobile","deals_singleOfferDisplay_MobileApp"]}});"use strict";c.when("A","nostos-metrics","nostos-buybox-config","atf").register("nostos-buying-option-controller",function(a,b,d){var e=a.$;b.addCSMTag("buyingOptionNostos");var c,h,m,k,t=function(){c=0<e(d.selectors.buyboxTabSet).length;h=0<e(d.selectors.buyboxAccordionRows).length;for(var l=document.querySelectorAll("#buyingOptionNostosBadge_feature_div \x3e div, #buyingOptionNostosBolderBadge_feature_div \x3e div, #buyingOptionNostosInlineBadge_feature_div \x3e div"),
a=[],f=0;f<l.length;f++)a.push(l[f].id);m=a;if(c)a:{for(var b in d.tabs)if(e(d.tabs[b]).hasClass("a-active")){k=b;break a}k=g}};t();var u=function(a){a=d.nostosToSingleOffer[a];if(a!==g)for(var l=0;l<a.length;l++)if(0<e("#"+a[l]).length){var b=a[l];if(c){if(document.getElementById(k)!==g&&document.getElementById(k).contains(document.getElementById(b)))return!0}else return!0}return!1},n=function(a){e(a).addClass("aok-hidden")},q=function(a){e(a).removeClass("aok-hidden")},r=function(){for(var a=0;a<
m.length;a++){var b=m[a];if(h){a:{var f=d.nostosToAccordionRows[b];if(f!==g)for(var p=0;p<f.length;p++)if(e("#"+f[p]).hasClass("a-accordion-active")){var n=f[p];if(c){if(document.getElementById(k)!==g&&document.getElementById(k).contains(document.getElementById(n))){f=!0;break a}}else{f=!0;break a}}f=!1}if(f||u(b)){q("#"+m[a]);break}}else if(u(b)){q("#"+m[a]);break}}};r();(function(){a.on("a:tabs:offerDisplayGroup_tabs:select",function(a){n(e("[id$\x3d_nostos_badge], [id$\x3d_nostos_bolder_badge]"));
k=a.selectedTab.tabName;r()})})();(function(){a.on("a:accordion:buybox-accordion:select",function(a){n(e("[id$\x3d_nostos_badge], [id$\x3d_nostos_bolder_badge]"));if(a=d.accordionRowsToNostos[a.selectedRow.rowName])for(var b=0;b<a.length;b++)q("#"+a[b])})})();(function(){a.on("a:pageUpdate",function(){n(e("[id$\x3d_nostos_badge], [id$\x3d_nostos_bolder_badge]"));t();r()})})()})});
/* ******** */
